(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc7b9d2e"],{"025b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"warp"},[s("van-search",{attrs:{placeholder:"搜索","input-align":"center"},on:{input:t.onRefresh,clear:t.onRefresh},model:{value:t.searchValueCustom,callback:function(e){t.searchValueCustom=e},expression:"searchValueCustom"}}),s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{offset:20,finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.customList,(function(e,a){return s("div",{key:e.customid+a,staticClass:"warp"},[e.contactList&&0!==e.contactList.length?s("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[s("van-collapse-item",{attrs:{name:e.customid},scopedSlots:t._u([{key:"title",fn:function(){return[s("ul",[s("li",{staticClass:"customerValue"},[t._v(t._s(e.customid)+"/"+t._s(e.customname))]),s("li",{directives:[{name:"show",rawName:"v-show",value:e.entryid,expression:"item.entryid"}],staticClass:"color-gray-4 font-12"},[t._v(t._s(e.entryid)+"/"+t._s(e.entryname))])])]},proxy:!0}],null,!0)},t._l(e.contactList,(function(a,i){return s("van-cell",{key:a.CONTACTID+i,attrs:{"is-link":""},on:{click:function(s){return t.chooseCustomClick(e,a)}},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",{style:a.dialyPass?"color: #AAA":""},[t._v(" "+t._s(a.CONTACTID+a.CONTACTMAN)+" "),s("br"),a.dialyPass&&!t.requestChange?s("i",{staticClass:"fontSize-12 text-orange"},[t._v("最小效期为:"+t._s(new Date(a.miniTime).toLocaleDateString()))]):t._e()])]},proxy:!0}],null,!0)})})),1)],1):s("van-cell",{attrs:{"is-link":!e.contactFlag},on:{click:function(s){return t.chooseCustomClick(e)}},scopedSlots:t._u([{key:"title",fn:function(){return[s("ul",[s("li",{staticClass:"customerValue"},[t._v(" "+t._s(e.customid)+"/"+t._s(e.customname)+" "),t._t("default")],2),s("li",{directives:[{name:"show",rawName:"v-show",value:e.entryid,expression:"item.entryid"}],staticClass:"color-gray-4 font-12"},[t._v(t._s(e.entryid)+"/"+t._s(e.entryname))]),e.contactFlag?s("li",{staticClass:"color-never font-12"},[t._v("无可下单分支机构（不在效期），不可下单")]):t._e()])]},proxy:!0}],null,!0)})],1)})),0)],1)],1)},i=[],o=s("5530"),n=s("d4ec"),c=s("bee2"),l=s("262e"),r=s("2caf"),u=(s("99af"),s("d3b7"),s("159b"),s("9ab4")),d=s("1b40"),m=s("53ae"),h=s("f727"),f=function(t){Object(l["a"])(s,t);var e=Object(r["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.customList=[],t.searchValueCustom="",t.activeNames=[],t}return Object(c["a"])(s,[{key:"chooseCustomClick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t.contactFlag)this.$toast.fail("无可下单分支机构（不在效期），不可下单");else{var s=Object.assign({customid:t.customid,customname:t.customname},e);e&&e.dialyPass?this.$dialog.alert({confirmButtonColor:"rgb(34, 113, 245)",message:"".concat(e.CONTACTMAN,"有多个不同的有效期且已过期，不允许选择，最小效期为:").concat(new Date(e.miniTime).toLocaleDateString())}).then((function(){})):this.$emit("chooseCustomClick",s)}}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.customList=[],this.refreshing=!1),this.loading=!0,this.requestChange?this.$emit("getList",{condition:this.searchValueCustom,pageNum:this.page,pageSize:10}):this._getCustom()}},{key:"_getCustom",value:function(){var t=this;1===this.page&&(this.customList=[]);var e=Object(o["a"])(Object(o["a"])({condition:this.searchValueCustom},this.params),{},{pageNum:this.page,pageSize:10});Object(h["f"])(e).then((function(e){t.customList=t.customList.concat(e.data.list);for(var s=0;s<t.customList.length;s++){var a=t.customList[s];a.contactList&&a.contactList.length>0&&t.needDialyPass&&a.contactList.forEach((function(t){var e=0;t.dates&&t.dates.length>0&&(t.dates.forEach((function(t){e?e>new Date(new Date(t.ENDDATE).toLocaleDateString()).getTime()&&(e=new Date(new Date(t.ENDDATE).toLocaleDateString()).getTime()):e=new Date(new Date(t.ENDDATE).toLocaleDateString()).getTime()})),e<new Date((new Date).toLocaleDateString()).getTime()&&(t.dialyPass=!0,t.miniTime=e))}))}e.data.hasNextPage?t.page++:t.finished=!0,t.loading=!1}))}}]),s}(Object(d["b"])(m["a"]));Object(u["a"])([Object(d["c"])({default:!1})],f.prototype,"requestChange",void 0),Object(u["a"])([Object(d["c"])({default:!1})],f.prototype,"needDialyPass",void 0),Object(u["a"])([Object(d["c"])()],f.prototype,"params",void 0),f=Object(u["a"])([Object(d["a"])({})],f);var p=f,v=p,g=(s("27ba"),s("2877")),b=Object(g["a"])(v,a,i,!1,null,"12f3a2f4",null);e["a"]=b.exports},"27ba":function(t,e,s){"use strict";s("6b64")},"35fd":function(t,e,s){"use strict";s("c940")},"3d1f":function(t,e,s){},4910:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"customDetail"},[s("van-sticky",{staticClass:"mb-2"},[s("van-cell",{staticClass:"vant-cell-pa",attrs:{title:(t.customParams.CONTACTID||t.customParams.customid)+"/"+(t.customParams.CONTACTMAN||t.customParams.customname),"is-link":"","arrow-direction":"down"},on:{click:function(e){t.customShow=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[s("icon-Svg",{staticClass:"mt-1 mr-1",attrs:{size:"small",color:"#323233",name:"ytcrm-xiaoshou_sales-report"}})]},proxy:!0}])}),s("van-cell",{staticClass:"vant-cell-pa",attrs:{"is-link":"","arrow-direction":"down"},on:{click:function(e){t.contactShow=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[s("icon-Svg",{staticClass:"mt-1 mr-1",attrs:{size:"small",color:t.contactObj.ADDRESSID?"#2271F5":"#323233",name:"ytcrm-bendi_local-pin"}})]},proxy:!0},{key:"title",fn:function(){return[s("span",{class:t.contactObj.ADDRESSID?"color-main-2":""},[t._v(t._s(t.contactObj.ADDRESSID?t.contactObj.ADDRESSID+"/"+t.contactObj.ADDRESS:"请选择运输地址"))])]},proxy:!0}])}),s("van-tabs",{attrs:{color:"#2271F5"},on:{change:t.onRefresh},model:{value:t.dirType,callback:function(e){t.dirType=e},expression:"dirType"}},[s("van-tab",{attrs:{title:"全部",name:1}}),s("van-tab",{attrs:{title:"近效期",name:2}}),s("van-tab",{attrs:{title:"待处理",name:3}})],1),s("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:t.onRefresh,clear:t.onRefresh},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),s("div",{staticClass:"listWarp"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{offset:20,finished:t.finished,"finished-text":t.finishText},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t.loading||t.dataList.length?t._e():s("app-empty",{staticClass:"pb-6 white-bg",attrs:{description:"暂无数据"}}),t._l(t.dataList,(function(e,a){return s("secondary-List",{key:a,attrs:{listItem:e},on:{goodsClick:t.goodsClick}})}))],2)],1)],1),s("van-popup",{staticClass:"van-popup-bg",style:{height:"90%",width:"100%"},attrs:{round:"",position:"bottom",closeable:""},model:{value:t.customShow,callback:function(e){t.customShow=e},expression:"customShow"}},[s("div",{staticClass:"header font-16 py-4 fontWeight textAlignC"},[t._v("单位信息")]),s("app-custom",{ref:"appCustom",attrs:{params:{entryid:t.chooseEntry.entryid}},on:{chooseCustomClick:t.chooseCustomClick}})],1),s("van-action-sheet",{attrs:{"cancel-text":"取消","close-on-click-action":""},scopedSlots:t._u([{key:"default",fn:function(){return t._l(t.contactList,(function(e,a){return s("van-cell",{key:a,attrs:{"is-link":""},on:{click:function(s){return t.chooseClick(e)}}},[t._v(t._s(e.ADDRESSID)+"/ "+t._s(e.ADDRESS))])}))},proxy:!0}]),model:{value:t.contactShow,callback:function(e){t.contactShow=e},expression:"contactShow"}}),s("div",{staticClass:"commonOpButton-footer"},[s("van-button",{attrs:{round:"",color:"#2271F5",type:"primary",plain:""},on:{click:function(e){t.showOrderPopover=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[s("icon-Svg",{attrs:{size:"small",color:"#2271F5",name:"ytcrm-shaixuan_filterdefuben"}})]},proxy:!0}])},[s("span",[t._v(t._s(""===t.orderFlag?"库存排序":1===t.orderFlag?" 按库存排序 ":2===t.orderFlag?"按金额排序 ":""))])]),s("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:function(e){t.showSoldPopover=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[s("icon-Svg",{attrs:{size:"small",color:"#ffffff",name:"ytcrm-paixu2_sort-two"}})]},proxy:!0}])},[s("span",[t._v(t._s(""===t.soldFlag?"销售情况":0===t.soldFlag?"未销售过":1===t.soldFlag?"销售过":""))])])],1),s("van-action-sheet",{attrs:{actions:t.orderActions,"cancel-text":"取消",description:"排序方式","close-on-click-action":""},on:{select:t.orderSelect},model:{value:t.showOrderPopover,callback:function(e){t.showOrderPopover=e},expression:"showOrderPopover"}}),s("van-action-sheet",{attrs:{actions:t.soldActions,"cancel-text":"取消",description:"排序方式","close-on-click-action":""},on:{select:t.soldSelect},model:{value:t.showSoldPopover,callback:function(e){t.showSoldPopover=e},expression:"showSoldPopover"}}),s("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.cartShow,expression:"!cartShow"}],staticClass:"cartButton",attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:function(e){return t.$router.push({name:"twoPinDicShopCart"})}},scopedSlots:t._u([{key:"icon",fn:function(){return[s("van-icon",{attrs:{size:"20px",name:"cart-o",color:"#ffffff"}})]},proxy:!0}])})],1)},i=[],o=s("5530"),n=s("d4ec"),c=s("bee2"),l=s("262e"),r=s("2caf"),u=(s("99af"),s("b0c0"),s("9ab4")),d=s("1b40"),m=s("4bb5"),h=s("a403"),f=s("53ae"),p=s("8eff"),v=s("025b"),g=Object(m["a"])("twoPinDic"),b=function(t){Object(l["a"])(s,t);var e=Object(r["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.contactList=[],t.contactObj={},t.dirType=1,t.searchValue="",t.orderFlag="",t.soldFlag="",t.customShow=!1,t.contactShow=!1,t.goodsDetailShow=!1,t.showOrderPopover=!1,t.showSoldPopover=!1,t.orderActions=[{name:"按库存排序",id:1},{name:"按金额排序",id:2},{name:"取消排序",id:""}],t.soldActions=[{name:"未销售过",id:0},{name:"销售过",id:1},{name:"取消选择",id:""}],t}return Object(c["a"])(s,[{key:"soldSelect",value:function(t){this.soldFlag=t.id,this.onRefresh()}},{key:"orderSelect",value:function(t){this.orderFlag=t.id,this.onRefresh()}},{key:"_queryContact",value:function(){var t=this,e={entryid:this.chooseEntry.entryid,customid:this.customParams.customid||"",contactid:this.customParams.CONTACTID||""};Object(h["s"])(e).then((function(e){t.contactList=e.data,1===t.contactList.length&&(t.contactObj=t.contactList[0])}))}},{key:"chooseClick",value:function(t){this.contactObj=t,this.contactShow=!1}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this._getGoods()}},{key:"_getGoods",value:function(){var t=this;1===this.page&&(this.dataList=[]);var e={entryId:this.chooseEntry.entryid,customId:this.customParams.customid,goodsId:"",goodsName:"",goodsNameOrId:this.searchValue,dirType:1===this.dirType?"":this.dirType,soldFlag:this.soldFlag,pageSize:5,pageNum:this.page,orderFlag:this.orderFlag};Object(h["e"])(e).then((function(e){"200"===e.code&&(t.dataList=t.dataList.concat(e.data.list)),e.data.hasNextPage?t.page++:t.finished=!0,t.loading=!1}))}},{key:"chooseCustomClick",value:function(t){this.SET_CUSTOMPARAMS(t),this.customShow=!1,this.contactObj={},this._queryContact(),this.onRefresh()}},{key:"goodsClick",value:function(t){262!=t.narcoticId&&263!=t.narcoticId?this.contactObj.ADDRESSID?(this.SET_GOODSDETAIL(Object.assign(Object(o["a"])(Object(o["a"])(Object(o["a"])({},this.customParams),this.contactObj),{},{dirType:1===this.dirType?"":this.dirType}),t)),this.$router.push({name:"twoPinDicDetail",query:{type:"2"}})):this.$toast.fail("请先选择运输地址"):this.$toast.fail((262==t.narcoticId?"麻醉药品":"第一类精神药品")+"不允许下单")}},{key:"mounted",value:function(){this._queryContact()}}]),s}(Object(d["b"])(f["a"]));Object(u["a"])([g.Mutation],b.prototype,"SET_CUSTOMPARAMS",void 0),Object(u["a"])([g.Mutation],b.prototype,"SET_GOODSDETAIL",void 0),Object(u["a"])([g.Mutation],b.prototype,"SET_CARTSHOW",void 0),Object(u["a"])([g.Getter],b.prototype,"customParams",void 0),Object(u["a"])([g.Getter],b.prototype,"chooseEntry",void 0),Object(u["a"])([g.Getter],b.prototype,"cartShow",void 0),b=Object(u["a"])([Object(d["a"])({components:{SecondaryList:p["a"],AppCustom:v["a"]},beforeRouteEnter:function(t,e,s){"twoPinDic"===e.name&&s((function(t){t._queryContact(),t.onRefresh()})),s()}})],b);var y=b,_=y,C=(s("a271"),s("2877")),k=Object(C["a"])(_,a,i,!1,null,"eff5672c",null);e["default"]=k.exports},"53ae":function(t,e,s){"use strict";var a=s("d4ec"),i=s("bee2"),o=s("262e"),n=s("2caf"),c=(s("b0c0"),s("9ab4")),l=s("1b40");l["a"].registerHooks(["beforeRouteEnter"]);var r=function(t){Object(o["a"])(s,t);var e=Object(n["a"])(s);function s(){var t;return Object(a["a"])(this,s),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(i["a"])(s,[{key:"beforeRouteEnter",value:function(t,e,s){s((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),s}(l["d"]);r=Object(c["a"])([Object(l["a"])({})],r),e["a"]=r},"6b64":function(t,e,s){},"8eff":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"listWarp pa-3 d-flex white-bg align-center",on:{click:t.goodsClick}},[s("div",{class:{bgChange:t.listItem.isClick}}),s("van-image",{attrs:{width:"80",height:"80",radius:"8px",src:t.listItem.smallimglink}}),s("div",{staticClass:"detailWarp pl-2 d-flex flex-column justify-space-between"},[s("div",[s("van-tag",{attrs:{color:t.listItem.nearlyEffectiveFlag?"rgba(237, 123, 47, 0.1)":"rgba(234, 57, 75, 0.1)","text-color":t.listItem.nearlyEffectiveFlag?"#ED7B2F":"#EA394B"}},[t._v(t._s(t.listItem.nearlyEffectiveFlag?"近效期":"待处理"))]),262==t.listItem.narcoticId?s("van-tag",{staticClass:"ml-1",attrs:{color:"rgba(234, 57, 75, 0.1)","text-color":"#EA394B"}},[t._v(" 麻醉药品 ")]):t._e(),263==t.listItem.narcoticId?s("van-tag",{staticClass:"ml-1",attrs:{color:"rgba(234, 57, 75, 0.1)","text-color":"#EA394B"}},[t._v(" 第一类精神药品 ")]):t._e(),s("span",{staticClass:"pl-1 fontWeight-500"},[t._v(t._s(t.listItem.goodsId)+"/"+t._s(t.listItem.goodsName))])],1),s("div",{staticClass:"color-gray-7"},[t._v(t._s(t.listItem.goodstype)+"/"+t._s(t.listItem.goodsunit))]),s("div",{staticClass:"d-flex color-gray-7"},[s("div",{staticClass:"flex-1"},[s("span",[t._v(t._s(t.listItem.nearlyEffectiveFlag?"近效期":"待处理")+"批号数：")]),s("span",{staticClass:"color-black-2"},[t._v(t._s(t.listItem.nearlyEffectiveFlag?t.listItem.nearlyEffectiveLotNum:t.listItem.waiteProcessotNum))])]),s("div",{staticClass:"flex-1"},[s("span",[t._v("可销库存：")]),s("span",{staticClass:"color-black-2"},[t._v(t._s(t.listItem.realtotalgoodsqty))])])]),t.isAsCustom?t._e():s("div",{staticClass:"d-flex color-gray-7"},[t.listItem.price>0?s("div",{staticClass:"flex-1"},[s("span",[t._v("单价：")]),s("span",{staticClass:"color-black-2"},[t._v("￥"+t._s(t.listItem.price))])]):t._e(),t.listItem.price>0?s("div",{staticClass:"flex-1"},[s("span",[t._v("总价：")]),s("span",{staticClass:"color-black-2"},[t._v("￥"+t._s((t.listItem.mintotalgoodsqty*t.listItem.price).toFixed(2)))])]):t._e(),t.listItem.sausestatus&&(t.listItem.gspusestatus||0===t.listItem.gspusestatus)?s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[1!==t.listItem.sausestatus?s("p",[s("span",{staticClass:"title"},[t._v("销售状态：")]),s("span",{class:1===t.listItem.sausestatus?"color-normal":"color-never fontWeight"},[t._v(t._s(1===t.listItem.sausestatus?"可销":"不可销"))])]):t._e(),1!==t.listItem.gspusestatus?s("p",[s("span",{staticClass:"title"},[t._v("质量状态：")]),s("span",{class:1===t.listItem.gspusestatus?"color-normal":"color-never fontWeight"},[t._v(" "+t._s(1===t.listItem.gspusestatus?"质量可用":2===t.listItem.gspusestatus?"待首营":3===t.listItem.gspusestatus?"质量禁止":2===t.listItem.gspusestatus?"首营不通过":5===t.listItem.gspusestatus?"未首营":"")+" ")])]):t._e()]):t._e(),t.listItem.price>0?t._e():s("div",[s("span",{staticClass:"color-red"},[t._v("货品暂无价格，不允许销售。")])])]),t.isAsCustom||2!==t.listItem.limitFlag&&3!==t.listItem.limitFlag?t._e():s("div",[2===t.listItem.limitFlag?s("span",{staticClass:"color-red"},[t._v("当前货品不可销。")]):s("span",{staticClass:"color-red"},[t._v("当前货品既有禁销也有限销，请联系采购处理")])])]),t.listItem.hadsale?s("van-button",{staticClass:"hadsale",attrs:{size:"mini",type:"primary"}},[t._v("卖过")]):t._e()],1)},i=[],o=s("d4ec"),n=s("bee2"),c=s("262e"),l=s("2caf"),r=s("9ab4"),u=s("1b40"),d=function(t){Object(c["a"])(s,t);var e=Object(l["a"])(s);function s(){return Object(o["a"])(this,s),e.apply(this,arguments)}return Object(n["a"])(s,[{key:"goodsClick",value:function(){if((this.isAsCustom||this.listItem.price>0)&&2!==this.listItem.limitFlag&&3!==this.listItem.limitFlag){if(this.listItem.sausestatus&&1!==this.listItem.sausestatus){var t="当前货品状态不可销，不可加购";return void this.$toast.fail(t)}if((this.listItem.gspusestatus||0===this.listItem.gspusestatus)&&1!==this.listItem.gspusestatus){var e="当前货品".concat(2===this.listItem.gspusestatus?"待首营":3===this.listItem.gspusestatus?"质量禁止":2===this.listItem.gspusestatus?"首营不通过":5===this.listItem.gspusestatus?"未首营":"","，不可加购");return void this.$toast.fail(e)}this.$set(this.listItem,"isClick",!0),this.$emit("goodsClick",this.listItem)}}}]),s}(u["d"]);Object(r["a"])([Object(u["c"])()],d.prototype,"listItem",void 0),Object(r["a"])([Object(u["c"])({default:!1})],d.prototype,"isAsCustom",void 0),d=Object(r["a"])([Object(u["a"])({})],d);var m=d,h=m,f=(s("35fd"),s("2877")),p=Object(f["a"])(h,a,i,!1,null,"876fc74c",null);e["a"]=p.exports},a271:function(t,e,s){"use strict";s("3d1f")},c940:function(t,e,s){}}]);