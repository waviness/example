(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c982579"],{"1a01":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"pb-100 background-color-white"},[t("van-sticky",[t("div",{staticClass:"header d-flex align-center"},[t("div",{staticClass:"flex-1 d-flex"},[t("span",{staticClass:"dept-name"},[e._v(e._s(e.type)+"-第"+e._s(e.batch)+"批")])]),t("div",{on:{click:e.calendarClick}},[t("span",{staticClass:"time"},[e._v(e._s(e.$dayjs(e.csjNowTime).format("YYYY-MM-DD")))]),t("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)])]),t("van-sticky",{attrs:{"offset-top":74}},[t("van-search",{staticClass:"custom-search",attrs:{shape:"round","input-align":"center",placeholder:"搜索",background:"white"},on:{input:e.onSearchInput},model:{value:e.searchValue,callback:function(a){e.searchValue=a},expression:"searchValue"}})],1),t("div",{staticClass:"center-card"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.cdloading,expression:"cdloading"}],staticClass:"d-flex py-8 justify-center align-center"},[t("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),e.cdloading?e._e():t("div",{staticClass:"summary-all"},[t("div",{staticClass:"font-14"},[e._v("集采相关品规")]),t("div",{staticClass:"value"},[e._v(e._s(e.cardData.sale)+"万元")]),t("div",{class:["growth-rate",e.cardData.saleTb>0?"positive":"negative"]},[e._v(e._s(e.cardData.saleTb)+"%")])]),e.cdloading?e._e():t("div",{staticClass:"px-3 mb-4"},[t("div",{staticClass:"progress-bar",style:{width:e.cardData.winningProgress+"%"}},[t("div",{staticClass:"progress-inner"})]),t("div",{staticClass:"summary-item"},[t("span",[e._v("中标品种")]),t("span",{staticClass:"value"},[e._v(e._s(e.cardData.bidSale)+"万元")]),t("span",{class:["growth-rate",e.cardData.bidSaleTb>0?"positive":"negative"]},[e._v(e._s(e.cardData.bidSaleTb>0?"+":"")+e._s(e.cardData.bidSaleTb)+"% ")])])]),e.cdloading?e._e():t("div",{staticClass:"px-3"},[t("div",{staticClass:"progress-bar",style:{width:e.cardData.nonWinningProgress+"%"}},[t("div",{staticClass:"progress-inner"})]),t("div",{staticClass:"summary-item"},[t("span",[e._v("备选和未中选品种")]),t("span",{staticClass:"value"},[e._v(e._s(e.cardData.noBidSale)+"万元")]),t("span",{class:["growth-rate",e.cardData.noBidSaleTb>0?"positive":"negative"]},[e._v(e._s(e.cardData.noBidSaleTb>0?"+":"")+e._s(e.cardData.noBidSaleTb)+"% ")])])])]),t("div",{staticClass:"table-div"},[t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.listItems.length&&!e.filterParams.loading,expression:"listItems.length == 0 && !filterParams.loading"}],staticClass:"white-block pb-3 mb-4"},[t("app-empty",{staticClass:"py-7",attrs:{description:"暂无数据"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.filterParams.loading,expression:"filterParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[t("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t("div",{staticClass:"table-body background-color-white mt-2"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.listItems.length>0,expression:"listItems.length > 0"}],staticClass:"table-line d-flex font-14 color-gray-5 lineHeight-20 align-center py-3"},[t("div",{staticClass:"table-div-1"},[e._v("品种ID/品种名称")]),t("div",{staticClass:"table-div-2"},[e._v("集采中标状态")]),t("div",{staticClass:"table-div-3"},[e._v("产地")]),t("div",{staticClass:"table-div-4"},[e._v("销售实绩（万元）")]),t("div",{staticClass:"table-div-5"},[e._v("较同期净增长（万元）")]),t("div",{staticClass:"table-div-6"},[e._v("同比增幅")])]),e.listItems.length>0?t("div",{staticClass:"table-content"},e._l(e.listItems,(function(a,s){return t("div",{key:s+"pz",staticClass:"table-line d-flex font-14 color-black-2 lineHeight-20 align-center py-3",style:s%2===0?"background-color: #F7F7F7":""},[t("div",{staticClass:"table-div-1"},[e._v(e._s(a.goodsId)+"/"+e._s(a.goodsName))]),t("div",{staticClass:"table-div-2"},[e._v(e._s(a.bidFlag))]),t("div",{staticClass:"table-div-3"},[e._v(e._s(a.factoryName))]),t("div",{staticClass:"table-div-4"},[e._v(e._s(a.sale))]),t("div",{staticClass:"table-div-5"},[e._v(e._s(a.saleUp))]),t("div",{staticClass:"table-div-6"},[e._v(e._s(a.saleTb)+"%")])])})),0):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.listItems.length>0,expression:"listItems.length > 0"}],staticClass:"py-4 background-color-white"},[t("van-pagination",{attrs:{"force-ellipses":!0,"total-items":e.filterParams.total,"items-per-page":e.filterParams.pageSize},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"prev-text",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[t("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(a){var t=a.text;return[e._v(e._s(t))]}}]),model:{value:e.filterParams.currentPage,callback:function(a){e.$set(e.filterParams,"currentPage",a)},expression:"filterParams.currentPage"}})],1)]),t("div",{staticClass:"commonOpButton-footer"},[t("van-button",{staticClass:"bg-blue",attrs:{round:""},on:{click:e.openFilter}},[t("div",{staticClass:"d-flex align-center"},[t("div",{staticClass:"color-white font-12 fontWeight-500"},[e._v("排序方式")])])])],1),t("van-action-sheet",{attrs:{actions:e.sortTypes,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSortConfirm},scopedSlots:e._u([{key:"action",fn:function(a){var s=a.action;return[t("div",{style:{color:s.color}},[e._v(e._s(s.name))])]}}]),model:{value:e.showSortPopup,callback:function(a){e.showSortPopup=a},expression:"showSortPopup"}}),t("van-calendar",{attrs:{"default-date":e.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:e.selectCalendar},model:{value:e.calendarShow,callback:function(a){e.calendarShow=a},expression:"calendarShow"}})],1)},i=[],r=t("1da1"),n=t("d4ec"),o=t("bee2"),l=t("262e"),c=t("2caf"),d=(t("96cf"),t("d81d"),t("b680"),t("7db0"),t("d3b7"),t("159b"),t("9ab4")),u=t("1b40"),v=t("4388"),p=t("2279"),h=t("5b92"),m=function(e){Object(l["a"])(t,e);var a=Object(c["a"])(t);function t(){var e;return Object(n["a"])(this,t),e=a.apply(this,arguments),e.calendarShow=!1,e.searchValue="",e.showSortPopup=!1,e.type=e.$route.query.type,e.batch=e.$route.query.batch,e.deptId=e.$route.query.deptId,e.dateTime=e.$route.query.date,e.cdloading=!1,e.cardData={},e.sortTypes=[{name:"销售实绩顺序",orderColumn:"salesAmount",orderType:1,color:""},{name:"销售实绩倒序",orderColumn:"salesAmount",orderType:2,color:"#2271F5"},{name:"较同期净增顺序",orderColumn:"periodCompareNetIncrease",orderType:3,color:""},{name:"较同期净增倒序",orderColumn:"periodCompareNetIncrease",orderType:4,color:""},{name:"同比增幅顺序",orderColumn:"periodComparePercent",orderType:5,color:""},{name:"同比增幅倒序",orderColumn:"periodComparePercent",orderType:6,color:""}],e.selectedSort=e.sortTypes[1],e.listItems=[],e.filterParams={total:0,currentPage:1,pageSize:10,loading:!1},e}return Object(o["a"])(t,[{key:"_queryJiCaiGoodsList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var a,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={batch:"第"+this.batch+"批次",date:this.dateTime,deptId:this.deptId,keyword:this.searchValue,flag:1,order:this.selectedSort.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,type:this.type},this.filterParams.loading=!0,this.listItems=[],e.next=5,Object(p["cb"])(a);case 5:t=e.sent,this.filterParams.loading=!1,200==t.code&&t.data&&(this.listItems=t.data.list.map((function(e){return{goodsId:e.goodsId,goodsName:e.goodsName,bidFlag:e.bidFlag,factoryName:e.factoryName?e.factoryName:"-",sale:null!=e.sale?Object(h["d"])(e.sale,1):"-",saleUp:null!=e.saleUp?Object(h["d"])(e.saleUp,1):"-",saleTb:null!=e.saleTb?(100*e.saleTb).toFixed(1):"-"}})),this.filterParams.total=t.data.total||0);case 8:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}()},{key:"_queryJiCaiList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var a,t,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={date:this.dateTime,deptId:this.deptId,flag:1,type:this.type},this.cdloading=!0,e.next=4,Object(p["db"])(a);case 4:t=e.sent,this.cdloading=!1,200==t.code&&t.data&&(s="第".concat(this.batch,"批次"),i=t.data.find((function(e){return e.batch===s})),i&&(this.cardData={batchName:i.batch,expanded:!0,sale:Object(h["d"])(i.sale,1),saleTb:Object(h["d"])(i.saleTb,2),bidSale:Object(h["d"])(i.bidSale,1),bidSaleTb:Object(h["d"])(i.bidSaleTb,2),noBidSale:Object(h["d"])(i.noBidSale,1),noBidSaleTb:Object(h["d"])(i.noBidSaleTb,2),winningProgress:i.sale>0?(i.bidSale/i.sale*100).toFixed(1):"0",nonWinningProgress:i.sale>0?(i.noBidSale/i.sale*100).toFixed(1):"0"}));case 7:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}()},{key:"handleTableChange",value:function(e){this.filterParams.currentPage=e,this._queryJiCaiGoodsList()}},{key:"openFilter",value:function(){this.showSortPopup=!0}},{key:"onSearchInput",value:function(){this.filterParams.currentPage=1,this._queryJiCaiGoodsList()}},{key:"onSortConfirm",value:function(e){this.sortTypes.forEach((function(e){e.color=""})),e.color="#2271F5",this.selectedSort=e,this.showSortPopup=!1,this.filterParams.currentPage=1,this._queryJiCaiGoodsList()}},{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"selectCalendar",value:function(e){this.calendarConfirm(e)}},{key:"calendarConfirm",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.calendarShow=!1,this.dateTime=this.$dayjs(a).format("YYYY-MM-DD"),this.SET_CSJNOWTIME(a),this.SET_CSJCHANGETIME(!0),this._queryJiCaiList(),this._queryJiCaiGoodsList();case 6:case"end":return e.stop()}}),e,this)})));function a(a){return e.apply(this,arguments)}return a}()},{key:"mounted",value:function(){this._queryJiCaiList(),this._queryJiCaiGoodsList()}}]),t}(Object(u["b"])(v["a"]));m=Object(d["a"])([Object(u["a"])({})],m);var b=m,f=b,g=(t("c398"),t("2877")),y=Object(g["a"])(f,s,i,!1,null,"5bf5ad92",null);a["default"]=y.exports},"762c":function(e,a,t){},c398:function(e,a,t){"use strict";t("762c")}}]);