(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0740a95f"],{"2b50":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"warp"},[n("div",{staticClass:"add-header pt-10 pl-10 pb-4 font-14"},[e._v("话题新增")]),n("div",{staticClass:"add-content"},[n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{staticClass:"mb-2",attrs:{required:"",name:"title",rules:[{required:!0}],label:"标题","input-align":"right",placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("van-field",{staticClass:"mb-2",attrs:{readonly:"",required:"",name:"labelType",rules:[{required:!0}],label:"事件分类","input-align":"right",placeholder:"点击选择事件分类"},nativeOn:{click:function(t){e.labelShow=!0}},model:{value:e.labelType.text,callback:function(t){e.$set(e.labelType,"text",t)},expression:"labelType.text"}}),n("van-field",{staticClass:"mb-2",attrs:{required:"",type:"textarea",rows:"3",name:"topicValue",autosize:"","input-align":"right",rules:[{required:!0}],label:"话题内容",placeholder:"请输入话题内容"},model:{value:e.topicValue,callback:function(t){e.topicValue=t},expression:"topicValue"}}),n("van-field",{staticClass:"mb-2",attrs:{readonly:"",required:"",value:e.checkedUsers.length?"已选"+e.checkedUsers.length+"人":"",name:"checkedUsersList",rules:[{required:!0}],label:"提醒谁看","input-align":"right",placeholder:"点击选择人员"},nativeOn:{click:function(t){return e.getUsersClick.apply(null,arguments)}}}),e.checkedUsers.length?n("van-field",{staticClass:"mb-2",attrs:{type:"textarea",rows:"3",label:"留言","input-align":"right",placeholder:"请输入留言"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}):e._e(),n("div",{staticClass:"commonButton-footer d-flex justify-center"},[n("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:e.cancelClick}},[e._v("取消")]),n("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""}},[e._v("提交")])],1)],1)],1),n("van-popup",{style:{height:"65%"},attrs:{round:"",position:"bottom"},model:{value:e.labelShow,callback:function(t){e.labelShow=t},expression:"labelShow"}},[n("van-tree-select",{attrs:{height:"100%",items:e.labelTreeList,"active-id":e.activeId,"main-active-index":e.activeIndex},on:{"click-item":e.clickLabelItem,"update:activeId":function(t){e.activeId=t},"update:active-id":function(t){e.activeId=t},"update:mainActiveIndex":function(t){e.activeIndex=t},"update:main-active-index":function(t){e.activeIndex=t}}})],1),e.hasDept?n("dept-user",{ref:"deptUer",attrs:{show:e.changeTypeShow,loading:e.getUserListLoading,depTreeList:e.depTreeList,deptUserData:e.deptUserData,searchList:e.userDataList},on:{search:e.refreshUserByKeywords,refresh:e.refreshUserByDepts,confirm:e.onTreeConfirm,cancel:e.cancelUserByDepts}}):e._e()],1)},a=[],i=n("2909"),c=n("1da1"),s=n("d4ec"),u=n("bee2"),o=n("262e"),l=n("2caf"),p=(n("96cf"),n("4de4"),n("d3b7"),n("caad"),n("2532"),n("99af"),n("d81d"),n("9ab4")),d=n("1b40"),h=n("f727"),f=n("4bce"),b=n("8393"),m=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.authorizedFlag=!1,e.innAddTopicShow=!1,e.title="",e.labelType={},e.topicValue="",e.personDetail="",e.message="",e.labelShow=!1,e.activeId=-1,e.activeIndex=0,e.labelTreeList=[],e}return Object(u["a"])(n,[{key:"addClose",value:function(){this.$emit("addClose")}},{key:"onSubmit",value:function(e){var t=this,n={labelId:this.labelType.id,topicContent:this.topicValue,topicTitle:this.title,isSign:!!this.checkedUsers.length,signContent:this.message,userIdList:this.checkedUsers};this.$dialog.confirm({message:"确定新建话题？",allowHtml:!0,confirmButtonText:"确定",beforeClose:function(e,r){"confirm"===e?(Object(f["i"])(n).then((function(e){"200"===e.code&&(t.$toast.success(e.msg),t.$emit("submitClick",n))})),r()):r()}})}},{key:"onTreeConfirm",value:function(e){var t=this;this.checkedUsers=e;var n=this.userDataList.filter((function(t){return e.includes(t.userId)}));this.checkDetailList=this.checkDetailList.concat(n);for(var r=[],a=function(n){var a=t.checkDetailList[n];-1===e.indexOf(a.userId)||r.some((function(e){return a.userId===e.userId}))||r.push(a)},i=0;i<this.checkDetailList.length;i++)a(i);this.checkDetailList=r,this.changeTypeShow=!1}},{key:"cancelClick",value:function(){this.$router.go(-1)}},{key:"clickLabelItem",value:function(e){this.labelType=e,this.labelShow=!1}},{key:"_getLabelTree",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={type:"1"},e.next=3,Object(h["e"])(t);case 3:n=e.sent,this.labelTreeList=n.data.map((function(e){var t=[];return e.CHILD_LIST.length&&(t=e.CHILD_LIST.map((function(e){return{id:e.LABEL_ID,text:e.LABEL_NAME}}))),{id:e.LABEL_ID,text:e.LABEL_NAME,children:Object(i["a"])(t)}}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){this._getLabelTree(),this.innAddTopicShow=this.addTopicShow}}]),n}(Object(d["b"])(b["a"]));Object(p["a"])([Object(d["c"])()],m.prototype,"addTopicShow",void 0),m=Object(p["a"])([Object(d["a"])({})],m);var v=m,g=v,w=(n("ba2b"),n("2877")),k=Object(w["a"])(g,r,a,!1,null,"9b725f04",null);t["default"]=k.exports},"4bce":function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"c",(function(){return f}));var r=n("1da1"),a=(n("96cf"),n("b32d")),i=n("90ae"),c=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/TopicSquare/getTopicNum",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/TopicSquare/getTopicList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/TopicSquare/insDiscuss",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].formDataPost(i["c"],"/api/TopicSquare/getTopicDiscuss",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/TopicSquare/addSubscribe",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/TopicSquare/getSubscribe",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/TopicSquare/insSign",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/TopicSquare/insTopicPersonal",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].formDataPost(i["c"],"/api/TopicSquare/getTopicDetail",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ba2b:function(e,t,n){"use strict";n("cb31")},cb31:function(e,t,n){}}]);