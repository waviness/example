(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dd5d126"],{"0998":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"common-list mb-2",class:t.isHeader?"common-list-noRadius":"",on:{click:t.detailClick}},[s("div",{staticClass:"common-list-content"},[s("div",{staticClass:"common-list-two fontWeight"},[s("div",[t._v(t._s(t.item.addtime))]),s("div",[t._v(t._s(t.item.entryid)+"/"+t._s(t.item.entryname))])]),s("div",{staticClass:"common-list-one d-flex justify-space-between"},[s("span",{staticClass:"title"},[t._v("客户")]),s("span",[t._v(t._s(t.item.erpcustomid)+"/"+t._s(t.item.erpcustomename))])]),s("div",{staticClass:"common-list-one d-flex justify-space-between"},[s("span",{staticClass:"title"},[t._v("品种")]),s("span",[t._v(t._s(t.item.erpid)+"/"+t._s(t.item.tym))])]),s("div",{staticClass:"common-list-one d-flex justify-space-between"},[s("span",{staticClass:"title"},[t._v("规格")]),s("span",{staticClass:"color-main"},[t._v(t._s(t.item.gg))])]),s("div",{staticClass:"common-list-one d-flex justify-space-between"},[s("span",{staticClass:"title"},[t._v("产地")]),s("span",{staticClass:"fontWeight"},[t._v(t._s(t.item.scqy))])]),s("div",{staticClass:"common-list-two"},[s("div",{staticClass:"d-flex justify-space-between align-center"},[s("span",{staticClass:"title"},[t._v("合同数量")]),s("span",{staticClass:"value fontWeight"},[t._v(t._s(t.item.erp_cgsl))])]),s("div",{staticClass:"d-flex justify-space-between align-center"},[s("span",[t._v("合同价")]),s("span",{staticClass:"value fontWeight"},[t._v(t._s(t.item.cgjg))])])])]),t.isHeader?t._e():s("div",{staticClass:"common-list-button clearfix"},[0===t.type?s("div",{staticClass:"right"},[s("van-button",{attrs:{size:"small",color:"#EA394B",round:""},on:{click:function(e){return e.stopPropagation(),t.nullify(2)}}},[t._v("作废")]),s("van-button",{staticClass:"ml-4",attrs:{size:"small",color:"#2271F5",round:""},on:{click:function(e){return e.stopPropagation(),t.reset.apply(null,arguments)}}},[t._v("重置")])],1):t._e(),1===t.type?s("div",{staticClass:"right"},[s("van-button",{staticClass:"ml-4",attrs:{size:"small",color:"#2271F5",round:""},on:{click:function(e){return e.stopPropagation(),t.nullify(0)}}},[t._v("回退")])],1):t._e()])])},i=[],n=s("d4ec"),r=s("bee2"),c=s("262e"),o=s("2caf"),l=s("9ab4"),u=s("1b40"),d=function(t){Object(c["a"])(s,t);var e=Object(o["a"])(s);function s(){return Object(n["a"])(this,s),e.apply(this,arguments)}return Object(r["a"])(s,[{key:"detailClick",value:function(){this.$emit("detailClick")}},{key:"nullify",value:function(t){this.$emit("nullifyClick",t)}},{key:"reset",value:function(){this.$emit("resetClick")}}]),s}(u["d"]);Object(l["a"])([Object(u["c"])()],d.prototype,"item",void 0),Object(l["a"])([Object(u["c"])()],d.prototype,"index",void 0),Object(l["a"])([Object(u["c"])()],d.prototype,"type",void 0),Object(l["a"])([Object(u["c"])({default:!1})],d.prototype,"isHeader",void 0),d=Object(l["a"])([Object(u["a"])({})],d);var p=d,f=p,m=s("2877"),v=Object(m["a"])(f,a,i,!1,null,"3e171766",null);e["a"]=v.exports},"17f2":function(t,e,s){"use strict";s.d(e,"d",(function(){return r})),s.d(e,"a",(function(){return c})),s.d(e,"c",(function(){return o})),s.d(e,"e",(function(){return l})),s.d(e,"b",(function(){return u}));var a=s("1da1"),i=(s("96cf"),s("b32d")),n=s("90ae"),r=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/emergencyOrder/getEmergencyOrderInfo",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/emergencyOrder/emergencyOrderMatchDetail",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/emergencyOrder/emergencyOrderMatchSubmit",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/emergencyOrder/operationForEmergencyOrder",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/emergencyOrder/emergencyOrderMatchReset",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"53ae":function(t,e,s){"use strict";var a=s("d4ec"),i=s("bee2"),n=s("262e"),r=s("2caf"),c=(s("b0c0"),s("9ab4")),o=s("1b40");o["a"].registerHooks(["beforeRouteEnter"]);var l=function(t){Object(n["a"])(s,t);var e=Object(r["a"])(s);function s(){var t;return Object(a["a"])(this,s),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(i["a"])(s,[{key:"beforeRouteEnter",value:function(t,e,s){s((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),s}(o["d"]);l=Object(c["a"])([Object(o["a"])({})],l),e["a"]=l},"8f65":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pb-100"},[s("van-sticky",[s("list",{staticClass:"px-4",attrs:{item:t.detailObj,isHeader:!0}})],1),s("div",{staticClass:"detail"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{offset:20,finished:t.finished,"finished-text":""},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.dataList,(function(e,a){return s("van-checkbox",{key:"FirstAidOrderDetail"+a,model:{value:e.checked,callback:function(s){t.$set(e,"checked",s)},expression:"item.checked"}},[s("detail-list",{attrs:{item:e,index:a}})],1)})),0!==t.dataList.length||t.loading?t._e():s("app-empty",{staticStyle:{"margin-top":"20px"},attrs:{description:"暂无数据"}})],2)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length,expression:"dataList.length"}],staticClass:"commonButton-footer d-flex justify-center"},[s("van-button",{attrs:{size:"small",color:"#2271F5",type:"info",round:""},on:{click:t._emergencyOrderMatchSubmit}},[t._v("匹配")])],1)],1)},i=[],n=s("5530"),r=s("d4ec"),c=s("bee2"),o=s("262e"),l=s("2caf"),u=(s("99af"),s("9ab4")),d=s("1b40"),p=s("17f2"),f=s("0998"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"common-list mb-2 common-list-noRadius"},[s("div",{staticClass:"common-list-content"},[s("div",{staticClass:"common-list-two justify-space-between"},[s("div",{staticClass:"flex-1 pr-4"},[s("span",{staticClass:"title"},[t._v("开票日期")]),t.item.printtime?s("span",{staticClass:"right"},[t._v(t._s(t.item.printtime.substring(0,10)))]):t._e()]),s("div",{staticClass:"flex-1"},[s("span",{staticClass:"title"},[t._v("销售细单ID")]),s("span",{staticClass:"right"},[t._v(t._s(t.item.salesdtlid))])])]),s("div",{staticClass:"common-list-two"},[s("div",{staticClass:"flex-1 pr-4"},[s("span",{staticClass:"title"},[t._v("货品数量")]),s("span",{staticClass:"color-main right"},[t._v(t._s(t.item.goodsqty))])]),s("div",{staticClass:"flex-1"},[s("span",{staticClass:"title"},[t._v("销售价格")]),s("span",{staticClass:"right"},[t._v(t._s(t.item.unitprice))])])]),s("div",{staticClass:"common-list-two"},[s("div",{staticClass:"flex-1 pr-4"},[s("span",{staticClass:"title"},[t._v("发票号")]),s("span",{staticClass:"color-main right"},[t._v(t._s(t.item.invno))])]),s("div",{staticClass:"flex-1"},[s("span",{staticClass:"title"},[t._v("保管帐")]),s("span",{staticClass:"pl-4 right"},[t._v(t._s(t.item.storagename))])])]),s("div",{staticClass:"common-list-one d-flex"},[s("span",{staticClass:"title"},[t._v("备注(送货地址)")]),s("span",{staticClass:"pl-4"},[t._v(t._s(t.item.dtlmemo))])])])])},v=[],h=function(t){Object(o["a"])(s,t);var e=Object(l["a"])(s);function s(){return Object(r["a"])(this,s),e.apply(this,arguments)}return Object(c["a"])(s)}(d["d"]);Object(u["a"])([Object(d["c"])()],h.prototype,"item",void 0),h=Object(u["a"])([Object(d["a"])({})],h);var b=h,g=b,O=s("2877"),_=Object(O["a"])(g,m,v,!1,null,"730c04bf",null),y=_.exports,j=s("53ae"),C=s("4bb5"),x=Object(C["a"])("crm"),k=function(t){Object(o["a"])(s,t);var e=Object(l["a"])(s);function s(){return Object(r["a"])(this,s),e.apply(this,arguments)}return Object(c["a"])(s,[{key:"_emergencyOrderMatchDetail",value:function(){var t=this;1===this.page&&(this.dataList=[]);var e={pageNum:this.page,pageSize:10,customid:this.detailObj.erpcustomid,goodsid:this.detailObj.erpid,goodsqty:this.detailObj.erp_cgsl||"0",entryId:this.detailObj.entryid};Object(p["a"])(e).then((function(e){"200"===e.code&&(t.dataList=t.dataList.concat(e.data.list),e.data.hasNextPage?t.page++:t.finished=!0,t.loading=!1)}))}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,this._emergencyOrderMatchDetail()}},{key:"_emergencyOrderMatchSubmit",value:function(){for(var t=this,e=[],s=0,a=0;a<this.dataList.length;a++){var i=this.dataList[a];i.checked&&(s+=i.goodsqty,e.push(Object.assign(Object(n["a"])({},i),{hzddmxbh:this.detailObj.ddmxbh,hzddbh:this.detailObj.ddbh})))}e.length<=0?this.$toast.fail("请选择销售细单"):s>this.detailObj.erp_cgsl?this.$toast.fail("销售细单数量不能大于补单数量"):Object(p["c"])({bmsSaDtls:e}).then((function(e){"200"===e.code&&(t.$toast.success(e.msg),t.onRefresh())}))}},{key:"mounted",value:function(){this._emergencyOrderMatchDetail()}}]),s}(Object(d["b"])(j["a"]));Object(u["a"])([x.Getter],k.prototype,"detailObj",void 0),k=Object(u["a"])([Object(d["a"])({components:{list:f["a"],detailList:y}})],k);var w=k,R=w,L=(s("f139"),Object(O["a"])(R,a,i,!1,null,"6bffaeb1",null));e["default"]=L.exports},f139:function(t,e,s){"use strict";s("f628")},f628:function(t,e,s){}}]);