(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c6b84fc"],{"3f22":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-color-white"},[a("van-sticky",[a("div",{staticClass:"header px-4 d-flex align-center background-color-white"},[a("div",{staticClass:"flex-3 d-flex flex-column"},[a("span",{staticClass:"font-24 fontWeight color-black-1",staticStyle:{"font-family":"'HarmonyOS Sans SC Black'"}},[t._v(t._s(t.entryObj.brandName))]),a("span",{staticClass:"font-12 color-gray-5"},[t._v(t._s(t.entryObj.name))])]),a("div",{staticClass:"flex-2 textAlignR background-color-white",on:{click:t.calendarClick}},[a("span",{staticClass:"time color-gray-4 fontWeight font-16"},[t._v(t._s(t.dateTime))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)]),a("div",{staticClass:"d-flex background-color-white"},[a("van-search",{staticClass:"flex-1",attrs:{shape:"round",placeholder:"搜索","input-align":"center"},on:{input:t.brandSearchInput},model:{value:t.brandSearchDetailValue,callback:function(e){t.brandSearchDetailValue=e},expression:"brandSearchDetailValue"}}),a("div",{staticClass:"d-flex flex-1"},[a("div",{staticClass:"statusTab d-flex flex-2 mt-2 mr-2"},[a("div",{staticClass:"flex-1 d-flex align-center",class:0===t.statusActive?"active":"",on:{click:function(e){return t.statusTabClick(0)}}},[a("icon-svg",{staticClass:"ml-2",staticStyle:{width:"16px",height:"16px"},attrs:{name:0===t.statusActive?"ytcrm-a-bianzu22":"ytcrm-a-bianzu221"}}),a("span",{staticClass:"pl-1"},[t._v("品种")])],1),a("div",{staticClass:"flex-1 d-flex align-center",class:1===t.statusActive?"active":"",on:{click:function(e){return t.statusTabClick(1)}}},[a("icon-svg",{staticClass:"ml-2",staticStyle:{width:"18px",height:"18px"},attrs:{name:"ytcrm-Fill"}}),a("span",{staticClass:"pl-1"},[t._v("业态")])],1)])])],1)]),a("div",{staticClass:"px-10 pt-10"},[a("div",{staticClass:"card py-4 pl-4 d-flex positionR"},[t.totalLoading?a("div",{staticClass:"block-loading d-flex justify-center pa-8"},[a("van-loading",{attrs:{type:"spinner",color:"#3561F2"}})],1):t._e(),a("ul",{staticClass:"salesWarp d-flex flex-column justify-space-between"},[a("li",{staticClass:"color-gray-4 font-14"},[t._v("销售实绩")]),a("li",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"font-28 fontWeight",staticStyle:{"font-family":"HarmonyOS_Sans_SC_Black"}},[t._v(t._s(t.brandHeaderObj.value)+"万元")]),a("span",{staticClass:"color-main-2 font-14"},[t._v(t._s(t.getFH(t.brandHeaderObj.yearNetIncrease))+t._s(t.brandHeaderObj.yearNetIncrease))])])]),a("div",{staticClass:"echarts",attrs:{id:"brandEcharts"}})])]),0===t.statusActive?a("div",{staticClass:"px-4 pb-100"},[a("van-pull-refresh",{staticClass:"pt-10",on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{staticClass:"px-2",attrs:{offset:20,finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e,s){return a("div",{key:s,on:{click:function(a){return t.goodsClick(e)}}},[a("div",{staticClass:"color-gray-5 font-14 d-flex justify-space-between py-10"},[a("span",{staticClass:"color-main-3"},[t._v(t._s(e.goodsId)+"/"+t._s(e.goodsName))]),a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:e.prodArea,expression:"data.prodArea"}]}),a("van-icon",{staticClass:"pl-1",attrs:{size:"18px",name:"arrow"}})],1)]),a("div",{staticClass:"borderBottom d-flex justify-space-between pb-10"},[a("div",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("销售实绩")]),a("span",{staticClass:"color-gray-5 font-16 pt-1"},[t._v(t._s(e.value))])]),a("div",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("较同期净增")]),a("span",{staticClass:"font-16 pt-1",class:t.getColor(e.yearNetIncrease)},[t._v(t._s(t.getFH(e.yearNetIncrease))+t._s(e.yearNetIncrease))])]),a("div",{staticClass:"d-flex flex-column pl-2"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("同比增幅")]),a("span",{staticClass:"font-16 pt-1",class:t.getColor(e.increment)},[t._v(t._s(t.getFH(e.increment))+t._s(e.increment)+"%")])])])])})),0)],1)],1):t._e(),1===t.statusActive?a("div",{staticClass:"px-2 pt-10 pb-10"},[t.loading?a("div",{staticClass:"d-flex justify-center pa-8"},[a("van-loading",{attrs:{type:"spinner",color:"#3561F2"}})],1):t._e(),a("van-pull-refresh",{staticClass:"pt-10",on:{refresh:t.onBusinessRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},t._l(t.dataList,(function(e,s){return a("div",{key:t.statusActive+""+s,staticClass:"businessCard mb-10"},[a("div",{staticClass:"header d-flex justify-space-between mx-2 pa-10 font-14 color-gray-4 borderBottom",on:{click:function(a){return t.businessFormClick(e)}}},[a("span",[t._v(t._s(e.businessForm))]),a("van-icon",{attrs:{size:"16px",name:"arrow"}})],1),a("div",{staticClass:"content d-flex pa-4"},[a("div",{staticClass:"flex-3 d-flex justify-space-between"},[a("div",{staticClass:"positionR font-14"},[a("div",{staticClass:"nowYear",style:"height:"+e.yearAmountProgress+"% "}),a("div",{staticClass:"label",style:"height:"+e.yearAmountProgress+"%; "},[a("span",[t._v(t._s(e.yearAmountText)+"年")])])]),a("div",{staticClass:"positionR font-14"},[a("div",{staticClass:"beforeYear",style:"height:"+e.yearOnAmountProgress+"% "}),a("div",{staticClass:"label",style:"height:"+e.yearOnAmountProgress+"%; "},[a("span",[t._v(t._s(e.yearOnAmountText)+"年")])])])]),a("div",{staticClass:"flex-4 full-height"},[a("ul",{staticClass:"pl-8 font-14 d-flex flex-column justify-space-between full-height"},[a("li",{staticClass:"d-flex justify-space-between pt-6"},[a("span",[t._v("同比增幅")]),a("span",[t._v(t._s(e.increment)+"%")])]),a("li",{staticClass:"d-flex justify-space-between"},[a("span",{staticClass:"d-flex align-center"},[a("span",{staticClass:"circle circle-1"}),a("span",{staticClass:"pl-2"},[t._v(t._s(e.yearAmountText)+"年")])]),a("span",[t._v(t._s(e.yearAmount)+" "),a("span",[t._v(t._s(e.yearAmountDWShow?"元":"万元"))])])]),a("li",{staticClass:"d-flex justify-space-between"},[a("span",{staticClass:"d-flex align-center"},[a("span",{staticClass:"circle circle-2"}),a("span",{staticClass:"pl-2"},[t._v(t._s(e.yearOnAmountText)+"年")])]),a("span",[t._v(t._s(e.yearOnAmount)+" "),a("span",[t._v(t._s(e.yearOnAmountDWShow?"元":"万元"))])])])])])])])})),0)],1):t._e(),0===t.statusActive?a("div",{staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",type:"primary",color:"#3561F2"},on:{click:function(e){t.orderTypeFlag=!0}}},[t._v(" 排序方式 ")])],1):t._e(),a("van-action-sheet",{attrs:{actions:[{name:"销售实绩正序",id:"1-1",color:t.sortField+"-"+t.sortOrder==="1-1"?"#2271F5":""},{name:"销售实绩倒序",id:"1-2",color:t.sortField+"-"+t.sortOrder==="1-2"?"#2271F5":""},{name:"同比增幅正序",id:"3-1",color:t.sortField+"-"+t.sortOrder==="3-1"?"#2271F5":""},{name:"同比增幅倒序",id:"3-2",color:t.sortField+"-"+t.sortOrder==="3-2"?"#2271F5":""}],"cancel-text":"取消","get-container":"body","close-on-click-action":""},on:{select:t.orderTypeSelect},model:{value:t.orderTypeFlag,callback:function(e){t.orderTypeFlag=e},expression:"orderTypeFlag"}}),a("van-calendar",{attrs:{"default-date":t.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:t.calendarConfirm},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}})],1)},n=[],i=a("5530"),r=a("1da1"),o=a("d4ec"),c=a("bee2"),l=a("262e"),d=a("2caf"),u=(a("96cf"),a("ac1f"),a("5319"),a("d81d"),a("99af"),a("b680"),a("e9c4"),a("1276"),a("b0c0"),a("9ab4")),h=a("1b40"),f=a("53ae"),p=a("313e"),m=a("5b92"),y=a("2279"),b=a("b32d"),v=a("7909"),g=a("4bb5"),C=Object(g["a"])("app"),O=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.orderTypeFlag=!1,t.sortField=1,t.sortOrder=2,t.entryObj={},t.calendarShow=!1,t.dateTime="",t.brandSearchDetailValue="",t.myChart=null,t.statusActive=0,t.brandHeaderObj={},t.middleList=[],t.totalLoading=!1,t}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}},{key:"brandSearchInput",value:function(t){if(0===this.statusActive)this.onRefresh();else{t||(this.dataList=this.middleList);for(var e=[],a=0;a<this.middleList.length;a++){var s=this.middleList[a];-1!==String(s.businessForm).indexOf(t)&&e.push(s)}this.dataList=e}}},{key:"statusTabClick",value:function(t){this.statusActive=t,Object(b["b"])(),0===t?this.onRefresh():(this.dataList=[],this._getFormStatListByDeptAndBrand())}},{key:"calendarConfirm",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.calendarShow=!1,this.SET_CSJNOWTIME(e),this.SET_CSJCHANGETIME(!0),this.dateTime=this.$dayjs(e).format("YYYY-MM-DD"),this._getDeptTotalStat(),this.statusTabClick(this.statusActive);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"getEcharts",value:function(t){this.myChart&&this.myChart.clear();var e,a=document.getElementById("brandEcharts");this.myChart=p["b"](a),e={series:[{type:"gauge",startAngle:180,endAngle:0,center:["50%","90%"],radius:"140%",min:-100,max:100,splitNumber:4,axisLine:{lineStyle:{width:10,color:[[.25,"#EA394B"],[.5,"#D55B26"],[.75,"#2271F5"],[1,"#00A870"]]}},pointer:{icon:"path://M12.8,0.7l12,40.1H0.7L12.8,0.7z",length:8,width:6,offsetCenter:[0,"-60%"],itemStyle:{color:"auto"}},axisTick:{lineStyle:{width:0}},splitLine:{distance:-21,length:22,lineStyle:{color:"white",width:1}},axisLabel:{formatter:function(){return""}},title:{offsetCenter:[0,"-10%"],fontSize:20},detail:{fontSize:14,offsetCenter:[0,-10],valueAnimation:!0,formatter:function(t){return t+"%"},color:"inherit"},data:[{value:t}]}]},e&&this.myChart.setOption(e)}},{key:"_getDeptTotalStat",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.totalLoading=!0,t.next=3,Object(y["n"])({date:this.dateTime,deptId:this.entryObj.id,brandId:this.entryObj.brandId});case 3:e=t.sent,"200"===e.code&&(this.totalLoading=!1,this.brandHeaderObj={value:Object(m["d"])(e.data.yearAmount,1),yearNetIncrease:Object(m["d"])(e.data.yearNetIncrease,1),increment:Object(m["d"])(e.data.yearOnPercent,2)},this.getEcharts(this.brandHeaderObj.increment));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.dataList=[],this.page=1,this.onLoad()}},{key:"onBusinessRefresh",value:function(){this.dataList=[],this._getFormStatListByDeptAndBrand(),this.refreshing=!1}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,this._getAllListByBrand()}},{key:"_getAllListByBrand",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["d"])({brandId:this.entryObj.brandId,goodsKeyword:this.brandSearchDetailValue,date:this.dateTime,deptId:this.entryObj.id,pageFlag:1,queryTop3Flag:0,pageSize:6,pageNum:this.page,sortField:this.sortField,sortOrder:this.sortOrder});case 2:e=t.sent,this.loading=!1,this.refreshing=!1,"200"===e.code?(a=e.data.list.map((function(t){return{goodsId:t.goodsId,goodsName:t.goodsName,value:Object(m["d"])(t.yearAmount,1),yearNetIncrease:Object(m["d"])(t.yearNetIncrease,1),increment:Object(m["d"])(t.yearOnPercent,2)}})),this.dataList=this.dataList.concat(a),this.total=e.data.total,e.data.hasNextPage&&this.page++,this.finished=!e.data.hasNextPage):this.error=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getFormStatListByDeptAndBrand",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(y["w"])({brandId:this.entryObj.brandId,date:this.dateTime,deptId:this.entryObj.id});case 3:e=t.sent,"200"===e.code&&(this.loading=!1,a=e.data.map((function(t){var e=v["g"]([t.yearAmount,t.yearOnAmount]);return{businessForm:t.businessForm,yearAmountText:s.$dayjs(s.dateTime).year(),yearAmount:t.yearAmount<1e3?t.yearAmount.toFixed(1):Object(m["d"])(t.yearAmount,1),yearAmountDWShow:t.yearAmount<1e3,yearAmountProgress:0===e?0:v["d"](v["c"](t.yearAmount,e),100),yearOnAmountText:s.$dayjs(s.dateTime).year()-1,yearOnAmount:t.yearOnAmount<1e3?t.yearOnAmount.toFixed(1):Object(m["d"])(t.yearOnAmount,1),yearOnAmountDWShow:t.yearOnAmount<1e3,yearOnAmountProgress:0===e?0:v["d"](v["c"](t.yearOnAmount,e),100),increment:Object(m["d"])(t.yearOnPercent,2)}})),this.dataList=a,this.middleList=JSON.parse(JSON.stringify(a)));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"orderTypeSelect",value:function(t){var e=t.id.split("-");this.sortField=e[0],this.sortOrder=e[1],this.onRefresh()}},{key:"businessFormClick",value:function(t){this.$router.push({name:"brandCollectionBusinessDetail",query:{brandId:this.entryObj.brandId,brandName:this.entryObj.brandName,date:this.dateTime,deptId:this.entryObj.id,deptName:this.entryObj.name,businessForm:t.businessForm}})}},{key:"goodsClick",value:function(t){this.$router.push({name:"brandCollectionPageGoodsDetail",query:{brandId:this.entryObj.brandId,brandName:this.entryObj.brandName,date:this.dateTime,deptId:this.entryObj.id,deptName:this.entryObj.name,goodsId:t.goodsId,goodsName:t.goodsName}})}},{key:"activated",value:function(){this.dateTime&&this.dateTime!==this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")&&(this.dateTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),this._getDeptTotalStat(),this.statusTabClick(this.statusActive))}},{key:"created",value:function(){this.entryObj=this.$route.query,this.dateTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")}},{key:"mounted",value:function(){document.documentElement.scrollTop=0,this._getDeptTotalStat()}}]),a}(Object(h["b"])(f["a"]));Object(u["a"])([C.Getter],O.prototype,"csjNowTime",void 0),Object(u["a"])([C.Getter],O.prototype,"csjChangeTime",void 0),Object(u["a"])([C.Mutation],O.prototype,"SET_CSJNOWTIME",void 0),Object(u["a"])([C.Mutation],O.prototype,"SET_CSJCHANGETIME",void 0),O=Object(u["a"])([Object(h["a"])({beforeRouteEnter:function(t,e,a){a((function(t){"brandCollectionPage"===e.name&&(t.dataList=[],t.brandSearchDetailValue="",t.onRefresh(),t.entryObj=Object(i["a"])({},t.$route.query),t.statusActive=0,t._getDeptTotalStat(),t.statusTabClick(t.statusActive))}))}})],O);var x=O,j=x,_=(a("82d9"),a("2877")),k=Object(_["a"])(j,s,n,!1,null,"7788fba6",null);e["default"]=k.exports},"53ae":function(t,e,a){"use strict";var s=a("d4ec"),n=a("bee2"),i=a("262e"),r=a("2caf"),o=(a("b0c0"),a("9ab4")),c=a("1b40");c["a"].registerHooks(["beforeRouteEnter"]);var l=function(t){Object(i["a"])(a,t);var e=Object(r["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(n["a"])(a,[{key:"beforeRouteEnter",value:function(t,e,a){a((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),a}(c["d"]);l=Object(o["a"])([Object(c["a"])({})],l),e["a"]=l},"82d9":function(t,e,a){"use strict";a("8e63")},"8e63":function(t,e,a){}}]);