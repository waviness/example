(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4860266e"],{"02ce":function(t,e,a){"use strict";a("63a9")},"03c2":function(t,e,a){"use strict";a("8c57")},"096d":function(t,e,a){"use strict";a("8c4e")},"0ae2":function(t,e,a){},1688:function(t,e,a){},1897:function(t,e,a){"use strict";a("f659")},"1db4":function(t,e,a){"use strict";a("1688")},"250a":function(t,e,a){"use strict";a("ae2a")},"289a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.dataVal&&Object.keys(t.dataVal).length>0?a("div",{staticClass:"mouthYearData"},[a("div",{staticClass:"d-flex py-4"},[a("div",{staticClass:"flex-1 d-flex flex-column ml-4"},[a("span",{staticClass:"font-14"},[t._v("预算完成进度")]),a("span",{staticClass:"font-16 mt-4"},[t._v(" "+t._s(t.dataVal.targetCompletePercent||"--")+"% ")])]),a("div",{staticClass:"flex-1 d-flex flex-column ml-4"},[a("span",{staticClass:"font-14"},[t._v("在销品规数")]),a("span",{staticClass:"font-16 mt-4"},[t._v(t._s(t.dataVal.yearInSaleGoodsNum||"--"))])]),a("div",{staticClass:"flex-1 d-flex flex-column align-center"},[a("div",{ref:"progressChart",staticClass:"progress-chart"})])])]):t._e()},n=[],r=a("d4ec"),c=a("bee2"),i=a("262e"),o=a("2caf"),l=(a("ac1f"),a("5319"),a("9ab4")),d=a("1b40"),u=a("313e"),p=function(t){Object(i["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.chartInstance=null,t}return Object(c["a"])(a,[{key:"mounted",value:function(){this.initChart()}},{key:"updated",value:function(){this.updateChart()}},{key:"initChart",value:function(){var t=this;this.$nextTick((function(){var e=t.$refs.progressChart;e&&(t.chartInstance=u["b"](e),t.updateChart())}))}},{key:"updateChart",value:function(){if(this.chartInstance&&this.dataVal){var t="--"!=this.dataVal.targetCompletePercent?this.dataVal.targetCompletePercent:0,e={series:[{type:"pie",radius:["70%","90%"],avoidLabelOverlap:!1,label:{show:!1},data:[{value:t,name:"完成",itemStyle:{borderRadius:10,color:"#3561f2"}},{value:100-t,name:"未完成",itemStyle:{color:"#ebedf0"}}]}]};this.chartInstance.setOption(e)}}},{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}}]),a}(d["d"]);Object(l["a"])([Object(d["c"])({default:function(){return{}}})],p.prototype,"dataVal",void 0),p=Object(l["a"])([Object(d["a"])({})],p);var v=p,f=v,h=(a("1db4"),a("2877")),m=Object(h["a"])(f,s,n,!1,null,"9033c57c",null);e["a"]=m.exports},"2cdd":function(t,e,a){"use strict";a("ecb2")},"3df8":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-satisfaction"},[a("div",{staticClass:"card"},[t._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t.loading?t._e():a("div",{staticClass:"content"},[a("div",{staticClass:"item",class:"--"!=this.dataVal.targetFillRateDiff?"":"pl-4"},[a("div",{staticClass:"label"},[t._v("本月货品满足率")]),a("div",{staticClass:"value"},[t._v(t._s(this.dataVal.monthGoodsFillRate)+"%")]),a("div",{staticClass:"growth",class:this.getColor(this.dataVal.monthGoodsFillRateNetIncrease)},[t._v(" "+t._s(this.getFH(this.dataVal.monthGoodsFillRateNetIncrease))+t._s(this.dataVal.monthGoodsFillRateNetIncrease)+"% ")])]),a("div",{staticClass:"item",class:"--"!=this.dataVal.targetFillRateDiff?"":"pl-4"},[a("div",{staticClass:"label"},[t._v("本年货品满足率")]),a("div",{staticClass:"value"},[t._v(t._s(this.dataVal.yearGoodsFillRate)+"%")]),a("div",{staticClass:"growth",class:this.getColor(this.dataVal.yearGoodsFillRateNetIncrease)},[t._v(" "+t._s(this.getFH(this.dataVal.yearGoodsFillRateNetIncrease))+t._s(this.dataVal.yearGoodsFillRateNetIncrease)+"% ")])]),"--"!=this.dataVal.targetFillRateDiff?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("较指标差距")]),a("div",{staticClass:"value",class:this.getColor(this.dataVal.targetFillRateDiff)},[t._v(" "+t._s(this.getFH(this.dataVal.targetFillRateDiff))+t._s(this.dataVal.targetFillRateDiff)+"% ")])]):t._e()])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("div",{staticClass:"blue-icon"}),a("div",{staticClass:"unit-name"},[t._v("货品满足")])])}],r=a("d4ec"),c=a("bee2"),i=a("262e"),o=a("2caf"),l=(a("ac1f"),a("5319"),a("9ab4")),d=a("1b40"),u=function(t){Object(i["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}}]),a}(d["d"]);Object(l["a"])([Object(d["c"])({default:function(){return{}}})],u.prototype,"dataVal",void 0),Object(l["a"])([Object(d["c"])({default:!1})],u.prototype,"loading",void 0),u=Object(l["a"])([Object(d["a"])({})],u);var p=u,v=p,f=(a("03c2"),a("2877")),h=Object(f["a"])(v,s,n,!1,null,"785a620a",null);e["a"]=h.exports},"3ec3":function(t,e,a){},"3fa5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-satisfaction"},[a("div",{staticClass:"card"},[t._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t.loading?t._e():a("div",{staticClass:"content"},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("本月无税收入")]),a("div",{staticClass:"value"},[t._v(t._s(this.dataVal.monthSalesAmount))]),a("div",{staticClass:"growth",class:t.getColor(t.dataVal.monthOnPercent)},[t._v(" "+t._s(t.getFH(t.dataVal.monthOnPercent))+t._s(t.dataVal.monthOnPercent)+"% ")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("本年无税收入")]),a("div",{staticClass:"value"},[t._v(t._s(t.dataVal.yearSalesAmount))]),a("div",{staticClass:"growth",class:t.getColor(t.dataVal.yearOnPercent)},[t._v(" "+t._s(t.getFH(t.dataVal.yearOnPercent))+t._s(t.dataVal.yearOnPercent)+"% ")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("销售占比")]),a("div",{staticClass:"value"},[t._v(t._s(t.dataVal.sharePercent)+"%")]),a("div",{staticClass:"growth",class:t.getColor(t.dataVal.sharePercentNetIncrease)},[t._v(" "+t._s(t.getFH(t.dataVal.sharePercentNetIncrease))+t._s(t.dataVal.sharePercentNetIncrease)+"% ")])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("div",{staticClass:"blue-icon"}),a("div",{staticClass:"unit-name"},[t._v("KA供应商(万元)")])])}],r=a("d4ec"),c=a("bee2"),i=a("262e"),o=a("2caf"),l=(a("ac1f"),a("5319"),a("9ab4")),d=a("1b40"),u=function(t){Object(i["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){return t>0?"+":""}}}]),a}(d["d"]);Object(l["a"])([Object(d["c"])({default:function(){return{}}})],u.prototype,"dataVal",void 0),Object(l["a"])([Object(d["c"])({default:!1})],u.prototype,"loading",void 0),u=Object(l["a"])([Object(d["a"])({})],u);var p=u,v=p,f=(a("02ce"),a("2877")),h=Object(f["a"])(v,s,n,!1,null,"2ebfa518",null);e["a"]=h.exports},5260:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-satisfaction"},[a("div",{staticClass:"card"},[t._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t.loading?t._e():a("div",{staticClass:"content"},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("触发锁控品种数")]),a("div",{staticClass:"value"},[t._v(t._s(t.dataVal.lockGoodsNum))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("触发锁控笔数")]),a("div",{staticClass:"value"},[t._v(t._s(t.dataVal.saleLockNum))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("平均锁控时效")]),a("div",{staticClass:"value"},[t._v(t._s(t.dataVal.averageUnlockCost)),a("span",{staticStyle:{"font-size":"20px"}},[t._v("min")])])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("未解锁订单数量")]),a("div",{staticClass:"value"},[t._v(t._s(t.dataVal.unlockOrderNum))])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("div",{staticClass:"blue-icon"}),a("div",{staticClass:"unit-name"},[t._v("锁控")])])}],r=a("bee2"),c=a("d4ec"),i=a("262e"),o=a("2caf"),l=a("9ab4"),d=a("1b40"),u=function(t){Object(i["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(c["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a)}(d["d"]);Object(l["a"])([Object(d["c"])({default:function(){return{}}})],u.prototype,"dataVal",void 0),Object(l["a"])([Object(d["c"])({default:!1})],u.prototype,"loading",void 0),u=Object(l["a"])([d["a"]],u);var p=u,v=p,f=(a("1897"),a("2877")),h=Object(f["a"])(v,s,n,!1,null,"87ff481a",null);e["a"]=h.exports},"58b9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-100 background-color-white"},[t.currentDept&&t.currentDept.deptId?a("DepartIndex",{ref:"departIndex4",attrs:{enterDeptObj:t.deptObj,dateTime:t.$dayjs(t.csjNowTime).format("YYYY-MM-DD"),active:t.active,showPopup:t.showPopup},on:{"update:showPopup":function(e){t.showPopup=e},"update:show-popup":function(e){t.showPopup=e},"select-department":t.handleSelectDepartment,"toggle-dept":t.handleToggleDept,"tabs-change":t.handleTabsChange,"calendar-click":t.handleCalendarClick,"depart-click":t.handleDepartClick}}):t._e(),a("van-calendar",{attrs:{"default-date":t.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:t.selectCalendar},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}})],1)},n=[],r=a("b85c"),c=a("5530"),i=a("3835"),o=(a("e7e5"),a("d399")),l=a("1da1"),d=a("d4ec"),u=a("bee2"),p=a("262e"),v=a("2caf"),f=(a("96cf"),a("7db0"),a("d3b7"),a("820e"),a("3ca3"),a("ddb0"),a("d81d"),a("25f0"),a("9ab4")),h=a("1b40"),m=a("fc4b"),b=a("b33d"),g=a("5b92"),y=a("2279"),j=a("b32d"),O=function(t){Object(p["a"])(a,t);var e=Object(v["a"])(a);function a(){var t;return Object(d["a"])(this,a),t=e.apply(this,arguments),t.dateTime="",t.calendarShow=!1,t.showPopup=!1,t.currentDept=null,t.active="1",t.deptObj={},t.departNameTabs=[],t.purchaseDataObj={},t.goodsSatisfactionData={},t.kaPurveyorData={},t.saleLockData={},t.turnoverData={},t.sonObjectStatList={},t.authDeptSales=[],t}return Object(u["a"])(a,[{key:"loadAllData",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,r,c,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=!(l.length>0&&void 0!==l[0])||l[0],a=l.length>1&&void 0!==l[1]&&l[1],o["a"].loading({forbidClick:!0,duration:0}),t.prev=3,!a){t.next=7;break}return t.next=7,this._getAuthDeptSales().catch((function(t){}));case 7:if(e&&this.authDeptSales[0]&&(n=Object(i["a"])(this.authDeptSales,1),r=n[0],this.currentDept=r.authFlag?r:r.sonDeptSalesDTOList.find((function(t){return t.authFlag})),Object.assign(this.deptObj,{deptName:this.currentDept.deptName,deptId:this.currentDept.deptId})),c=null===(s=this.currentDept)||void 0===s?void 0:s.deptId,!c){t.next=12;break}return t.next=12,Promise.allSettled([this.fetchGeneralStat(c),this._getSaleLockStat(c),this.getGoodsSatisfactionInfos(c),this._getKaPurveyorStat(c),this._getTurnoverDaysInfo(c)]);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3);case 17:return t.prev=17,o["a"].clear(),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[3,14,17,20]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getSaleLockStat",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:e,objectType:1,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},t.next=3,Object(y["H"])(a);case 3:s=t.sent,"200"==s.code&&(this.saleLockData={lockGoodsNum:s.data.lockGoodsNum,saleLockNum:s.data.saleLockNum,averageUnlockCost:s.data.averageUnlockCost,unlockOrderNum:s.data.unlockOrderNum});case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getTurnoverDaysInfo",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:e,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},t.next=3,Object(y["R"])(a);case 3:s=t.sent,"200"==s.code&&(this.turnoverData={monthTurnoverDays:s.data.monthTurnoverDays,monthTurnoverDaysNetDiff:s.data.monthTurnoverDaysNetDiff,yearTurnoverDays:s.data.yearTurnoverDays,yearTurnoverDaysNetDiff:s.data.yearTurnoverDaysNetDiff,targetDiffPercent:s.data.targetDiffPercent});case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getGoodsSatisfactionInfos",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:e,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},t.next=3,Object(y["y"])(a);case 3:s=t.sent,"200"==s.code&&(this.goodsSatisfactionData={monthGoodsFillRate:Object(g["d"])(s.data.monthGoodsFillRate,2),monthGoodsFillRateNetIncrease:Object(g["d"])(s.data.monthGoodsFillRateNetIncrease,2),yearGoodsFillRate:Object(g["d"])(s.data.yearGoodsFillRate,2),yearGoodsFillRateNetIncrease:Object(g["d"])(s.data.yearGoodsFillRateNetIncrease,2),targetFillRateDiff:Object(g["d"])(s.data.targetFillRateDiff,2)});case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getKaPurveyorStat",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:e,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},t.next=3,Object(y["z"])(a);case 3:s=t.sent,"200"==s.code&&(this.kaPurveyorData={monthSalesAmount:Object(g["d"])(s.data.monthSalesAmount,1),monthOnPercent:Object(g["d"])(s.data.monthOnPercent,2),yearSalesAmount:Object(g["d"])(s.data.yearSalesAmount,1),yearOnPercent:Object(g["d"])(s.data.yearOnPercent,2),sharePercent:Object(g["d"])(s.data.sharePercent,2),sharePercentNetIncrease:Object(g["d"])(s.data.sharePercentNetIncrease,2)});case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"fetchGeneralStat",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={objectId:e,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),objectType:1,type:parseInt(this.active)},t.next=3,Object(y["x"])(a);case 3:s=t.sent,"200"==s.code&&(n=s.data,this.sonObjectStatList=s.data.sonObjectStatList.map((function(t){return{generalObjectId:t.generalObjectId,generalObjectName:t.generalObjectName,yearRevenue:Object(g["d"])(t.revenue,1),yearRevenueOnPercent:Object(g["d"])(t.revenueOnPercent,2),zcAmount:Object(g["d"])(t.zcAmount,1),zcPercent:Object(g["d"])(t.zcPercent,2),zcProgress:Object(g["d"])(t.zcProgress,2),fzcAmount:Object(g["d"])(t.fzcAmount,1),fzcPercent:Object(g["d"])(t.fzcPercent,2),fzcProgress:Object(g["d"])(t.fzcProgress,2),yearInSaleGoodsNum:t.saleGoodsNum,yearInSaleGoodsNumOnPercent:Object(g["d"])(t.saleGoodsNumOnPercent,2)}})),this.purchaseDataObj={yearRevenue:Object(g["d"])(n.currentObjectStat.revenue,1),yearRevenueOnPercent:Object(g["d"])(n.currentObjectStat.revenueOnPercent,2),zcAmount:Object(g["d"])(n.currentObjectStat.zcAmount,1),zcPercent:Object(g["d"])(n.currentObjectStat.zcPercent,2),zcProgress:Object(g["d"])(n.currentObjectStat.zcProgress,2),fzcAmount:Object(g["d"])(n.currentObjectStat.fzcAmount,1),fzcPercent:Object(g["d"])(n.currentObjectStat.fzcPercent,2),fzcProgress:Object(g["d"])(n.currentObjectStat.fzcProgress,2),yearInSaleGoodsNum:n.currentObjectStat.saleGoodsNum,yearInSaleGoodsNumOnPercent:Object(g["d"])(n.currentObjectStat.saleGoodsNumOnPercent,2),targetCompletePercent:Object(g["d"])(n.currentObjectStat.targetCompletePercent,2),targetGoalDiff:n.currentObjectStat.targetGoalDiff});case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getAuthDeptSales",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),deptFlag:1,full:!0,deptid:""},t.next=3,Object(y["e"])(a);case 3:s=t.sent,"200"==s.code&&null!==(e=s.data)&&void 0!==e&&e.resultList?this.authDeptSales=s.data.resultList.map((function(t){return{deptId:t.DEPT_ID,deptName:t.DEPT_NAME,authFlag:t.AUTH_FLAG,sonDeptSalesDTOList:(t.SON_DEPT_LIST||[]).map((function(t){return{deptId:t.DEPT_ID,deptName:t.DEPT_NAME,authFlag:t.AUTH_FLAG}})),isExpanded:!1}})):this.authDeptSales=[];case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectCalendar",value:function(t){this.calendarConfirm(t)}},{key:"calendarConfirm",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.calendarShow=!1,this.SET_CSJNOWTIME(e),this.SET_CSJCHANGETIME(!0),t.next=5,this.loadAllData(!1,!1);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleSelectDepartment",value:function(t){this.showPopup=!1,this.currentDept=t,this.deptObj=Object(c["a"])(Object(c["a"])({},this.deptObj),{},{deptName:t.deptName,deptId:t.deptId}),this.loadAllData(!1,!0)}},{key:"handleToggleDept",value:function(t){t.isExpanded=!t.isExpanded}},{key:"handleTabsChange",value:function(t){this.active=t.toString(),this.loadAllData(!1)}},{key:"handleCalendarClick",value:function(){this.calendarShow=!0}},{key:"handleDepartClick",value:function(){}},{key:"onRouteQueryChange",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=!1,!e.deptId||this.currentDept&&this.currentDept.deptId===e.deptId){t.next=7;break}if(this.authDeptSales&&0!==this.authDeptSales.length){t.next=5;break}return t.next=5,this._getAuthDeptSales();case 5:s=this.findDepartmentById(e.deptId),s&&(this.currentDept=s,this.deptObj=Object(c["a"])(Object(c["a"])({},this.deptObj),{},{deptName:s.deptName,deptId:s.deptId}),a=!0);case 7:if(e.selectDate&&(n=new Date(e.selectDate),this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")!==this.$dayjs(n).format("YYYY-MM-DD")&&(this.SET_CSJNOWTIME(n),this.SET_CSJCHANGETIME(!0),a=!0)),e.objectType&&this.active!==e.objectType&&(this.active=e.objectType,a=!0),!a){t.next=12;break}return t.next=12,this.loadAllData(!0,!0);case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"findDepartmentById",value:function(t){var e=function e(a){var s,n=Object(r["a"])(a);try{for(n.s();!(s=n.n()).done;){var c=s.value;if(c.deptId===t)return c;if(c.sonDeptSalesDTOList){var i=e(c.sonDeptSalesDTOList);if(i)return i}}}catch(o){n.e(o)}finally{n.f()}return null};return e(this.authDeptSales)}},{key:"mounted",value:function(){var t=this.$route.query,e=t.deptId,a=t.deptName;e&&a&&(this.currentDept={deptId:e,deptName:a},this.deptObj={deptId:e,deptName:a})}},{key:"destroyed",value:function(){Object(j["b"])()}}]),a}(Object(h["b"])(b["a"]));O=Object(f["a"])([Object(h["a"])({components:{DepartIndex:m["a"]}})],O);var _=O,D=_,C=a("2877"),S=Object(C["a"])(D,s,n,!1,null,"f5d729ee",null);e["default"]=S.exports},"5c6e":function(t,e,a){"use strict";a("3ec3")},"63a9":function(t,e,a){},"7fff":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-satisfaction"},[a("div",{staticClass:"card"},[t._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t.loading?t._e():a("div",{staticClass:"content"},[a("div",{staticClass:"item",class:t.dataVal.targetDiffPercent?"":"pl-4"},[a("div",{staticClass:"label"},[t._v("本月库存周转")]),a("div",{staticClass:"value"},[t._v(t._s(t.dataVal.monthTurnoverDays)),a("span",{staticStyle:{"font-size":"22px"}},[t._v("天")])]),a("div",{staticClass:"growth",class:t.getColor(t.dataVal.monthTurnoverDaysNetDiff)},[t._v(" "+t._s(t.getFH(t.dataVal.monthTurnoverDaysNetDiff))+t._s(t.dataVal.monthTurnoverDaysNetDiff)),a("span",{staticStyle:{"font-size":"12px"}},[t._v("天")])])]),a("div",{staticClass:"item",class:t.dataVal.targetDiffPercent?"":"pl-4"},[a("div",{staticClass:"label"},[t._v("本年库存周转")]),a("div",{staticClass:"value"},[t._v(t._s(t.dataVal.yearTurnoverDays)),a("span",{staticStyle:{"font-size":"22px"}},[t._v("天")])]),a("div",{staticClass:"growth",class:t.getColor(t.dataVal.yearTurnoverDaysNetDiff)},[t._v(" "+t._s(t.getFH(t.dataVal.yearTurnoverDaysNetDiff))+t._s(t.dataVal.yearTurnoverDaysNetDiff)),a("span",{staticStyle:{"font-size":"12px"}},[t._v("天")])])]),t.dataVal.targetDiffPercent?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("较指标差距")]),a("div",{staticClass:"value",class:t.getColor(t.dataVal.yearTurnoverDaysNetDiff)},[t._v(" "+t._s(t.getFH(t.dataVal.targetDiffPercent))+t._s(t.dataVal.targetDiffPercent||"--")+"% ")])]):t._e()])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("div",{staticClass:"blue-icon"}),a("div",{staticClass:"unit-name"},[t._v("库存周转")])])}],r=a("d4ec"),c=a("bee2"),i=a("262e"),o=a("2caf"),l=(a("ac1f"),a("5319"),a("9ab4")),d=a("1b40"),u=function(t){Object(i["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}}]),a}(d["d"]);Object(l["a"])([Object(d["c"])({default:function(){return{}}})],u.prototype,"dataVal",void 0),Object(l["a"])([Object(d["c"])({default:!1})],u.prototype,"loading",void 0),u=Object(l["a"])([d["a"]],u);var p=u,v=p,f=(a("096d"),a("2877")),h=Object(f["a"])(v,s,n,!1,null,"66081292",null);e["a"]=h.exports},"83a2":function(t,e,a){"use strict";a("e64d")},"84c3":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.shouldShow?a("div",{staticClass:"balance-gross",on:{click:t.navigateToBalanceGross}},[a("div",{staticClass:"circle-btn"},[a("van-icon",{staticClass:"icon-left",attrs:{name:"circle",size:"16px"}}),a("span",{staticClass:"btn-text"},[t._v("点击进入平衡毛利面板")]),a("van-icon",{staticClass:"icon-right",attrs:{name:"arrow",size:"16px"}})],1)]):t._e()},n=[],r=a("d4ec"),c=a("bee2"),i=a("262e"),o=a("2caf"),l=(a("7db0"),a("d3b7"),a("9ab4")),d=a("1b40"),u=function(t){Object(i["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.defaultDeptId="",t.defaultDeptName="",t.departments=[{deptId:968,deptName:"英特药业"},{deptId:974,deptName:"英特电商"},{deptId:998,deptName:"宁波英特"},{deptId:984,deptName:"温州英特"},{deptId:985,deptName:"台州英特"},{deptId:990,deptName:"嘉兴英特"},{deptId:991,deptName:"嘉信医药"},{deptId:992,deptName:"湖州英特"},{deptId:993,deptName:"绍兴英特"},{deptId:994,deptName:"金华英特"},{deptId:995,deptName:"浦江英特"},{deptId:996,deptName:"丽水英特"},{deptId:997,deptName:"英特海斯"},{deptId:999,deptName:"明州英特"},{deptId:1e3,deptName:"舟山卫盛"},{deptId:1001,deptName:"淳安英特"},{deptId:1002,deptName:"英特盛健"},{deptId:1042,deptName:"英特生物"}],t}return Object(c["a"])(a,[{key:"shouldShow",get:function(){var t=JSON.parse(localStorage.getItem("phmlArray")||"[]");return!!(Array.isArray(t)&&t.length>0)&&(this.calculateDefaultDeptId(t),!0)}},{key:"calculateDefaultDeptId",value:function(t){var e=this.departments.find((function(e){return e.deptName==t[0]}));this.defaultDeptId=e?e.deptId:null,this.defaultDeptName=t[0]}},{key:"navigateToBalanceGross",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605006,menuName:"平衡毛利",menuOperation:"平衡毛利点击载入",operationType:1});var t=JSON.parse(localStorage.getItem("phmlArray")||"[]");Array.isArray(t)&&1==t.length?this.$router.push({name:"BalanceGross",query:{deptId:this.defaultDeptId,deptName:this.defaultDeptName,type:"0",role:this.$route.query.role}}):this.$router.push({name:"AllBalanceGross",query:{role:this.$route.query.role}})}}]),a}(d["d"]);u=Object(l["a"])([d["a"]],u);var p=u,v=p,f=(a("250a"),a("2877")),h=Object(f["a"])(v,s,n,!1,null,"a585606a",null);e["a"]=h.exports},8966:function(t,e,a){"use strict";a("a69e")},"8c4e":function(t,e,a){},"8c57":function(t,e,a){},9399:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mouthYearData"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.pdloading,expression:"pdloading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t.pdloading?t._e():a("div",{staticClass:"d-flex py-4"},[a("div",{staticClass:"flex-1 d-flex flex-column align-left ml-1"},[a("span",{staticClass:"font-14"},[t._v("非战略采购")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.dataVal.fzcAmount))]),a("span",{staticClass:"font-14 mt-5"},[t._v("同比增长")]),a("span",{staticClass:"font-16",class:t.getColor(t.dataVal.fzcPercent)},[t._v(" "+t._s(t.getFH(t.dataVal.fzcPercent))+t._s(t.dataVal.fzcPercent)+"% ")])]),a("div",{staticClass:"flex-1 d-flex flex-column align-left pl-2 border-solid"},[a("span",{staticClass:"font-14"},[t._v("战略采购")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.dataVal.zcAmount))]),a("span",{staticClass:"font-14 mt-5"},[t._v("同比增长")]),a("span",{staticClass:"font-16",class:t.getColor(t.dataVal.zcPercent)},[t._v(" "+t._s(t.getFH(t.dataVal.zcPercent))+t._s(t.dataVal.zcPercent)+"% ")])]),a("div",{staticClass:"flex-1 d-flex flex-column align-left ml-1"},[a("span",{staticClass:"font-14"},[t._v("在销品规数")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.dataVal.yearInSaleGoodsNum||"--"))]),a("span",{staticClass:"font-14 mt-5"},[t._v("同比增长")]),a("span",{staticClass:"font-16",class:t.getColor(t.dataVal.yearInSaleGoodsNumOnPercent)},[t._v(" "+t._s(t.getFH(t.dataVal.yearInSaleGoodsNumOnPercent))+t._s(t.dataVal.yearInSaleGoodsNumOnPercent)+"% ")])])])])},n=[],r=a("d4ec"),c=a("bee2"),i=a("262e"),o=a("2caf"),l=(a("ac1f"),a("5319"),a("9ab4")),d=a("1b40"),u=function(t){Object(i["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){return t>0?"+":""}}}]),a}(d["d"]);Object(l["a"])([Object(d["c"])({default:!1})],u.prototype,"pdloading",void 0),Object(l["a"])([Object(d["c"])()],u.prototype,"activeValue",void 0),Object(l["a"])([Object(d["c"])({default:function(){return{}}})],u.prototype,"dataVal",void 0),u=Object(l["a"])([Object(d["a"])({})],u);var p=u,v=p,f=(a("83a2"),a("2877")),h=Object(f["a"])(v,s,n,!1,null,"fa09dec0",null);e["a"]=h.exports},a69e:function(t,e,a){},ae2a:function(t,e,a){},b33d:function(t,e,a){"use strict";var s=a("d4ec"),n=a("bee2"),r=a("262e"),c=a("2caf"),i=(a("d3b7"),a("9ab4")),o=a("1b40"),l=a("2279"),d=a("4bb5");o["a"].registerHooks(["beforeRouteEnter"]);var u=Object(d["a"])("app"),p=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return Object(n["a"])(a,[{key:"_getAuthDeptSalesMix",value:function(t){return new Promise((function(e,a){Object(l["e"])(t).then((function(t){e(t)})).catch((function(t){a(t)}))}))}}]),a}(o["d"]);Object(i["a"])([u.Getter],p.prototype,"csjDepartObj",void 0),Object(i["a"])([u.Getter],p.prototype,"csjNowTime",void 0),Object(i["a"])([u.Getter],p.prototype,"csjChangeTime",void 0),Object(i["a"])([u.Mutation],p.prototype,"SET_CSJNOWTIME",void 0),Object(i["a"])([u.Mutation],p.prototype,"SET_CSJCHANGETIME",void 0),Object(i["a"])([u.Mutation],p.prototype,"SET_CSJDEPARTOBJ",void 0),p=Object(i["a"])([Object(o["a"])({})],p),e["a"]=p},de94:function(t,e,a){"use strict";a("0ae2")},e64d:function(t,e,a){},ecb2:function(t,e,a){},f659:function(t,e,a){},fc4b:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header d-flex align-center"},[a("div",{staticClass:"flex-3 pl-8 d-flex align-center",on:{click:function(e){return t.handleShowPopup(!0)}}},[a("span",{staticClass:"dept-name"},[t._v(t._s(t.currentDept?t.currentDept.deptName:"加载中..."))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1),a("div",{staticClass:"flex-2 textAlignR pr-8",on:{click:t.calendarClick}},[a("span",{staticClass:"time"},[t._v(t._s(t.dateTime))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)]),a("div",{staticClass:"totalContent ma-2"},[a("div",{staticClass:"main-content d-flex justify-space-between"},[a("div",{staticClass:"dailySales background-color-main-3 background-color-white flex-5"},[a("div",{staticClass:"d-flex flex-column pt-4 pl-4"},[a("div",{staticClass:"font-14"},[t._v(t._s("1"==t.activeValue?"年":"月")+"营收实绩(万元)")]),a("div",{staticClass:"font-14 mt-2 mb-1"},[t._v(" "+t._s("1"==t.activeValue?"年":"月")+"同比："+t._s(t.purchaseDataObj.yearRevenueOnPercent)+"% ")]),a("div",{staticClass:"font-28 py-1 fontWeight"},[t._v(" "+t._s(t.purchaseDataObj.yearRevenue)+" ")])])]),t.showPurdate?a("div",{staticClass:"dataTrend white-block flex-3",on:{click:t.handleTrendClick}},[a("div",{staticClass:"d-flex px-3 pt-4 align-center justify-space-between"},[a("span",{staticClass:"font-14"},[t._v("数据趋势")]),a("van-icon",{attrs:{name:"arrow",size:"16px"}})],1)]):a("div",{staticClass:"dataTrend2 white-block flex-3"},[t._m(0),"--"!=t.purchaseDataObj.targetCompletePercent?a("div",{staticClass:"d-flex px-3 pt-1 align-center justify-space-between"},[a("span",{staticClass:"font-14 pl-1"},[t._v(t._s(t.purchaseDataObj.yearInSaleGoodsNum))])]):t._e(),"--"!=t.purchaseDataObj.targetCompletePercent?a("div",{staticClass:"d-flex px-3 pt-2 align-center justify-space-between"},[a("span",{staticClass:"font-14 color-gray-4 pl-1"},[t._v("预算完成进度")])]):t._e(),"--"!=t.purchaseDataObj.targetCompletePercent?a("div",{staticClass:"d-flex px-3 pt-1 align-center justify-space-between"},[a("span",{staticClass:"font-14 pl-1"},[t._v(t._s(t.purchaseDataObj.targetCompletePercent)+"%")])]):t._e(),"--"==t.purchaseDataObj.targetCompletePercent?a("div",{staticClass:"d-flex px-3 mt-7 align-center justify-space-between"},[a("span",{staticClass:"font-28 fontWeight pl-1"},[t._v(t._s(t.purchaseDataObj.yearInSaleGoodsNum))])]):t._e()])])]),t.showPurdate?a("div",{staticClass:"totalData background-color-white mt-2"},[a("PurchaseData",{attrs:{activeValue:t.activeValue,dataVal:t.purchaseDataObj,pdloading:t.pdloading}})],1):t._e(),t.showDepartData?a("div",{staticClass:"departData"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.pdloading,expression:"pdloading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t.pdloading?t._e():a("van-tabs",{attrs:{color:"#3561f2"}},t._l(t.sonObjectStatList,(function(e){return a("van-tab",{key:e.generalObjectId,staticClass:"background-color-white",attrs:{title:e.generalObjectName}},[a("div",{staticClass:"departData-header"},[a("div",{staticClass:"border-bot"},[a("div",{staticClass:"active-dept",on:{click:function(a){return t.departClick(e)}}},[a("div",{staticClass:"blue-icon"}),a("div",{staticClass:"flex-2 font-16"},[t._v(t._s(e.generalObjectName))]),a("div",{staticClass:"flex-3"},[a("span",{staticClass:"color-second font-10"},[t._v("在销品规数 ")]),a("span",{staticClass:"color-main-3"},[t._v(t._s(e.yearInSaleGoodsNum))])]),a("van-icon",{staticClass:"right",attrs:{name:"arrow"}})],1)]),a("div",{staticClass:"d-flex pt-3 px-2"},[a("div",{staticClass:"flex-1 d-flex flex-column align-left pl-2"},[a("span",{staticClass:"font-14 color-gray-4"},[t._v("非战略采购")]),a("span",{staticClass:"font-16 mt-2"},[t._v(t._s(e.fzcAmount))])]),a("div",{staticClass:"flex-1 d-flex flex-column align-left pl-2"},[a("span",{staticClass:"font-14 color-gray-4"},[t._v(t._s("1"==t.activeValue?"年":"月")+"同比")]),a("span",{staticClass:"font-16 mt-2",class:t.getColor(e.fzcPercent)},[t._v(t._s(t.getFH(e.fzcPercent))+t._s(e.fzcPercent)+"%")])]),a("div",{staticClass:"flex-1 d-flex flex-column align-left pl-2"},[a("span",{staticClass:"font-14 color-gray-4"},[t._v("战略采购")]),a("span",{staticClass:"font-16 mt-2"},[t._v(t._s(e.zcAmount))])]),a("div",{staticClass:"flex-1 d-flex flex-column align-left pl-2"},[a("span",{staticClass:"font-14 color-gray-4"},[t._v(t._s("1"==t.activeValue?"年":"月")+"同比")]),a("span",{staticClass:"font-16 mt-2",class:t.getColor(e.zcPercent)},[t._v(t._s(t.getFH(e.zcPercent))+t._s(e.zcPercent)+"%")])])])])])})),1)],1):t._e(),a("div",{staticClass:"background-color-white"},[a("GoodsSatisfaction",{attrs:{dataVal:t.goodsSatisfactionData,loading:t.gsloading}}),a("ka-purveyor",{attrs:{dataVal:t.kaPurveyorData,loading:t.kaloading}}),t.showPurdate?a("sale-lock",{attrs:{dataVal:t.saleLockData,loading:t.lockloading}}):t._e(),a("turnover-data",{attrs:{dataVal:t.turnoverData,loading:t.tdloading}})],1),a("div",[a("balance-gross")],1),t.showItemBox?a("div",{staticClass:"item_box background-color-white"},t._l(t.sonObjectStatList,(function(e){return a("div",{key:e.generalObjectName,staticClass:"item"},[a("div",{staticClass:"item_title d-flex justify-space-between"},[a("div",{staticClass:"blue-icon"}),a("div",{staticClass:"color-main-2 flex-1"},[t._v(t._s(e.generalObjectName))]),a("div",[t._v(" 在销品规数"),a("span",{staticClass:"color-main-2"},[t._v(t._s(e.yearInSaleGoodsNum||0))])])]),a("div",{staticClass:"item_line"}),a("div",{staticClass:"d-flex flex-column item_body",staticStyle:{gap:"10px"}},[a("div",{staticClass:"item_content"},[a("div",{staticClass:"item_content_title"},[t._v("非战采")]),a("div",{staticClass:"item_content_title"},[t._v(t._s("1"==t.activeValue?"年":"月")+"同比")]),a("div",{staticClass:"item_content_title"},[t._v("预算进度")]),a("div",{staticClass:"item_content_title"},[t._v("战采")]),a("div",{staticClass:"item_content_title"},[t._v(t._s("1"==t.activeValue?"年":"月")+"同比")]),a("div",{staticClass:"item_content_title"},[t._v("预算进度")])]),a("div",{staticClass:"item_content"},[a("div",{staticClass:"item_content_value"},[t._v(t._s(e.zcAmount))]),a("div",{class:t.getColor(e.zcPercent)},[t._v(t._s(e.zcPercent)+"%")]),a("div",{staticClass:"item_content_value"},[t._v(t._s(e.zcProgress))]),a("div",{staticClass:"item_content_value"},[t._v(t._s(e.fzcAmount))]),a("div",{class:t.getColor(e.fzcPercent)},[t._v(t._s(e.fzcPercent)+"%")]),a("div",{staticClass:"item_content_value"},[t._v(t._s(e.fzcProgress))])])])])})),0):t._e(),t.showItemBox2?a("div",{staticClass:"item_box background-color-white"},t._l(t.sonObjectStatList,(function(e){return a("div",{key:e.generalObjectName,staticClass:"item"},[a("div",{staticClass:"item_title d-flex justify-space-between"},[a("div",{staticClass:"blue-icon"}),a("div",{staticClass:"color-main-2 flex-1"},[t._v(t._s(e.generalObjectName))]),a("div",[t._v(" 分管品规数"),a("span",{staticClass:"color-main-2"},[t._v(t._s(e.underLyingGoodsNum||0)+"(本年有销售"+t._s(e.yearInSaleGoodsNum)+")")])])]),a("div",{staticClass:"item_line"}),a("div",{staticClass:"d-flex item_body justify-space-between",staticStyle:{gap:"10px"}},[a("div",{staticClass:"flex-1 ml-5"},[a("div",{staticClass:"font-12 color-gray-4"},[t._v("本"+t._s("1"==t.activeValue?"年":"月")+"营收实绩")]),a("div",{staticClass:"font-12 mt-2"},[t._v(t._s(e.yearRevenue))])]),a("div",{staticClass:"flex-1 ml-5"},[a("div",{staticClass:"font-12 color-gray-4"},[t._v("本"+t._s("1"==t.activeValue?"年":"月")+"同比")]),a("div",{staticClass:"font-12 mt-2",class:t.getColor(e.yearRevenueOnPercent)},[t._v(" "+t._s(e.yearRevenueOnPercent||"--")+"% ")])])])])})),0):t._e(),a("div",{staticClass:"endTab"},[a("van-tabs",{attrs:{type:"card"},on:{change:t.ClickTab},model:{value:t.activeValue,callback:function(e){t.activeValue=e},expression:"activeValue"}},[a("van-tab",{attrs:{title:"年",name:"1"}}),a("van-tab",{attrs:{title:"月",name:"2"}})],1)],1),a("van-popup",{style:{height:"100%"},attrs:{position:"top",closeable:""},model:{value:t.showPopupValue,callback:function(e){t.showPopupValue=e},expression:"showPopupValue"}},[a("dept-select",{attrs:{"auth-dept-sales":t.authDeptSales,"now-data":t.currentDept&&t.currentDept.deptId},on:{"select-department":t.handleSelectDepartment}})],1),a("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},model:{value:t.echartsShow,callback:function(e){t.echartsShow=e},expression:"echartsShow"}},[t.echartsShow?a("DataTrend",{attrs:{deptId:t.currentDept&&t.currentDept.deptId,selectDate:t.dateTime,objectType:t.active}}):t._e()],1),a("van-calendar",{attrs:{"default-date":t.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:t.selectCalendar},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex px-3 pt-4 align-center justify-space-between"},[a("span",{staticClass:"font-14 color-gray-4 pl-1"},[t._v("在销品规数")])])}],r=a("5530"),c=a("3835"),i=a("1da1"),o=a("d4ec"),l=a("bee2"),d=a("262e"),u=a("2caf"),p=(a("96cf"),a("d3b7"),a("25f0"),a("ac1f"),a("5319"),a("7db0"),a("820e"),a("3ca3"),a("ddb0"),a("d81d"),a("b0c0"),a("b64b"),a("caad"),a("2532"),a("9ab4")),v=a("1b40"),f=a("9399"),h=a("3df8"),m=a("3fa5"),b=a("5260"),g=a("7fff"),y=a("84c3"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-trend"},[a("span",{staticClass:"echartsTitle"},[t._v(t._s("1"==t.objectType?"月":"连续8周")+"销售趋势图(万元)")]),a("div",{ref:"chartRef",staticClass:"chart-container"}),-1!==t.activeIndex?a("div",{staticClass:"value-tooltip"},[a("div",{staticClass:"tooltip-content"},[t.salesData.salesAmounts[t.activeIndex]?a("div",{staticClass:"tooltip-item"},[a("span",{staticClass:"label"},[t._v("销售额：")]),a("span",{staticClass:"value"},[t._v(t._s(t.formatValue(t.salesData.salesAmounts[t.activeIndex])))])]):t._e(),a("div",{staticClass:"tooltip-item"},[a("span",{staticClass:"label"},[t._v("同期销售额：")]),a("span",{staticClass:"value"},[t._v(t._s(t.formatValue(t.salesData.onSalesAmounts[t.activeIndex])))])])])]):t._e()])},O=[],_=(a("b680"),a("cb29"),a("a630"),a("2279")),D=a("313e"),C=function(t){Object(d["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.chart=null,t.salesData={salesAmounts:[],onSalesAmounts:[]},t.activeIndex=-1,t.handleResize=function(){t.chart&&t.chart.resize()},t}return Object(l["a"])(a,[{key:"formatValue",value:function(t){return"".concat((t/1e4).toFixed(2),"万")}},{key:"onPropsChange",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchData();case 2:window.addEventListener("resize",this.handleResize);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fetchData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"1"!==this.objectType){t.next=8;break}return t.next=4,Object(_["B"])({deptId:this.deptId,selectDate:this.selectDate,objectType:1});case 4:e=t.sent,"200"===e.code&&(this.salesData=e.data,this.initChart()),t.next=12;break;case 8:return t.next=10,Object(_["c"])({deptId:this.deptId,selectDate:this.selectDate,objectType:1});case 10:a=t.sent,"200"===a.code&&(this.salesData=a.data,this.initChart());case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"initChart",value:function(){var t=this,e=this.$refs.chartRef;this.chart||(this.chart=D["b"](e));var a=this.getXAxisData(),s=Math.max(50*a.length,e.clientHeight),n={tooltip:{show:!1},grid:{left:"5%",right:"25%",bottom:"3%",top:"3%",height:s,containLabel:!0},xAxis:{type:"value",show:!1},yAxis:{type:"category",data:a,inverse:!0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{margin:20,fontSize:14,color:"#333"},splitArea:{show:!0,areaStyle:{color:["#fafbfe","#fafbfe"]}}},animationDuration:1e3,animationEasing:"cubicInOut",animationDelay:function(t){return 100*t},series:[{name:"同期销售额",type:"line",data:this.salesData.onSalesAmounts.map((function(t){return{value:(t/1e4).toFixed(2),itemStyle:{color:"#999",borderWidth:0}}})),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:2,color:"#999",type:"dashed"},areaStyle:{color:new D["a"].LinearGradient(1,0,0,0,[{offset:0,color:"rgba(53, 97, 242, 0.3)"},{offset:1,color:"rgba(53, 97, 242, 0.1)"}])}},{name:"销售额",type:"line",data:this.salesData.salesAmounts.map((function(t){return{value:(t/1e4).toFixed(2),itemStyle:{color:"#3561f2",borderWidth:0}}})),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:2,color:"#3561f2",type:"line"}}]};this.chart.setOption(n),this.chart.getZr().on("click",(function(e){var a=t.chart.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY]);if(a){var s=Math.max(0,Math.min(Math.floor(a[1]),t.getXAxisData().length-1));t.activeIndex=t.activeIndex===s?-1:s;var n={yAxis:{splitArea:{areaStyle:{color:Array(t.getXAxisData().length).fill("").map((function(e,a){return a===t.activeIndex?"#f2f3fd":"#fafbfe"}))}}}};t.chart.setOption(n)}}))}},{key:"getXAxisData",value:function(){return"1"===this.objectType?Array.from({length:12},(function(t,e){return"".concat(e+1,"月")})):Array.from({length:8},(function(t,e){return"第".concat(e+1,"周")}))}},{key:"beforeDestroy",value:function(){this.chart&&(this.chart.dispose(),this.chart=null),window.removeEventListener("resize",this.handleResize)}}]),a}(v["d"]);Object(p["a"])([Object(v["c"])({required:!0})],C.prototype,"deptId",void 0),Object(p["a"])([Object(v["c"])({required:!0})],C.prototype,"selectDate",void 0),Object(p["a"])([Object(v["c"])({required:!0})],C.prototype,"objectType",void 0),Object(p["a"])([Object(v["e"])("deptId"),Object(v["e"])("selectDate"),Object(v["e"])("objectType")],C.prototype,"onPropsChange",null),C=Object(p["a"])([v["a"]],C);var S=C,w=S,x=(a("2cdd"),a("2877")),k=Object(x["a"])(w,j,O,!1,null,"61b57aa2",null),N=k.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-height"},[a("van-field",{staticClass:"top-search",attrs:{placeholder:"输入关键词","left-icon":"search"},on:{input:t.search},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("div",{staticClass:"popup-body pb-6"},[a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.parentDeptList.length>0,expression:"parentDeptList.length > 0"}],staticClass:"zz-div color-black-2 font-14 pl-3 van-popup-bg"},[t._v("上级部门")]),t._l(t.parentDeptList,(function(e,s){return a("div",{key:s+"parent",staticClass:"popup-data d-flex align-center justify-space-between pl-3 pr-4 font-14",on:{click:function(a){return t.chooseData(e,t.nowData==e.deptId)}}},[a("span",{class:t.itemStyle(e),domProps:{innerHTML:t._s(e.deptName)}}),a("van-icon",{staticClass:"color-gray-4",attrs:{name:"arrow"}})],1)}))],2),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.childDeptList.length>0,expression:"childDeptList.length > 0"}],staticClass:"zz-div color-black-2 font-14 pl-3 van-popup-bg"},[t._v("下级部门")]),t._l(t.childDeptList,(function(e,s){return a("div",{key:s+"child",staticClass:"popup-data d-flex align-center justify-space-between pl-3 pr-4 font-14",on:{click:function(a){return t.chooseData(e,t.nowData==e.deptId)}}},[a("span",{class:t.itemStyle(e)},[t._v(" "+t._s(e.deptName)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.parentDeptName,expression:"data.parentDeptName"}],staticClass:"font-12"},[t._v("("+t._s(e.parentDeptName)+")")])]),a("van-icon",{staticClass:"color-gray-4",attrs:{name:"arrow"}})],1)}))],2)])],1)},I=[],T=(a("159b"),a("99af"),a("e9c4"),function(t){Object(d["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.keyword="",t.parentDeptList=[],t.childDeptList=[],t}return Object(l["a"])(a,[{key:"search",value:function(){var t=this;this.parentDeptList=[],this.childDeptList=[],this.authDeptSales.forEach((function(e){(e.deptName.includes(t.keyword)||String(e.deptId).includes(t.keyword))&&t.parentDeptList.push(e),e.sonDeptSalesDTOList&&e.sonDeptSalesDTOList.forEach((function(a){(a.deptName.includes(t.keyword)||String(a.deptId).includes(t.keyword))&&(a.parentDeptName=e.deptName,t.childDeptList.push(a))}))}))}},{key:"chooseData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!e&&t.authFlag&&this.$emit("select-department",t)}},{key:"itemStyle",value:function(t){return"".concat(this.nowData==t.deptId?"color-main-2":"color-black-2"," ").concat(t.authFlag?"":"noSelect")}},{key:"onAuthDeptSalesChange",value:function(){this.initDeptList()}},{key:"initDeptList",value:function(){var t=this;this.parentDeptList=JSON.parse(JSON.stringify(this.authDeptSales)),this.childDeptList=[],this.authDeptSales.forEach((function(e){e.sonDeptSalesDTOList&&e.sonDeptSalesDTOList.forEach((function(a){a.parentDeptName=e.deptName,t.childDeptList.push(a)}))}))}}]),a}(v["d"]));Object(p["a"])([Object(v["c"])()],T.prototype,"nowData",void 0),Object(p["a"])([Object(v["c"])()],T.prototype,"authDeptSales",void 0),Object(p["a"])([Object(v["e"])("authDeptSales",{immediate:!0,deep:!0})],T.prototype,"onAuthDeptSalesChange",null),T=Object(p["a"])([Object(v["a"])({})],T);var z=T,V=z,A=(a("de94"),Object(x["a"])(V,P,I,!1,null,"e89c7c94",null)),R=A.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item_box background-color-white"},t._l(t.dataValue,(function(e){return a("div",{key:e.generalObjectName,staticClass:"item"},[a("div",{staticClass:"item_title d-flex justify-space-between"},[a("div",{staticStyle:{color:"#2271f5"}},[t._v(t._s(e.generalObjectName))]),a("div",[t._v(" 在销品规数"),a("span",{staticStyle:{color:"#2271f5"}},[t._v(t._s(e.yearInSaleGoodsNum||0))])])]),a("div",{staticClass:"item_line"}),a("div",{staticClass:"d-flex flex-column",staticStyle:{gap:"10px"}},[a("div",{staticClass:"item_content"},[a("div",{staticClass:"item_content_title"},[t._v("非战采")]),a("div",{staticClass:"item_content_title"},[t._v(t._s("1"==t.activeValue?"年":"月")+"同比")]),a("div",{staticClass:"item_content_title"},[t._v("预算进度")]),a("div",{staticClass:"item_content_title"},[t._v("战采")]),a("div",{staticClass:"item_content_title"},[t._v(t._s("1"==t.activeValue?"年":"月")+"同比")]),a("div",{staticClass:"item_content_title"},[t._v("预算进度")])]),a("div",{staticClass:"item_content"},[a("div",{staticClass:"item_content_value"},[t._v(t._s(e.zcAmount))]),a("div",{class:t.getColor(e.zcPercent)},[t._v(t._s(e.zcPercent)+"%")]),a("div",{staticClass:"item_content_value"},[t._v(t._s(e.zcProgress))]),a("div",{staticClass:"item_content_value"},[t._v(t._s(e.fzcAmount))]),a("div",{class:t.getColor(e.fzcPercent)},[t._v(t._s(e.fzcPercent)+"%")]),a("div",{staticClass:"item_content_value"},[t._v(t._s(e.fzcProgress))])])])])})),0)},L=[],F=function(t){Object(d["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(l["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){return t>0?"+":""}}}]),a}(v["d"]);Object(p["a"])([Object(v["c"])({default:function(){return{}}})],F.prototype,"dataValue",void 0),Object(p["a"])([Object(v["c"])()],F.prototype,"activeValue",void 0),F=Object(p["a"])([Object(v["a"])({})],F);var E=F,Y=E,M=(a("8966"),Object(x["a"])(Y,G,L,!1,null,"7ebca820",null)),$=M.exports,H=a("289a"),J=a("b33d"),B=a("5b92"),q=function(t){Object(d["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.calendarShow=!1,t.deptObj={},t.showPopupValue=!1,t.currentDept="",t.goodsSatisfactionData={},t.kaPurveyorData={},t.saleLockData={},t.turnoverData={},t.pdloading=!1,t.gsloading=!1,t.kaloading=!1,t.tdloading=!1,t.lockloading=!1,t.purchaseDataObj={},t.authDeptSales={},t.sonObjectStatList=[],t.echartsShow=!1,t.phmlArray=[998,968,999,992,993,990,994,995,996,997],t.medicSubCompany=["中成药","国产一部","国产二部","进口合资"],t.medicAllCompany=["英特药业","中成药","国产一部","国产二部","进口合资"],t.activeValue="",t.ClickTab=function(e){t.active=e.toString(),t.loadAllData(!1,!1)},t}return Object(l["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){return t>0?"+":""}}},{key:"loadAllData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=!(o.length>0&&void 0!==o[0])||o[0],a=o.length>1&&void 0!==o[1]&&o[1],t.prev=2,!a){t.next=6;break}return t.next=6,this._getAuthDeptSales().catch((function(t){}));case 6:if(e&&this.authDeptSales[0]&&(n=Object(c["a"])(this.authDeptSales,1),r=n[0],this.currentDept=r.authFlag?r:r.sonDeptSalesDTOList.find((function(t){return t.authFlag})),Object.assign(this.deptObj,{deptName:this.currentDept.deptName,deptId:this.currentDept.deptId})),i=null===(s=this.currentDept)||void 0===s?void 0:s.deptId,!i){t.next=11;break}return t.next=11,Promise.allSettled([this.fetchGeneralStat(i),this._getSaleLockStat(i),this.getGoodsSatisfactionInfos(i),this._getKaPurveyorStat(i),this._getTurnoverDaysInfo(i)]);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2);case 16:return t.prev=16,t.finish(16);case 18:case"end":return t.stop()}}),t,this,[[2,13,16,18]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getSaleLockStat",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:e,objectType:1,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},this.saleLockData={},this.lockloading=!0,t.next=5,Object(_["H"])(a);case 5:s=t.sent,this.lockloading=!1,"200"==s.code&&(this.saleLockData={lockGoodsNum:s.data.lockGoodsNum,saleLockNum:s.data.saleLockNum,averageUnlockCost:s.data.averageUnlockCost,unlockOrderNum:s.data.unlockOrderNum});case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getTurnoverDaysInfo",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:e,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},this.tdloading=!0,this.turnoverData={},t.next=5,Object(_["R"])(a);case 5:s=t.sent,this.tdloading=!1,"200"==s.code&&(this.turnoverData={monthTurnoverDays:s.data.monthTurnoverDays,monthTurnoverDaysNetDiff:s.data.monthTurnoverDaysNetDiff,yearTurnoverDays:s.data.yearTurnoverDays,yearTurnoverDaysNetDiff:s.data.yearTurnoverDaysNetDiff,targetDiffPercent:s.data.targetDiffPercent});case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getGoodsSatisfactionInfos",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:e,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},this.goodsSatisfactionData={},this.gsloading=!0,t.next=5,Object(_["y"])(a);case 5:s=t.sent,this.gsloading=!1,"200"==s.code&&(this.goodsSatisfactionData={monthGoodsFillRate:Object(B["d"])(s.data.monthGoodsFillRate,2),monthGoodsFillRateNetIncrease:Object(B["d"])(s.data.monthGoodsFillRateNetIncrease,2),yearGoodsFillRate:Object(B["d"])(s.data.yearGoodsFillRate,2),yearGoodsFillRateNetIncrease:Object(B["d"])(s.data.yearGoodsFillRateNetIncrease,2),targetFillRateDiff:Object(B["d"])(s.data.targetFillRateDiff,2)});case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getKaPurveyorStat",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:e,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},this.kaPurveyorData={},this.kaloading=!0,t.next=5,Object(_["z"])(a);case 5:s=t.sent,this.kaloading=!1,"200"==s.code&&(this.kaPurveyorData={monthSalesAmount:Object(B["d"])(s.data.monthSalesAmount,1),monthOnPercent:Object(B["d"])(s.data.monthOnPercent,2),yearSalesAmount:Object(B["d"])(s.data.yearSalesAmount,1),yearOnPercent:Object(B["d"])(s.data.yearOnPercent,2),sharePercent:Object(B["d"])(s.data.sharePercent,2),sharePercentNetIncrease:Object(B["d"])(s.data.sharePercentNetIncrease,2)});case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"fetchGeneralStat",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={objectId:e,selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),objectType:1,type:parseInt(this.active)},this.pdloading=!0,this.sonObjectStatList=[],this.purchaseDataObj={},t.next=6,Object(_["x"])(a);case 6:s=t.sent,this.pdloading=!1,"200"==s.code&&(n=s.data,this.sonObjectStatList=s.data.sonObjectStatList.map((function(t){return{generalObjectId:t.generalObjectId,generalObjectName:t.generalObjectName,yearRevenue:Object(B["d"])(t.revenue,1),yearRevenueOnPercent:Object(B["d"])(t.revenueOnPercent,2),zcAmount:Object(B["d"])(t.zcAmount,1),zcPercent:Object(B["d"])(t.zcPercent,2),zcProgress:Object(B["d"])(t.zcProgress,2),fzcAmount:Object(B["d"])(t.fzcAmount,1),fzcPercent:Object(B["d"])(t.fzcPercent,2),fzcProgress:Object(B["d"])(t.fzcProgress,2),underLyingGoodsNum:t.underLyingGoodsNum,yearInSaleGoodsNum:t.saleGoodsNum,yearInSaleGoodsNumOnPercent:Object(B["d"])(t.saleGoodsNumOnPercent,2)}})),this.purchaseDataObj={yearRevenue:Object(B["d"])(n.currentObjectStat.revenue,1),yearRevenueOnPercent:Object(B["d"])(n.currentObjectStat.revenueOnPercent,2),zcAmount:Object(B["d"])(n.currentObjectStat.zcAmount,1),zcPercent:Object(B["d"])(n.currentObjectStat.zcPercent,2),zcProgress:Object(B["d"])(n.currentObjectStat.zcProgress,2),fzcAmount:Object(B["d"])(n.currentObjectStat.fzcAmount,1),fzcPercent:Object(B["d"])(n.currentObjectStat.fzcPercent,2),fzcProgress:Object(B["d"])(n.currentObjectStat.fzcProgress,2),yearInSaleGoodsNum:n.currentObjectStat.saleGoodsNum,yearInSaleGoodsNumOnPercent:Object(B["d"])(n.currentObjectStat.saleGoodsNumOnPercent,2),targetCompletePercent:Object(B["d"])(n.currentObjectStat.targetCompletePercent,2),targetGoalDiff:n.currentObjectStat.targetGoalDiff});case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getAuthDeptSales",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),deptFlag:1,full:!0,deptid:""},t.next=3,Object(_["e"])(a);case 3:s=t.sent,"200"==s.code&&null!==(e=s.data)&&void 0!==e&&e.resultList?this.authDeptSales=s.data.resultList.map((function(t){return{deptId:t.DEPT_ID,deptName:t.DEPT_NAME,authFlag:t.AUTH_FLAG,sonDeptSalesDTOList:(t.SON_DEPT_LIST||[]).map((function(t){return{deptId:t.DEPT_ID,deptName:t.DEPT_NAME,authFlag:t.AUTH_FLAG}})),isExpanded:!1}})):this.authDeptSales=[];case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"departClick",value:function(t){this.$router.push({name:"PurchaseIndex2"==this.$route.name?"PurchaseIndex":"PurchaseIndex2",query:{deptId:t.generalObjectId,deptName:t.generalObjectName}})}},{key:"showTrend",get:function(){return"purchase"!==this.$route.query.role}},{key:"hasSonObjectStatList",get:function(){return Object.keys(this.sonObjectStatList).length>0}},{key:"showDepartData",get:function(){var t;return"英特药业"===(null===(t=this.currentDept)||void 0===t?void 0:t.deptName)}},{key:"showBalanceGross",get:function(){var t;return this.phmlArray.includes(null===(t=this.currentDept)||void 0===t?void 0:t.deptId)}},{key:"showItemBox",get:function(){return this.hasSonObjectStatList&&this.medicSubCompany.includes(this.currentDept.deptName)}},{key:"showItemBox2",get:function(){return this.hasSonObjectStatList&&!this.medicAllCompany.includes(this.currentDept.deptName)}},{key:"showPurdate",get:function(){return this.medicSubCompany.includes(this.currentDept.deptName)||"英特药业"===this.currentDept.deptName}},{key:"handleTrendClick",value:function(){this.echartsShow=!0}},{key:"handleShowPopup",value:function(t){this.showPopupValue=t}},{key:"handleSelectDepartment",value:function(t){this.showPopupValue=!1,this.currentDept=t,this.deptObj=Object(r["a"])(Object(r["a"])({},this.deptObj),{},{deptName:t.deptName,deptId:t.deptId}),this.loadAllData(!1,!0)}},{key:"handleToggleDept",value:function(t){t.isExpanded=!t.isExpanded}},{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"selectCalendar",value:function(t){this.calendarConfirm(t)}},{key:"calendarConfirm",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.calendarShow=!1,this.SET_CSJNOWTIME(e),this.SET_CSJCHANGETIME(!0),t.next=5,this.loadAllData(!1,!1);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$route.query,a=e.deptId,s=e.deptName,!a||!s){t.next=7;break}this.currentDept={deptId:a,deptName:s},this.deptObj={deptId:a,deptName:s},this.loadAllData(!1,!0),t.next=9;break;case 7:return t.next=9,this.loadAllData(!0,!0);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(Object(v["b"])(J["a"]));Object(p["a"])([Object(v["c"])()],q.prototype,"enterDeptObj",void 0),Object(p["a"])([Object(v["c"])()],q.prototype,"dateTime",void 0),Object(p["a"])([Object(v["c"])()],q.prototype,"active",void 0),Object(p["a"])([Object(v["c"])({type:Boolean,default:!1})],q.prototype,"showPopup",void 0),q=Object(p["a"])([Object(v["a"])({components:{PurchaseData:f["a"],GoodsSatisfaction:h["a"],KaPurveyor:m["a"],SaleLock:b["a"],TurnoverData:g["a"],BalanceGross:y["a"],DataTrend:N,PersonList:$,DeptSelect:R,TotalSaleData:H["a"]}})],q);var U=q,W=U,K=(a("5c6e"),Object(x["a"])(W,s,n,!1,null,"3632ffd8",null));e["a"]=K.exports}}]);