(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f84825f"],{"6cdf":function(t,e,i){"use strict";i("7556")},7556:function(t,e,i){},fc52:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full-HW order-manage"},[i("div",{staticClass:"white-bg filter-div",class:t.getOtherClass},[i("div",{staticClass:"d-flex align-center justify-space-between common-filter full-height px-3 font-14 filter-button",on:{click:t.showPopup}},[i("span",[t._v("条件筛选")]),i("van-icon",{attrs:{name:"arrow-down"}})],1)]),i("div",{staticClass:"block-div"}),i("van-tabs",{on:{change:t.handleTabChange},model:{value:t.tabActiveIndex,callback:function(e){t.tabActiveIndex=e},expression:"tabActiveIndex"}},[i("van-tab",{attrs:{title:"当日订单",name:0}}),i("van-tab",{attrs:{title:"历史订单",name:1}}),i("van-tab",{attrs:{title:"可激活订单",name:2}})],1),0!=t.tabActiveIndex?i("div",{staticClass:"d-flex align-center justify-center mt-2"},[i("van-button",{staticClass:"mr-3 px-4",attrs:{size:"small",type:1==t.timeType?"info":"default",round:""},on:{click:function(e){return t.changeTime(1)}}},[t._v(" 三日内 ")]),i("van-button",{staticClass:"mr-3 px-4",attrs:{size:"small",type:2==t.timeType?"info":"default",round:""},on:{click:function(e){return t.changeTime(2)}}},[t._v(" 五日内 ")]),i("van-button",{staticClass:"px-4 mr-2",attrs:{size:"small",type:3==t.timeType?"info":"default",round:""},on:{click:function(e){return t.changeTime(3)}}},[t._v(" 七日内 ")]),i("van-button",{staticClass:"px-4",attrs:{size:"small",type:4==t.timeType?"info":"default",round:""},on:{click:function(e){return t.changeTime(4)}}},[t._v(" 自定义 ")])],1):t._e(),i("div",{staticClass:"overflow-x-hidden card-list pt-2",class:0!=t.tabActiveIndex?"active":""},[i("van-pull-refresh",{staticStyle:{"min-height":"100%"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{directives:[{name:"show",rawName:"v-show",value:!t.finished||t.dataList.length>0,expression:"!finished || dataList.length > 0"}],attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e,s){return i("card-detail",{key:s,attrs:{info:e,cardType:0},nativeOn:{click:function(i){return t.showDetail(e)}}})})),1),t.loading||t.dataList.length?t._e():i("app-empty",{staticClass:"mt-6 white-bg",attrs:{description:"暂无数据"}})],1)],1),i("van-popup",{attrs:{round:"",position:"top"},on:{"click-overlay":t.closePupup},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"white-bg filter-div show-div"},[i("div",{staticClass:"d-flex align-center justify-space-between common-filter full-height px-3 font-14 filter-button"},[i("span",[t._v("条件筛选")]),i("van-icon",{attrs:{name:"arrow-down"}})],1)]),i("div",{staticClass:"popup-line"}),i("van-field",{attrs:{label:"品种ID",placeholder:"请输入品种ID","input-align":"right",clearable:""},model:{value:t.filterObj.goodsId,callback:function(e){t.$set(t.filterObj,"goodsId",e)},expression:"filterObj.goodsId"}}),i("van-field",{attrs:{label:"品种名称",placeholder:"请输入品种名称","input-align":"right",clearable:""},model:{value:t.filterObj.goodsName,callback:function(e){t.$set(t.filterObj,"goodsName",e)},expression:"filterObj.goodsName"}}),i("van-field",{attrs:{label:"客户ID",placeholder:"请输入客户ID","input-align":"right",clearable:""},model:{value:t.filterObj.customerId,callback:function(e){t.$set(t.filterObj,"customerId",e)},expression:"filterObj.customerId"}}),i("van-field",{attrs:{label:"客户名称",placeholder:"请输入客户名称","input-align":"right",clearable:""},model:{value:t.filterObj.customerName,callback:function(e){t.$set(t.filterObj,"customerName",e)},expression:"filterObj.customerName"}}),i("div",{staticClass:"d-flex justify-center mt-4 mb-5"},[i("van-button",{staticClass:"popup-button mr-3",attrs:{round:""},on:{click:t.refreshFilter}},[t._v("重置")]),i("van-button",{staticClass:"popup-button",attrs:{round:"",type:"info"},on:{click:t.handleFilter}},[t._v("确认")])],1)],1),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showSort,callback:function(e){t.showSort=e},expression:"showSort"}},[i("van-picker",{attrs:{"show-toolbar":"",title:"排序方式",columns:t.sortColumns},on:{confirm:t.handleSort,cancel:t.handleSortCancel}})],1),i("div",{staticClass:"commonOpButton-footer commonOpButton-footer-1"},[t.needQueryAll||t.needQueryAllEntrys||t.needQueryAllDept?i("van-button",{attrs:{round:"",plain:"",color:"#2271F5",type:"primary"},on:{click:t.justSelfClick}},[t._v(" "+t._s(t.isJustSelf?"显示全部":"显示与我相关")+" ")]):t._e(),i("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:function(e){t.showSort=!0}}},[t._v(" "+t._s(t.sortParams.orderText)+" ")])],1),i("van-calendar",{attrs:{"min-date":t.getMinData,"max-date":t.getMaxData,"default-date":t.timeList,type:"range",color:"#2271F5","allow-same-day":""},on:{confirm:t.onConfirm},model:{value:t.showTime,callback:function(e){t.showTime=e},expression:"showTime"}})],1)},r=[],a=i("d4ec"),o=i("bee2"),n=i("262e"),l=i("2caf"),c=(i("e9c4"),i("99af"),i("d3b7"),i("9ab4")),d=i("1b40"),u=i("53ae"),h=i("bdee"),m=i("27f3"),f=i("211c"),g=i("d926"),b=function(t){Object(n["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.show=!1,t.filterObj={goodsId:"",goodsName:"",customerId:"",customerName:""},t.originFilter={goodsId:"",goodsName:"",customerId:"",customerName:""},t.sortParams={orderAmountSort:null,orderCountSort:0,orderSortType:1,orderText:"未完成笔数降序"},t.sortColumns=[{values:["总订单金额","总订单笔数","未完成笔数","未完成金额"],defaultIndex:2},{values:["降序","升序"],defaultIndex:1}],t.timeList=[],t.showTime=!1,t.isJustSelf=!1,t.tabActiveIndex=0,t.showSort=!1,t.needQueryAll=!1,t.needQueryAllEntrys=!1,t.needQueryAllDept=!1,t.timeType=0,t}return Object(o["a"])(i,[{key:"getOtherClass",get:function(){var t="";return(this.filterObj.goodsId||this.filterObj.goodsName||this.filterObj.customerId||this.filterObj.customerName)&&(t="have-filter"),t}},{key:"getMinData",get:function(){return 1==this.tabActiveIndex?new Date((new Date).getTime()-26784e5):new Date((new Date).getTime()-31536e6)}},{key:"getMaxData",get:function(){return 1==this.tabActiveIndex?new Date((new Date).getTime()-864e5):new Date}},{key:"showPopup",value:function(){this.originFilter=JSON.parse(JSON.stringify(this.filterObj)),this.show=!0}},{key:"handleTabChange",value:function(){0!=this.tabActiveIndex?this.changeTime(1):(this.timeList=[],this.onRefresh())}},{key:"changeTime",value:function(t){switch(this.timeType=t,t){case 1:1==this.tabActiveIndex?this.timeList=[new Date((new Date).getTime()-2592e5),new Date((new Date).getTime()-864e5)]:this.timeList=[new Date((new Date).getTime()-1728e5),new Date((new Date).getTime())];break;case 2:1==this.tabActiveIndex?this.timeList=[new Date((new Date).getTime()-432e6),new Date((new Date).getTime()-864e5)]:this.timeList=[new Date((new Date).getTime()-3456e5),new Date((new Date).getTime())];break;case 3:1==this.tabActiveIndex?this.timeList=[new Date((new Date).getTime()-6048e5),new Date((new Date).getTime()-864e5)]:this.timeList=[new Date((new Date).getTime()-5184e5),new Date((new Date).getTime())];break;case 4:this.showTime=!0}4!=this.timeType&&(this.filterObj.time=Object(g["c"])(this.timeList[0])+" ~ "+Object(g["c"])(this.timeList[1]),this.onRefresh())}},{key:"onRefresh",value:function(){this.page=1,this.finished=!1,this.refreshing=!1,this._customerOrderInfoList()}},{key:"onLoad",value:function(){var t=this;this.$nextTick((function(){t._customerOrderInfoList()}))}},{key:"refreshFilter",value:function(){this.filterObj.goodsId="",this.filterObj.goodsName="",this.filterObj.customerId="",this.filterObj.customerName=""}},{key:"handleFilter",value:function(){this.show=!1,this.filterObj.goodsId===this.originFilter.goodsId&&this.filterObj.goodsName===this.originFilter.goodsName&&this.filterObj.customerId===this.originFilter.customerId&&this.filterObj.customerName===this.originFilter.customerName||(this.page=1,this.finished=!1,this._customerOrderInfoList())}},{key:"onConfirm",value:function(t){this.timeList=[t[0],t[1]],this.showTime=!1,this.onRefresh()}},{key:"handleSort",value:function(t,e){this.sortParams.orderText=t[0]+" "+t[1],this.sortParams.orderCountSort=e[1];var i=e[0],s=e[1];switch(i){case 0:this.sortParams.orderAmountSort=s,this.sortParams.orderCountSort=null,this.sortParams.orderSortType=0;break;case 1:this.sortParams.orderAmountSort=null,this.sortParams.orderCountSort=s,this.sortParams.orderSortType=0;break;case 2:this.sortParams.orderAmountSort=null,this.sortParams.orderCountSort=s,this.sortParams.orderSortType=1;break;case 3:this.sortParams.orderAmountSort=s,this.sortParams.orderCountSort=null,this.sortParams.orderSortType=1;break}this.showSort=!1,this.page=1,this.finished=!1,this._customerOrderInfoList()}},{key:"handleSortCancel",value:function(){this.sortParams.orderAmountSort=null,this.sortParams.orderCountSort=null,this.sortParams.orderText="排序方式",this.sortParams.orderSortType=1,this.showSort=!1,this.page=1,this.finished=!1,this._customerOrderInfoList()}},{key:"closePupup",value:function(){this.filterObj.goodsId=this.originFilter.goodsId,this.filterObj.goodsName=this.originFilter.goodsName,this.filterObj.customerId=this.originFilter.customerId,this.filterObj.customerName=this.originFilter.customerName,this.filterObj.entryKeyword=this.originFilter.entryKeyword}},{key:"_customerOrderInfoList",value:function(){var t=this;this.loading=!0,1===this.page&&(this.dataList=[]),Object(f["a"])({customerName:this.filterObj.customerName,entryKeyword:this.filterObj.entryKeyword,goodsId:this.filterObj.goodsId,goodsName:this.filterObj.goodsName,customerId:this.filterObj.customerId,orderType:this.tabActiveIndex,selectType:this.isJustSelf?0:3,startTime:2==this.timeList.length?Object(g["c"])(this.timeList[0])+" 00:00:00":null,endTime:2==this.timeList.length?Object(g["c"])(this.timeList[1])+" 23:59:59":null,orderAmountSort:this.sortParams.orderAmountSort,orderCountSort:this.sortParams.orderCountSort,orderSortType:this.sortParams.orderSortType,pageNum:this.page,pageSize:10}).then((function(e){"200"==e.code&&e.data&&e.data.list||(t.finished=!0,t.loading=!1,t.$toast.fail(e.msg)),t.dataList=t.dataList.concat(e.data.list),t.loading=!1,e.data.hasNextPage?t.page++:t.finished=!0}))}},{key:"showDetail",value:function(t){var e=this,i={customer:JSON.stringify(t),type:this.tabActiveIndex,startTime:2==this.timeList.length?Object(g["c"])(this.timeList[0]):null,endTime:2==this.timeList.length?Object(g["c"])(this.timeList[1]):null,goodsId:this.filterObj.goodsId,goodsName:this.filterObj.goodsName};this.$nextTick((function(){e.$router.push({name:"orderList",query:i})}))}},{key:"justSelfClick",value:function(){this.isJustSelf=!this.isJustSelf,this.onRefresh()}},{key:"activated",value:function(){var t=JSON.parse(localStorage.getItem("permissions")||"");this.needQueryAll=t.some((function(t){return"orderintegrateWx-query-all"===t})),this.needQueryAllEntrys=t.some((function(t){return"orderintegrateWx-query-entry"===t})),this.needQueryAllDept=t.some((function(t){return"orderintegrateWx-query-dept"===t}))}}]),i}(Object(d["b"])(u["a"],h["a"]));b=Object(c["a"])([Object(d["a"])({components:{cardDetail:m["a"]}})],b);var p=b,v=p,y=(i("6cdf"),i("2877")),w=Object(y["a"])(v,s,r,!1,null,"d421e300",null);e["default"]=w.exports}}]);