(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72ea4484"],{"495a":function(e,t,n){"use strict";n("d22f")},"53ae":function(e,t,n){"use strict";var a=n("d4ec"),i=n("bee2"),s=n("262e"),r=n("2caf"),l=(n("b0c0"),n("9ab4")),o=n("1b40");o["a"].registerHooks(["beforeRouteEnter"]);var c=function(e){Object(s["a"])(n,e);var t=Object(r["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(i["a"])(n,[{key:"beforeRouteEnter",value:function(e,t,n){n((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),n}(o["d"]);c=Object(l["a"])([Object(o["a"])({})],c),t["a"]=c},c291:function(e,t,n){"use strict";n("f11c")},c834:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return o}));var a=n("1da1"),i=(n("96cf"),n("b32d")),s=n("90ae"),r=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(s["d"],"/api/webFinalPayment/docList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(s["d"],"/api/webFinalPayment/dtlList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(s["d"],"/api/webFinalPayment/updateDtl",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d22f:function(e,t,n){},d8f9:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"full-HW final-knot"},[n("div",{staticClass:"white-bg filter-div",class:e.getOtherClass,on:{click:function(t){e.show=!0}}},[n("div",{staticClass:"d-flex align-center justify-space-between common-filter full-height px-3 font-14 filter-button",on:{click:e.showPopup}},[n("span",[e._v("条件筛选")]),n("van-icon",{attrs:{name:"arrow-down"}})],1)]),n("div",{staticClass:"block-div"}),n("van-tabs",{on:{change:e.handleTabChange},model:{value:e.tabActiveIndex,callback:function(t){e.tabActiveIndex=t},expression:"tabActiveIndex"}},[n("van-tab",{attrs:{title:"未处理",name:0}}),n("van-tab",{attrs:{title:"已处理",name:1}})],1),n("div",{staticClass:"overflow-x-hidden card-list"},[n("van-pull-refresh",{staticStyle:{"min-height":"100%"},on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{directives:[{name:"show",rawName:"v-show",value:!e.finished||e.dataList.length>0,expression:"!finished || dataList.length > 0"}],attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.dataList,(function(t,a){return n("card-detail",{key:a,attrs:{info:t},nativeOn:{click:function(n){return e.showDetail(t)}}})})),1),e.loading||e.dataList.length?e._e():n("app-empty",{staticClass:"mt-6 white-bg",attrs:{description:"暂无数据"}})],1)],1),n("van-popup",{attrs:{round:"",position:"top"},on:{"click-overlay":e.closePupup},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"popup-line"}),n("van-field",{attrs:{label:"时间范围",placeholder:"点击选择日期","input-align":"right",clearable:""},on:{click:function(t){e.showTime=!0}},model:{value:e.filterObj.time,callback:function(t){e.$set(e.filterObj,"time",t)},expression:"filterObj.time"}}),n("van-field",{attrs:{label:"货品ID",placeholder:"请输入货品ID","input-align":"right",clearable:""},model:{value:e.filterObj.goodsId,callback:function(t){e.$set(e.filterObj,"goodsId",t)},expression:"filterObj.goodsId"}}),n("van-field",{attrs:{label:"货品名称",placeholder:"请输入货品名称","input-align":"right",clearable:""},model:{value:e.filterObj.goodsName,callback:function(t){e.$set(e.filterObj,"goodsName",t)},expression:"filterObj.goodsName"}}),n("van-field",{attrs:{label:"供应商ID",placeholder:"请输入供应商ID","input-align":"right",clearable:""},model:{value:e.filterObj.suppplyId,callback:function(t){e.$set(e.filterObj,"suppplyId",t)},expression:"filterObj.suppplyId"}}),n("van-field",{attrs:{label:"供应商名称",placeholder:"请输入供应商名称","input-align":"right",clearable:""},model:{value:e.filterObj.supplyName,callback:function(t){e.$set(e.filterObj,"supplyName",t)},expression:"filterObj.supplyName"}}),n("div",{staticClass:"d-flex justify-center mt-4 mb-5"},[n("van-button",{staticClass:"popup-button mr-3",attrs:{round:""},on:{click:e.refreshFilter}},[e._v("重置")]),n("van-button",{staticClass:"popup-button",attrs:{round:"",type:"info"},on:{click:e.handleFilter}},[e._v("确认")])],1)],1),n("van-calendar",{attrs:{"min-date":new Date(2020,0,1),type:"range"},on:{confirm:e.onConfirm},model:{value:e.showTime,callback:function(t){e.showTime=t},expression:"showTime"}}),e.needQueryAll||e.needQueryAllEntrys||e.needQueryAllDept?n("div",{staticClass:"commonOpButton-footer"},[n("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:e.justSelfClick}},[e._v(" "+e._s(e.isJustSelf?"显示全部":"显示与我相关"))])],1):e._e()],1)},i=[],s=n("d4ec"),r=n("bee2"),l=n("262e"),o=n("2caf"),c=(n("e9c4"),n("99af"),n("d3b7"),n("9ab4")),u=n("1b40"),f=n("53ae"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"full-width white-bg mb-2 card-detail px-3 py-4 font-12"},[n("div",{staticClass:"d-flex align-center justify-space-between id-content"},[n("span",{staticClass:"id-div"},[e._v(e._s(e.info.zdId))]),n("span",{staticClass:"fontWeight-500"},[e._v(e._s(e.info.credate))])]),n("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[n("span",{staticClass:"color-second"},[e._v("供应商")]),n("span",[e._v(e._s(e.info.supplyId)+"/"+e._s(e.info.supplyName))])]),e.info.factoryname?n("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[n("span",{staticClass:"color-second"},[e._v("生产厂家")]),n("span",{staticClass:"fontWeight-500"},[e._v(e._s(e.info.factoryname))])]):e._e(),n("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[n("span",{staticClass:"color-second"},[e._v("品种")]),n("span",[e._v(e._s(e.info.goodsId)+"/"+e._s(e.info.goodsName))])]),n("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[n("span",{staticClass:"color-second"},[e._v("规格")]),n("span",{staticClass:"color-main-2"},[e._v(e._s(e.info.goodsType))])]),n("div",{staticClass:"d-flex align-center justify-space-between"},[n("span",{staticClass:"color-second"},[e._v("核算单元")]),n("span",{staticClass:"fontWeight-500"},[e._v(" "+e._s(e.info.entryId)+"/"+e._s(e.info.entryName))])])])},p=[],h=function(e){Object(l["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(r["a"])(n)}(u["d"]);Object(c["a"])([Object(u["c"])({type:Object,default:{}})],h.prototype,"info",void 0),h=Object(c["a"])([Object(u["a"])({components:{}})],h);var g=h,b=g,v=(n("c291"),n("2877")),m=Object(v["a"])(b,d,p,!1,null,"35fd85b3",null),y=m.exports,O=n("c834"),j=n("d926"),w=function(e){Object(l["a"])(n,e);var t=Object(o["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.show=!1,e.showTime=!1,e.filterObj={time:"",goodsId:"",goodsName:"",suppplyId:"",supplyName:""},e.originFilter={time:"",goodsId:"",goodsName:"",suppplyId:"",supplyName:""},e.timeList=[],e.isJustSelf=!1,e.tabActiveIndex=0,e.needQueryAll=!1,e.needQueryAllEntrys=!1,e.needQueryAllDept=!1,e}return Object(r["a"])(n,[{key:"getOtherClass",get:function(){var e="";return this.show?e="show-div":(this.filterObj.time||this.filterObj.goodsId||this.filterObj.goodsName||this.filterObj.suppplyId||this.filterObj.supplyName)&&(e="have-filter"),e}},{key:"showPopup",value:function(){this.originFilter=JSON.parse(JSON.stringify(this.filterObj)),this.show=!0}},{key:"handleTabChange",value:function(){this.onRefresh()}},{key:"onRefresh",value:function(){this.page=1,this.finished=!1,this.refreshing=!1,this._getAllFinalPaymentOrderItem()}},{key:"onLoad",value:function(){var e=this;this.$nextTick((function(){e._getAllFinalPaymentOrderItem()}))}},{key:"refreshFilter",value:function(){this.filterObj.time="",this.filterObj.goodsId="",this.filterObj.goodsName="",this.filterObj.suppplyId="",this.filterObj.supplyName=""}},{key:"handleFilter",value:function(){this.show=!1,this.filterObj.time===this.originFilter.time&&this.filterObj.goodsId===this.originFilter.goodsId&&this.filterObj.goodsName===this.originFilter.goodsName&&this.filterObj.suppplyId===this.originFilter.suppplyId&&this.filterObj.supplyName===this.originFilter.supplyName||(this.page=1,this.finished=!1,this._getAllFinalPaymentOrderItem())}},{key:"closePupup",value:function(){this.filterObj.time=this.originFilter.time,this.filterObj.goodsId=this.originFilter.goodsId,this.filterObj.goodsName=this.originFilter.goodsName,this.filterObj.suppplyId=this.originFilter.suppplyId,this.filterObj.supplyName=this.originFilter.supplyName}},{key:"onConfirm",value:function(e){this.filterObj.time=Object(j["c"])(e[0])+" ~ "+Object(j["c"])(e[1]),this.timeList=[Object(j["c"])(e[0]),Object(j["c"])(e[1])],this.showTime=!1}},{key:"_getAllFinalPaymentOrderItem",value:function(){var e=this;this.loading=!0,1===this.page&&(this.dataList=[]),Object(O["a"])({startTime:this.filterObj.time?this.timeList[0]:null,endTime:this.filterObj.time?this.timeList[1]:null,suppplyId:this.filterObj.suppplyId,supplyName:this.filterObj.supplyName,goodsId:this.filterObj.goodsId,goodsName:this.filterObj.goodsName,statusDtl:this.tabActiveIndex,selectType:this.isJustSelf?0:3,pageNum:this.page,pageSize:10}).then((function(t){"200"==t.code&&t.data&&t.data.list||(e.finished=!0,e.loading=!1,e.$toast.fail(t.msg)),e.dataList=e.dataList.concat(t.data.list),e.loading=!1,t.data.hasNextPage?e.page++:e.finished=!0}))}},{key:"showDetail",value:function(e){var t=this,n={zdId:e.zdId,selectType:this.isJustSelf?0:3,statusDtl:this.tabActiveIndex};this.$nextTick((function(){t.$router.push({name:"finalKontDetail",query:n})}))}},{key:"justSelfClick",value:function(){this.isJustSelf=!this.isJustSelf,this.onRefresh()}},{key:"activated",value:function(){var e=this;"1"===sessionStorage.getItem("finalChange")&&(sessionStorage.removeItem("finalChange"),this.$nextTick((function(){e.onRefresh()})));var t=JSON.parse(localStorage.getItem("permissions")||"");this.needQueryAll=t.some((function(e){return"fpQueryAll"===e})),this.needQueryAllEntrys=t.some((function(e){return"fpQueryEntry"===e})),this.needQueryAllDept=t.some((function(e){return"fpQueryDeptUser"===e})),this.needQueryAll||this.needQueryAllEntrys||this.needQueryAllDept?this.isJustSelf=!1:this.isJustSelf=!0}}]),n}(Object(u["b"])(f["a"]));w=Object(c["a"])([Object(u["a"])({components:{cardDetail:y}})],w);var D=w,I=D,k=(n("495a"),Object(v["a"])(I,a,i,!1,null,"8064e6a6",null));t["default"]=k.exports},d926:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"k",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"e",(function(){return v})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return y})),n.d(t,"a",(function(){return O})),n.d(t,"h",(function(){return j}));n("d3b7"),n("25f0"),n("ac1f"),n("1276");var a=n("5a0c"),i=n.n(a),s=new Date,r=s.getDay(),l=s.getDate(),o=s.getMonth(),c=s.getYear();c+=c<2e3?1900:0;var u=new Date;function f(e){var t=new Date(e),n=t.getFullYear(),a=(t.getMonth()+1).toString(),i=t.getDate().toString();return+a<10&&(a="0"+a),+i<10&&(i="0"+i),n+"-"+a+"-"+i}function d(e){var t=new Date(e),n=t.getFullYear(),a=(t.getMonth()+1).toString(),i=t.getDate().toString();return+a<10&&(a="0"+a),+i<10&&(i="0"+i),n+"/"+a+"/"+i}function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var n=new Date(t),a=n.getDay();a=0===a?7:a;var i=n.getDate(),s=n.getMonth(),u=n.getYear();u+=u<2e3?1900:0,e=new Date(u,s,i-(a-1))}else e=new Date(c,o,l-(r-1));return f(e)}function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var n=new Date(t),a=n.getDay();a=0===a?7:a;var i=n.getDate(),s=n.getMonth(),u=n.getYear();u+=u<2e3?1900:0,e=new Date(u,s,i+(6-(a-1)))}else e=new Date(c,o,l+(6-(r-1)));return f(e)}function g(e){return 0===i()(e).day()?i()(e).startOf("week").subtract(6,"day").format("YYYY-MM-DD"):i()(e).startOf("week").add(1,"day").format("YYYY-MM-DD")}function b(e){return 0===i()(e).day()?i()(e).endOf("week").subtract(6,"day").format("YYYY-MM-DD"):i()(e).endOf("week").add(1,"day").format("YYYY-MM-DD")}u.setDate(1),u.setMonth(u.getMonth()-1);var v=function(e,t){var n=[],a=e.split("-"),i=t.split("-"),s=new Date(a+" 08:00:00");s.setUTCFullYear(a[0],a[1]-1,a[2]);var r=new Date(i+" 08:00:00");r.setUTCFullYear(i[0],i[1]-1,i[2]);var l,o=s.getTime(),c=r.getTime(),u=864e5;for(l=o;l<=c;)n.push(f(new Date(parseInt(String(l))))),l+=u;return n},m=function(e,t){var n=new Date(e),a="";n.setDate(n.getDate()+t);var i=n.getFullYear(),s=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,r=n.getDate()<10?"0"+n.getDate():n.getDate();return a=i+"-"+s+"-"+r,a},y=function(e){var t,n,a,i,s=new Date(e+"-01-01"),r=s.getFullYear(),l={result0:[],result1:[],result2:[],result3:[],result4:[],result5:[],result6:[]};for(t=1;t<=12;t++){switch(t){case 1:case 3:case 5:case 7:case 8:case 10:case 12:i=31;break;case 4:case 6:case 9:case 11:i=30;break;case 2:i=r%4===0&&r%100!==0||r%400===0?29:28;break}for(n=1;n<=i;n++){s.setMonth(t-1,n),a=s.getDay();var o=s.getFullYear(),c=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,u=s.getDate()<10?"0"+s.getDate():s.getDate();l["result"+a].push(o+"-"+c+"-"+u)}}return l};function O(e){switch(e){case 0:return"日";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";default:break}}var j=function(e){var t=new Date,n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),s=e.split("-"),r=0;if(a>parseInt(s[0])||a==parseInt(s[0])&&i>parseInt(s[1])){var l=new Date(n+1,parseInt(s[0])-1,parseInt(s[1])).toLocaleDateString(),o=Date.parse(l),c=Date.parse(t.toLocaleDateString());r=(o-c)/864e5}else{var u=new Date(n,parseInt(s[1])-1,parseInt(s[2])).toLocaleDateString(),f=Date.parse(u),d=Date.parse(t.toLocaleDateString());r=(f-d)/864e5}if(r<0){var p=n+1,h=p%4===0&&p%100!==0||p%400===0?366:365;r+=h}return r}},f11c:function(e,t,n){}}]);