(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02609705"],{"32e5":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"white-block pb-3 mb-4"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),e._l(e.salesmanList,(function(t,s){return a("detail-card",{key:s,attrs:{isClick:e.isClick,data:t,name:t.name,mainDeptName:t.mainDeptName,showDepName:e.showDepName,per:t.data8,showDrxs:!0,perShow:!0},nativeOn:{click:function(a){return e.toDetail(t)}}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==e.salesmanList.length&&!e.loading,expression:"salesmanList.length == 0 && !loading"}],staticClass:"py-7",attrs:{description:"暂无数据"}})],2)},n=[],r=a("1da1"),i=a("d4ec"),o=a("bee2"),c=a("262e"),u=a("2caf"),d=(a("96cf"),a("d3b7"),a("159b"),a("b0c0"),a("9ab4")),m=a("1b40"),l=a("ff2d"),h=a("8b7c"),y=a("2279"),b=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.salesmanList=[],e.loading=!1,e}return Object(o["a"])(a,[{key:"_queryDeptSaleData",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.salesmanList=[],e.next=4,Object(h["y"])(t);case 4:a=e.sent,this.loading=!1,200==a.code&&a.data&&a.data.forEach((function(e){s.salesmanList.push({id:e.deptId,name:e.deptName,data1:e.dataHomeVO.dailySales?e.dataHomeVO.dailySales:0,data2:e.dataHomeVO.monthSales?e.dataHomeVO.monthSales:0,data3:e.dataHomeVO.monthGrowthRate?e.dataHomeVO.monthGrowthRate:0,data4:e.dataHomeVO.lastMonthSales?e.dataHomeVO.lastMonthSales:0,data5:e.dataHomeVO.yearSales?e.dataHomeVO.yearSales:0,data6:e.dataHomeVO.yearGrowthRate?e.dataHomeVO.yearGrowthRate:0,data7:e.dataHomeVO.lastYearSales?e.dataHomeVO.lastYearSales:0,data8:e.progress?e.progress:0})}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getRelatedSalesmanDetailList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.salesmanList=[],e.next=4,Object(y["G"])(t);case 4:a=e.sent,this.loading=!1,200==a.code&&a.data&&a.data.list.forEach((function(e){s.salesmanList.push({id:e.salesmanId,name:e.salesmanName,mainDeptName:e.mainDeptName,data1:e.dayAmount,data2:e.monthAmount,data3:e.monthOnPercent,data4:e.entireOnMonthAmount,data5:e.yearAmount,data6:e.yearOnPercent,data7:e.accuOnYearAmount,data8:e.progress?e.progress:0})}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"toDetail",value:function(e){this.isClick&&(this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605013,menuName:e.id+"/"+e.name+"-业务员列表点击进入",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"salesLineSalesman5Inner",query:{userId:e.id,userName:e.name,id:this.entryObj.id,name:this.entryObj.name}}))}},{key:"mounted",value:function(){this.entryObj.customerId?this._getRelatedSalesmanDetailList({customerId:this.entryObj.customerId,deptId:this.entryObj.id,pageNum:1,pageSize:3e3,date:this.dateTime}):this._queryDeptSaleData({deptId:this.entryObj.id,date:this.dateTime})}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],b.prototype,"entryObj",void 0),Object(d["a"])([Object(m["c"])()],b.prototype,"dateTime",void 0),Object(d["a"])([Object(m["c"])({default:!0})],b.prototype,"isClick",void 0),Object(d["a"])([Object(m["c"])({default:!1})],b.prototype,"showDepName",void 0),b=Object(d["a"])([Object(m["a"])({components:{detailCard:l["a"]}})],b);var j=b,p=j,O=a("2877"),f=Object(O["a"])(p,s,n,!1,null,"0c9227d3",null);t["a"]=f.exports},"4a45":function(e,t,a){},"767f":function(e,t,a){"use strict";a("4a45")},c3f6:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-100 background-color-white"},[a("van-sticky",[a("div",{staticClass:"header pa-3 d-flex align-center background-color-white"},[a("div",{staticClass:"flex-5 fontWeight font-14 slh-2"},[e._v(e._s(e.customerObj.customerId)+"/"+e._s(e.customerObj.customerName))]),a("div",{staticClass:"flex-2 font-14 textAlignC",on:{click:e.calendarClick}},[a("span",{staticClass:"time"},[e._v(e._s(e.$dayjs(this.csjNowTime).format("YYYY-MM-DD")))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)])]),a("div",{staticClass:"totalContent px-2"},[a("VisitCard",{attrs:{currentDayMoney:e.salesDataObj.currentDayMoney,objName:e.customerObj.userName||e.customerObj.name,visitNumber:e.visitNumber,loading:e.dailyLoading},on:{visitClick:e.visitClick}}),a("CommonCard",{attrs:{loading:e.saleLoading,salesDataObj:e.salesDataObj}})],1),a("van-tabs",{staticClass:"pt-2 px-2",attrs:{color:"#2271F5"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e.customerObj.userId?e._e():a("van-tab",{attrs:{name:0,title:"业务员"}}),a("van-tab",{attrs:{name:1,title:"全品种"}}),a("van-tab",{attrs:{name:2,title:"新增品种"}}),a("van-tab",{attrs:{name:3,title:"流失品种"}})],1),a("div",{staticClass:"px-2"},[2===e.active?a("div",{staticClass:"notice-info"},[a("i",{staticClass:"ml-2 mr-1 info-icon"}),a("span",{staticStyle:{"font-size":"14px"}},[e._v("本年销售额大于零且去年同期销售额等于零的品种。")])]):e._e(),3===e.active?a("div",{staticClass:"notice-info"},[a("i",{staticClass:"ml-2 mr-1 info-icon"}),a("span",{staticStyle:{"font-size":"14px"}},[e._v("近30天销售额小于近30-60天销售额的品种。")])]):e._e(),0===e.active?a("SalesmanList",{attrs:{isClick:!1,dateTime:e.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),entryObj:e.customerObj,showDepName:!0}}):e._e(),1===e.active?a("GoodsList",{key:"qpz",attrs:{goodsTypeName:"全品种",isClick:!1,type:e.customerObj.userId?"customerPersonRelate":"customDepartmentRelate",dateTime:e.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),entryObj:e.customerObj}}):e._e(),2===e.active?a("GoodsList",{key:"xzpz",attrs:{goodsTypeName:"新增品种",isClick:!1,type:e.customerObj.userId?"customerPersonRelate":"customDepartmentRelate",dateTime:e.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),entryObj:e.customerObj}}):e._e(),3===e.active?a("LoseGoodsTable",{attrs:{type:e.customerObj.userId?"personCustomRelate":e.customerObj.customerId?"customDepartmentRelate":"",dateTime:e.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),entryObj:e.customerObj}}):e._e()],1),a("van-calendar",{attrs:{"default-date":e.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:e.calendarConfirm},model:{value:e.calendarShow,callback:function(t){e.calendarShow=t},expression:"calendarShow"}})],1)},n=[],r=a("5530"),i=a("1da1"),o=a("d4ec"),c=a("bee2"),u=a("262e"),d=a("2caf"),m=(a("b0c0"),a("96cf"),a("9ab4")),l=a("1b40"),h=a("4388"),y=a("5b92"),b=a("8b7c"),j=a("32e5"),p=a("e906"),O=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.type="1",e.customerObj={},e.calendarShow=!1,e.dailyLoading=!1,e.saleLoading=!1,e.salesDataObj={},e.active=-1,e.visitNumber=0,e}return Object(c["a"])(a,[{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"calendarConfirm",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.calendarShow=!1,this.SET_CSJNOWTIME(t),this.SET_CSJCHANGETIME(!0),this.init();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getDataUserCustomerSalesList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={selectDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),userId:this.customerObj.userId,custom:this.customerObj.customerId,pageNum:1,pageSize:1},e.next=3,Object(b["e"])(t);case 3:a=e.sent,200==a.code&&a.data&&a.data.list&&a.data.list.length>0?(s=a.data.list[0],this.salesDataObj={currentDayMoney:Object(y["d"])(s.currentDayMoney,1),currentMonthMoney:Object(y["d"])(s.currentMonthMoney,1),lyCurrentMonthMoney:Object(y["d"])(s.lyCurrentMonthMoney,1),monthPercentage:Object(y["d"])(s.monthPercentage,2),currentYearMoney:Object(y["d"])(s.currentYearMoney,1),lyCurrentYearMoney:Object(y["d"])(s.lyCurrentYearMoney,1),yearPercentage:Object(y["d"])(s.yearPercentage,2)}):this.salesDataObj={currentDayMoney:0,currentMonthMoney:0,lyCurrentMonthMoney:0,monthPercentage:0,currentYearMoney:0,lyCurrentYearMoney:0,yearPercentage:0};case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_getDailySale",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dailyLoading=!0,t={customerId:this.customerObj.customerId,deptId:this.customerObj.id,selectedDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},e.next=4,Object(b["d"])(t);case 4:a=e.sent,this.dailyLoading=!1,200==a.code?this.$set(this.salesDataObj,"currentDayMoney",a.data?Object(y["d"])(a.data,1):0):this.$set(this.salesDataObj,"currentDayMoney",0);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_getSaleStat",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.saleLoading=!0,t={customerId:this.customerObj.customerId,deptId:this.customerObj.id,selectedDate:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")},e.next=4,Object(b["l"])(t);case 4:a=e.sent,this.saleLoading=!1,200==a.code&&a.data?(this.$set(this.salesDataObj,"currentMonthMoney",Object(y["d"])(a.data.monthSalesAmount,1)),this.$set(this.salesDataObj,"lyCurrentMonthMoney",Object(y["d"])(a.data.monthOnMonthSalesAmount,1)),this.$set(this.salesDataObj,"monthPercentage",Object(y["d"])(a.data.monthOnMonthPercent,2)),this.$set(this.salesDataObj,"currentYearMoney",Object(y["d"])(a.data.yearSalesAmount,1)),this.$set(this.salesDataObj,"lyCurrentYearMoney",Object(y["d"])(a.data.yearOnYearSalesAmount,1)),this.$set(this.salesDataObj,"yearPercentage",Object(y["d"])(a.data.yearOnYearPercent,2))):(this.$set(this.salesDataObj,"currentMonthMoney",0),this.$set(this.salesDataObj,"lyCurrentMonthMoney",0),this.$set(this.salesDataObj,"monthPercentage",0),this.$set(this.salesDataObj,"currentYearMoney",0),this.$set(this.salesDataObj,"lyCurrentYearMoney",0),this.$set(this.salesDataObj,"yearPercentage",0));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=this;this.active=-1,this.$nextTick((function(){e.active=0})),this.customerObj.userId?this._getDataUserCustomerSalesList():this.customerObj.userId||(this._getDailySale(),this._getSaleStat())}},{key:"_chashujuGetUserVisitWx",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["b"])({depId:this.customerObj.id,startTime:this.$dayjs(this.csjNowTime).subtract(29,"day").format("YYYY-MM-DD")+" 00:00:00",endTime:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")+" 23:59:59",companyId:this.$route.query.customerId,pageNum:1,pageSize:20});case 2:t=e.sent,this.visitNumber=t.data.total;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"visitClick",value:function(){this.customerObj.userName?(this.SET_QUERYPARAMA({startTime:this.$dayjs(this.csjNowTime).subtract(29,"day").format("YYYY-MM-DD")+" 00:00:00",endTime:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")+" 23:59:59",companyId:this.$route.query.customerId,customerName:this.$route.query.customerName,depId:this.$route.query.id,deptName:this.$route.query.name}),this.$router.push({name:"salesLineVisitPage"})):this.$router.push({name:"salesLineVisitPageTotal",query:{startTime:this.$dayjs(this.csjNowTime).subtract(29,"day").format("YYYY-MM-DD")+" 00:00:00",endTime:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")+" 23:59:59",companyId:this.$route.query.customerId,customerName:this.$route.query.customerName,depId:this.$route.query.id,deptName:this.$route.query.name}})}},{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"salesLineSalesman5"!==t.name&&"salesLineSalesman5Inner"!==t.name&&"salesLineKeyCustomer"!==t.name&&"salesLineMiddleRise3"!==t.name&&"salesLineMiddleRise3Inner"!==t.name&&"salesLineMiddleRise4"!==t.name&&"salesLineMiddleRise4Inner"!==t.name||(e.active=-1,e.$nextTick((function(){e.$route.query.customerId?e.active=0:e.active=1})),e.routerInit())}))}},{key:"routerInit",value:function(){this.customerObj=Object(r["a"])({},this.$route.query),this._chashujuGetUserVisitWx(),this.customerObj.userId?this._getDataUserCustomerSalesList():this.customerObj.userId||(this._getDailySale(),this._getSaleStat())}},{key:"created",value:function(){this.routerInit()}}]),a}(Object(l["b"])(h["a"]));O=Object(m["a"])([Object(l["a"])({components:{SalesmanList:j["a"]}})],O);var f=O,v=f,D=(a("767f"),a("2877")),g=Object(D["a"])(v,s,n,!1,null,"ea865268",null);t["default"]=g.exports}}]);