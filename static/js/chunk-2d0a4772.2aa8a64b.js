(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4772"],{"070e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-100"},[a("van-sticky",[a("filter-pop",{attrs:{formData:e.formData,licenseType:e.licenseType},on:{typeChange:e.onTypeChange,confirm:e.onFilterChange}}),a("van-tabs",{attrs:{color:"#2271F5"},on:{change:e.onActiveChange},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("van-tab",{attrs:{title:"临期"}}),a("van-tab",{attrs:{title:"审批中"}}),a("van-tab",{attrs:{title:"已审批"}})],1)],1),a("div",{staticClass:"inner-block d-flex align-center"},[e._v(" "+e._s(1===e.active?"审批中":2===e.active?3===e.agreeActive?"审批通过":"审批未通过":"当前待处理")+" "),a("div",{staticClass:"color-main-2 mx-1"},[e._v(e._s(e.totalNum))]),e._v(" 项 ")]),a("van-pull-refresh",{staticClass:"px-10",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",error:e.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){e.error=t},load:e.getDataList},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t,i){return a("license-item",{key:i,staticClass:"mb-2",attrs:{licenseType:e.licenseType,active:e.active,data:t},on:{click:function(a){return e.toDetail(t)}}})})),1)],1),0===e.active?a("fix-button",{attrs:{title:1===e.licenseStatus?"显示所有过期证照":"显示待处理",icon:"#ytcrm-"+(1===e.licenseStatus?"xingzhuang2":"a-3Dyanjing")},on:{click:e.changeStatus}}):e._e(),2===e.active?a("fix-button",{attrs:{title:4===e.agreeActive?"显示已通过":"显示未通过",icon:"#ytcrm-"+(4===e.agreeActive?"shenhebutongguo1":"shenhebutongguo")},on:{click:e.onAgreeChange}}):e._e()],1)},n=[],s=a("2909"),r=a("1da1"),c=a("d4ec"),o=a("bee2"),l=a("262e"),h=a("2caf"),u=(a("96cf"),a("99af"),a("9ab4")),v=a("1b40"),p=a("4bb5"),g=a("56b1"),d=a("301b"),f=a("753b"),y=Object(p["a"])("app"),m=function(e){Object(l["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.licenseType=0,e.active=0,e.agreeActive=3,e.page=1,e.pageSize=10,e.list=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.error=!1,e.totalNum=0,e.licenseStatus=1,e.target={},e.formData={companyKeyWord:"",licenseKeyWord:"",queryEntryId:"",expireStatus:{},validEndDateBegin:"",validEndDateTerminate:"",companyType:{}},e}return Object(o["a"])(a,[{key:"onTypeChange",value:function(e,t){this.licenseType=t,this.active=0,this.formData=e,this.onRefresh()}},{key:"onFilterChange",value:function(e){this.formData=e,this.onRefresh()}},{key:"onActiveChange",value:function(){0===this.active&&(this.licenseStatus=1),this.agreeActive=3,this.onRefresh()}},{key:"onAgreeChange",value:function(){this.agreeActive=3===this.agreeActive?4:3,this.onRefresh()}},{key:"changeStatus",value:function(){this.licenseStatus=1===this.licenseStatus?2:1,this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.list=[],this.page=1,this.getDataList()}},{key:"getDataList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,r,c,o,l,h,u,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.formData,a=t.companyKeyWord,i=t.expireStatus,n=t.companyType,r=t.queryEntryId,c=t.licenseKeyWord,o=t.validEndDateBegin,l=t.validEndDateTerminate,h={companyKeyWord:a,expireStatus:i.value,queryEntryId:r,pageNum:this.page,pageSize:this.pageSize,moreRecordFlag:1===this.licenseStatus?0:1},u=this.active<2?this.active:this.agreeActive,0===this.licenseType?(h.licenseStatus=u,h.licenseKeyWord=c,h.validEndDateBegin=o,h.validEndDateTerminate=l):1===this.licenseType&&(h.letterStatus=u,h.letterKeyWord=c,h.dateToBegin=o,h.dateToTerminate=l,h.companyType=n.value),0!==this.licenseType){e.next=10;break}return e.next=7,Object(f["i"])(h);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,Object(f["h"])(h);case 12:e.t0=e.sent;case 13:v=e.t0,this.loading=!1,this.refreshing=!1,v.success?(this.list=[].concat(Object(s["a"])(this.list),Object(s["a"])(v.data.list)),this.page++,this.finished=!v.data.hasNextPage,this.totalNum=v.data.total):this.error=!0;case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"toDetail",value:function(e){e.unLockTimes&&0===+this.active&&1===+e.reApproveStatus?this.$dialog.confirm({title:"",message:"请等待部门经理解锁",confirmButtonColor:"#1989fa"}):(this.SET_HADDONEONDETAIL(!1),this.$router.push({name:"LicenseExtensionDetail",params:{listType:"1",licenseType:String(this.licenseType),statusType:String(this.active<2?this.active:this.agreeActive),item:e}}))}},{key:"created",value:function(){this.list=[]}},{key:"activated",value:function(){this.hadDoneOnDetail&&this.onRefresh()}}]),a}(v["d"]);Object(u["a"])([y.Mutation],m.prototype,"SET_HADDONEONDETAIL",void 0),Object(u["a"])([y.Getter],m.prototype,"hadDoneOnDetail",void 0),m=Object(u["a"])([Object(v["a"])({components:{FilterPop:g["a"],LicenseItem:d["a"]}})],m);var b=m,D=b,T=a("2877"),k=Object(T["a"])(D,i,n,!1,null,null,null);t["default"]=k.exports}}]);