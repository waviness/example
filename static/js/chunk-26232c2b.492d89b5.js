(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26232c2b"],{1793:function(t,e,a){"use strict";a("32ef")},"1b5e":function(t,e,a){"use strict";a("d006")},2699:function(t,e,a){"use strict";a("a645")},"32ef":function(t,e,a){},"346c":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o}));var s=a("1da1"),i=(a("96cf"),a("b32d")),n=a("90ae"),r=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["c"],"/api/schedule/getScheduleOfDateList",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["c"],"/api/schedule/insertSchedule",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"53ae":function(t,e,a){"use strict";var s=a("d4ec"),i=a("bee2"),n=a("262e"),r=a("2caf"),o=(a("b0c0"),a("9ab4")),c=a("1b40");c["a"].registerHooks(["beforeRouteEnter"]);var l=function(t){Object(n["a"])(a,t);var e=Object(r["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(i["a"])(a,[{key:"beforeRouteEnter",value:function(t,e,a){a((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),a}(c["d"]);l=Object(o["a"])([Object(c["a"])({})],l),e["a"]=l},a645:function(t,e,a){},c1f7:function(t,e,a){},cb444:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule-contain"},[a("div",{staticClass:"schedule-buttons"},[a("div",{staticClass:"text-button",on:{click:t.changeDate}},[a("span",{staticClass:"date-text"},[t._v(" "+t._s(t.getTitle)+" ")]),a("span",[t.isToday?t._e():a("van-icon",{staticClass:"back-button",attrs:{name:"revoke"}}),a("span",{staticClass:"back-text",class:t.isToday?"today-text":"",on:{click:function(e){return e.stopPropagation(),t.backToday.apply(null,arguments)}}},[t._v(" "+t._s(t.isToday?"今天":"返回")+" ")])],1)]),a("div",{staticClass:"schedule-selcet",class:t.userId?"active":"",on:{click:function(e){return e.stopPropagation(),t.getUsersClick.apply(null,arguments)}}},[a("span",[t._v(t._s(t.userName))]),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.depTreeList&&t.depTreeList.length>0,expression:"depTreeList && depTreeList.length > 0"}],staticClass:"arrow-down",attrs:{name:"arrow-down"}})],1),a("van-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"1 == 0"}],staticClass:"schedule-switch",attrs:{color:"#fff",icon:"plus"}})],1),a("div",{staticClass:"schedule-calendar"},t._l(t.nowdateList,(function(e,s){return a("div",{key:s,staticClass:"calendar-div"},[a("div",{staticClass:"week-text flex-div"},[t._v(t._s(t.weeekList[s]))]),a("div",{staticClass:"day-text flex-div",class:t.getDayClass(e),on:{click:function(a){return t.chooseDay(e)}}},[t._v(t._s(t.getDay(e)))]),a("div",{staticClass:"schedule-points"},[a("div",{staticClass:"schedule-point",style:t.getColor(t.nowDetailList[s],"mor")}),a("div",{staticClass:"schedule-point",style:t.getColor(t.nowDetailList[s],"aft")})])])})),0),a("div",{staticClass:"schedule-content",on:{click:t.editschedule}},[a("div",{staticClass:"schedule-content-div"},[a("div",{staticClass:"schedule-time"},[t._v("上午")]),a("div",{staticClass:"schedule-status",class:"status-"+(t.nowDetail.mor?t.nowDetail.mor.scheduleType:"")},[t._v(" "+t._s(t.nowDetail.mor?t.statusMap[t.nowDetail.mor.scheduleType]:"未设置状态")+" ")]),a("div",{staticClass:"schedule-remark"},[a("div",{staticClass:"remark-title"},[t._v("备注")]),a("div",{staticClass:"remark-content"},[t._v(t._s(t.nowDetail.morRemark?t.nowDetail.morRemark:"暂无备注"))])])]),a("div",{staticClass:"schedule-content-div"},[a("div",{staticClass:"schedule-time"},[t._v("下午")]),a("div",{staticClass:"schedule-status",class:"status-"+(t.nowDetail.aft?t.nowDetail.aft.scheduleType:"")},[t._v(" "+t._s(t.nowDetail.aft?t.statusMap[t.nowDetail.aft.scheduleType]:"未设置状态")+" ")]),a("div",{staticClass:"schedule-remark"},[a("div",{staticClass:"remark-title"},[t._v("备注")]),a("div",{staticClass:"remark-content"},[t._v(t._s(t.nowDetail.aftRemark?t.nowDetail.aftRemark:"暂无备注"))])])])]),a("div",{staticClass:"schedule-kq",on:{click:t.showKqDetail}},[a("span",[t._v("客情信息")]),a("div",{style:t.nowDetail.mor&&t.nowDetail.mor.visitNum>0?"background: #4970f3":"background: #D8D8D8"},[t._v(" "+t._s(t.nowDetail.mor&&t.nowDetail.mor.visitNum?t.nowDetail.mor.visitNum:0)+" ")]),a("van-icon",{staticStyle:{"font-size":"10px"},attrs:{name:"star",color:t.nowDetail.mor&&t.nowDetail.mor.starNum>0?"#FBD71B":"#D8D8D8"}}),t.nowDetail.mor&&t.nowDetail.mor.starNum>0?a("span",[t._v(t._s(t.nowDetail.mor.starNum))]):t._e()],1),a("div",{staticClass:"schedule-auto"},[a("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.userId,expression:"!userId"}],staticClass:"schedule-auto-button",attrs:{color:"#2271F5"},on:{click:function(e){return e.stopPropagation(),t.autoEdit.apply(null,arguments)}}},[a("i",{staticClass:"schedule-auto-icon"}),a("span",[t._v("AUTO")])]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:t.userId,expression:"userId"}],staticClass:"schedule-auto-button2",attrs:{color:"#2271F5"},on:{click:function(e){return e.stopPropagation(),t.backMy.apply(null,arguments)}}},[a("i",{staticClass:"schedule-back-icon"}),a("span",[t._v("本人日程")])])],1),a("van-calendar",{attrs:{type:"range","default-date":t.dateRange,"min-date":new Date(2020,0,1),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:t.selectCalendar},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}}),t.hasDept?a("dept-user",{ref:"deptUer",attrs:{show:t.changeTypeShow,loading:t.getUserListLoading,depTreeList:t.depTreeList,deptUserData:t.deptUserData,searchList:t.userDataList,isSelect:!1},on:{search:t.refreshUserByKeywords,refresh:t.refreshUserByDepts,confirm:t.onTreeConfirm,cancel:t.cancelUserByDepts}}):t._e(),a("add-schedule",{ref:"addSchedule",attrs:{fatherDetail:t.nowDetail,dateTitle:t.getTitle,nowDetailList:t.nowDetailList},on:{insertScheduleSuccess:t._getScheduleOfDateList}})],1)},i=[],n=a("d4ec"),r=a("bee2"),o=a("262e"),c=a("2caf"),l=(a("ac1f"),a("1276"),a("5319"),a("fb6a"),a("9ab4")),u=a("1b40"),d=a("53ae"),h=a("8393"),m=a("d926"),v=a("346c"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"right"},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[a("div",{staticClass:"add-schedule"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.iskq,expression:"iskq"}],staticClass:"kq-title",on:{click:function(e){t.showAdd=!1}}},[a("van-icon",{staticClass:"kq-icon",attrs:{name:"down"}}),a("span",[t._v(t._s(t.dateTitle))])],1),a("div",{staticClass:"time-title"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.isAuto&&!t.iskq,expression:"!isAuto && !iskq"}]},[t._v(t._s(t.dateTitle))]),a("span",[t._v("上午")])]),a("div",{staticClass:"add-status",on:{click:function(e){return t.editStatus("mor")}}},[a("span",[t._v("状态")]),a("div",{staticClass:"schedule-status",class:"status-"+(t.statusMap[t.morStatus]?t.morStatus:"")},[a("span",[t._v(t._s(t.statusMap[t.morStatus]?t.statusMap[t.morStatus]:"未设置状态"))]),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:!t.iskq,expression:"!iskq"}],staticClass:"status-icon",attrs:{name:"arrow",color:"#BABABA"}})],1)]),a("div",{staticClass:"add-remark"},[a("span",[t._v("备注")]),a("van-field",{attrs:{rows:"3",label:"",autosize:"",type:"textarea",placeholder:"请输入备注",border:!1,disabled:t.iskq},model:{value:t.nowDetail.morRemark,callback:function(e){t.$set(t.nowDetail,"morRemark",e)},expression:"nowDetail.morRemark"}})],1),a("div",{staticClass:"time-title"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.isAuto&&!t.iskq,expression:"!isAuto && !iskq"}]},[t._v(t._s(t.dateTitle))]),a("span",[t._v("下午")])]),a("div",{staticClass:"add-status",on:{click:function(e){return t.editStatus("aft")}}},[a("span",[t._v("状态")]),a("div",{staticClass:"schedule-status",class:"status-"+(t.statusMap[t.aftStatus]?t.aftStatus:"")},[a("span",[t._v(t._s(t.statusMap[t.aftStatus]?t.statusMap[t.aftStatus]:"未设置状态"))]),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:!t.iskq,expression:"!iskq"}],staticClass:"status-icon",attrs:{name:"arrow",color:"#BABABA"}})],1)]),a("div",{staticClass:"add-remark"},[a("span",[t._v("备注")]),a("van-field",{attrs:{rows:"3",label:"",autosize:"",type:"textarea",placeholder:"请输入备注",border:!1,disabled:t.iskq},model:{value:t.nowDetail.aftRemark,callback:function(e){t.$set(t.nowDetail,"aftRemark",e)},expression:"nowDetail.aftRemark"}})],1),a("custom-info",{directives:[{name:"show",rawName:"v-show",value:t.iskq,expression:"iskq"}],ref:"customInfo",attrs:{fatherDetail:t.fatherDetail}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.iskq,expression:"!iskq"}],staticClass:"add-buttons"},[a("div",{staticClass:"add-button-1",on:{click:t.tbSubmit}},[t._v("同步一天")]),a("div",{staticClass:"add-button-2",on:{click:function(e){t.showAdd=!1}}},[t._v("取消")]),a("div",{staticClass:"add-button-3",on:{click:t.handleInsert}},[t._v("确认")])]),a("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"right"},model:{value:t.showStatus,callback:function(e){t.showStatus=e},expression:"showStatus"}},[a("div",{staticClass:"status-lines"},[a("div",{staticClass:"back-lines",on:{click:t.backAdd}},[a("van-icon",{staticClass:"back-icon",attrs:{name:"arrow-left"}}),a("span",[t._v("新建日程")])],1),t._l(t.statusMap,(function(e,s){return a("div",{key:s,staticClass:"status-line",class:"status-"+s,on:{click:function(e){return t.chooseStatus(s)}}},[t._v(" "+t._s(e)+" "),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:s==t.nowStatus,expression:"key == nowStatus"}],staticClass:"status-choose-icon",attrs:{name:"success"}})],1)})),a("div",{staticClass:"status-line status-",on:{click:function(e){return t.chooseStatus("")}}},[t._v(" 未设置状态 "),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:!t.statusMap[t.nowStatus],expression:"!statusMap[nowStatus]"}],staticClass:"status-choose-icon",attrs:{name:"success"}})],1)],2)])],1)])},w=[],D=(a("e9c4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-info",attrs:{loading:t.getUserVisitLoading}},[a("div",{staticClass:"kq-title"},[a("span",[t._v("客情信息")]),a("div",{style:t.fatherDetail.mor&&t.fatherDetail.mor.visitNum>0?"background: #4970f3":"background: #D8D8D8"},[t._v(" "+t._s(t.fatherDetail.mor&&t.fatherDetail.mor.visitNum?t.fatherDetail.mor.visitNum:0)+" ")]),a("van-icon",{staticStyle:{"font-size":"10px"},attrs:{name:"star",color:t.fatherDetail.mor&&t.fatherDetail.mor.starNum>0?"#FBD71B":"#D8D8D8"}}),t.fatherDetail.mor&&t.fatherDetail.mor.starNum>0?a("span",[t._v(t._s(t.fatherDetail.mor.starNum))]):t._e()],1),t._l(t.visitList,(function(e,s){return a("div",{key:s,staticClass:"kq-list"},[a("div",{staticClass:"list-line-1"},[a("div",{staticClass:"line-left"},[a("div",{staticClass:"flex-div left-address"},[a("span",[t._v(t._s(t.getPosition1(t.item.visitUserPosition)))]),a("i")]),a("div",{staticClass:"flex-div left-dw"},[a("span",[t._v(t._s(t.getPosition2(t.item.visitUserPosition)))]),a("span",[t._v("("+t._s(1===t.item.companyType?"供应商":2===t.item.companyType?"下游客户":3===t.item.companyType?"政府单位":"")+")")])]),a("div",{staticClass:"flex-div left-name"},[a("span",[t._v(t._s(t.item.visitUserName))]),1===t.item.warmthNum?a("icon-svg",{attrs:{name:"ytcrm-full-green"}}):t._e(),2===t.item.warmthNum?a("icon-svg",{attrs:{name:"ytcrm-full-orange"}}):t._e(),3===t.item.warmthNum?a("icon-svg",{attrs:{name:"ytcrm-full-red"}}):t._e()],1)]),a("div",{staticClass:"line-right"},[a("div",{staticClass:"flex-div right-time"},[a("span",[t._v(t._s(t.item.visitTime))])]),a("div",{staticClass:"flex-div right-icons"},[t.item.starFlag?a("van-icon",{staticClass:"right-icon-1",attrs:{name:"star-o"}}):t._e(),a("i",{staticClass:"right-icon-2"}),a("span",[t._v(t._s(0==t.item.whetherLegwork?"非外勤":"外勤"))])],1),0===t.item.whetherLegwork?a("div",{staticClass:"right-button active"},[t._v("个人拜访")]):t._e(),1===t.item.whetherLegwork?a("div",{staticClass:"right-button"},[t._v("协访")]):t._e()])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.item.crmLabelRemarkDtoList&&t.item.crmLabelRemarkDtoList.length>0,expression:"item.crmLabelRemarkDtoList && item.crmLabelRemarkDtoList.length > 0"}],staticClass:"list-line-3"},[a("span",[t._v("客情事件信息")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.item.crmLabelRemarkDtoList&&t.item.crmLabelRemarkDtoList.length>0&&t.item.crmLabelRemarkDtoList.length<=3,expression:"\n        item.crmLabelRemarkDtoList && item.crmLabelRemarkDtoList.length > 0 && item.crmLabelRemarkDtoList.length <= 3\n      "}],staticClass:"list-line-4"},t._l(t.item.crmLabelRemarkDtoList,(function(e,s){return a("div",{key:s},[t._v(" "+t._s(e.labelName)+" ")])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.item.crmLabelRemarkDtoList&&t.item.crmLabelRemarkDtoList.length>3,expression:"item.crmLabelRemarkDtoList && item.crmLabelRemarkDtoList.length > 3"}],staticClass:"list-line-4"},[a("div",[t._v(t._s(t.item.crmLabelRemarkDtoList[0].labelName))]),a("div",[t._v(t._s(t.item.crmLabelRemarkDtoList[1].labelName))]),a("div",[t._v(t._s(t.item.crmLabelRemarkDtoList[2].labelName))]),a("div",[t._v("...")])]),a("div",{staticClass:"list-line-5"},[a("span",[t._v("批注信息")]),a("span",[t._v(t._s(t.item.crmVisitCommentDtoList?t.item.crmVisitCommentDtoList.length:0))])]),a("div",{staticClass:"list-buttom"},[a("van-icon",{staticClass:"list-buttom-1",attrs:{name:"star-o"}}),a("div",{staticClass:"list-buttom-2"}),a("div",{staticClass:"list-buttom-3"}),a("div",{staticClass:"list-buttom-4"},[t._v("客情事件编辑")])],1)])}))],2)}),p=[],k=a("e906"),g=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.getUserVisitLoading=!1,t.visitList=[],t}return Object(r["a"])(a,[{key:"getPosition1",get:function(){return function(t){if(!t)return"";var e=t.split("/");return 1==e.length?t:e[0]+"/"}}},{key:"getPosition2",get:function(){return function(t){if(!t)return"";var e=t.split("/");if(1==e.length)return"";for(var a=e[1],s=2;s<e.length;s++)a=a+"/"+e[s];return a}}},{key:"_getUserVisit",value:function(t){var e=this;this.getUserVisitLoading=!0;var a={startTime:t+" 00:00:00",endTime:t+" 23:59:59",pageNum:1,pageSize:200,userIdList:[]};Object(k["e"])(a).then((function(t){"200"===t.code&&(e.visitList=t.data.list),e.getUserVisitLoading=!1}))}}]),a}(u["d"]);Object(l["a"])([Object(u["c"])({type:Object,default:{morRemark:"",aftRemark:""}})],g.prototype,"fatherDetail",void 0),g=Object(l["a"])([Object(u["a"])({})],g);var b=g,y=b,C=(a("e559"),a("2877")),_=Object(C["a"])(y,D,p,!1,null,"30cbb9a7",null),S=_.exports,L=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.showAdd=!1,t.showStatus=!1,t.statusMap={0:"在岗办公",1:"本地出差",2:"外地出差",3:"请假/调休"},t.nowStatus="",t.nowDetail={morRemark:"",aftRemark:"",mor:"",aft:""},t.morStatus="",t.aftStatus="",t.nowKey="mor",t.isAuto=!1,t.iskq=!1,t}return Object(r["a"])(a,[{key:"init",value:function(t,e){if(this.showAdd=!0,t&&"auto"==t)this.nowDetail={morRemark:"",aftRemark:"",mor:"",aft:""},this.morStatus="",this.aftStatus="",this.isAuto=!0,this.iskq=!1;else if(t&&"kq"==t){this.nowDetail=JSON.parse(JSON.stringify(this.fatherDetail)),this.morStatus=this.fatherDetail.mor?this.fatherDetail.mor.scheduleType:"",this.aftStatus=this.fatherDetail.aft?this.fatherDetail.aft.scheduleType:"",this.isAuto=!1,this.iskq=!0;var a=this.$refs.customInfo;a._getUserVisit(e)}else this.nowDetail=JSON.parse(JSON.stringify(this.fatherDetail)),this.morStatus=this.fatherDetail.mor?this.fatherDetail.mor.scheduleType:"",this.aftStatus=this.fatherDetail.aft?this.fatherDetail.aft.scheduleType:"",this.isAuto=!1,this.iskq=!1}},{key:"chooseStatus",value:function(t){this.nowStatus!=t&&(this.nowStatus=t),this.backAdd()}},{key:"editStatus",value:function(t){this.iskq||(this.nowKey=t,this.nowStatus="mor"==t?this.morStatus:this.aftStatus,this.showStatus=!0)}},{key:"backAdd",value:function(){"mor"==this.nowKey?this.morStatus=this.nowStatus:this.aftStatus=this.nowStatus,this.showStatus=!1}},{key:"tbSubmit",value:function(){this.aftStatus=this.morStatus,this.nowDetail.aftRemark=this.nowDetail.morRemark,this.handleInsert()}},{key:"handleInsert",value:function(){if(this.morStatus||this.aftStatus)if(this.isAuto){for(var t=[],e=0;e<5;e++){var a=this.nowDetailList[e],s=(new Date).toLocaleDateString(),i=Date.parse(s),n=a.chooseDate.slice(0,10).replace(/-/g,"/"),r=Date.parse(n);r<i||(r<i||a.mor&&(a.mor.scheduleType||0===a.mor.scheduleType)||t.push({timeSlot:1,scheduleDate:a.chooseDate,scheduleType:this.morStatus,remark:this.nowDetail.morRemark}),r<i||a.aft&&(a.aft.scheduleType||0===a.aft.scheduleType)||t.push({timeSlot:2,scheduleDate:a.chooseDate,scheduleType:this.aftStatus,remark:this.nowDetail.aftRemark}))}t.length>0?this._insertSchedule(t):(this.$toast("本周日程已维护"),this.showAdd=!1)}else{var o=[];o.push({cusId:this.nowDetail.mor.cusId,timeSlot:1,scheduleDate:this.nowDetail.chooseDate,scheduleType:this.morStatus,remark:this.nowDetail.morRemark}),o.push({cusId:this.nowDetail.aft.cusId,timeSlot:2,scheduleDate:this.nowDetail.chooseDate,scheduleType:this.aftStatus,remark:this.nowDetail.aftRemark}),this._insertSchedule(o)}else this.$toast.fail("日程未录入")}},{key:"_insertSchedule",value:function(t){var e=this;Object(v["b"])(t).then((function(t){"200"===t.code?(e.$toast.success(t.msg),e.$emit("insertScheduleSuccess"),e.showAdd=!1):e.$toast.fail(t.msg)}))}}]),a}(u["d"]);Object(l["a"])([Object(u["c"])({type:String,default:""})],L.prototype,"dateTitle",void 0),Object(l["a"])([Object(u["c"])({type:Object,default:{morRemark:"",aftRemark:""}})],L.prototype,"fatherDetail",void 0),Object(l["a"])([Object(u["c"])({type:Array,default:[]})],L.prototype,"nowDetailList",void 0),L=Object(l["a"])([Object(u["a"])({components:{customInfo:S}})],L);var O=L,T=O,j=(a("1b5e"),Object(C["a"])(T,f,w,!1,null,"bebc1250",null)),R=j.exports,x=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.nowOrClickYear=-1,t.nowOrClickMonth=-1,t.nowClickDay=new Date,t.nowOrClickWeek="周五",t.showPopover=!1,t.userId="",t.userName="我的日程",t.chooseDate=[],t.nowDetail={},t.nowDetailList=[],t.nowdateList=[],t.dateRange=[],t.weeekList=["一","二","三","四","五","六","日"],t.weekArray=["周日","周一","周二","周三","周四","周五","周六"],t.showAdd=!1,t.statusMap={0:"在岗办公",1:"本地出差",2:"外地出差",3:"请假/调休"},t.calendarShow=!1,t}return Object(r["a"])(a,[{key:"isToday",get:function(){return(new Date).toLocaleDateString()===new Date(this.nowClickDay).toLocaleDateString()}},{key:"getTitle",get:function(){var t=this.nowOrClickWeek+"，"+this.nowOrClickMonth+"月"+new Date(this.nowClickDay).getDate()+"日";return t}},{key:"getDay",get:function(){return function(t){var e=t.split("-");return e[2]}}},{key:"getDayClass",get:function(){var t=this;return function(e){e=e.replace(/-/g,"/");var a=Date.parse(e),s=(new Date).toLocaleDateString(),i=Date.parse(s),n=t.chooseDate[0].replace(/-/g,"/"),r=Date.parse(n);return r==a?"day-text-choose":i>a?"day-text-before":i==a?"day-text-today":""}}},{key:"getColor",get:function(){return function(t,e){var a="";if(!t||!t[e]||!t[e].scheduleType&&0!==t[e].scheduleType)return"";switch(t[e].scheduleType){case 0:a="#00a870";break;case 1:a="#0052d9";break;case 2:a="#ed7b2f";break;case 3:a="#e34d59";break}return"background: "+a}}},{key:"onTreeConfirm",value:function(t,e){this.changeTypeShow=!1,this.userId=t,this.userName=e||"我的日程",this._getScheduleOfDateList()}},{key:"backMy",value:function(){this.userId="",this.userName="我的日程",this._getScheduleOfDateList()}},{key:"backToday",value:function(){this.isToday||this.initDay(new Date)}},{key:"initDay",value:function(t){this.nowClickDay=t,this.nowOrClickYear=new Date(t).getFullYear(),this.nowOrClickMonth=new Date(t).getMonth()+1,this.nowOrClickWeek=this.weekArray[new Date(t).getDay()],this.nowdateList=Object(m["e"])(Object(m["k"])(t),Object(m["b"])(t)),this.dateRange=[new Date(Object(m["k"])(t)),new Date(Object(m["b"])(t))],this.chooseDate=[Object(m["c"])(t)],this._getScheduleOfDateList()}},{key:"chooseDay",value:function(t){this.initDay(new Date(t))}},{key:"changeDate",value:function(){this.calendarShow=!0}},{key:"selectCalendar",value:function(t){this.calendarConfirm(t[0])}},{key:"calendarConfirm",value:function(t){this.calendarShow=!1,this.initDay(t)}},{key:"_getScheduleOfDateList",value:function(){var t=this;this.loading=!0;var e={userId:this.userId,scheduleDateList:this.nowdateList};Object(v["a"])(e).then((function(e){if("200"===e.code){t.nowDetailList=[];for(var a=0;a<7;a++){for(var s={chooseDate:t.nowdateList[a],mor:"",morRemark:"",aft:"",aftRemark:""},i=0;i<e.data.length;i++){var n=e.data[i];n.scheduleDate.slice(0,10)==t.nowdateList[a]&&(1===n.timeSlot?(s.mor=n,s.morRemark=n.remark&&"null"!==n.remark?n.remark:""):2===n.timeSlot&&(s.aft=n,s.aftRemark=n.remark&&"null"!==n.remark?n.remark:""))}t.nowDetailList.push(s)}t.nowDetail=t.nowDetailList[0==new Date(t.nowClickDay).getDay()?6:new Date(t.nowClickDay).getDay()-1]}t.loading=!1}))}},{key:"editschedule",value:function(){if(!this.userId){var t=(new Date).toLocaleDateString(),e=Date.parse(t),a=this.chooseDate[0].replace(/-/g,"/"),s=Date.parse(a);if(!(s<e)){this.showAdd=!0;var i=this.$refs.addSchedule;i.init()}}}},{key:"autoEdit",value:function(){this.showAdd=!0;var t=this.$refs.addSchedule;t.init("auto")}},{key:"showKqDetail",value:function(){if(!this.userId&&this.nowDetail.mor&&this.nowDetail.mor.visitNum){this.showAdd=!0;var t=this.$refs.addSchedule;t.init("kq",Object(m["c"])(this.nowClickDay))}}},{key:"mounted",value:function(){this.nowOrClickYear=(new Date).getFullYear(),this.nowOrClickMonth=(new Date).getMonth()+1,this.nowOrClickWeek=this.weekArray[(new Date).getDay()],this.nowdateList=Object(m["e"])(Object(m["k"])(new Date),Object(m["b"])(new Date)),this.dateRange=[new Date(Object(m["k"])(new Date)),new Date(Object(m["b"])(new Date))],this.chooseDate=[Object(m["c"])(new Date)],this._getScheduleOfDateList()}}]),a}(Object(u["b"])(d["a"],h["a"]));x=Object(l["a"])([Object(u["a"])({components:{addSchedule:R}})],x);var N=x,M=N,A=(a("1793"),a("2699"),Object(C["a"])(M,s,i,!1,null,"2c2c5efa",null));e["default"]=A.exports},d006:function(t,e,a){},d926:function(t,e,a){"use strict";a.d(e,"c",(function(){return d})),a.d(e,"d",(function(){return h})),a.d(e,"j",(function(){return m})),a.d(e,"i",(function(){return v})),a.d(e,"k",(function(){return f})),a.d(e,"b",(function(){return w})),a.d(e,"e",(function(){return D})),a.d(e,"g",(function(){return p})),a.d(e,"f",(function(){return k})),a.d(e,"a",(function(){return g})),a.d(e,"h",(function(){return b}));a("d3b7"),a("25f0"),a("ac1f"),a("1276");var s=a("5a0c"),i=a.n(s),n=new Date,r=n.getDay(),o=n.getDate(),c=n.getMonth(),l=n.getYear();l+=l<2e3?1900:0;var u=new Date;function d(t){var e=new Date(t),a=e.getFullYear(),s=(e.getMonth()+1).toString(),i=e.getDate().toString();return+s<10&&(s="0"+s),+i<10&&(i="0"+i),a+"-"+s+"-"+i}function h(t){var e=new Date(t),a=e.getFullYear(),s=(e.getMonth()+1).toString(),i=e.getDate().toString();return+s<10&&(s="0"+s),+i<10&&(i="0"+i),a+"/"+s+"/"+i}function m(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var a=new Date(e),s=a.getDay();s=0===s?7:s;var i=a.getDate(),n=a.getMonth(),u=a.getYear();u+=u<2e3?1900:0,t=new Date(u,n,i-(s-1))}else t=new Date(l,c,o-(r-1));return d(t)}function v(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var a=new Date(e),s=a.getDay();s=0===s?7:s;var i=a.getDate(),n=a.getMonth(),u=a.getYear();u+=u<2e3?1900:0,t=new Date(u,n,i+(6-(s-1)))}else t=new Date(l,c,o+(6-(r-1)));return d(t)}function f(t){return 0===i()(t).day()?i()(t).startOf("week").subtract(6,"day").format("YYYY-MM-DD"):i()(t).startOf("week").add(1,"day").format("YYYY-MM-DD")}function w(t){return 0===i()(t).day()?i()(t).endOf("week").subtract(6,"day").format("YYYY-MM-DD"):i()(t).endOf("week").add(1,"day").format("YYYY-MM-DD")}u.setDate(1),u.setMonth(u.getMonth()-1);var D=function(t,e){var a=[],s=t.split("-"),i=e.split("-"),n=new Date(s+" 08:00:00");n.setUTCFullYear(s[0],s[1]-1,s[2]);var r=new Date(i+" 08:00:00");r.setUTCFullYear(i[0],i[1]-1,i[2]);var o,c=n.getTime(),l=r.getTime(),u=864e5;for(o=c;o<=l;)a.push(d(new Date(parseInt(String(o))))),o+=u;return a},p=function(t,e){var a=new Date(t),s="";a.setDate(a.getDate()+e);var i=a.getFullYear(),n=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,r=a.getDate()<10?"0"+a.getDate():a.getDate();return s=i+"-"+n+"-"+r,s},k=function(t){var e,a,s,i,n=new Date(t+"-01-01"),r=n.getFullYear(),o={result0:[],result1:[],result2:[],result3:[],result4:[],result5:[],result6:[]};for(e=1;e<=12;e++){switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:i=31;break;case 4:case 6:case 9:case 11:i=30;break;case 2:i=r%4===0&&r%100!==0||r%400===0?29:28;break}for(a=1;a<=i;a++){n.setMonth(e-1,a),s=n.getDay();var c=n.getFullYear(),l=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,u=n.getDate()<10?"0"+n.getDate():n.getDate();o["result"+s].push(c+"-"+l+"-"+u)}}return o};function g(t){switch(t){case 0:return"日";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";default:break}}var b=function(t){var e=new Date,a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate(),n=t.split("-"),r=0;if(s>parseInt(n[0])||s==parseInt(n[0])&&i>parseInt(n[1])){var o=new Date(a+1,parseInt(n[0])-1,parseInt(n[1])).toLocaleDateString(),c=Date.parse(o),l=Date.parse(e.toLocaleDateString());r=(c-l)/864e5}else{var u=new Date(a,parseInt(n[1])-1,parseInt(n[2])).toLocaleDateString(),d=Date.parse(u),h=Date.parse(e.toLocaleDateString());r=(d-h)/864e5}if(r<0){var m=a+1,v=m%4===0&&m%100!==0||m%400===0?366:365;r+=v}return r}},e559:function(t,e,a){"use strict";a("c1f7")}}]);