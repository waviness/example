(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd8bb0e6","chunk-67449778"],{"12de":function(t,e,a){"use strict";a("148e")},"148e":function(t,e,a){},"15a2":function(t,e,a){"use strict";a("eec9")},"250a":function(t,e,a){"use strict";a("ae2a")},"292d":function(t,e,a){},"32e5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-block pb-3 mb-4"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t._l(t.salesmanList,(function(e,s){return a("detail-card",{key:s,attrs:{isClick:t.isClick,data:e,name:e.name,mainDeptName:e.mainDeptName,showDepName:t.showDepName,per:e.data8,showDrxs:!0,perShow:!0},nativeOn:{click:function(a){return t.toDetail(e)}}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.salesmanList.length&&!t.loading,expression:"salesmanList.length == 0 && !loading"}],staticClass:"py-7",attrs:{description:"暂无数据"}})],2)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),c=a("262e"),l=a("2caf"),d=(a("96cf"),a("d3b7"),a("159b"),a("b0c0"),a("9ab4")),u=a("1b40"),h=a("ff2d"),p=a("8b7c"),m=a("2279"),f=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.salesmanList=[],t.loading=!1,t}return Object(o["a"])(a,[{key:"_queryDeptSaleData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,this.salesmanList=[],t.next=4,Object(p["y"])(e);case 4:a=t.sent,this.loading=!1,200==a.code&&a.data&&a.data.forEach((function(t){s.salesmanList.push({id:t.deptId,name:t.deptName,data1:t.dataHomeVO.dailySales?t.dataHomeVO.dailySales:0,data2:t.dataHomeVO.monthSales?t.dataHomeVO.monthSales:0,data3:t.dataHomeVO.monthGrowthRate?t.dataHomeVO.monthGrowthRate:0,data4:t.dataHomeVO.lastMonthSales?t.dataHomeVO.lastMonthSales:0,data5:t.dataHomeVO.yearSales?t.dataHomeVO.yearSales:0,data6:t.dataHomeVO.yearGrowthRate?t.dataHomeVO.yearGrowthRate:0,data7:t.dataHomeVO.lastYearSales?t.dataHomeVO.lastYearSales:0,data8:t.progress?t.progress:0})}));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getRelatedSalesmanDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,this.salesmanList=[],t.next=4,Object(m["G"])(e);case 4:a=t.sent,this.loading=!1,200==a.code&&a.data&&a.data.list.forEach((function(t){s.salesmanList.push({id:t.salesmanId,name:t.salesmanName,mainDeptName:t.mainDeptName,data1:t.dayAmount,data2:t.monthAmount,data3:t.monthOnPercent,data4:t.entireOnMonthAmount,data5:t.yearAmount,data6:t.yearOnPercent,data7:t.accuOnYearAmount,data8:t.progress?t.progress:0})}));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"toDetail",value:function(t){this.isClick&&(this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605013,menuName:t.id+"/"+t.name+"-业务员列表点击进入",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"salesLineSalesman5Inner",query:{userId:t.id,userName:t.name,id:this.entryObj.id,name:this.entryObj.name}}))}},{key:"mounted",value:function(){this.entryObj.customerId?this._getRelatedSalesmanDetailList({customerId:this.entryObj.customerId,deptId:this.entryObj.id,pageNum:1,pageSize:3e3,date:this.dateTime}):this._queryDeptSaleData({deptId:this.entryObj.id,date:this.dateTime})}}]),a}(u["d"]);Object(d["a"])([Object(u["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(u["c"])({default:!0})],f.prototype,"isClick",void 0),Object(d["a"])([Object(u["c"])({default:!1})],f.prototype,"showDepName",void 0),f=Object(d["a"])([Object(u["a"])({components:{detailCard:h["a"]}})],f);var y=f,v=y,b=a("2877"),g=Object(b["a"])(v,s,r,!1,null,"0c9227d3",null);e["a"]=g.exports},"38d7":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"white-block py-2 px-4"},[a("span",{staticClass:"color-main-2 font-14 fontWeight-500 lineHeight-20"},[t._v(" 下降客户销售额 ")]),a("div",{staticClass:"d-flex justify-space-between mt-2"},[a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近30天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.totalObj.thirtyDaysAmount1st||0===t.totalObj.thirtyDaysAmount1st?t.yToW(t.totalObj.thirtyDaysAmount1st):"--")+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近31-60天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.totalObj.thirtyDaysAmount2nd||0===t.totalObj.thirtyDaysAmount2nd?t.yToW(t.totalObj.thirtyDaysAmount2nd):"--")+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近61-90天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.totalObj.thirtyDaysAmount3rd||0===t.totalObj.thirtyDaysAmount3rd?t.yToW(t.totalObj.thirtyDaysAmount3rd):"--")+"万 ")])])])]),a("div",{staticClass:"table-div"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.dataList.length&&!t.filterParams.loading,expression:"dataList.length == 0 && !filterParams.loading"}],staticClass:"white-block pb-3 mb-4"},[a("app-empty",{staticClass:"py-7",attrs:{description:"暂无数据"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterParams.loading,expression:"filterParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),a("div",{staticClass:"table-body background-color-white mt-2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"table-line d-flex font-14 color-gray-5 lineHeight-20 align-center py-3"},[a("div",{staticClass:"table-div-1"},[t._v("客户ID/客户名称")]),a("div",{staticClass:"table-div-2"},[t._v("近30天")]),a("div",{staticClass:"table-div-3"},[t._v("近31-60天")]),a("div",{staticClass:"table-div-4"},[t._v("近61-90天")]),a("div",{staticClass:"table-div-6"},[t._v("最后一次销售时间")])]),t.dataList.length>0?a("div",{staticClass:"table-content"},t._l(t.dataList,(function(e,s){return a("div",{key:s+"pz",staticClass:"table-line d-flex font-14 color-black-2 lineHeight-20 align-center py-3",style:s%2===0?"background-color: #F7F7F7":""},[a("div",{staticClass:"table-div-1"},[t._v(t._s(e.id)+"/"+t._s(e.name))]),a("div",{staticClass:"table-div-2"},[t._v(t._s(e.count1)+"万")]),a("div",{staticClass:"table-div-3"},[t._v(t._s(e.count2)+"万")]),a("div",{staticClass:"table-div-4"},[t._v(t._s(e.count3)+"万")]),a("div",{staticClass:"table-div-6"},[t._v(t._s(e.time?e.time:"-"))])])})),0):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.filterParams.total,"items-per-page":5},on:{change:t.handlePzTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}]),model:{value:t.filterParams.currentPage,callback:function(e){t.$set(t.filterParams,"currentPage",e)},expression:"filterParams.currentPage"}})],1)]),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"mb-3"},[t._v("筛选")]),a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"filter-div px-4 mr-2",class:1===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(1)}}},[t._v(" 连续三个月下降客户 ")]),a("div",{staticClass:"filter-div px-4",class:2===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(2)}}},[t._v(" 丢失客户 ")])]),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.filterRefresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isFooterShow,expression:"isFooterShow"}],staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:t.openFilter}},[a("div",{staticClass:"d-flex align-center"},[a("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),a("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[t._v("高级操作")])],1)])],1)],1)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),c=a("262e"),l=a("2caf"),d=(a("d3b7"),a("159b"),a("96cf"),a("9ab4")),u=a("1b40"),h=a("8b7c"),p=a("2279"),m=a("cc19"),f=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.dataList=[],t.totalObj={},t.showFilter=!1,t.filterParams={keyword:"",selectType:0,orderColumn:"thirtyDaysReduce1st",orderType:0,currentPage:1,total:0,filterIndex:0,orderMethod:1,orderRule:1,loading:!1},t.stagingFilter={keyword:"",filterIndex:0,selectType:0},t.filterList=["近30天销售下降降序","近30天销售下降升序","最后销售时间降序","最后销售时间升序"],t.yToW=m["b"],t}return Object(o["a"])(a,[{key:"openFilter",value:function(){this.showFilter=!0}},{key:"_getUserCustomerSalesLostTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId},t.next=3,Object(h["p"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj=a.data:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserCustomerSalesLost",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,custom:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType},this.filterParams.loading=!0,t.next=4,Object(h["o"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(this.filterParams.total=a.data.total,s=[],a.data.list.forEach((function(t){s.push({id:t.customerId,name:t.customerName,count1:Object(m["b"])(t.thirtyDaysAmount1st),count2:Object(m["b"])(t.thirtyDaysAmount2nd),count3:Object(m["b"])(t.thirtyDaysAmount3rd),time:t.lastSaleTime})})),this.dataList=s):this.filterParams.total=0;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_queryLostCust",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id};Object(h["A"])(e).then((function(e){200==e.code&&e.data?t.totalObj=e.data:t.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0}}))}},{key:"_queryLostCustDetail",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id,custom:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType};this.filterParams.loading=!0,Object(h["B"])(e).then((function(e){if(t.filterParams.loading=!1,200==e.code&&e.data){t.filterParams.total=e.data.total;var a=[];e.data.list.forEach((function(t){a.push({id:t.lostId,name:t.lostName,count1:Object(m["b"])(t.thirtyDaysAmount1st),count2:Object(m["b"])(t.thirtyDaysAmount2nd),count3:Object(m["b"])(t.thirtyDaysAmount3rd),time:t.lastSaleTime})})),t.dataList=a}else t.filterParams.total=0}))}},{key:"_getDescentCustomerStat",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id,goodsId:this.entryObj.goodsId};Object(p["p"])(e).then((function(e){200==e.code&&e.data?t.totalObj={thirtyDaysAmount1st:e.data.recent30SalesAmount,thirtyDaysAmount2nd:e.data.recent31To60SalesAmount,thirtyDaysAmount3rd:e.data.recent61To90SalesAmount}:t.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0}}))}},{key:"_getDescentCustomerDetailList",value:function(){var t=this,e={selectedDate:this.dateTime,deptId:this.entryObj.id,goodsId:this.entryObj.goodsId,customerKeyword:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,filterCondition:this.filterParams.selectType,orderMethod:this.filterParams.orderMethod,orderRule:this.filterParams.orderRule};this.filterParams.loading=!0,Object(p["o"])(e).then((function(e){if(t.filterParams.loading=!1,200==e.code&&e.data){t.filterParams.total=e.data.total;var a=[];e.data.list.forEach((function(t){a.push({id:t.customerId,name:t.customerName,count1:Object(m["b"])(t.recent30SalesAmount),count2:Object(m["b"])(t.recent31To60SalesAmount),count3:Object(m["b"])(t.recent61To90SalesAmount),time:t.lastSaleDate})})),t.dataList=a}else t.filterParams.total=0}))}},{key:"_getUserGDCustomerSalesLost",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,custom:this.filterParams.keyword,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:5,goodsId:this.entryObj.goodsId,userId:this.entryObj.userId,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(h["q"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(s=[],a.data.list.forEach((function(t){s.push({count1:Object(m["b"])(t.thirtyDaysAmount1st),count2:Object(m["b"])(t.thirtyDaysAmount2nd),count3:Object(m["b"])(t.thirtyDaysAmount3rd),id:t.customerId,name:t.customerName,time:t.lastSaleTime})})),this.dataList=s,this.filterParams.total=a.data.total):(this.dataList=[],this.filterParams.total=0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserGdCustomSalesLostTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,goodsId:this.entryObj.goodsId,userId:this.entryObj.userId},t.next=3,Object(h["s"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj=a.data:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSx",value:function(t){this.stagingFilter.selectType===t?this.stagingFilter.selectType=0:this.stagingFilter.selectType=t}},{key:"handlePzTableChange",value:function(){this.dataList=[],"departmentRelate"===this.type&&this._queryLostCustDetail(),"goodsDepartRelate"===this.type?this._getDescentCustomerDetailList():"personGoodsRelate"===this.type?this._getUserGDCustomerSalesLost():"personRelate"===this.type&&this._getUserCustomerSalesLost()}},{key:"filterRefresh",value:function(){this.filterParams.keyword="",this.filterParams.filterIndex=0,this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=0,this.filterParams.selectType=0,this.stagingFilter.filterIndex=this.filterParams.filterIndex,this.stagingFilter.keyword=this.filterParams.keyword,this.stagingFilter.selectType=this.filterParams.selectType,this.showFilter=!1,this.init()}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"handleFilterOk",value:function(){if(this.showFilter=!1,this.dataList=[],this.filterParams.currentPage=1,this.filterParams.goods=this.stagingFilter.keyword,this.filterParams.filterIndex=this.stagingFilter.filterIndex,this.filterParams.selectType=this.stagingFilter.selectType,this.filterParams.keyword=this.stagingFilter.keyword,"personRelate"===this.type)switch(this.filterParams.filterIndex){case 0:this.filterParams.orderMethod=1,this.filterParams.orderRule=1;break;case 1:this.filterParams.orderMethod=1,this.filterParams.orderRule=2;break;case 2:this.filterParams.orderMethod=2,this.filterParams.orderRule=1;break;case 3:this.filterParams.orderMethod=2,this.filterParams.orderRule=2;break}else switch(this.filterParams.filterIndex){case 0:this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=0;break;case 1:this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=1;break;case 2:this.filterParams.orderColumn="lastSaleTime",this.filterParams.orderType=0;break;case 3:this.filterParams.orderColumn="lastSaleTime",this.filterParams.orderType=1;break}this.init()}},{key:"init",value:function(){this.dataList=[],"departmentRelate"===this.type&&(this._queryLostCust(),this._queryLostCustDetail()),"goodsDepartRelate"===this.type?(this._getDescentCustomerStat(),this._getDescentCustomerDetailList()):"personGoodsRelate"===this.type?(this._getUserGDCustomerSalesLost(),this._getUserGdCustomSalesLostTotal()):"personRelate"===this.type&&(this._getUserCustomerSalesLostTotal(),this._getUserCustomerSalesLost())}},{key:"mounted",value:function(){this.init()}}]),a}(u["d"]);Object(d["a"])([Object(u["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(u["c"])({default:!0})],f.prototype,"isFooterShow",void 0),Object(d["a"])([Object(u["c"])({default:""})],f.prototype,"type",void 0),f=Object(d["a"])([Object(u["a"])({})],f);var y=f,v=y,b=(a("d37c"),a("2877")),g=Object(b["a"])(v,s,r,!1,null,"13d1bf2b",null);e["a"]=g.exports},4388:function(t,e,a){"use strict";var s=a("d4ec"),r=a("bee2"),i=a("262e"),n=a("2caf"),o=(a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("d81d"),a("9ab4")),c=a("1b40"),l=a("2279"),d=a("856a"),u=a("de29"),h=a("6f96"),p=a("8d1d"),m=a("38d7"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex pt-2"},[a("div",{staticClass:"dailySales flex-5",class:t.visitFlag?"mr-2":""},[a("div",{staticClass:"d-flex flex-column justify-space-between font-14 pt-3 pl-4"},[a("div",[t._v("当日销售(万元)")]),t.objName?a("div",{staticClass:"py-1"},[a("span",{staticClass:"fontWeight"},[t._v(t._s(t.objName))])]):a("div",{staticClass:"py-1",staticStyle:{visibility:"hidden"}},[t._v("占位")]),t.loading?a("van-loading",{attrs:{type:"spinner",color:"#fff"}}):t._e(),a("div",{staticClass:"font-28 pt-2 fontWeight",staticStyle:{"font-family":"HarmonyOS_Sans_SC_Black"}},[t._v(t._s(t.currentDayMoney))])],1)]),t.visitFlag?a("div",{staticClass:"visitCard pb-2 color-gray-4 d-flex flex-column justify-space-between fontWeight flex-3",on:{click:t.visitClick}},[a("div",{staticClass:"d-flex pl-4 pr-2 pt-3 align-center justify-space-between"},[a("span",{staticClass:"font-16"},[t._v("近30天拜访")]),a("van-icon",{attrs:{name:"arrow",size:"16px"}})],1),a("div",{staticClass:"font-28 pl-4 pt-2 color-main-3"},[t._v(t._s(t.visitNumber)+"次")])]):t._e()])])},y=[],v=function(t){Object(i["a"])(a,t);var e=Object(n["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a,[{key:"visitClick",value:function(){this.$emit("visitClick")}}]),a}(c["d"]);Object(o["a"])([Object(c["c"])()],v.prototype,"currentDayMoney",void 0),Object(o["a"])([Object(c["c"])()],v.prototype,"visitNumber",void 0),Object(o["a"])([Object(c["c"])()],v.prototype,"objName",void 0),Object(o["a"])([Object(c["c"])({default:!0})],v.prototype,"visitFlag",void 0),Object(o["a"])([Object(c["c"])()],v.prototype,"loading",void 0),v=Object(o["a"])([Object(c["a"])({})],v);var b=v,g=b,O=(a("15a2"),a("2877")),j=Object(O["a"])(g,f,y,!1,null,"6e6210ca",null),C=j.exports,P=a("5b65"),_=a("84c3"),w=a("4bb5"),x=Object(w["a"])("app"),k=Object(w["a"])("cdp");c["a"].registerHooks(["beforeRouteEnter"]);var T=function(t){Object(i["a"])(a,t);var e=Object(n["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.refreshData=!0,t}return Object(r["a"])(a,[{key:"_getQuickOverviewMix",value:function(t){return new Promise((function(e,a){Object(l["E"])(t).then((function(t){e(t)})).catch((function(t){a(t)}))}))}},{key:"hasDifferentValues",value:function(t,e){return new Set(t.map((function(t){return t[e]}))).size>1}}]),a}(c["d"]);Object(o["a"])([k.Getter],T.prototype,"mode",void 0),Object(o["a"])([x.Getter],T.prototype,"csjNowTime",void 0),Object(o["a"])([x.Getter],T.prototype,"csjChangeTime",void 0),Object(o["a"])([k.Getter],T.prototype,"sybOriginList",void 0),Object(o["a"])([k.Getter],T.prototype,"xszxOriginList",void 0),Object(o["a"])([k.Getter],T.prototype,"bmList",void 0),Object(o["a"])([k.Getter],T.prototype,"bmChildList",void 0),Object(o["a"])([x.Getter],T.prototype,"userInfor",void 0),Object(o["a"])([k.Mutation],T.prototype,"SET_MODE",void 0),Object(o["a"])([x.Mutation],T.prototype,"SET_CSJNOWTIME",void 0),Object(o["a"])([x.Mutation],T.prototype,"SET_CSJCHANGETIME",void 0),Object(o["a"])([x.Mutation],T.prototype,"SET_QUERYPARAMA",void 0),Object(o["a"])([k.Action],T.prototype,"_getsybOriginList",void 0),Object(o["a"])([k.Action],T.prototype,"_getxszxOriginList",void 0),Object(o["a"])([k.Action],T.prototype,"_getbmList",void 0),Object(o["a"])([k.Action],T.prototype,"_getbmChildList",void 0),Object(o["a"])([k.Action],T.prototype,"_refreshList",void 0),Object(o["a"])([k.Mutation],T.prototype,"SET_SELECTDEPTFLAG",void 0),T=Object(o["a"])([Object(c["a"])({components:{Header:d["a"],VisitCard:C,CommonCard:P["a"],GoodsList:u["a"],LoseGoodsTable:p["a"],CustomerList:h["a"],LoseCustomerTable:m["a"],BalanceGross:_["a"]}})],T);e["a"]=T},"442b":function(t,e,a){"use strict";a("4fbd")},"4fbd":function(t,e,a){},5167:function(t,e,a){},5387:function(t,e,a){},"59d8":function(t,e,a){"use strict";a("a314")},"5b65":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cardWarp positionR white-block mt-2"},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}}),a("div",{staticClass:"d-flex justify-space-between py-4",staticStyle:{height:"50%","border-bottom":"1px solid #ebedf0"}},[a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("本月累计")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.salesDataObj.currentMonthMoney))])]),a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("去年同期")]),a("span",{staticClass:"font-16 color-main-2"},[t._v(" "+t._s(t.salesDataObj.lyCurrentMonthMoney))])]),a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("同比增幅")]),a("span",{staticClass:"font-16",class:t.getColor(t.salesDataObj.monthPercentage)},[t._v(t._s(t.getFH(t.salesDataObj.monthPercentage))+t._s(t.salesDataObj.monthPercentage)+"%")])])]),a("div",{staticClass:"d-flex justify-space-between py-4",staticStyle:{height:"50%"}},[a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("本年累计")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.salesDataObj.currentYearMoney))])]),a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("去年同期")]),a("span",{staticClass:"font-16 color-main-2"},[t._v(t._s(t.salesDataObj.lyCurrentYearMoney))])]),a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("同比增幅")]),a("span",{staticClass:"font-16",class:t.getColor(t.salesDataObj.yearPercentage)},[t._v(t._s(t.getFH(t.salesDataObj.yearPercentage))+t._s(t.salesDataObj.yearPercentage)+"%")])])])],1)},r=[],i=a("d4ec"),n=a("bee2"),o=a("262e"),c=a("2caf"),l=(a("ac1f"),a("5319"),a("9ab4")),d=a("1b40"),u=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(n["a"])(a,[{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}},{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}}]),a}(d["d"]);Object(l["a"])([Object(d["c"])()],u.prototype,"salesDataObj",void 0),Object(l["a"])([Object(d["c"])()],u.prototype,"loading",void 0),u=Object(l["a"])([Object(d["a"])({})],u);var h=u,p=h,m=(a("b37f"),a("2877")),f=Object(m["a"])(p,s,r,!1,null,"47311820",null);e["a"]=f.exports},6379:function(t,e,a){"use strict";a("8d85")},"6c8f":function(t,e,a){"use strict";a("a41d")},"6f96":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-block pb-3 mb-4"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterParams.loading,expression:"filterParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t._l(t.dataList,(function(e,s){return a("detail-card",{key:s,attrs:{isClick:t.isClick,data:e,name:e.id+"/"+e.name,showDrxs:!0},nativeOn:{click:function(a){return t.toDetail(e)}}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.dataList.length&&!t.filterParams.loading,expression:"dataList.length == 0 && !filterParams.loading"}],staticClass:"py-7",attrs:{description:"暂无数据"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.filterParams.total,"items-per-page":t.filterParams.pageSize},on:{change:t.handleKbTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}]),model:{value:t.filterParams.currentPage,callback:function(e){t.$set(t.filterParams,"currentPage",e)},expression:"filterParams.currentPage"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isFooterShow,expression:"isFooterShow"}],staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:t.openFilter}},[a("div",{staticClass:"d-flex align-center"},[a("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),a("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[t._v("高级操作")])],1)])],1),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.refresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)])],2)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),c=a("262e"),l=a("2caf"),d=(a("96cf"),a("d3b7"),a("159b"),a("b0c0"),a("9ab4")),u=a("1b40"),h=a("ff2d"),p=a("8b7c"),m=a("2279"),f=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.showFilter=!1,t.dataList=[],t.filterList=["本年累计销售额降序","本年累计销售额升序","本月销售额降序","本月销售额升序"],t.stagingFilter={keyword:"",filterIndex:0},t.filterParams={keyword:"",orderColumn:"currentYearMoney",orderType:0,currentPage:1,pageSize:10,total:0,loading:!1,finish:!1,filterIndex:0,selectType:0},t}return Object(o["a"])(a,[{key:"handleKbTableChange",value:function(){this.init()}},{key:"_getDataUserCustomerSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,custom:this.filterParams.keyword,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(p["e"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.dataList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.filterParams.total=a.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserGdCustomSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,custom:this.filterParams.keyword,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,userId:this.entryObj.userId,goodsId:this.entryObj.goodsId,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(p["r"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.dataList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.filterParams.total=a.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getFixGoodsNewGoodsSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,customerKeyword:this.filterParams.keyword,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,userId:this.entryObj.userId,goodsId:this.entryObj.goodsId,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(m["v"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.dataList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.filterParams.total=a.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getDifferentCustomerDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={date:this.dateTime,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,customerKeyword:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,deptId:this.entryObj.id,goodsId:this.entryObj.goodsId,hideLoading:!0,type:e},this.filterParams.loading=!0,t.next=4,Object(m["q"])(a);case 4:s=t.sent,this.filterParams.loading=!1,200==s.code&&s.data&&s.data.list?(s.data.list.forEach((function(t){r.dataList.push({id:t.customerId,name:t.customerName,data1:t.dayAmount?t.dayAmount:0,data2:t.monthAmount?t.monthAmount:0,data3:t.monthOnPercent?t.monthOnPercent:0,data4:t.entireOnMonthAmount?t.entireOnMonthAmount:0,data5:t.yearAmount?t.yearAmount:0,data6:t.yearOnPercent?t.yearOnPercent:0,data7:t.accuOnYearAmount?t.accuOnYearAmount:0})})),this.filterParams.total=s.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"toDetail",value:function(t){this.isClick&&(this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605011,menuName:t.id+"/"+t.name+"-客户列表点击进入",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"salesLineCustomerSalesPage",query:{customerId:t.id,customerName:t.name,userId:this.entryObj.userId,userName:this.entryObj.userName,id:this.entryObj.id,name:this.entryObj.name}}))}},{key:"_customerGetDeptDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={deptId:this.entryObj.id,date:this.dateTime,customerKeyword:this.filterParams.keyword,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(m["a"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.dataList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.filterParams.total=a.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"refresh",value:function(){this.filterParams.keyword="",this.filterParams.filterIndex=1,this.filterParams.orderColumn="currentYearMoney",this.filterParams.orderType=0,this.stagingFilter.keyword=this.filterParams.keyword,this.stagingFilter.filterIndex=this.filterParams.filterIndex}},{key:"openFilter",value:function(){this.showFilter=!0}},{key:"handleFilterOk",value:function(){switch(this.dataList=[],this.showFilter=!1,this.filterParams.currentPage=1,this.filterParams.keyword=this.stagingFilter.keyword,this.filterParams.filterIndex=this.stagingFilter.filterIndex,this.filterParams.finish=!1,this.filterParams.filterIndex){case 0:this.filterParams.orderColumn="currentYearMoney",this.filterParams.orderType=0;break;case 1:this.filterParams.orderColumn="currentYearMoney",this.filterParams.orderType=1;break;case 2:this.filterParams.orderColumn="currentMonthMoney",this.filterParams.orderType=0;break;case 3:this.filterParams.orderColumn="currentMonthMoney",this.filterParams.orderType=1;break}this.init()}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"init",value:function(){this.dataList=[],"personRelate"===this.type?this._getDataUserCustomerSalesList():"goodsPersonRelate"===this.type?("全客户"===this.customerName&&this._getUserGdCustomSalesList(),"新增客户"===this.customerName&&this._getFixGoodsNewGoodsSalesList()):"departmentRelate"===this.type?this._customerGetDeptDetailList():"goodsDepartmentRelate"===this.type&&("新增客户"===this.customerName&&this._getDifferentCustomerDetailList(2),"全客户"===this.customerName&&this._getDifferentCustomerDetailList(1))}},{key:"mounted",value:function(){this.init()}}]),a}(u["d"]);Object(d["a"])([Object(u["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(u["c"])({default:!0})],f.prototype,"isFooterShow",void 0),Object(d["a"])([Object(u["c"])({default:1})],f.prototype,"type",void 0),Object(d["a"])([Object(u["c"])({default:!0})],f.prototype,"isClick",void 0),Object(d["a"])([Object(u["c"])({default:""})],f.prototype,"customerName",void 0),f=Object(d["a"])([Object(u["a"])({components:{detailCard:h["a"]}})],f);var y=f,v=y,b=(a("7292"),a("2877")),g=Object(b["a"])(v,s,r,!1,null,"5c8c957e",null);e["a"]=g.exports},7292:function(t,e,a){"use strict";a("5167")},"7e5c":function(t,e,a){},"84c3":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.shouldShow?a("div",{staticClass:"balance-gross",on:{click:t.navigateToBalanceGross}},[a("div",{staticClass:"circle-btn"},[a("van-icon",{staticClass:"icon-left",attrs:{name:"circle",size:"16px"}}),a("span",{staticClass:"btn-text"},[t._v("点击进入平衡毛利面板")]),a("van-icon",{staticClass:"icon-right",attrs:{name:"arrow",size:"16px"}})],1)]):t._e()},r=[],i=a("d4ec"),n=a("bee2"),o=a("262e"),c=a("2caf"),l=(a("7db0"),a("d3b7"),a("9ab4")),d=a("1b40"),u=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.defaultDeptId="",t.defaultDeptName="",t.departments=[{deptId:968,deptName:"英特药业"},{deptId:974,deptName:"英特电商"},{deptId:998,deptName:"宁波英特"},{deptId:984,deptName:"温州英特"},{deptId:985,deptName:"台州英特"},{deptId:990,deptName:"嘉兴英特"},{deptId:991,deptName:"嘉信医药"},{deptId:992,deptName:"湖州英特"},{deptId:993,deptName:"绍兴英特"},{deptId:994,deptName:"金华英特"},{deptId:995,deptName:"浦江英特"},{deptId:996,deptName:"丽水英特"},{deptId:997,deptName:"英特海斯"},{deptId:999,deptName:"明州英特"},{deptId:1e3,deptName:"舟山卫盛"},{deptId:1001,deptName:"淳安英特"},{deptId:1002,deptName:"英特盛健"},{deptId:1042,deptName:"英特生物"}],t}return Object(n["a"])(a,[{key:"shouldShow",get:function(){var t=JSON.parse(localStorage.getItem("phmlArray")||"[]");return!!(Array.isArray(t)&&t.length>0)&&(this.calculateDefaultDeptId(t),!0)}},{key:"calculateDefaultDeptId",value:function(t){var e=this.departments.find((function(e){return e.deptName==t[0]}));this.defaultDeptId=e?e.deptId:null,this.defaultDeptName=t[0]}},{key:"navigateToBalanceGross",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605006,menuName:"平衡毛利",menuOperation:"平衡毛利点击载入",operationType:1});var t=JSON.parse(localStorage.getItem("phmlArray")||"[]");Array.isArray(t)&&1==t.length?this.$router.push({name:"BalanceGross",query:{deptId:this.defaultDeptId,deptName:this.defaultDeptName,type:"0",role:this.$route.query.role}}):this.$router.push({name:"AllBalanceGross",query:{role:this.$route.query.role}})}}]),a}(d["d"]);u=Object(l["a"])([d["a"]],u);var h=u,p=h,m=(a("250a"),a("2877")),f=Object(m["a"])(p,s,r,!1,null,"a585606a",null);e["a"]=f.exports},"856a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header px-4 d-flex align-center"},[a("div",{staticClass:"flex-3 d-flex align-center",on:{click:function(e){return e.stopPropagation(),t.deptSelectClick.apply(null,arguments)}}},[a("span",{staticClass:"fontWeight",class:t.entryObj.name.length>6?"font-24":"font-30",staticStyle:{"font-family":"'HarmonyOS Sans SC Black'"}},[t._v(t._s(t.entryObj.name)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.entryObj.parentName&&5!==t.level,expression:"entryObj.parentName && level !== 5"}],staticClass:"font-12"},[t._v("("+t._s(t.entryObj.parentName)+")")])]),t.selectDeptFlagEnter&&t.selectDeptFlag?a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}}):t._e()],1),a("div",{staticClass:"flex-2 textAlignR pr-8",staticStyle:{"font-family":"'HarmonyOS Sans SC Bold'"},on:{click:t.calendarClick}},[a("span",{staticClass:"time color-gray-4 fontWeight"},[t._v(t._s(t.dateTime))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)]),a("van-calendar",{attrs:{"default-date":t.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:t.calendarConfirm},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}})],1)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),c=a("262e"),l=a("2caf"),d=(a("96cf"),a("9ab4")),u=a("1b40"),h=a("4bb5"),p=Object(h["a"])("app"),m=Object(h["a"])("cdp"),f=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.calendarShow=!1,t}return Object(o["a"])(a,[{key:"deptSelectClick",value:function(){this.selectDeptFlag&&this.$emit("deptSelectClick")}},{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"calendarConfirm",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.calendarShow=!1,this.SET_CSJNOWTIME(e),this.SET_CSJCHANGETIME(!0),this.$emit("calendarConfirm");case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),a}(u["d"]);Object(d["a"])([Object(u["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"level",void 0),Object(d["a"])([Object(u["c"])({default:!0})],f.prototype,"selectDeptFlagEnter",void 0),Object(d["a"])([p.Getter],f.prototype,"csjNowTime",void 0),Object(d["a"])([m.Getter],f.prototype,"selectDeptFlag",void 0),Object(d["a"])([p.Mutation],f.prototype,"SET_CSJNOWTIME",void 0),Object(d["a"])([p.Mutation],f.prototype,"SET_CSJCHANGETIME",void 0),f=Object(d["a"])([Object(u["a"])({})],f);var y=f,v=y,b=(a("dc9f"),a("2877")),g=Object(b["a"])(v,s,r,!1,null,"1e132d6c",null);e["a"]=g.exports},"8d1d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.totalObj.thirtyDaysAmount1st||0===t.totalObj.thirtyDaysAmount1st?a("div",{staticClass:"white-block py-2 px-4"},[a("span",{staticClass:"color-main-2 font-14 fontWeight-500 lineHeight-20"},[t._v(" 流失品种销售额 ")]),a("div",{staticClass:"d-flex justify-space-between mt-2"},[a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近30天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.totalObj.thirtyDaysAmount1st))+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近31-60天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.totalObj.thirtyDaysAmount2nd))+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近61-90天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.totalObj.thirtyDaysAmount3rd))+"万 ")])])])]):t._e(),a("div",{staticClass:"table-div"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.dataList.length&&!t.filterParams.loading,expression:"dataList.length == 0 && !filterParams.loading"}],staticClass:"white-block pb-3 mb-4"},[a("app-empty",{staticClass:"py-7",attrs:{description:"暂无数据"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterParams.loading,expression:"filterParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),a("div",{staticClass:"table-body background-color-white mt-2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"table-line d-flex font-14 color-gray-5 lineHeight-20 align-center py-3"},[a("div",{staticClass:"table-div-1"},[t._v("货品ID/货品名称")]),a("div",{staticClass:"table-div-2"},[t._v("近30天")]),a("div",{staticClass:"table-div-3"},[t._v("近31-60天")]),a("div",{staticClass:"table-div-4"},[t._v("近61-90天")]),a("div",{staticClass:"table-div-6"},[t._v("最后一次销售时间")])]),t.dataList.length>0?a("div",{staticClass:"table-content"},t._l(t.dataList,(function(e,s){return a("div",{key:s+"pz",staticClass:"table-line d-flex font-14 color-black-2 lineHeight-20 align-center py-3",style:s%2===0?"background-color: #F7F7F7":""},[a("div",{staticClass:"table-div-1"},[t._v(t._s(e.id)+"/"+t._s(e.name))]),a("div",{staticClass:"table-div-2"},[t._v(t._s(e.count1)+"万")]),a("div",{staticClass:"table-div-3"},[t._v(t._s(e.count2)+"万")]),a("div",{staticClass:"table-div-4"},[t._v(t._s(e.count3)+"万")]),a("div",{staticClass:"table-div-6"},[t._v(t._s(e.time?e.time:"-"))])])})),0):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.filterParams.total,"items-per-page":5},on:{change:t.handlePzTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}]),model:{value:t.filterParams.currentPage,callback:function(e){t.$set(t.filterParams,"currentPage",e)},expression:"filterParams.currentPage"}})],1)]),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"mb-3"},[t._v("筛选")]),a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"filter-div px-4 mr-2",class:1===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(1)}}},[t._v(" 连续三个月下降品种 ")]),a("div",{staticClass:"filter-div px-4",class:2===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(2)}}},[t._v(" 丢失品种 ")])]),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.filterRefresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isFooterShow,expression:"isFooterShow"}],staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:t.openFilter}},[a("div",{staticClass:"d-flex align-center"},[a("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),a("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[t._v("高级操作")])],1)])],1)],1)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),c=a("262e"),l=a("2caf"),d=(a("96cf"),a("d3b7"),a("159b"),a("9ab4")),u=a("1b40"),h=a("8b7c"),p=a("cc19"),m=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.dataList=[],t.totalObj={},t.showFilter=!1,t.filterParams={keyword:"",selectType:0,orderColumn:"thirtyDaysReduce1st",orderType:0,currentPage:1,total:0,filterIndex:0,orderMethod:1,orderRule:1,loading:!1},t.stagingFilter={keyword:"",filterIndex:0,selectType:0},t.filterList=["近30天销售下降降序","近30天销售下降升序","最后销售时间降序","最后销售时间升序"],t.yToW=p["b"],t}return Object(o["a"])(a,[{key:"openFilter",value:function(){this.showFilter=!0}},{key:"_getDescentGoods",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customerId:this.entryObj.customerId,deptId:this.entryObj.id,selectedDate:this.dateTime,goodsKeyword:this.filterParams.keyword,filterCondition:this.filterParams.selectType,orderMethod:this.filterParams.orderMethod,orderRule:this.filterParams.orderRule,pageNum:this.filterParams.currentPage,pageSize:5,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(h["h"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(this.dataList=a.data.list,this.filterParams.total=a.data.total,s=[],a.data.list.forEach((function(t){s.push({count1:Object(p["b"])(t.recent30SalesAmount),count2:Object(p["b"])(t.recent31To60SalesAmount),count3:Object(p["b"])(t.recent61To90SalesAmount),id:t.goodsId,name:t.goodsName,time:t.lastSaleDate})})),this.dataList=s,this.filterParams.total=a.data.total):(this.dataList=[],this.filterParams.total=0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getDescentGoodsStat",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customerId:this.entryObj.customerId,deptId:this.entryObj.id,selectedDate:this.dateTime,hideLoading:!0},t.next=3,Object(h["i"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj={thirtyDaysAmount1st:a.data.recent30SalesAmount,thirtyDaysAmount2nd:a.data.recent31To60SalesAmount,thirtyDaysAmount3rd:a.data.recent61To90SalesAmount}:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserCstmGoodSalesLostTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,customerId:this.entryObj.customerId,hideLoading:!0},t.next=3,Object(h["n"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj=a.data:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserCstmGoodSalesLost",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,goods:this.filterParams.keyword,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:5,userId:this.entryObj.userId,customerId:this.entryObj.customerId,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(h["m"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(s=[],a.data.list.forEach((function(t){s.push({count1:Object(p["b"])(t.thirtyDaysAmount1st),count2:Object(p["b"])(t.thirtyDaysAmount2nd),count3:Object(p["b"])(t.thirtyDaysAmount3rd),id:t.goodsId,name:t.goodsName,time:t.lastSaleTime})})),this.dataList=s,this.filterParams.total=a.data.total):(this.dataList=[],this.filterParams.total=0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_queryLostGoods",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id};Object(h["C"])(e).then((function(e){200==e.code&&e.data?t.totalObj=e.data:t.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0}}))}},{key:"_queryLostGoodsDetail",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id,goods:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType};this.filterParams.loading=!0,Object(h["D"])(e).then((function(e){if(t.filterParams.loading=!1,200==e.code&&e.data){t.filterParams.total=e.data.total;var a=[];e.data.list.forEach((function(t){a.push({id:t.lostId,name:t.lostName,count1:Object(p["b"])(t.thirtyDaysAmount1st),count2:Object(p["b"])(t.thirtyDaysAmount2nd),count3:Object(p["b"])(t.thirtyDaysAmount3rd),time:t.lastSaleTime})})),t.dataList=a}else t.filterParams.total=0}))}},{key:"_getUserGoodSalesLostTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId},t.next=3,Object(h["u"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj=a.data:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserGoodSalesLost",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,goods:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType},this.filterParams.loading=!0,t.next=4,Object(h["t"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(this.filterParams.total=a.data.total,s=[],a.data.list.forEach((function(t){s.push({id:t.goodsId,name:t.goodsName,count1:Object(p["b"])(t.thirtyDaysAmount1st),count2:Object(p["b"])(t.thirtyDaysAmount2nd),count3:Object(p["b"])(t.thirtyDaysAmount3rd),time:t.lastSaleTime})})),this.dataList=s):this.filterParams.total=0;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSx",value:function(t){this.stagingFilter.selectType===t?this.stagingFilter.selectType=0:this.stagingFilter.selectType=t}},{key:"handlePzTableChange",value:function(){this.dataList=[],"personCustomRelate"===this.type?this._getUserCstmGoodSalesLost():"customDepartmentRelate"===this.type?this._getDescentGoods():"departmentRelate"===this.type?this._queryLostGoodsDetail():"personRelate"===this.type&&this._getUserGoodSalesLost()}},{key:"filterRefresh",value:function(){this.filterParams.keyword="",this.filterParams.filterIndex=0,this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=0,this.filterParams.selectType=0,this.stagingFilter.filterIndex=this.filterParams.filterIndex,this.stagingFilter.keyword=this.filterParams.keyword,this.stagingFilter.selectType=this.filterParams.selectType,this.showFilter=!1,this.init()}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"handleFilterOk",value:function(){if(this.showFilter=!1,this.dataList=[],this.filterParams.currentPage=1,this.filterParams.keyword=this.stagingFilter.keyword,this.filterParams.filterIndex=this.stagingFilter.filterIndex,this.filterParams.selectType=this.stagingFilter.selectType,"departmentRelate"!==this.type)switch(this.filterParams.filterIndex){case 0:this.filterParams.orderMethod=1,this.filterParams.orderRule=1;break;case 1:this.filterParams.orderMethod=1,this.filterParams.orderRule=2;break;case 2:this.filterParams.orderMethod=2,this.filterParams.orderRule=1;break;case 3:this.filterParams.orderMethod=2,this.filterParams.orderRule=2;break}else switch(this.filterParams.filterIndex){case 0:this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=0;break;case 1:this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=1;break;case 2:this.filterParams.orderColumn="lastSaleTime",this.filterParams.orderType=0;break;case 3:this.filterParams.orderColumn="lastSaleTime",this.filterParams.orderType=1;break}this.init()}},{key:"init",value:function(){this.dataList=[],"personCustomRelate"===this.type?(this._getUserCstmGoodSalesLostTotal(),this._getUserCstmGoodSalesLost()):"customDepartmentRelate"===this.type?(this._getDescentGoods(),this._getDescentGoodsStat()):"departmentRelate"===this.type?(this._queryLostGoods(),this._queryLostGoodsDetail()):"personRelate"===this.type&&(this._getUserGoodSalesLostTotal(),this._getUserGoodSalesLost())}},{key:"mounted",value:function(){this.init()}}]),a}(u["d"]);Object(d["a"])([Object(u["c"])()],m.prototype,"entryObj",void 0),Object(d["a"])([Object(u["c"])()],m.prototype,"dateTime",void 0),Object(d["a"])([Object(u["c"])({default:!0})],m.prototype,"isFooterShow",void 0),Object(d["a"])([Object(u["c"])({default:""})],m.prototype,"type",void 0),m=Object(d["a"])([Object(u["a"])({})],m);var f=m,y=f,v=(a("9500"),a("2877")),b=Object(v["a"])(y,s,r,!1,null,"8d1c9134",null);e["a"]=b.exports},"8d85":function(t,e,a){},"901a":function(t,e,a){},9500:function(t,e,a){"use strict";a("292d")},"9b95":function(t,e,a){"use strict";a("bd89")},"9ed7":function(t,e,a){"use strict";a("901a")},a0b8:function(t,e,a){"use strict";a("e699")},a29d:function(t,e,a){},a314:function(t,e,a){},a41d:function(t,e,a){},abc3:function(t,e,a){"use strict";var s=a("1da1"),r=a("d4ec"),i=a("bee2"),n=a("262e"),o=a("2caf"),c=(a("96cf"),a("b0c0"),a("9ab4")),l=a("1b40"),d=a("b86a"),u=a("4388"),h=function(t){Object(n["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.salesDataObj={},t.entryObj={},t.departNameTabs=[],t.selectDeptFlag=!1,t.nowUseTime="",t.active="-1",t.refreshing=!1,t}return Object(i["a"])(a,[{key:"shortNameGet",get:function(){return function(t){return"宁销甬北二部"===t?"甬北二部":"宁销甬中二部"===t?"甬中二部":"宁销甬南二部"===t?"甬南二部":"宁销甬北一部"===t?"甬北一部":"宁销甬中一部"===t?"甬中一部":"宁销甬南一部"===t?"甬南一部":"医疗器械销售部"===t?"医疗器械":"云医院销售部"===t?"云医院":"OTC销售部"===t?"OTC":t}}},{key:"onRefresh",value:function(){var t=this;this.refreshing=!1,this.entryObj={},this.refreshData=!1,this.$nextTick((function(){t.init(),t.refreshData=!0}))}},{key:"calendarConfirm",value:function(){var t=this;this.init(),this.refreshData=!1,this.$nextTick((function(){t.refreshData=!0}))}},{key:"init",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.salesDataObj={},this.entryObj={level:this.$route.query.level,id:this.$route.query.id,name:this.$route.query.name};case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"departClick",value:function(t){this.$router.push({name:"salesLineMiddleRise4Inner",query:{level:t.deptLevel,id:t.deptId,name:t.showName}})}},{key:"chooseData",value:function(t){var e=this;3===t.level?(this.entryObj={},this.$nextTick((function(){e.entryObj={level:t.level,id:t.id,name:t.name}}))):this.$router.push({name:"salesLineMiddleRise4Inner",query:{level:t.level,id:t.id,name:t.name}})}},{key:"beforeRouteEnter",value:function(t,e,a){a((function(t){"chashuju"!==e.name&&"salesLineMiddleRise2"!==e.name&&"salesLineMiddleRise2Inner"!==e.name||(document.documentElement.scrollTop=0,t.onRefresh()),"salesLineSalesman5"!==e.name&&"salesLineSalesman5Inner"!==e.name||(t.active=2)}))}},{key:"activated",value:function(){this.SET_SELECTDEPTFLAG(!1),this.hasDifferentValues(this.bmList,"id")&&this.SET_SELECTDEPTFLAG(!0),this.nowUseTime&&this.nowUseTime!==this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")&&(this.nowUseTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),this.init())}},{key:"mounted",value:function(){this.nowUseTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),this.init(),this.SET_SELECTDEPTFLAG(!1),this.hasDifferentValues(this.bmList,"id")&&this.SET_SELECTDEPTFLAG(!0)}}]),a}(Object(l["b"])(u["a"]));h=Object(c["a"])([Object(l["a"])({components:{departIndex:d["a"]}})],h),e["a"]=h},ae2a:function(t,e,a){},b338:function(t,e,a){"use strict";a("d499")},b37f:function(t,e,a){"use strict";a("e8d5")},b86a:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"departIndex"},[a("van-sticky",[a("sales-header",{attrs:{entryObj:t.entryObj,dateTime:t.dateTime},on:{calendarConfirm:t.calendarConfirm,deptSelectClick:t.deptSelectClick}})],1),a("div",{staticClass:"totalContent pa-2",staticStyle:{"font-family":"'HarmonyOS Sans SC Medium'"}},[a("div",{staticClass:"d-flex pt-2"},[a("div",{staticClass:"yearSales background-color-main-3 flex-5 background-color-white"},[a("div",{staticClass:"yearSales-bg"}),a("div",{staticClass:"yearSales-content d-flex flex-column pt-3 pl-10"},[a("div",{staticClass:"font-14"},[t._v("本年累计")]),a("div",{staticClass:"font-14 d-flex py-2"},[a("span",[t._v(t._s(t.getFH(t.salesDataObj.cyperiodIncrease)))]),a("span",{staticClass:"pl-2"},[t._v(t._s(t.getFH(t.salesDataObj.cyonPercent))+"%")])]),a("div",{staticClass:"py-1 fontWeight-500"},[a("span",{staticClass:"font-28"},[t._v(t._s(t.salesDataObj.cymoney))]),a("span",{staticClass:"font-12"},[t._v("万元")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"--"!==t.salesDataObj.ndyy,expression:"salesDataObj.ndyy !== '--'"}]},[t._v(" 年度预算 "),a("span",[t._v(" "+t._s(t.salesDataObj.ndyy))])])])]),a("div",{staticClass:"monthSales white-block flex-4"},[a("div",{staticClass:"d-flex flex-column pt-3 pl-10"},[a("div",{staticClass:"font-14 color-gray-4"},[t._v("本月累计")]),a("div",{staticClass:"font-14 d-flex py-2"},[a("span",{staticClass:"color-main"},[t._v(t._s(t.getFH(t.salesDataObj.cmperiodIncrease)))]),a("span",{staticClass:"pl-2",class:t.getColor(t.salesDataObj.cmonPercent)},[t._v(t._s(t.getFH(t.salesDataObj.cmonPercent))+"%")])]),a("div",{staticClass:"font-28 py-1 color-gray-5 fontWeight-500"},[t._v(" "+t._s(t.salesDataObj.cmmoney)+" "),a("span",{staticClass:"font-12"},[t._v("万元")])])])])]),t.isShowFlag?a("div",{staticClass:"middleWarp font-14 white-block mt-2 pa-2"},[a("ul",{staticClass:"color-gray-4"},[a("li",{staticClass:"pb-1"},[a("span",[t._v("重点客户")]),a("span",{staticClass:"text-underline font-16",class:t.getColor(t.salesDataObj.imptCustomerYearOnPercent),on:{click:t.keyCustomerClick}},[t._v(t._s(t.getText(t.salesDataObj.imptCustomerYearOnPercent)))]),a("span",{staticClass:"ml-2"},[t._v("重点品种")]),a("span",{staticClass:"text-underline font-16",class:t.getColor(t.salesDataObj.imptGoodsYearOnPercent),on:{click:t.keyGoodsClick}},[t._v(t._s(t.getText(t.salesDataObj.imptGoodsYearOnPercent)))])]),a("li",{staticClass:"pb-1"},[a("span",[t._v("逾期账款总金额("),a("span",{staticClass:"font-12"},[t._v("日期截止"+t._s(t.yqEndDay))]),t._v(")")]),a("span",{staticClass:"color-red text-underline font-16",on:{click:function(e){return t.overdueClick("1")}}},[t._v(" "+t._s(t.salesDataObj.overdueAmount))])]),a("li",[a("span",[t._v("应收总金额")]),a("span",{staticClass:"color-red text-underline font-16",on:{click:function(e){return t.overdueClick("2")}}},[t._v(t._s(t.salesDataObj.receivable)+"("),a("span",{staticClass:"font-12"},[t._v("截至本月底应收")]),t._v(t._s(t.salesDataObj.thisReceivable)+")")])])])]):t._e(),t.isShowFlag?a("div",{staticClass:"d-flex"},[+t.deptLevel<=2?a("div",{staticClass:"statusTab d-flex flex-2 mt-2 mr-2"},[a("div",{staticClass:"flex-1 d-flex align-center",class:0===t.statusActive?"active":"",on:{click:function(e){return t.statusTabClick(0)}}},[a("icon-svg",{staticClass:"ml-2",staticStyle:{width:"18px",height:"18px"},attrs:{name:"ytcrm-Fill"}}),a("span",[t._v("全局看板")])],1),a("div",{staticClass:"flex-1 d-flex align-center",class:1===t.statusActive?"active":"",on:{click:function(e){return t.statusTabClick(1)}}},[a("icon-svg",{staticClass:"ml-2",staticStyle:{width:"16px",height:"16px"},attrs:{name:1===t.statusActive?"ytcrm-a-bianzu22":"ytcrm-a-bianzu221"}}),a("span",[t._v("业务看板")])],1)]):t._e(),a("div",{staticClass:"dataTrend flex-1 white-block font-16 d-flex justify-space-between align-center px-2 mt-2",on:{click:t.echartsBarClick}},[a("div",{staticClass:"dataTrend-label1"},[t._v("数据趋势")]),a("van-icon",{staticClass:"mr-1",attrs:{size:"18px",name:"arrow"}})],1)]):a("div",{staticClass:"dataTrend white-block font-16 d-flex justify-space-between align-center px-2 mt-2",on:{click:t.echartsBarClick}},[a("div",{staticClass:"dataTrend-label"},[t._v("数据趋势")]),a("van-icon",{staticClass:"mr-1",attrs:{size:"18px",name:"arrow"}})],1)]),(0===+t.deptLevel||1===+t.deptLevel||2===+t.deptLevel)&&1===t.statusActive||0!==+t.deptLevel&&1!==+t.deptLevel&&2!==+t.deptLevel?a("div",{staticClass:"departData",staticStyle:{"font-family":"'HarmonyOS Sans SC Medium'"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.ywloading,expression:"ywloading"}],staticClass:"positionR pt-10 pb-100"},[a("van-loading",{staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.ywloading,expression:"!ywloading"}]},[t._l(t.departNameTabs,(function(e,s){return a("div",{key:"departData"+s,staticClass:"card mx-2 white-block mb-3"},[a("ul",{staticClass:"card-header px-4 py-2 d-flex align-center",on:{click:function(a){return t.departClick(e)}}},[a("li",{staticClass:"card-block"}),a("li",{staticClass:"d-flex justify-space-between align-center flex-1"},[a("span",{staticClass:"font-16"},[t._v(t._s(e.showName)+" ")]),(0===+t.deptLevel||1===+t.deptLevel)&&e.hasClick||0!=+t.deptLevel&&1!=+t.deptLevel?a("van-icon",{staticClass:"mr-1",attrs:{size:"18px",name:"arrow"}}):t._e()],1)]),e.isShowFlag?a("div",{staticClass:"card-text px-4 pb-2 color-gray-2 borderBottom pb-1"},[a("span",[t._v("重点客户")]),a("span",{class:t.getColor(e.imptCustomerYearOnPercent)},[t._v(t._s(t.getFH(e.imptCustomerYearOnPercent))+"%")]),a("span",[t._v("，重点品种")]),a("span",{class:t.getColor(e.imptGoodsYearOnPercent)},[t._v(t._s(t.getFH(e.imptGoodsYearOnPercent))+"%")]),a("span",[t._v("，逾期账款")]),a("span",{staticClass:"color-red pl-1"},[t._v(t._s(e.overdueAmount))])]):t._e(),a("ul",{staticClass:"d-flex justify-space-between pt-2 pb-2 pl-6"},[a("li",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("本月累计")]),a("span",{staticClass:"color-gray-5 font-16 pt-2"},[t._v(t._s(e.cmmoney||"--"))])]),a("li",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("月同比")]),a("span",{staticClass:"font-16 pt-2",class:t.getColor(e.cmonPercent)},[t._v(t._s(t.getFH(e.cmonPercent)||"--")+"%")])]),a("li",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("本年累计")]),a("span",{staticClass:"color-gray-5 font-16 pt-2"},[t._v(t._s(e.cymoney||"--"))])]),a("li",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14 pl-2"},[t._v("年同比")]),a("span",{staticClass:"font-16 pt-2 pl-2",class:t.getColor(e.cyonPercent)},[t._v(t._s(t.getFH(e.cyonPercent)||"--")+"%")])])]),e.targetCompletePercent?a("div",{staticClass:"positionR px-4 mb-2"},[a("van-progress",{staticClass:"mt-1",attrs:{percentage:"--"===e.targetCompletePercent?0:e.targetCompletePercent,"track-color":"rgba($color: #646566, $alpha: 0.6)",color:"#4970F3","show-pivot":!1,"stroke-width":"20"}}),a("div",{staticClass:"color-white progress-text font-14 lineHeight-20 pl-3"},[t._v(" 预算进度达成率"+t._s(e.targetCompletePercent)+"% ")])],1):t._e()])})),449===+t.entryObj.id&&t.ytyyDepartList.length?a("ExDepartCard",{attrs:{dataList:t.ytyyDepartList,title:"英特药业"}}):t._e(),449===+t.entryObj.id&&t.qtDepartList.length?a("ExDepartCard",{attrs:{dataList:t.qtDepartList,title:"其他经营单元"}}):t._e()],2)]):t._e(),a("keep-alive",[t.reloading?a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.statusActive&&(1===+t.deptLevel||2===+t.deptLevel),expression:"statusActive === 0 && (+deptLevel === 1 || +deptLevel === 2)"}],staticClass:"px-10"},[a("BrandCard",{staticClass:"mb-10",attrs:{entryObj:t.entryObj,dateValue:t.dateTime}}),a("CustomerTrendCard",{attrs:{entryObj:t.entryObj,dateValue:t.dateTime}}),a("InnovationCard",{attrs:{entryObj:t.entryObj,dateTime:t.dateTime}}),a("jc-card",{attrs:{entryObj:t.entryObj,dateTime:t.dateTime}})],1):t._e()]),+t.deptLevel<=2?a("div",[a("balance-gross")],1):t._e(),a("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},model:{value:t.echartsShow,callback:function(e){t.echartsShow=e},expression:"echartsShow"}},[a("span",{staticClass:"echartsTitle"},[t._v("本年销售堆积图（亿元）")]),t.echartsShow?a("echarts-bar",{attrs:{currentYearDatalist:t.currentYearDatalist,lastYearDatalist:t.lastYearDatalist,dateTime:t.dateTime,echartsWarpName:t.echartsWarpName}}):t._e()],1),a("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[a("selectDeptList",{attrs:{deptLevel:t.deptLevel,nowData:t.entryObj.id},on:{chooseData:t.chooseData}})],1)],1)},r=[],i=a("1da1"),n=a("5530"),o=a("d4ec"),c=a("bee2"),l=a("262e"),d=a("2caf"),u=(a("96cf"),a("ac1f"),a("5319"),a("b0c0"),a("d81d"),a("b680"),a("fb6a"),a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("7db0"),a("9ab4")),h=a("1b40"),p=a("856a"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-HW",attrs:{id:t.echartsWarpName+"Bar"}})},f=[],y=a("313e"),v=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.myChart=null,t}return Object(c["a"])(a,[{key:"getEchartsBar",value:function(t,e){this.myChart&&this.myChart.clear();var a=document.getElementById(this.echartsWarpName+"Bar");this.myChart=y["b"](a);for(var s,r=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],i=[],n=new Date(this.dateTime).getFullYear()+"年",o=new Date(this.dateTime).getFullYear()-1+"年",c=0;c<t.length;c++){var l=t[c];i.push({value:l,label:{show:!0}})}for(var d=[],u=0;u<e.length;u++){var h=e[u];d.push({value:h,label:{show:!0}})}s={color:["#3561f2","#00a870"],grid:{left:50},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{saveAsImage:{show:!0}},itemSize:20,right:"20",bottom:"10"},legend:{data:[n,o],right:30,top:28},xAxis:[{type:"value",name:"亿元",interval:50,axisLabel:{formatter:"{value}"}}],yAxis:[{type:"category",data:r.reverse(),axisPointer:{type:"shadow"}}],series:[{name:n,type:"bar",tooltip:{valueFormatter:function(t){return t+"亿元"}},rotate:180,data:i.reverse()},{name:o,type:"bar",tooltip:{valueFormatter:function(t){return t+"亿元"}},rotate:180,data:d.reverse()}]},s&&this.myChart.setOption(s)}},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t.getEchartsBar(t.currentYearDatalist,t.lastYearDatalist)}))}}]),a}(h["d"]);Object(u["a"])([Object(h["c"])()],v.prototype,"echartsWarpName",void 0),Object(u["a"])([Object(h["c"])()],v.prototype,"currentYearDatalist",void 0),Object(u["a"])([Object(h["c"])()],v.prototype,"lastYearDatalist",void 0),Object(u["a"])([Object(h["c"])()],v.prototype,"dateTime",void 0),v=Object(u["a"])([Object(h["a"])({})],v);var b=v,g=b,O=a("2877"),j=Object(O["a"])(g,m,f,!1,null,"1314e42b",null),C=j.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card d-flex pa-2"},[a("div",{staticClass:"flex-1 d-flex flex-column pr-4",class:0===t.level||1===t.level?"border-right":""},[a("span",{staticClass:"font-26 py-2 color-red"},[t._v(t._s(t.overdueAmount))]),a("span",{staticClass:"color-second"},[t._v("逾期账款")])]),0===t.level||1===t.level?a("div",{staticClass:"flex-1 d-flex flex-column pl-4"},[a("span",{staticClass:"font-26 py-2 color-red"},[t._v(t._s(t.longAccounts))]),a("span",{staticClass:"color-second"},[t._v("长账龄")])]):t._e()])},_=[],w=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a)}(h["d"]);Object(u["a"])([Object(h["c"])()],w.prototype,"level",void 0),Object(u["a"])([Object(h["c"])()],w.prototype,"overdueAmount",void 0),Object(u["a"])([Object(h["c"])()],w.prototype,"longAccounts",void 0),w=Object(u["a"])([Object(h["a"])({})],w);var x=w,k=x,T=(a("b338"),Object(O["a"])(k,P,_,!1,null,"db5d5cce",null)),D=T.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card d-flex pa-2 flex-column"},[a("span",{staticClass:"font-28 py-2 color-main"},[t._v(t._s(t.receivable))]),a("span",{staticClass:"color-second"},[t._v("应收账款")])])},S=[],I=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a)}(h["d"]);Object(u["a"])([Object(h["c"])()],I.prototype,"receivable",void 0),I=Object(u["a"])([Object(h["a"])({})],I);var M=I,N=M,z=(a("12de"),Object(O["a"])(N,L,S,!1,null,"c260199a",null)),A=z.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-height"},[a("van-field",{attrs:{placeholder:"输入关键词","left-icon":"search"},on:{input:t.search},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("div",{staticClass:"popup-body pb-6"},[1===+t.deptLevel?a("div",[a("div",{staticClass:"zz-div color-black-2 font-14 pl-3 van-popup-bg"},[t._v("事业部")]),t._l(t.sybList,(function(e,s){return a("div",{key:s+"syb",staticClass:"popup-data d-flex align-center justify-space-between pl-3 pr-4 font-14",on:{click:function(a){return t.chooseData(e,t.nowData==e.id)}}},[a("span",{class:t.nowData==e.id?"color-main-2":"color-black-2"},[t._v(t._s(e.name))]),a("van-icon",{staticClass:"color-gray-4",attrs:{name:"arrow"}})],1)}))],2):t._e(),+t.deptLevel<=2?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.xszxSearchList.length>0,expression:"xszxSearchList.length > 0"}],staticClass:"zz-div color-black-2 font-14 pl-3 van-popup-bg"},[t._v("销售中心")]),t._l(t.xszxSearchList,(function(e,s){return a("div",{key:s+"xszx",staticClass:"popup-data d-flex align-center justify-space-between pl-3 pr-4 font-14",on:{click:function(a){return t.chooseData(e,t.nowData==e.id)}}},[a("span",{class:t.nowData==e.id?"color-main-2":"color-black-2",domProps:{innerHTML:t._s(e.name)}}),a("van-icon",{staticClass:"color-gray-4",attrs:{name:"arrow"}})],1)}))],2):t._e(),3===+t.deptLevel||2===+t.deptLevel&&t.bmSearchList.length?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.bmSearchList.length>0,expression:"bmSearchList.length > 0"}],staticClass:"zz-div color-black-2 font-14 pl-3 van-popup-bg"},[t._v("销售部")]),t._l(t.bmSearchList,(function(e,s){return a("div",{key:s+"xszx",staticClass:"popup-data d-flex align-center justify-space-between pl-3 pr-4 font-14",on:{click:function(a){return t.chooseData(e,t.nowData==e.id)}}},[a("span",{class:t.nowData==e.id?"color-main-2":"color-black-2"},[t._v(" "+t._s(e.name)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.parentName,expression:"data.parentName"}],staticClass:"font-12"},[t._v("("+t._s(e.parentName)+")")])]),a("van-icon",{staticClass:"color-gray-4",attrs:{name:"arrow"}})],1)}))],2):t._e(),4===+t.deptLevel||+t.deptLevel<=3&&t.bmChildSearchList.length?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.bmChildSearchList.length>0,expression:"bmChildSearchList.length > 0"}],staticClass:"zz-div color-black-2 font-14 pl-3 van-popup-bg"},[t._v("小组")]),t._l(t.bmChildSearchList,(function(e,s){return a("div",{key:s+"xszx",staticClass:"popup-data d-flex align-center justify-space-between pl-3 pr-4 font-14",on:{click:function(a){return t.chooseData(e,t.nowData==e.id)}}},[a("span",{class:t.nowData==e.id?"color-main-2":"color-black-2"},[t._v(" "+t._s(e.name)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.parentName,expression:"data.parentName"}],staticClass:"font-12"},[t._v("("+t._s(e.parentName)+")")])]),a("van-icon",{staticClass:"color-gray-4",attrs:{name:"arrow"}})],1)}))],2):t._e()])],1)},Y=[],R=a("b85c"),$=(a("caad"),a("2532"),a("e9c4"),a("6062"),a("4bb5")),E=Object($["a"])("cdp"),G=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.keyword="",t.sybList=[],t.xszxSearchList=[],t.bmSearchList=[],t.bmChildSearchList=[],t}return Object(c["a"])(a,[{key:"search",value:function(){this.xszxSearchList=[],this.bmSearchList=[],this.bmChildSearchList=[];var t,e=Object(R["a"])(this.xszxOriginList);try{for(e.s();!(t=e.n()).done;){var a=t.value;(a.name.includes(this.keyword)||a.id.includes(this.keyword))&&this.xszxSearchList.push(a)}}catch(l){e.e(l)}finally{e.f()}var s,r=Object(R["a"])(this.bmList);try{for(r.s();!(s=r.n()).done;){var i=s.value;(i.name.includes(this.keyword)||i.id.includes(this.keyword))&&this.bmSearchList.push(i)}}catch(l){r.e(l)}finally{r.f()}var n,o=Object(R["a"])(this.bmChildList);try{for(o.s();!(n=o.n()).done;){var c=n.value;(c.name.includes(this.keyword)||c.id.includes(this.keyword))&&this.bmChildSearchList.push(c)}}catch(l){o.e(l)}finally{o.f()}}},{key:"chooseData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605015,menuName:t.id,menuOperation:t.name,operationType:1}),this.$emit("chooseData",t))}},{key:"changeSyb",value:function(){this.sybList=JSON.parse(JSON.stringify(this.sybOriginList))}},{key:"changeXszx",value:function(){this.xszxSearchList=JSON.parse(JSON.stringify(this.xszxOriginList))}},{key:"changeBm",value:function(){this.bmSearchList=JSON.parse(JSON.stringify(this.bmList))}},{key:"changeBmChild",value:function(){this.bmChildSearchList=JSON.parse(JSON.stringify(this.bmChildList))}},{key:"hasDifferentValues",value:function(t,e){return new Set(t.map((function(t){return t[e]}))).size>1}},{key:"mounted",value:function(){this.sybList=JSON.parse(JSON.stringify(this.sybOriginList)),this.xszxSearchList=JSON.parse(JSON.stringify(this.xszxOriginList)),this.bmSearchList=JSON.parse(JSON.stringify(this.bmList)),this.bmChildSearchList=JSON.parse(JSON.stringify(this.bmChildList))}}]),a}(h["d"]);Object(u["a"])([Object(h["c"])()],G.prototype,"deptLevel",void 0),Object(u["a"])([Object(h["c"])()],G.prototype,"nowData",void 0),Object(u["a"])([E.Getter],G.prototype,"sybOriginList",void 0),Object(u["a"])([E.Getter],G.prototype,"xszxOriginList",void 0),Object(u["a"])([E.Getter],G.prototype,"bmList",void 0),Object(u["a"])([E.Getter],G.prototype,"bmChildList",void 0),Object(u["a"])([Object(h["e"])("sybOriginList")],G.prototype,"changeSyb",null),Object(u["a"])([Object(h["e"])("xszxOriginList")],G.prototype,"changeXszx",null),Object(u["a"])([Object(h["e"])("bmList")],G.prototype,"changeBm",null),Object(u["a"])([Object(h["e"])("bmChildList")],G.prototype,"changeBmChild",null),G=Object(u["a"])([Object(h["a"])({})],G);var H=G,W=H,U=(a("442b"),Object(O["a"])(W,F,Y,!1,null,"463648ea",null)),q=U.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mouthYearData"},[a("div",{staticClass:"dataWarp d-flex py-2 mx-2 mt-2 borderBottom"},[a("ul",{staticClass:"flex-1 borderRight"},[a("li",{staticClass:"color-gray-4 font-14"},[t._v("本月累计")]),a("li",{staticClass:"font-24 color-gray-5 py-1 fontWeight-500"},[t._v(t._s(t.dataVal.cmmoney))]),a("li",{staticClass:"font-12 d-flex"},[a("span",{staticClass:"color-main"},[t._v(t._s(t.getFH(t.dataVal.cmperiodIncrease))+t._s(t.dataVal.cmperiodIncrease))]),a("span",{class:t.getColor(t.dataVal.cmonPercent)},[t._v(t._s(t.getFH(t.dataVal.cmonPercent))+t._s(t.dataVal.cmonPercent)+"%")])])]),a("ul",{staticClass:"flex-1"},[a("li",{staticClass:"color-gray-4 font-14"},[t._v("本年累计")]),a("li",{staticClass:"font-24 color-gray-5 py-1 fontWeight-500"},[t._v(t._s(t.dataVal.cymoney))]),a("li",{staticClass:"font-12 d-flex"},[a("span",{staticClass:"color-main"},[t._v(t._s(t.getFH(t.dataVal.cyperiodIncrease))+t._s(t.dataVal.cyperiodIncrease))]),a("span",{class:t.getColor(t.dataVal.cyonPercent)},[t._v(t._s(t.getFH(t.dataVal.cyonPercent))+t._s(t.dataVal.cyonPercent)+"%")])])])])])},B=[],J=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}}]),a}(h["d"]);Object(u["a"])([Object(h["c"])()],J.prototype,"dataVal",void 0),J=Object(u["a"])([Object(h["a"])({})],J);var K=J,Q=K,X=(a("cb71"),Object(O["a"])(Q,V,B,!1,null,"468aa634",null)),Z=X.exports,tt=a("84c3"),et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"brandCardWarp"},[a("div",{staticClass:"brandCardWarp-header font-14 color-gray-4 px-3",on:{click:t.brandClick}},[a("app-icon",{staticStyle:{"font-size":"14px",color:"#969799"},attrs:{name:"#ytcrm-pinpaijihe"}}),a("span",{staticClass:"pl-2"},[t._v("品牌集合看板")]),a("van-icon",{staticClass:"right",attrs:{size:"16px",name:"arrow"}})],1),a("div",{staticClass:"brandCardWarp-content positionR px-4 pb-4"},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}}),t.loading?t._e():a("div",{staticClass:"brandCardWarp-content_header px-4 font-14 d-flex justify-space-between align-center"},[a("span",{staticClass:"color-gray-5 font-bold"},[t._v(t._s(t.brandHeaderObj.title))]),a("span",{staticClass:"color-main-3 font-bold"},[t._v(t._s(t.brandHeaderObj.value)+"万元")]),a("span",{staticClass:"color-main-3 font-bold"},[t._v(t._s(t.brandHeaderObj.increment)+"%")])]),3!==t.brandList.length||t.loading?t._e():a("div",{staticClass:"brandCardWarp-content_card pt-10 d-flex"},[a("div",{staticClass:"flex-5 d-flex background-color-gray-10 borderRa color-white font-14"},[a("div",{staticClass:"flex-1 background-color-main-3 borderRa d-flex flex-column align-center justify-center"},[a("span",[t._v(t._s(t.brandList[0].title))]),a("span",{staticClass:"pt-4"},[t._v(t._s(t.brandList[0].value)+"万元")])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("div",{staticClass:"flex-3 background-color-gray-9 borderRa d-flex flex-column align-center justify-center"},[a("span",[t._v(t._s(t.brandList[1].title))]),a("span",{staticClass:"pt-4"},[t._v(t._s(t.brandList[1].value)+"万元")])]),a("div",{staticClass:"flex-2 color-black-1 d-flex flex-column align-center justify-center"},[a("span",[t._v(t._s(t.brandList[2].title))]),a("span",{staticClass:"pt-4"},[t._v(t._s(t.brandList[2].value)+"万元")])])])]),a("div",{staticClass:"flex-2 d-flex flex-column pl-4 justify-end color-gray-5"},t._l(t.brandList,(function(e,s){return a("ul",{key:s,staticClass:"d-flex pb-10"},[a("li",{staticClass:"cricle",class:"cricle-"+(s+1)}),a("li",{staticClass:"d-flex flex-column pl-2"},[a("span",{staticClass:"font-14 pb-1"},[t._v(t._s(e.title))]),a("span",{staticClass:"font-12",class:t.getColor(e.increment)},[t._v(t._s(t.getFH(e.increment))+t._s(e.increment)+"%")])])])})),0)])],1)])},at=[],st=a("2279"),rt=a("5b92"),it=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.brandHeaderObj={},t.brandList=[],t.loading=!1,t}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}},{key:"brandClick",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605007,menuName:"品牌集合看板",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"brandCollectionPage",query:Object(n["a"])({},this.entryObj)})}},{key:"_getDeptTotalStat",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(st["n"])({date:this.dateValue,deptId:this.entryObj.id});case 2:e=t.sent,"200"===e.code&&(this.brandHeaderObj={title:"TOP品牌",value:Object(rt["d"])(e.data.yearAmount,1),increment:Object(rt["d"])(e.data.yearOnPercent,2)});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getStatListByDept",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(st["N"])({date:this.dateValue,deptId:this.entryObj.id,pageFlag:0,queryTop3Flag:0});case 3:e=t.sent,"200"===e.code&&(this.loading=!1,a=e.data.list,this.brandList=a.map((function(t){return{title:t.brandName,value:Object(rt["d"])(t.yearAmount,1),increment:Object(rt["d"])(t.yearOnPercent,2)}})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){this._getDeptTotalStat(),this._getStatListByDept()}}]),a}(h["d"]);Object(u["a"])([Object(h["c"])()],it.prototype,"entryObj",void 0),Object(u["a"])([Object(h["c"])()],it.prototype,"dateValue",void 0),it=Object(u["a"])([Object(h["a"])({})],it);var nt=it,ot=nt,ct=(a("f2fd"),Object(O["a"])(ot,et,at,!1,null,"3c63ca3c",null)),lt=ct.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card mx-2 mt-2"},[a("div",{staticClass:"px-4 d-flex justify-space-between",class:t.isExp?"borderBottom":"",on:{click:function(e){e.stopPropagation(),t.isExp=!t.isExp}}},[a("div",{staticClass:"py-4 pr-4"},[a("span",{staticClass:"font-14 pr-4"},[t._v(" "+t._s(t.title))])]),a("div",{staticClass:"py-4"},[a("van-icon",{attrs:{size:"18px",name:t.isExp?"arrow-up":"arrow-down"}})],1)]),t.isExp?a("div",t._l(t.dataList,(function(e,s){return a("div",{key:"data"+s,staticClass:"mx-4 pt-10",class:s<t.dataList.length-1?"borderBottom":""},[a("div",{staticClass:"header d-flex align-center"},[a("div",{staticClass:"card-block"}),a("div",{staticClass:"tag-primary-plain ml-2",staticStyle:{"font-size":"16px"}},[t._v(t._s(e.showName))])]),a("ul",{staticClass:"d-flex justify-space-between pt-2 pb-2"},[a("li",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("本月累计")]),a("span",{staticClass:"color-gray-5 font-16 pt-2"},[t._v(t._s(e.cmmoney))])]),a("li",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("月同比")]),a("span",{staticClass:"font-16 pt-2",class:t.getColor(e.cmonPercent)},[t._v(t._s(t.getFH(e.cmonPercent))+"%")])]),a("li",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14"},[t._v("本年累计")]),a("span",{staticClass:"color-gray-5 font-16 pt-2"},[t._v(t._s(e.cymoney))])]),a("li",{staticClass:"d-flex flex-1 flex-column"},[a("span",{staticClass:"color-gray-4 font-14 pl-2"},[t._v("年同比")]),a("span",{staticClass:"font-16 pt-2 pl-2",class:t.getColor(e.cyonPercent)},[t._v(t._s(t.getFH(e.cyonPercent))+"%")])])]),a("div",{staticClass:"positionR mb-2"},[a("van-progress",{staticClass:"mt-1",attrs:{percentage:"--"===e.targetCompletePercent?0:e.targetCompletePercent,"track-color":"rgba($color: #646566, $alpha: 0.6)",color:"#4970F3","show-pivot":!1,"stroke-width":"20"}}),a("div",{staticClass:"color-white progress-text font-14 lineHeight-20 pl-3"},[t._v(" 预算进度达成率"+t._s(e.targetCompletePercent)+"% ")])],1)])})),0):t._e()])},ut=[],ht=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.isExp=!1,t}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){return t?t>0?"+"+t:""+t:t}}}]),a}(h["d"]);Object(u["a"])([Object(h["c"])()],ht.prototype,"dataList",void 0),Object(u["a"])([Object(h["c"])()],ht.prototype,"title",void 0),ht=Object(u["a"])([Object(h["a"])({})],ht);var pt=ht,mt=pt,ft=(a("6379"),Object(O["a"])(mt,dt,ut,!1,null,"adfbbfea",null)),yt=ft.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customerCardWarp"},[a("div",{staticClass:"customerCardWarp-header font-14 color-gray-4 px-3",on:{click:t.customerTrendClick}},[a("app-icon",{staticStyle:{"font-size":"14px",color:"#969799"},attrs:{name:"#ytcrm-kehuqushi"}}),a("span",{staticClass:"pl-2"},[t._v("客户趋势看板")]),a("van-icon",{staticClass:"right",attrs:{size:"16px",name:"arrow"}})],1),a("div",{staticClass:"customerCardWarp-content px-4 pb-4 positionR"},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}}),a("div",{staticClass:"customerCardWarp-content_card pt-10"},[a("div",{staticClass:"pb-3"},t._l(t.dataList,(function(e,s){return a("div",{key:"customer"+s,staticClass:"customerCardWarp-content_progress"},[a("van-progress",{staticClass:"mb-1",attrs:{percentage:e.progress,color:0===s?"#002A7C":1===s?"#0052D9":"#B5C7FF","show-pivot":!1,"stroke-width":"32"}}),a("div",{staticClass:"text"},[t._v(t._s(e.progress)+"%")])],1)})),0),a("div",{staticClass:"flex-2 d-flex flex-column color-gray-5"},t._l(t.dataList,(function(e,s){return a("ul",{key:"customerlist"+s,staticClass:"d-flex justify-space-between pb-10"},[a("li",{staticClass:"font-14"},[a("span",{staticClass:"circle",class:"circle-"+(s+1)}),a("span",[t._v(t._s(e.customerOpClassName)+"（"+t._s(e.progress)+"%）")])]),a("li",[t._v(t._s(e.salesAmount)+" (万元)")])])})),0)])],1)])},bt=[],gt=(a("a9e3"),a("7909")),Ot=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.loading=!1,t.dataList=[],t}return Object(c["a"])(a,[{key:"_getCustomerCategorySales",value:function(){var t=this;this.loading=!0;var e={deptId:this.entryObj.id,orderColumn:"salesAmount",orderType:"0",selectDate:this.dateValue,timeDimFlag:1};Object(st["g"])(e).then((function(e){t.loading=!1;for(var a=[],s=0;s<e.data.slice(0,3).length;s++){var r=e.data.slice(0,3)[s];a.push(r.salesAmount)}t.dataList=e.data.slice(0,3).map((function(t){return{salesAmount:Object(rt["d"])(t.salesAmount,1),progress:Number(gt["d"](gt["c"](t.salesAmount,gt["g"]([].concat(a))),100)).toFixed(1),periodComparePercent:Object(rt["d"])(t.periodComparePercent,2),periodCompareNetIncrease:Object(rt["d"])(t.periodCompareNetIncrease,1),customerOpClassName:t.customerOpClassName,customerOpClassId:t.customerOpClassId}}))}))}},{key:"customerTrendClick",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605008,menuName:"客户趋势看板",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"customerTrendPage",query:Object(n["a"])({},this.entryObj)})}},{key:"mounted",value:function(){this._getCustomerCategorySales()}}]),a}(h["d"]);Object(u["a"])([Object(h["c"])()],Ot.prototype,"entryObj",void 0),Object(u["a"])([Object(h["c"])()],Ot.prototype,"dateValue",void 0),Ot=Object(u["a"])([Object(h["a"])({})],Ot);var jt=Ot,Ct=jt,Pt=(a("59d8"),Object(O["a"])(Ct,vt,bt,!1,null,"0c5287d8",null)),_t=Pt.exports,wt=a("b32d"),xt=a("4388"),kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header font-14 color-gray-4 px-3",on:{click:t.jumpToInnovation}},[a("app-icon",{staticStyle:{"font-size":"14px",color:"#969799"},attrs:{name:"#ytcrm-chuangxinpinzhong"}}),a("span",{staticClass:"pl-2"},[t._v("创新品种看板")]),a("van-icon",{staticClass:"right",attrs:{size:"16px",name:"arrow"}})],1),a("div",{staticClass:"card-content"},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}}),t.loading?t._e():a("div",{staticClass:"summary"},[a("div",{staticClass:"total-sales"},[t._v(t._s(t.totalSales)+"万元")]),a("div",{staticClass:"summary-info"},[a("span",{staticClass:"left-text"},[t._v("近三年上市新药")]),a("span",{staticClass:"right-text positive"},[t._v(t._s(t.growthRate))])])]),t.loading?t._e():a("div",{staticClass:"chart-and-data"},[a("div",{staticClass:"chart-container"},[a("div",{ref:"pieChart",staticClass:"pie-chart"})]),a("div",{staticClass:"data-list"},t._l(t.chartData,(function(e,s){return a("div",{key:s,staticClass:"data-item"},[a("div",{staticClass:"data-label"},[a("span",{staticClass:"dot",style:{backgroundColor:e.color}}),a("span",[t._v(t._s(e.year)+"年新药")])]),a("div",{staticClass:"data-value"},[a("span",[t._v(t._s(e.sales)+"万元")]),a("span",[t._v(t._s(e.growthRate>0?"+":"")+t._s(e.growthRate)+"%")])])])})),0)])],1)])},Tt=[],Dt=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.totalSales="--",t.growthRate="--",t.chartData=[],t.loading=!1,t}return Object(c["a"])(a,[{key:"mounted",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,e={selectedDate:this.dateTime,deptId:this.entryObj.id,timeDimFlag:1},t.next=5,Object(st["k"])(e);case 5:a=t.sent,"200"===a.code&&a.data&&(this.loading=!1,s=a.data[0],s&&(this.totalSales=Object(rt["d"])(s.salesAmount,1),this.growthRate="".concat(s.periodComparePercent>0?"+":"").concat((100*s.periodComparePercent).toFixed(1),"%")),this.chartData=a.data[1].slice(0,3).map((function(t,e){return{year:t.yearNum,sales:Object(rt["d"])(t.salesAmount,1),growthRate:Object(rt["d"])(t.periodComparePercent,2),color:r.getColor(e),value:t.salesAmount}})),this.$nextTick((function(){r.initChart()}))),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"initChart",value:function(){var t=this.$refs.pieChart,e=y["b"](t),a={tooltip:{trigger:"item"},series:[{type:"pie",radius:["60%","100%"],avoidLabelOverlap:!1,label:{show:!1},data:this.chartData.map((function(t){return{value:t.value,name:"".concat(t.year,"年"),itemStyle:{color:t.color}}}))}]};e.setOption(a)}},{key:"getColor",value:function(t){var e=["#f56c6c","#f7ba2a","#3561f2","#67c23a","#909399"];return e[t%e.length]}},{key:"jumpToInnovation",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605009,menuName:"创新品种看板",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"InnovationIndex",query:Object(n["a"])(Object(n["a"])({},this.entryObj),{},{dateTime:this.dateTime,role:this.$route.query.role})})}}]),a}(h["d"]);Object(u["a"])([Object(h["c"])()],Dt.prototype,"entryObj",void 0),Object(u["a"])([Object(h["c"])()],Dt.prototype,"dateTime",void 0),Dt=Object(u["a"])([Object(h["a"])({})],Dt);var Lt=Dt,St=Lt,It=(a("a0b8"),Object(O["a"])(St,kt,Tt,!1,null,"1f743db4",null)),Mt=It.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header font-14 color-gray-4 px-3",on:{click:t.jumpToJc}},[a("app-icon",{staticStyle:{"font-size":"14px",color:"#969799"},attrs:{name:"#ytcrm-jicai"}}),a("span",{staticClass:"pl-2"},[t._v("集采看板")]),a("van-icon",{staticClass:"right",attrs:{size:"16px",name:"arrow"}})],1),a("div",{staticClass:"card-content"},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}}),t.loading?t._e():a("div",{staticClass:"progress-group"},[a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-segment winning",style:{flex:t.bidPercent}}),a("div",{staticClass:"progress-segment non-winning",style:{flex:t.noBidPercent}})]),t._m(0)]),t.loading?t._e():a("div",{staticClass:"summary"},[a("div",{staticClass:"font-14"},[t._v("集采看板")]),a("div",{staticClass:"total-sales"},[t._v(t._s(t.totalSales)+"万元")]),a("div",{staticClass:"total-sales"},[t._v(t._s(t.growthRate>0?"+":"")+t._s(t.growthRate)+"%")])])],1)])},zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"progress-labels"},[a("div",{staticClass:"label"},[a("span",{staticClass:"dot winning"}),t._v(" 中标品种")]),a("div",{staticClass:"label"},[a("span",{staticClass:"dot non-winning"}),t._v(" 备选和未中选品种")])])}],At=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.loading=!1,t.totalSales="",t.growthRate=0,t.bidPercent=0,t.noBidPercent=0,t}return Object(c["a"])(a,[{key:"getJcTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={date:this.dateTime,deptId:this.entryObj.id,flag:1},t.next=4,Object(st["bb"])(e);case 4:a=t.sent,a.data&&(this.loading=!1,this.totalSales=Object(rt["d"])(a.data.sale,1),this.bidPercent=Object(rt["d"])(a.data.bidSale/a.data.sale,2),this.noBidPercent=Object(rt["d"])(a.data.noBidSale/a.data.sale,2),this.growthRate=Object(rt["d"])(a.data.saleTb,2));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){this.getJcTotal()}},{key:"jumpToJc",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605010,menuNamex:"集采看板",menuName:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"JcIndex",query:Object(n["a"])(Object(n["a"])({},this.entryObj),{},{dateTime:this.dateTime,role:this.$route.query.role})})}}]),a}(h["d"]);Object(u["a"])([Object(h["c"])()],At.prototype,"entryObj",void 0),Object(u["a"])([Object(h["c"])({default:function(){return""}})],At.prototype,"dateTime",void 0),At=Object(u["a"])([Object(h["a"])({})],At);var Ft=At,Yt=Ft,Rt=(a("c576"),Object(O["a"])(Yt,Nt,zt,!1,null,"0e34890e",null)),$t=Rt.exports,Et=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.dateTime="",t.salesDataObj={},t.departNameTabs=[],t.ytyyDepartList=[],t.qtDepartList=[],t.isShowFlag=!0,t.statusActive=0,t.reloading=!1,t.ywloading=!1,t.innerSalesDataObj="",t.innerDepartObj={},t.deptObj="",t.echartsShow=!1,t.showPopup=!1,t.myChart=null,t.echartsLoading=!0,t.lastYearDatalist=[],t.currentYearDatalist=[],t.zdGoodsObj={},t.zdGoodsLoadingObj={},t.zdCustomerObj={},t.zdCustomerLoadingObj={},t.supplyData=[],t.hasFlag=!1,t.yqEndDay=t.$dayjs().subtract(1,"day").format("YYYY-MM-DD"),t}return Object(c["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getText",get:function(){return function(t){if(t){var e=String(t).replace(",","");return 0===+e?"基本持平":+e>0?"上升"+e+"%":"下降"+Math.abs(+e)+"%"}}}},{key:"getFH",get:function(){return function(t){return t?t>0?"+"+t:""+t:t}}},{key:"_getQuickOverview",value:function(){var t=this;this.echartsLoading=!0,this.ytyyDepartList=[],this.qtDepartList=[],this.departNameTabs=[],this._getQuickOverviewMix({date:this.dateTime,deptLevel:this.entryObj.level,deptId:this.entryObj.id,deptName:this.entryObj.name}).then((function(e){t.salesDataObj={loading:!0,cdmoney:Object(rt["d"])(e.data.currentDayMoney,1),cmcircleOnPercent:Object(rt["d"])(e.data.cmcircleOnPercent,2),cmmoney:Object(rt["d"])(e.data.currentMonthMoney,1,0),cmonPercent:Object(rt["d"])(e.data.currentMonthOnPercent,2),cmperiodIncrease:Object(rt["d"])(e.data.currentMonthPeriodIncrease,1),cymoney:Object(rt["d"])(e.data.currentYearMoney,1,0),cyonPercent:Object(rt["d"])(e.data.currentYearOnPercent,2),cyperiodIncrease:Object(rt["d"])(e.data.currentYearPeriodIncrease,1),imptCustomerYearOnPercent:Object(rt["d"])(e.data.imptCustomerYearOnPercent,2,Math.abs(e.data.imptCustomerYearOnPercent)<.001?2:1),imptGoodsYearOnPercent:Object(rt["d"])(e.data.imptGoodsYearOnPercent,2,Math.abs(e.data.imptGoodsYearOnPercent)<.001?2:1),overdueAmount:Object(rt["c"])(e.data.overdueAmount),receivable:Object(rt["c"])(e.data.receivable),thisReceivable:Object(rt["c"])(e.data.thisReceivable),longAccounts:Object(rt["c"])(e.data.longAccounts),ndyy:Object(rt["d"])(e.data.revenueTargetAmount,1)};for(var a=0;a<e.data.childDeptList.length;a++){var s=e.data.childDeptList[a],r={deptId:s.deptId,deptLevel:s.deptLevel,deptName:s.deptName,deptParentId:s.deptParentId};-999===s.deptId?t.ytyyDepartList.push(Object(n["a"])({showName:"含战略采购"},r)):-998===s.deptId?t.ytyyDepartList.push(Object(n["a"])({showName:"不含战略采购"},r)):469===s.deptId||727===s.deptId||731===s.deptId||733===s.deptId||760===s.deptId||761===s.deptId?t.qtDepartList.push(Object(n["a"])({showName:s.deptName},r)):t.departNameTabs.push({deptId:s.deptId,deptName:s.deptName,deptLevel:s.deptLevel,isShowFlag:0===+s.deptLevel&&449===+s.deptId||1===+s.deptLevel&&449===+t.entryObj.id||2===+s.deptLevel,deptParentId:s.deptParentId,shortName:s.deptName,showName:s.deptName,hasClick:s.drillDownFlag})}(3===+t.deptLevel||0===+t.deptLevel||973===+t.entryObj.id||1===t.statusActive)&&t.ywInit(),t._getMonthCumulativeMoney({deptName:t.entryObj.name,deptId:t.entryObj.id})})).catch((function(){t.echartsLoading=!0}))}},{key:"calendarClick",value:function(){this.$emit("calendarClick")}},{key:"departClick",value:function(t){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605e3,menuName:t.deptId,menuOperation:t.showName,operationType:1}),this.deptObj={deptName:t.showName,deptId:t.deptId,deptLevel:+this.deptLevel+1},t.deptLevel=+this.deptLevel+1,(t.hasClick||2===+this.deptLevel||3===+this.deptLevel)&&this.$emit("departClick",t,this.innerDepartObj,+this.deptLevel+1)}},{key:"echartsBarClick",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605005,menuName:"数据趋势",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.echartsShow=!0}},{key:"_getMonthCumulativeMoney",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.myChart&&this.myChart.dispose(),this.echartsLoading=!0,Object(st["A"])(Object(n["a"])(Object(n["a"])({date:this.dateTime,deptLevel:this.deptLevel},e),{},{full:!0})).then((function(e){var a=e.data.map((function(e){return t.$arithmetic.divide(e,1e8).toFixed(1)}));t.echartsLoading=!1,t.$nextTick((function(){t.lastYearDatalist=a.slice(0,12),t.currentYearDatalist=[];for(var s=0;s<12;s++){var r=a.slice(12,e.length)[s];r?t.currentYearDatalist.push(r):t.currentYearDatalist.push("")}}))}))}},{key:"calendarConfirm",value:function(){var t=this;Object(wt["b"])(),this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605014,menuName:"最外层部门界面日期切换",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.dateTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),this.hasFlag=!1,this._getQuickOverview(),(1===+this.deptLevel&&449===+this.entryObj.id||2===+this.deptLevel)&&(this.reloading=!1,this.$nextTick((function(){t.reloading=!0}))),this.$emit("calendarConfirm")}},{key:"deptSelectClick",value:function(){this.showPopup=!0}},{key:"chooseData",value:function(t){this.showPopup=!1,this.$emit("chooseData",t)}},{key:"keyCustomerClick",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605001,menuName:this.entryObj.id+"-"+this.entryObj.name,menuOperation:"重点客户",operationType:1}),this.$router.push({name:"salesLineKeyCustomer",query:{id:this.entryObj.id,name:this.entryObj.name,date:this.dateTime}})}},{key:"keyGoodsClick",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605002,menuName:this.entryObj.id+"-"+this.entryObj.name,menuOperation:"重点品种",operationType:1}),this.$router.push({name:"salesLineKeyGoods",query:{id:this.entryObj.id,name:this.entryObj.name,date:this.dateTime}})}},{key:"overdueClick",value:function(t){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:"1"===t?605003:605004,menuName:this.entryObj.id+"-"+this.entryObj.name,menuOperation:"1"===t?"逾期账款":"应收账款",operationType:1}),this.departNameTabs.length?this.$router.push({name:"salesLineOverduePermissionPage",query:Object(n["a"])(Object(n["a"])({},this.entryObj),{},{date:this.dateTime,active:t})}):this.$router.push({name:"salesLineOverdue",query:Object(n["a"])(Object(n["a"])({},this.entryObj),{},{date:this.dateTime,active:t})})}},{key:"_querySuppliers",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,r,i,n,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this.$dayjs(this.dateTime),s=a.isSame(this.$dayjs(),"month"),r=0===a.month(),s?r?i=a.startOf("month").format("YYYY-MM-DD"):(n=a.subtract(1,"month"),i=n.startOf("month").format("YYYY-MM-DD")):i=a.startOf("month").format("YYYY-MM-DD"),o={deptId:e,search:"",start:this.$dayjs(this.dateTime).startOf("year").format("YYYY-MM-DD"),end:i,type:1,firstThreeFlag:1},t.next=7,Object(st["jb"])(o);case 7:c=t.sent,"200"==c.code&&(this.supplyData=c.data);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"ywInit",value:function(){var t=this;if(!this.hasFlag){this.ywloading=!0;for(var e=[],a=[],s=[],r=0;r<this.departNameTabs.length;r++){var i=this.departNameTabs[r];e.push(this._getQuickOverviewMix({date:this.dateTime,deptLevel:i.deptLevel,deptId:i.deptId,drillDownFlag:i.hasClick,deptName:i.deptName,full:!0}))}for(var n=0;n<this.ytyyDepartList.length;n++){var o=this.ytyyDepartList[n];a.push(this._getQuickOverviewMix({date:this.dateTime,deptLevel:o.deptLevel,deptId:o.deptId,deptName:o.deptName,full:!0}))}for(var c=0;c<this.qtDepartList.length;c++){var l=this.qtDepartList[c];s.push(this._getQuickOverviewMix({date:this.dateTime,deptLevel:l.deptLevel,deptId:l.deptId,deptName:l.deptName,full:!0}))}Promise.all([].concat(e)).then((function(e){t.ywloading=!1;for(var a=function(a){var s=e[a].data;if(!s)return"continue";var r=t.departNameTabs.find((function(t){return t.deptId===s.deptId}));Object.assign(r,{targetCompletePercent:s.revenueTargetAmount?Object(rt["d"])(t.$arithmetic.divide(s.currentYearMoney,s.revenueTargetAmount),2):"--",cdmoney:Object(rt["d"])(s.currentDayMoney,1),cmcircleOnPercent:Object(rt["d"])(s.cmcircleOnPercent,2),cmmoney:Object(rt["d"])(s.currentMonthMoney,1),cmonPercent:Object(rt["d"])(s.currentMonthOnPercent,2),cmperiodIncrease:Object(rt["d"])(s.currentMonthPeriodIncrease,1),cymoney:Object(rt["d"])(s.currentYearMoney,1),cyonPercent:Object(rt["d"])(s.currentYearOnPercent,2),cyperiodIncrease:Object(rt["d"])(s.currentYearPeriodIncrease,1),imptCustomerYearOnPercent:Object(rt["d"])(s.imptCustomerYearOnPercent,2,Math.abs(s.imptCustomerYearOnPercent)<.001?2:1),imptGoodsYearOnPercent:Object(rt["d"])(s.imptGoodsYearOnPercent,2,Math.abs(s.imptGoodsYearOnPercent)<.001?2:1),overdueAmount:Object(rt["c"])(s.overdueAmount),receivable:Object(rt["c"])(s.receivable)})},s=0;s<e.length;s++)a(s);t.$forceUpdate()})),Promise.all([].concat(a)).then((function(e){for(var a=function(a){var s=e[a].data;if(!s)return"continue";var r=t.ytyyDepartList.find((function(t){return t.deptId===s.deptId}));Object.assign(r,{cdmoney:Object(rt["d"])(s.currentDayMoney,1),cmcircleOnPercent:Object(rt["d"])(s.cmcircleOnPercent,2),cmmoney:Object(rt["d"])(s.currentMonthMoney,1),cmonPercent:Object(rt["d"])(s.currentMonthOnPercent,2),cmperiodIncrease:Object(rt["d"])(s.currentMonthPeriodIncrease,1),cymoney:Object(rt["d"])(s.currentYearMoney,1),cyonPercent:Object(rt["d"])(s.currentYearOnPercent,2),cyperiodIncrease:Object(rt["d"])(s.currentYearPeriodIncrease,1),targetCompletePercent:s.revenueTargetAmount?Object(rt["d"])(t.$arithmetic.divide(s.currentYearMoney,s.revenueTargetAmount),2):"--"})},s=0;s<e.length;s++)a(s);t.$forceUpdate()})),Promise.all([].concat(s)).then((function(e){for(var a=function(a){var s=e[a].data;if(!s)return"continue";var r=t.qtDepartList.find((function(t){return t.deptId===s.deptId}));Object.assign(r,{cdmoney:Object(rt["d"])(s.currentDayMoney,1),cmcircleOnPercent:Object(rt["d"])(s.cmcircleOnPercent,2),cmmoney:Object(rt["d"])(s.currentMonthMoney,1),cmonPercent:Object(rt["d"])(s.currentMonthOnPercent,2),cmperiodIncrease:Object(rt["d"])(s.currentMonthPeriodIncrease,1),cymoney:Object(rt["d"])(s.currentYearMoney,1),cyonPercent:Object(rt["d"])(s.currentYearOnPercent,2),cyperiodIncrease:Object(rt["d"])(s.currentYearPeriodIncrease,1),targetCompletePercent:s.revenueTargetAmount?Object(rt["d"])(t.$arithmetic.divide(s.currentYearMoney,s.revenueTargetAmount),2):"--"})},s=0;s<e.length;s++)a(s);t.$forceUpdate()})),this.hasFlag=!0}}},{key:"statusTabClick",value:function(t){this.statusActive=t,this.$emit("statusTabClick",this.statusActive),1===t&&this.ywInit()}},{key:"activated",value:function(){this.showPopup=!1}},{key:"created",value:function(){this.dateTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")}},{key:"mounted",value:function(){Object(wt["b"])(),this.isShowFlag=1===+this.deptLevel&&449===+this.entryObj.id||0!==+this.deptLevel&&1!==+this.deptLevel&&4!==+this.deptLevel,this.reloading=1===+this.deptLevel&&449===+this.entryObj.id||2===+this.deptLevel,this.isShowFlag?this.statusActive=0:this.statusActive=1,this.deptObj=Object(n["a"])({deptId:this.entryObj.id,deptName:this.entryObj.name},this.entryObj),this.salesDataObj={},this.departNameTabs=[],this._getQuickOverview()}}]),a}(Object(h["b"])(xt["a"]));Object(u["a"])([Object(h["c"])()],Et.prototype,"entryObj",void 0),Object(u["a"])([Object(h["c"])()],Et.prototype,"echartsWarpName",void 0),Object(u["a"])([Object(h["c"])()],Et.prototype,"deptLevel",void 0),Et=Object(u["a"])([Object(h["a"])({components:{salesHeader:p["a"],echartsBar:C,selectDeptList:q,overdueCard:D,ReceivableCard:A,BalanceGross:tt["a"],MouthYearData:Z,BrandCard:lt,CustomerTrendCard:_t,InnovationCard:Mt,JcCard:$t,ExDepartCard:yt}})],Et);var Gt=Et,Ht=Gt,Wt=(a("9b95"),Object(O["a"])(Ht,s,r,!1,null,"b957d6b2",null));e["a"]=Wt.exports},bd89:function(t,e,a){},c576:function(t,e,a){"use strict";a("a29d")},cb2b:function(t,e,a){"use strict";a("7e5c")},cb71:function(t,e,a){"use strict";a("5387")},cc19:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r}));a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("b680");function s(t){var e=t/1e4;return Math.round(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function r(t){var e=100*t;return e.toFixed(1)}},d37c:function(t,e,a){"use strict";a("ee16")},d499:function(t,e,a){},dc9f:function(t,e,a){"use strict";a("e657")},dcea:function(t,e,a){},de29:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-block pb-3 mb-4"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.pzParams.loading,expression:"pzParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t._l(t.pzList,(function(e,s){return a("detail-card",{key:s,attrs:{isClick:t.isClick,showDrxs:!0,data:e,name:e.id+"/"+e.name},nativeOn:{click:function(a){return t.toDetail(e)}}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.pzList.length&&!t.pzParams.loading,expression:"pzList.length == 0 && !pzParams.loading"}],staticClass:"py-7",attrs:{description:"暂无数据"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pzList.length>0,expression:"pzList.length > 0"}],staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.pzParams.total,"items-per-page":t.pzParams.pageSize},on:{change:t.handlePzTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}]),model:{value:t.pzParams.currentPage,callback:function(e){t.$set(t.pzParams,"currentPage",e)},expression:"pzParams.currentPage"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isFooterShow,expression:"isFooterShow"}],staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:t.openFilter}},[a("div",{staticClass:"d-flex align-center"},[a("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),a("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[t._v("高级操作")])],1)])],1),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.refresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)])],2)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),c=a("262e"),l=a("2caf"),d=(a("96cf"),a("d3b7"),a("159b"),a("b0c0"),a("9ab4")),u=a("1b40"),h=a("ff2d"),p=a("8b7c"),m=a("2279"),f=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.showFilter=!1,t.pzList=[],t.filterList=["本年累计销售额降序","本年累计销售额升序","本月销售额降序","本月销售额升序"],t.stagingFilter={keyword:"",filterIndex:0},t.pzParams={keyword:"",orderColumn:"currentYearMoney",orderType:0,orderMethod:1,orderRule:1,currentPage:1,pageSize:10,total:0,loading:!1,finish:!1,filterIndex:0},t}return Object(o["a"])(a,[{key:"handlePzTableChange",value:function(){this.pzList=[],this.init()}},{key:"_getDataUserGoodSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,goods:this.pzParams.keyword,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(p["f"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getaUserCustomerSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,goods:this.pzParams.keyword,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,userId:this.entryObj.userId,customerId:this.entryObj.customerId,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(p["v"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyCurrentMonthMoney?t.lyCurrentMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getFixCustomerNewGoodSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,goodsKeyword:this.pzParams.keyword,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,userId:this.entryObj.userId,customerId:this.entryObj.customerId,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(m["u"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyCurrentMonthMoney?t.lyCurrentMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_goodsGetDeptDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={deptId:this.entryObj.id,date:this.dateTime,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,goodsKeyword:this.pzParams.keyword,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(m["S"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getFullGoods",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customerId:this.entryObj.customerId,deptId:this.entryObj.id,selectedDate:this.dateTime,orderMethod:this.pzParams.orderMethod,orderRule:this.pzParams.orderRule,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,goodsKeyword:this.pzParams.keyword,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(p["j"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.dailySalesAmount?t.dailySalesAmount:0,data2:t.monthSalesAmount?t.monthSalesAmount:0,data3:t.monthOnMonthPercent?t.monthOnMonthPercent:0,data4:t.entireOnMonthSalesAmount?t.entireOnMonthSalesAmount:0,data5:t.yearSalesAmount?t.yearSalesAmount:0,data6:t.yearOnYearPercent?t.yearOnYearPercent:0,data7:t.accuOnYearSalesAmount?t.accuOnYearSalesAmount:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getNewGoodsDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customerId:this.entryObj.customerId,deptId:this.entryObj.id,date:this.dateTime,orderMethod:this.pzParams.orderMethod,orderRule:this.pzParams.orderRule,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,goodsKeyword:this.pzParams.keyword,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(m["C"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.dailySalesAmount?t.dailySalesAmount:0,data2:t.monthSalesAmount?t.monthSalesAmount:0,data3:t.monthOnMonthPercent?t.monthOnMonthPercent:0,data4:t.entireOnMonthSalesAmount?t.entireOnMonthSalesAmount:0,data5:t.yearSalesAmount?t.yearSalesAmount:0,data6:t.yearOnYearPercent?t.yearOnYearPercent:0,data7:t.accuOnYearSalesAmount?t.accuOnYearSalesAmount:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toDetail",value:function(t){this.isClick&&(this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605012,menuName:t.id+"/"+t.name+"-品种列表点击进入",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"salesLineGoodsSalesPage",query:{goodsId:t.id,goodsName:t.name,id:this.entryObj.id,name:this.entryObj.name,userId:this.entryObj.userId,userName:this.entryObj.userName}}))}},{key:"refresh",value:function(){this.stagingFilter.filterIndex=0,this.stagingFilter.keyword="",this.pzParams.keyword="",this.pzParams.filterIndex=0,this.pzParams.orderColumn="currentYearMoney",this.pzParams.orderType=0,this.showFilter=!1,this.init()}},{key:"openFilter",value:function(){this.showFilter=!0}},{key:"handleFilterOk",value:function(){if(this.showFilter=!1,this.pzList=[],this.pzParams.currentPage=1,this.pzParams.keyword=this.stagingFilter.keyword,this.pzParams.filterIndex=this.stagingFilter.filterIndex,this.pzParams.finish=!1,0===this.type||"customDepartmentRelate"==this.type)switch(this.pzParams.filterIndex){case 0:this.pzParams.orderMethod=1,this.pzParams.orderRule=1;break;case 1:this.pzParams.orderMethod=1,this.pzParams.orderRule=2;break;case 2:this.pzParams.orderMethod=2,this.pzParams.orderRule=1;break;case 3:this.pzParams.orderMethod=2,this.pzParams.orderRule=2;break}else switch(this.pzParams.filterIndex){case 0:this.pzParams.orderColumn="currentYearMoney",this.pzParams.orderType=0;break;case 1:this.pzParams.orderColumn="currentYearMoney",this.pzParams.orderType=1;break;case 2:this.pzParams.orderColumn="currentMonthMoney",this.pzParams.orderType=0;break;case 3:this.pzParams.orderColumn="currentMonthMoney",this.pzParams.orderType=1;break}this.init()}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"init",value:function(){this.pzList=[],"customerPersonRelate"===this.type?("全品种"===this.goodsTypeName&&this._getaUserCustomerSalesList(),"新增品种"===this.goodsTypeName&&this._getFixCustomerNewGoodSalesList()):"personRelate"===this.type?this._getDataUserGoodSalesList():"customDepartmentRelate"===this.type?("全品种"===this.goodsTypeName&&this._getFullGoods(),"新增品种"===this.goodsTypeName&&this._getNewGoodsDetailList()):"departmentRelate"===this.type&&this._goodsGetDeptDetailList()}},{key:"mounted",value:function(){this.init()}}]),a}(u["d"]);Object(d["a"])([Object(u["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(u["c"])({default:!0})],f.prototype,"isFooterShow",void 0),Object(d["a"])([Object(u["c"])({default:!0})],f.prototype,"isClick",void 0),Object(d["a"])([Object(u["c"])({default:""})],f.prototype,"goodsTypeName",void 0),Object(d["a"])([Object(u["c"])({default:""})],f.prototype,"type",void 0),f=Object(d["a"])([Object(u["a"])({components:{detailCard:h["a"]}})],f);var y=f,v=y,b=(a("6c8f"),a("2877")),g=Object(b["a"])(v,s,r,!1,null,"6659ec16",null);e["a"]=g.exports},e657:function(t,e,a){},e699:function(t,e,a){},e8d5:function(t,e,a){},ee0f:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("van-tabs",{staticStyle:{padding:"0 10px"},attrs:{color:"#2271F5"},model:{value:t.activeInner,callback:function(e){t.activeInner=e},expression:"activeInner"}},[a("van-tab",{attrs:{name:0,title:"全客户"}}),a("van-tab",{attrs:{name:3,title:"下降客户"}}),a("van-tab",{attrs:{name:1,title:"全品种"}}),a("van-tab",{attrs:{name:4,title:"流失品种"}}),a("van-tab",{attrs:{name:2,title:"业务员"}})],1)],1),t.refreshData?a("div",{staticClass:"detail-body"},[t.entryObj.id&&2===t.activeInner?a("SalesmanList",{attrs:{dateTime:t.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),entryObj:t.entryObj}}):t._e(),3===+t.activeInner?a("LoseCustomerTable",{attrs:{type:"departmentRelate",dateTime:t.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),entryObj:t.entryObj}}):t._e(),0===+t.activeInner?a("CustomerList",{key:"bmqkh",attrs:{entryObj:t.entryObj,type:"departmentRelate",dateTime:t.$dayjs(this.csjNowTime).format("YYYY-MM-DD")}}):t._e(),1===+t.activeInner?a("GoodsList",{attrs:{type:"departmentRelate",dateTime:t.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),entryObj:t.entryObj}}):t._e(),4===+t.activeInner?a("LoseGoodsTable",{attrs:{type:"departmentRelate",dateTime:t.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),entryObj:t.entryObj}}):t._e()],1):t._e()])},r=[],i=a("d4ec"),n=a("bee2"),o=a("262e"),c=a("2caf"),l=a("9ab4"),d=a("1b40"),u=a("de29"),h=a("6f96"),p=a("8d1d"),m=a("38d7"),f=a("32e5"),y=a("4bb5"),v=Object(y["a"])("app"),b=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.activeInner="-1",t}return Object(n["a"])(a,[{key:"mounted",value:function(){this.activeInner=this.active}}]),a}(d["d"]);Object(l["a"])([v.Getter],b.prototype,"csjNowTime",void 0),Object(l["a"])([Object(d["c"])()],b.prototype,"refreshData",void 0),Object(l["a"])([Object(d["c"])()],b.prototype,"entryObj",void 0),Object(l["a"])([Object(d["c"])()],b.prototype,"active",void 0),b=Object(l["a"])([Object(d["a"])({components:{GoodsList:u["a"],LoseGoodsTable:p["a"],CustomerList:h["a"],LoseCustomerTable:m["a"],SalesmanList:f["a"]}})],b);var g=b,O=g,j=(a("9ed7"),a("2877")),C=Object(j["a"])(O,s,r,!1,null,"b44d0f6e",null);e["a"]=C.exports},ee16:function(t,e,a){},eec9:function(t,e,a){},f2fd:function(t,e,a){"use strict";a("dcea")},f326:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-color-white pb-100"},[t.entryObj.id?a("depart-index",{attrs:{entryObj:t.entryObj,deptLevel:t.$route.query.level},on:{departClick:t.departClick,calendarConfirm:t.calendarConfirm,chooseData:t.chooseData}}):t._e(),a("CommonVue",{attrs:{active:t.active,entryObj:t.entryObj,refreshData:t.refreshData}})],1)},r=[],i=a("bee2"),n=a("d4ec"),o=a("262e"),c=a("2caf"),l=a("9ab4"),d=a("1b40"),u=a("abc3"),h=a("ee0f"),p=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(i["a"])(a)}(Object(d["b"])(u["a"]));p=Object(l["a"])([Object(d["a"])({components:{CommonVue:h["a"]}})],p);var m=p,f=m,y=a("2877"),v=Object(y["a"])(f,s,r,!1,null,"7ae05bfe",null);e["default"]=v.exports},ff2d:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-bg detail-card mt-2 pa-2"},[t.showDepName?a("div",[a("div",{staticClass:"d-flex align-center justify-space-between font-16 lineHeight-23 px-2"},[a("div",{staticClass:"fontWeight-500 color-main-2"},[t._v(t._s(t.name))]),a("div",{staticClass:"fontWeight-500 color-main-2"},[t._v(t._s(t.getUnitValueUse(t.data.data1,1))+"万元")])]),a("div",{staticClass:"d-flex align-center justify-space-between font-12 lineHeight-20 mb-1 px-2"},[a("div",{staticClass:"color-gray-5"},[t._v(t._s(t.data.mainDeptName))]),a("div",{staticClass:"color-gray-5"},[t._v("当日销售")])])]):a("div",{staticClass:"d-flex align-center justify-space-between font-16 lineHeight-23 card-header",class:t.isClick?"color-main-2 ":""},[a("div",{staticClass:"fontWeight-500"},[t._v(t._s(t.name))]),t.showDrxs?a("div",[a("span",{staticClass:"fontWeight-500 color-gray-5"},[t._v("当日销售")]),a("span",{staticClass:"fontWeight"},[t._v(t._s(t.getUnitValueUse(t.data.data1,1))+"万元")])]):t._e()]),a("div",{staticClass:"card-line my-1"}),"台州销售部"==t.name?a("div",{staticClass:"mb-1"},[a("span",{staticClass:"font-12 lineHeight-17"},[t._v("根据23年业务下沉协议，23年实际增长率")]),a("span",{staticClass:"font-13 fontWeight-500 ml-2",class:t.data.data9>0?"color-normal":"color-never"},[t._v(" "+t._s(t.nToP(t.data.data9))+"% ")])]):t._e(),"金华销售部"==t.name?a("div",{staticClass:"mb-1"},[a("span",{staticClass:"font-12 lineHeight-17"},[t._v("剔除浙四，23年增长率")]),a("span",{staticClass:"font-13 fontWeight-500 ml-2",class:t.data.data9>0?"color-normal":"color-never"},[t._v(" "+t._s(t.nToP(t.data.data9))+"% ")])]):t._e(),a("div",{staticClass:"d-flex justify-space-between align-baseline"},[a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("本月销售")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20"},[t._v(t._s(t.yToW(t.data.data2)))])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("月同比")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20",class:t.data.data3>0?"color-normal":"color-never"},[t._v(" "+t._s(t.nToP(t.data.data3))+"% ")])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("去年整月")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20"},[t._v(t._s(t.yToW(t.data.data4)))])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("本年累计")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20"},[t._v(t._s(t.yToW(t.data.data5)))])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("年同比")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20 d-felx",class:t.data.data6>0?"color-normal":"color-never"},[t._v(" "+t._s(t.nToP(t.data.data6))+"% ")])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("去年累计整月")]),a("span",{staticClass:"font-13 lineHeight-20 fontWeight-500"},[t._v(t._s(t.yToW(t.data.data7)))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.per>-1&&t.perShow,expression:"per > -1 && perShow"}],staticClass:"positionR"},[a("van-progress",{staticClass:"mt-1",attrs:{percentage:t.per,"track-color":"rgba($color: #646566, $alpha: 0.6)",color:"#4970F3","show-pivot":!1,"stroke-width":"20"}}),a("div",{staticClass:"color-white progress-text font-14 lineHeight-20 pl-3"},[t._v("预算进度达成率"+t._s(t.nToP(t.per))+"%")])],1)])},r=[],i=a("bee2"),n=a("d4ec"),o=a("262e"),c=a("2caf"),l=(a("a9e3"),a("9ab4")),d=a("1b40"),u=a("cc19"),h=a("5b92"),p=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.yToW=u["b"],t.nToP=u["a"],t.getUnitValueUse=h["d"],t}return Object(i["a"])(a)}(d["d"]);Object(l["a"])([Object(d["c"])({type:Object,default:{}})],p.prototype,"data",void 0),Object(l["a"])([Object(d["c"])({type:String,default:""})],p.prototype,"name",void 0),Object(l["a"])([Object(d["c"])({type:String,default:""})],p.prototype,"mainDeptName",void 0),Object(l["a"])([Object(d["c"])({type:Number,default:-1})],p.prototype,"per",void 0),Object(l["a"])([Object(d["c"])({default:!1})],p.prototype,"showDrxs",void 0),Object(l["a"])([Object(d["c"])({default:!1})],p.prototype,"showDepName",void 0),Object(l["a"])([Object(d["c"])({default:!0})],p.prototype,"isClick",void 0),Object(l["a"])([Object(d["c"])({default:!0})],p.prototype,"perShow",void 0),p=Object(l["a"])([Object(d["a"])({components:{}})],p);var m=p,f=m,y=(a("cb2b"),a("2877")),v=Object(y["a"])(f,s,r,!1,null,"6faad624",null);e["a"]=v.exports}}]);