(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6ef149c"],{"01d1":function(t,e,a){},"388f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex align-center pa-10 white-bg"},[t.isImage(t.data.fileType)?a("van-image",{attrs:{src:""+t.$root.domainUrl+t.data.fileUrl,width:"30",height:"30"},on:{click:function(e){return t.previewFile(t.data)}}}):a("app-icon",{staticClass:"font-30",attrs:{name:"#ytcrm-word"},on:{click:function(e){return t.previewFile(t.data)}}}),a("div",{staticClass:"flex-1 mx-2 slh color-main-2 text-underline",on:{click:function(e){return t.previewFile(t.data)}}},[t._v(" "+t._s(t.data.fileName)+"."+t._s(t.data.fileType)+" ")]),t.isUpload?a("div",{staticClass:"color-red",on:{click:function(e){return t.removeFile(t.data)}}},[t._v("删除")]):a("div",{staticClass:"color-main-2",on:{click:function(e){return t._downloadFile(t.data)}}},[t._v("点击下载")])],1),a("van-popup",{staticClass:"full-HW",attrs:{closeable:""},model:{value:t.fileShow,callback:function(e){t.fileShow=e},expression:"fileShow"}},[a("iframe",{staticClass:"file-div",attrs:{src:t.fileUrl,frameborder:"0"}})]),t.previewShow?a("OfficePreview",{attrs:{fileUrl:t.fileUrl,show:t.previewShow},on:{"update:show":function(e){t.previewShow=e}}}):t._e()],1)},s=[],n=(a("4662"),a("28a2")),l=a("d4ec"),r=a("bee2"),c=a("262e"),o=a("2caf"),d=(a("caad"),a("99af"),a("2532"),a("9ab4")),u=a("1b40"),p=a("4915"),f=a.n(p),v=["xls","xlsx"],h=["docx","doc","xls","xlsx","xlsb","xlsm","pdf","pptx","ppsx","ppt","pps","potx","ppsm"],y=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.fileShow=!1,t.previewShow=!1,t.fileUrl="",t.excelTypes=v,t.officeTypes=h,t}return Object(r["a"])(a,[{key:"isImage",value:function(t){var e=["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"];return e.includes(t)}},{key:"previewFile",value:function(t){var e="".concat(this.$root.domainUrl).concat(t.fileUrl);this.isImage(t.fileType)?Object(n["a"])([e]):this.officeTypes.includes(t.fileType)?(this.fileUrl=e,this.previewShow=!0):this.$toast("该类型文件暂不支持预览")}},{key:"_downloadFile",value:function(t){this.$emit("download",t)}},{key:"removeFile",value:function(t){this.$emit("remove",t)}},{key:"onDataChange",value:function(t){this.data=t,this.$forceUpdate()}}]),a}(u["d"]);Object(d["a"])([Object(u["c"])({type:Object,default:{}})],y.prototype,"data",void 0),Object(d["a"])([Object(u["c"])({type:Boolean,default:!1})],y.prototype,"isUpload",void 0),Object(d["a"])([Object(u["e"])("data",{deep:!0})],y.prototype,"onDataChange",null),y=Object(d["a"])([Object(u["a"])({components:{OfficePreview:f.a}})],y);var b=y,m=b,g=(a("82b5"),a("2877")),w=Object(g["a"])(m,i,s,!1,null,"aae349d4",null);e["a"]=w.exports},"4fcc":function(t,e,a){},"5cbe":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-100"},[a("task-piece",{attrs:{data:t.detail,receipt:2===+t.detailInfor.type}}),a("div",{staticClass:"white-bg px-10 pb-10 d-flex justify-space-between"},[a("div",{staticClass:"d-flex align-center"},[a("div",{staticClass:"d-flex align-center"},[a("app-icon",{attrs:{name:"#ytcrm-dixiaqushuijing"}}),a("span",{staticClass:"ml-1"},[t._v("#"+t._s(t.detail.csoId||""))])],1),a("div",{staticClass:"d-flex align-center pl-10"},[a("app-icon",{class:1===+t.detail.isReturn?"color-main-2":"color-gray-3",attrs:{name:"#ytcrm-return"}}),a("span",{staticClass:"ml-1"},[t._v(t._s(1===+t.detail.isReturn?"需要回执":"无需回执"))])],1)]),1===+t.detailInfor.type?a("div",{class:["d-flex align-center font-bold",1===+t.detail.useStatus?"color-main-2":"color-gray-3"]},[a("div",{staticClass:"progress mr-2"},[a("div",{class:["progress",1===+t.detail.useStatus?"progress--inner":"progress--innerf"],style:"width: "+(2===+t.detail.useStatus?100:t.replyRate)+"%"})]),t._v(" "+t._s(t.rateText)+" ")]):t._e()]),a("task-title",{attrs:{title:"标题及内容"}}),a("div",{staticClass:"white-bg pa-10 font-bold"},[t._v(t._s(t.detail.orderTitle))]),a("div",{staticClass:"white-bg pa-10 mt-2 color-gray-5"},[t._v(t._s(t.detail.orderContent))]),1===+t.detail.isReturn&&0!==+t.detail.useStatus&&t.noReplyList&&t.noReplyList.length?a("div",{staticClass:"white-bg font-14 d-flex align-center justify-space-between px-4 py-10 mt-2"},[a("div",{staticClass:"color-gray-5"},[t._v("未回执")]),a("div",{staticClass:"d-flex align-center"},[a("div",{staticClass:"textAlignR mr-6"},[a("div",{staticClass:"reply-btn",on:{click:function(e){return t.onUrgeReply(t.detail.csoId)}}},[a("app-icon",{staticClass:"mr-2",attrs:{name:"#ytcrm-tongzhi"}}),t._v("点击催办 ")],1)]),a("div",{on:{click:function(e){t.noReplyshow=!0}}},[t._v(t._s(t.noReplyList.length)+"人")])])]):t._e(),a("task-title",{attrs:{title:"附件"}}),t.detail.files&&t.detail.files.length?t._l(t.detail.files,(function(e){return a("file-item",{key:e.index,attrs:{data:e},on:{download:t._downloadFile}})})):a("div",{staticClass:"white-bg pa-10 color-gray-3"},[t._v("暂无附件")]),0!==+t.detail.useStatus&&t.detail.content?[a("task-title",{attrs:{title:"回执"}}),a("div",{staticClass:"white-bg pa-10"},[a("div",{staticClass:"color-gray-3"},[t._v(t._s(t.detail.callBackTime))]),a("div",{staticClass:"color-gray-5 pt-10"},[t._v(t._s(t.detail.content))])])]:2===+t.detailInfor.type&&t.detail.isReturn&&!t.detail.content&&0!==+t.detail.useStatus?[a("task-title",{attrs:{title:"回执"}}),a("div",{staticClass:"white-bg pa-10"},[a("van-field",{attrs:{rows:"4",autosize:"",type:"textarea",maxlength:"200",placeholder:"请输入回执信息","show-word-limit":""},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}})],1)]:0!==+t.detail.useStatus&&1===+t.detailInfor.type?[a("task-title",{attrs:{title:"回执列表"}},[1===+t.detail.isReturn?a("div",[t._v(" 已回执 "),a("span",{staticClass:"color-main-2"},[t._v(t._s(t.replyList.length))]),t._v(" 人 ")]):t._e()]),0===+t.detail.isReturn?a("div",{staticClass:"white-bg color-gray-5 pa-10 reply-min-height"},[t._v("无需回执")]):t.replyList.length?t._e():a("app-empty",{staticClass:"white-bg py-7",attrs:{description:"暂无回执"}}),t._l(t.replyList,(function(t,e){return a("reply-item",{key:e,attrs:{data:t}})}))]:t._e(),2===+t.detailInfor.type&&0!==t.detail.useStatus&&t.detail.isReturn&&!t.detail.content?a("div",{staticClass:"d-flex justify-center mx-4 mt-7"},[a("submit-btn",{staticClass:"mr-3",attrs:{loading:t.knownLoading,title:"已知悉",type:"cancel"},on:{click:t.known}}),a("submit-btn",{attrs:{loading:t.submitLoading,title:"提交"},on:{click:t.submit}})],1):1===+t.detailInfor.type&&0===t.detail.useStatus?a("div",{staticClass:"d-flex justify-center mx-4 mt-7"},[a("submit-btn",{attrs:{title:"再次发起"},on:{click:t.resend}})],1):t._e(),t.noReplyshow?a("no-reply-popup",{attrs:{list:t.noReplyList},on:{close:function(e){t.noReplyshow=!1}}}):t._e()],2)},s=[],n=a("1da1"),l=a("d4ec"),r=a("bee2"),c=a("262e"),o=a("2caf"),d=(a("caad"),a("2532"),a("d81d"),a("99af"),a("b680"),a("96cf"),a("9ab4")),u=a("1b40"),p=a("4bb5"),f=a("ddda"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"px-10 py-2 d-flex align-center justify-space-between"},[a("div",{staticClass:"task-title color-gray-4"},[t._v(t._s(t.title))]),t._t("default")],2)},h=[],y=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(l["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a)}(u["d"]);Object(d["a"])([Object(u["c"])({type:String,default:""})],y.prototype,"title",void 0),y=Object(d["a"])([Object(u["a"])({})],y);var b=y,m=b,g=(a("a9f0"),a("2877")),w=Object(g["a"])(m,v,h,!1,null,"7c720bd7",null),j=w.exports,_=a("f10e"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-popup",{style:{height:"50%"},attrs:{closeable:"",position:"bottom",round:""},on:{close:t.onClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"font-16 font-bold textAlignC py-3"},[t._v("已回执 "+t._s(t.list.length)+" 人")]),t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"font-14 color-gray-5 mx-4 pt-3"},[t._v(" "+t._s(e.sendUserName)+" "),a("div",{staticClass:"line mt-3"})])}))],2)},O=[],k=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.show=!0,t}return Object(r["a"])(a,[{key:"onClose",value:function(){this.$emit("close")}}]),a}(u["d"]);Object(d["a"])([Object(u["c"])({type:Array,default:[]})],k.prototype,"list",void 0),k=Object(d["a"])([Object(u["a"])({})],k);var C=k,I=C,R=(a("f68c"),Object(g["a"])(I,x,O,!1,null,"5d2c5ce8",null)),L=R.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-bg pa-10"},[a("div",{staticClass:"d-flex align-center justify-space-between"},[a("div",{staticClass:"flex-1 min-width-0 d-flex align-center"},[a("van-image",{staticClass:"reply-img",attrs:{round:"",fit:"cover",src:t.$root.domainUrl+t.data.headImgUrl}}),a("div",{staticClass:"font-14 ml-2"},[t._v(t._s(t.data.sendUserName))]),a("div",{staticClass:"flex-1 slh"},[a("van-popover",{attrs:{trigger:"click",actions:t.data.sendTypeList},scopedSlots:t._u([{key:"reference",fn:function(){return[a("div",{staticClass:"color-gray-4 ml-2 slh"},[t._v(" "+t._s(t.data.sendTypeList[0].text)+" ")])]},proxy:!0}]),model:{value:t.data.showPopover,callback:function(e){t.$set(t.data,"showPopover",e)},expression:"data.showPopover"}})],1)],1),a("div",{staticClass:"color-gray-3 time-div"},[t._v(t._s(t.data.callBackTime))])]),a("div",{staticClass:"mt-3"},[t._v(t._s(t.data.content))])])},S=[],$=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(l["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a)}(u["d"]);Object(d["a"])([Object(u["c"])({type:Object,default:{}})],$.prototype,"data",void 0),$=Object(d["a"])([Object(u["a"])({})],$);var U=$,F=U,E=(a("7685"),Object(g["a"])(F,T,S,!1,null,"752ac1d3",null)),D=E.exports,N=a("388f"),A=a("2835"),P=Object(p["a"])("app"),M=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.isMsg=t.$route.query.isMsg,t.userId=t.$route.query.userId,t.detail={},t.loading=!1,t.replyContent="",t.submitLoading=!1,t.knownLoading=!1,t.orderTypeList=["","部门","标签","小组"],t.active=0,t.replyList=[],t.noReplyList=[],t.replyRate=0,t.rateText="",t.noReplyshow=!1,t}return Object(r["a"])(a,[{key:"known",value:function(){this.knownLoading=!0,this.commit(1)}},{key:"submit",value:function(){this.replyContent?(this.submitLoading=!0,this.commit(2)):this.$toast.fail("请填写内容")}},{key:"commit",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={csoId:this.detail.csoId,csodId:this.detail.csodId,content:1===e?"已知悉":this.replyContent},t.next=3,Object(A["n"])(a);case 3:i=t.sent,i.success&&(this.submitLoading=!1,this.knownLoading=!1,this.$toast.success(i.msg||"回执成功"),this.isMsg?this.detail.content=this.replyContent:(this.SET_HADDONEONDETAIL(!0),setTimeout((function(){s.$router.back()}),500)));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_downloadFile",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.fileName,i=e.fileType,s=e.fileUrl,n=["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"],n.includes(i)?window.location.href="https://intmedic-wx.oss-cn-hangzhou.aliyuncs.com/".concat(s):this.$router.push({path:"/task/download",query:{fileName:a,fileType:i,fileUrl:s}});case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getDetail",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},1!==+this.detailInfor.type){t.next=7;break}return t.next=4,Object(A["j"])({csoId:this.detailInfor.csoId});case 4:e=t.sent,t.next=11;break;case 7:if(2!==+this.detailInfor.type){t.next=11;break}return t.next=10,Object(A["l"])({csoId:this.detailInfor.csoId,userId:this.userId||this.userInfor.userId||""});case 10:e=t.sent;case 11:this.detail=e.data,this.replyList=[],this.noReplyList=[],this.detail.sendList.map((function(t){t.sendTypeList.map((function(t){t.text="".concat(t.distributeId,"/").concat(t.distribute,"（").concat(a.orderTypeList[t.orderType],"）")})),t.content?a.replyList.push(t):a.noReplyList.push(t)})),this.replyRate=this.detail.isReturn?Math.ceil(this.replyList.length/this.detail.sendList.length*100):100,this.rateText=this.replyRate.toFixed(0)+"%";case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onUrgeReply",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(A["o"])({csoId:e});case 2:a=t.sent,a.success&&this.$toast.success(a.msg||"催办成功");case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"resend",value:function(){this.$router.push({name:"TaskPublish",params:{detail:this.detail}})}},{key:"created",value:function(){this.getDetail()}}]),a}(u["d"]);Object(d["a"])([P.Mutation],M.prototype,"SET_HADDONEONDETAIL",void 0),Object(d["a"])([P.Getter],M.prototype,"detailInfor",void 0),Object(d["a"])([P.Getter],M.prototype,"userInfor",void 0),M=Object(d["a"])([Object(u["a"])({components:{AppTag:f["a"],TaskTitle:j,TaskPiece:_["a"],NoReplyPopup:L,ReplyItem:D,FileItem:N["a"]}})],M);var q=M,z=q,B=(a("6aaa"),Object(g["a"])(z,i,s,!1,null,"610fdbb2",null));e["default"]=B.exports},"6aaa":function(t,e,a){"use strict";a("4fcc")},7685:function(t,e,a){"use strict";a("9624")},"82b5":function(t,e,a){"use strict";a("aa75")},9624:function(t,e,a){},a9f0:function(t,e,a){"use strict";a("01d1")},aa75:function(t,e,a){},b640:function(t,e,a){},f68c:function(t,e,a){"use strict";a("b640")}}]);