(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1f0e684"],{"0a3e":function(t,e,a){"use strict";a("8b3d")},"8b3d":function(t,e,a){},f6a4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"screenshotBody",staticClass:"full-HW van-popup-bg"},[a("switch-and-statistics",{attrs:{selectMode:3,nowName:t.nowName,showZl:!1,isLong:!0,info:t.info,per:t.info.data9},on:{openSelect:t.openSelect,changeTime:t.changeTime}}),a("select-popup",{ref:"selectPopup",attrs:{selectMode:3,nowData:t.nowData},on:{changeChoose:t.changeChoose}}),a("scroll-bar",{attrs:{textList:t.textList},nativeOn:{click:function(e){return t.toDimension.apply(null,arguments)}}}),a("div",{ref:"screenshotLine"},[a("van-tabs",{staticStyle:{padding:"0 10px"},attrs:{color:"#2271F5"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"客户维度"}}),a("van-tab",{attrs:{title:"品种维度"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"detail-body"},[a("div",{staticClass:"white-block pb-3 mb-4"},[t._l(t.khList,(function(e,i){return a("detail-card",{key:i,attrs:{data:e,name:e.id+"/"+e.name},nativeOn:{click:function(a){return t.toDetail(e)}}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.khList.length,expression:"khList.length == 0"}],staticClass:"py-7",attrs:{description:"暂无数据"}})],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"detail-body"},[a("div",{staticClass:"white-block pb-3 mb-4"},[t._l(t.pzList,(function(e,i){return a("detail-card",{key:i,attrs:{data:e,name:e.id+"/"+e.name},nativeOn:{click:function(a){return t.toDetail(e)}}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.pzList.length,expression:"pzList.length == 0"}],staticClass:"py-7",attrs:{description:"暂无数据"}})],2)]),a("screenshot",{attrs:{buttonMode:1==t.mode||2==t.mode?2:1,isFullScreen:!1},on:{openFilter:t.openFilter}}),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,i){return a("div",{key:i,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===i?"active":"",on:{click:function(e){return t.chooseFilter(i)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.refresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)])],1)},r=[],s=a("1da1"),n=a("d4ec"),o=a("bee2"),h=a("262e"),c=a("2caf"),l=(a("96cf"),a("b0c0"),a("d3b7"),a("25f0"),a("159b"),a("e9c4"),a("0eb6"),a("b7ef"),a("8bd4"),a("9ab4")),u=a("1b40"),d=a("020e"),m=a("8b7c"),p=a("d926"),y=function(t){Object(h["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.textList=["点击查看客户丨品种维度详情"],t.active=0,t.khList=[],t.pzList=[],t.khParams={custom:"",orderColumn:"currentYearMoney",orderType:0,currentPage:1,pageSize:30,total:0,loading:!1,finish:!1,filterIndex:0},t.pzParams={goods:"",orderColumn:"currentYearMoney",orderType:0,currentPage:1,pageSize:30,total:0,loading:!1,finish:!1,filterIndex:0},t.filterList=["本年累计销售额降序","本年累计销售额升序","本月销售额降序","本月销售额升序"],t.stagingFilter={keyword:"",filterIndex:0},t}return Object(o["a"])(a,[{key:"changeChoose",value:function(t){this.nowName=t.name,this.nowData=t.id.toString(),this.initData()}},{key:"changeTime",value:function(){this.initData()}},{key:"initData",value:function(){var t=this;this.khParams.currentPage=1,this.pzParams.currentPage=1,this.khParams.finish=!1,this.pzParams.finish=!1,this.pzList=[],this.khList=[];var e=Object(p["d"])(this.nowTime);this._getDataUserSalesDetail(e).then((function(){t._getDataUserCustomerSalesList(e).then((function(){t._getDataUserGoodSalesList(e)}))}))}},{key:"_getDataUserSalesDetail",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,userId:this.nowData},t.next=3,Object(m["g"])(a);case 3:i=t.sent,200==i.code&&i.data&&(this.info.data1=i.data.currentDayMoney?i.data.currentDayMoney:0,this.info.data3=i.data.currentMonthMoney?i.data.currentMonthMoney:0,this.info.data4=i.data.lyCurrentMonthMoney?i.data.lyCurrentMonthMoney:0,this.info.data5=i.data.monthPercentage?i.data.monthPercentage:0,this.info.data6=i.data.currentYearMoney?i.data.currentYearMoney:0,this.info.data7=i.data.lyCurrentYearMoney?i.data.lyCurrentYearMoney:0,this.info.data8=i.data.yearPercentage?i.data.yearPercentage:0,this.info.data9=i.data.budgetCompletePercent?i.data.budgetCompletePercent:0);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getDataUserCustomerSalesList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,userId:this.nowData,custom:this.khParams.custom,orderColumn:this.khParams.orderColumn,orderType:this.khParams.orderType,pageNum:this.khParams.currentPage,pageSize:this.khParams.pageSize},this.khParams.loading=!0,t.next=4,Object(m["e"])(a);case 4:i=t.sent,this.khParams.loading=!1,200==i.code&&i.data&&i.data.list?(i.data.list.forEach((function(t){r.khList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.khParams.total=i.data.total,this.khList.length===this.khParams.total&&(this.khParams.finish=!0)):(this.khParams.total=0,this.khParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getDataUserGoodSalesList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,userId:this.nowData,goods:this.pzParams.goods,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize},this.pzParams.loading=!0,t.next=4,Object(m["f"])(a);case 4:i=t.sent,this.pzParams.loading=!1,200==i.code&&i.data&&i.data.list?(i.data.list.forEach((function(t){r.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=i.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"scrollBottom",value:function(){if("staffList"==this.$route.name){var t=this.$refs.selectPopup;if(!t||!t.showPopup)if(0===this.active){if(!this.khParams.finish&&!this.khParams.loading){var e=Object(p["d"])(this.nowTime);this.khParams.currentPage++,this._getDataUserCustomerSalesList(e)}}else if(!this.pzParams.finish&&!this.pzParams.loading){var a=Object(p["d"])(this.nowTime);this.pzParams.currentPage++,this._getDataUserGoodSalesList(a)}}}},{key:"openFilter",value:function(){this.showFilter=!0,this.refresh()}},{key:"refresh",value:function(){0===this.active?(this.stagingFilter.keyword=this.khParams.custom,this.stagingFilter.filterIndex=this.khParams.filterIndex):(this.stagingFilter.filterIndex=this.pzParams.filterIndex,this.stagingFilter.keyword=this.pzParams.goods)}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"handleFilterOk",value:function(){this.showFilter=!1;var t=Object(p["d"])(this.nowTime);if(0===this.active){switch(this.khList=[],this.khParams.currentPage=1,this.khParams.custom=this.stagingFilter.keyword,this.khParams.filterIndex=this.stagingFilter.filterIndex,this.khParams.finish=!1,this.khParams.filterIndex){case 0:this.khParams.orderColumn="currentYearMoney",this.khParams.orderType=0;break;case 1:this.khParams.orderColumn="currentYearMoney",this.khParams.orderType=1;break;case 2:this.khParams.orderColumn="currentMonthMoney",this.khParams.orderType=0;break;case 3:this.khParams.orderColumn="currentMonthMoney",this.khParams.orderType=1;break}this._getDataUserCustomerSalesList(t)}else{switch(this.pzList=[],this.pzParams.currentPage=1,this.pzParams.goods=this.stagingFilter.keyword,this.pzParams.filterIndex=this.stagingFilter.filterIndex,this.pzParams.finish=!1,this.pzParams.filterIndex){case 0:this.pzParams.orderColumn="currentYearMoney",this.pzParams.orderType=0;break;case 1:this.pzParams.orderColumn="currentYearMoney",this.pzParams.orderType=1;break;case 2:this.pzParams.orderColumn="currentMonthMoney",this.pzParams.orderType=0;break;case 3:this.pzParams.orderColumn="currentMonthMoney",this.pzParams.orderType=1;break}this._getDataUserGoodSalesList(t)}}},{key:"toDetail",value:function(t){var e={name:this.nowName+(this.active?"(品种详情)":"(客户详情)"),id:this.nowData,detailName:t.id+"/"+t.name,detailId:t.id,type:0===this.active?3:2};e=JSON.stringify(e),e=window.btoa(encodeURI(e)),this.$router.push({name:"analysisList",query:e})}},{key:"toDimension",value:function(){var t={name:this.nowName,id:this.nowData,selectMode:3};this.$crmUserClick({catalogType:1,catalogTypeName:"CDP",cucrId:"",menuId:3,menuName:"人员权限",menuOperation:"点击查看客户丨品种维度详情",operationType:4}),t=JSON.stringify(t),t=window.btoa(encodeURI(t)),this.$router.push({name:"dimensionList",query:t})}},{key:"activated",value:function(){if(this._getryList(),this.closeSelect(),this.$route.query.id&&this.$route.query.fromHome)return this.nowName=this.$route.query.name,this.nowData=this.$route.query.id.toString(),void this.initData();var t=this.$route.meta;if(t.isFresh&&!this.$route.query.id)return this.nowData=null,void this.openSelect();this.$route.query.id&&t.isPush?(this.nowName=this.$route.query.name,this.nowData=this.$route.query.id.toString(),this.initData()):this.nowData&&this.initData()}}]),a}(Object(u["b"])(d["a"]));y=Object(l["a"])([Object(u["a"])({components:{},beforeRouteEnter:function(t,e,a){"dimensionList"==e.name||"analysisList"==e.name?(t.meta.isPush=!1,a(!0)):(t.meta.isPush=!0,a(!0))},beforeRouteLeave:function(t,e,a){this.closeSelect(),e.meta.isFresh=!1,a(!0)}})],y);var f=y,g=f,v=(a("0a3e"),a("2877")),P=Object(v["a"])(g,i,r,!1,null,"2d7c8942",null);e["default"]=P.exports}}]);