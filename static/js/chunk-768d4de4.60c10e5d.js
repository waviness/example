(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-768d4de4"],{"04fd":function(e,t,a){"use strict";a("93a1")},"1f3f":function(e,t,a){"use strict";a("d2a0")},2202:function(e,t,a){"use strict";a("2adc")},"2adc":function(e,t,a){},"437a":function(e,t,a){"use strict";var s=a("bee2"),i=a("d4ec"),o=a("262e"),r=a("2caf"),n=a("9ab4"),l=a("1b40"),c=a("4bb5"),u=Object(c["a"])("app"),d=Object(c["a"])("crm");l["a"].registerHooks(["beforeRouteEnter"]);var f=function(e){Object(o["a"])(a,e);var t=Object(r["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.filterShow=!1,e.filterActive=!1,e.tabType=0,e}return Object(s["a"])(a)}(l["d"]);Object(n["a"])([u.Getter],f.prototype,"userInfor",void 0),Object(n["a"])([d.Mutation],f.prototype,"SET_DETAILOBJ",void 0),Object(n["a"])([u.Mutation],f.prototype,"SET_QUERYPARAMA",void 0),Object(n["a"])([u.Mutation],f.prototype,"SET_HADDONEONDETAIL",void 0),Object(n["a"])([u.Getter],f.prototype,"hadDoneOnDetail",void 0),f=Object(n["a"])([Object(l["a"])({})],f),t["a"]=f},"53ae":function(e,t,a){"use strict";var s=a("d4ec"),i=a("bee2"),o=a("262e"),r=a("2caf"),n=(a("b0c0"),a("9ab4")),l=a("1b40");l["a"].registerHooks(["beforeRouteEnter"]);var c=function(e){Object(o["a"])(a,e);var t=Object(r["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(i["a"])(a,[{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),a}(l["d"]);c=Object(n["a"])([Object(l["a"])({})],c),t["a"]=c},"6b49":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-field",{attrs:{clearable:"",label:"goodsPop"===e.keyValue?"品种ID/名称":"客户ID/名称","input-align":"right",placeholder:"点击输入"+("goodsPop"===e.keyValue?"品种ID/名称":"客户ID/名称")},model:{value:e.filterObj.customerKeyword,callback:function(t){e.$set(e.filterObj,"customerKeyword",t)},expression:"filterObj.customerKeyword"}}),a("van-field",{attrs:{label:"排序类型","input-align":"right",placeholder:"点击选择排序类型",readonly:""},on:{click:function(t){e.orderTypeFlag=!0}},model:{value:e.filterObj.orderTypeName,callback:function(t){e.$set(e.filterObj,"orderTypeName",t)},expression:"filterObj.orderTypeName"}}),a("div",{staticClass:"dropdown-opts"},[a("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",size:"small",block:"",round:""},on:{click:e.reset}},[e._v("重置")]),a("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"info",size:"small",block:"",round:"",color:"#2271F5"},on:{click:e.filterSubmit}},[e._v("确认")])],1),a("van-action-sheet",{attrs:{actions:e.actionsList,"cancel-text":"取消","get-container":"body","close-on-click-action":""},on:{select:e.orderTypeSelect},model:{value:e.orderTypeFlag,callback:function(t){e.orderTypeFlag=t},expression:"orderTypeFlag"}})],1)},i=[],o=a("d4ec"),r=a("bee2"),n=a("262e"),l=a("2caf"),c=(a("b0c0"),a("9ab4")),u=a("1b40"),d=function(e){Object(n["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.orderTypeFlag=!1,e.filterObj={customerKeyword:"",orderType:"",orderTypeName:"销售额倒序"},e}return Object(r["a"])(a,[{key:"filterSubmit",value:function(){this.$emit("filterSubmit",this.filterObj)}},{key:"reset",value:function(){this.$emit("reset"),this.filterObj={customerKeyword:"",orderType:this.orderType,orderTypeName:"销售额倒序"}}},{key:"orderTypeSelect",value:function(e){this.filterObj.orderType=e.id,this.filterObj.orderTypeName=e.name}},{key:"mounted",value:function(){this.filterObj.orderType=this.orderType}}]),a}(u["d"]);Object(c["a"])([Object(u["c"])()],d.prototype,"actionsList",void 0),Object(c["a"])([Object(u["c"])()],d.prototype,"orderType",void 0),Object(c["a"])([Object(u["c"])()],d.prototype,"keyValue",void 0),d=Object(c["a"])([Object(u["a"])({})],d);var f=d,m=f,b=(a("2202"),a("2877")),p=Object(b["a"])(m,s,i,!1,null,"2bb2fe1a",null);t["a"]=p.exports},8454:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-sticky",[a("div",{staticClass:"header pt-10 white-bg"},[a("div",{staticClass:"px-10"},[a("div",{class:["pa-10 common-filter",e.filterShow?"color-main-2":"",e.filterActive?"common-filter--active":""],on:{click:function(t){e.filterShow=!e.filterShow}}},[a("div",[e._v("条件筛选")]),a("van-icon",{attrs:{name:"arrow-"+(e.filterShow?"up":"down"),size:"16px"}})],1)]),a("div",{staticClass:"font-14 pa-10 fontWeight"},[a("span",{staticClass:"pr-1"},[e._v(e._s(e.entryObj.name))]),e._v("销售额波动（客户维度）"+e._s(e.$route.query.date)+" ")]),a("van-tabs",{attrs:{color:"#2271F5"},on:{click:e.tabTypeClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}},e._l(e.tabList,(function(e){return a("van-tab",{key:e,attrs:{title:e}})})),1)],1)]),a("div",{attrs:{id:"filterContainer"}},[e.zdCustomerLoading?e._e():a("div",{staticClass:"py-2 px-3 background-color-white"},[a("div",{staticClass:"numberWarp px-3 py-2 d-flex"},[a("ul",{staticClass:"flex-2"},[a("li",{staticClass:"color-gray-4"},[e._v(e._s(0===e.tabType?"重点":"全部")+"客户同比")]),a("li",{staticClass:"borderRight py-2"},[a("icon-Svg",{attrs:{size:"large",name:e.getName(e.zdCustomerObj.periodComparePercent)}}),a("span",{staticClass:"font-21",class:e.getColor(e.zdCustomerObj.periodComparePercent)},[e._v(e._s(Math.abs(e.zdCustomerObj.periodComparePercent))+"%")])],1)]),a("ul",{staticClass:"flex-2 pl-2"},[a("li",{staticClass:"color-gray-4"},[e._v("同比(万元)")]),a("li",{staticClass:"font-21 borderRight py-2 pr-2",class:e.getColor(e.zdCustomerObj.periodCompareNetIncrease)},[e._v(" "+e._s(e.zdCustomerObj.periodCompareNetIncrease)+" ")])]),a("ul",{staticClass:"flex-3 pl-2"},[a("li",{staticClass:"color-gray-4"},[e._v("下降客户数/"+e._s(0===e.tabType?"重点":"全")+"客户数")]),a("li",{staticClass:"py-2"},[a("span",{staticClass:"color-red font-21"},[e._v(e._s((e.zdCustomerObj.salesDeclineNum||0===e.zdCustomerObj.salesDeclineNum)&&"--"!=e.zdCustomerObj.salesDeclineNum?Math.abs(e.zdCustomerObj.salesDeclineNum).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"--"))]),a("span",{staticClass:"font-18"},[e._v("/")]),a("span",{staticClass:"font-14"},[e._v(e._s("--"!=e.zdCustomerObj.salesTotalNum?e.zdCustomerObj.salesTotalNum.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"--"))])])])])]),e.entryObj.id?a("van-pull-refresh",{staticClass:"pb-100",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{offset:20,finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e.loading||e.dataList.length?e._e():a("app-empty",{staticClass:"mt-6 white-bg"}),e._l(e.dataList,(function(t,s){return a("customerCard",{key:"customer"+s,attrs:{yearMounthValue:e.yearMounthValue,customObj:t},nativeOn:{click:function(a){return e.customerCardClick(t)}}})}))],2)],1):e._e()],1),a("div",{staticClass:"commonOpButton-footer"},[a("ul",{staticClass:"d-flex"},[a("li",{staticClass:"flex-1",class:0===e.yearMounthValue?"active":"",on:{click:function(t){return e.yearMounthTab(0)}}},[e._v("月")]),a("li",{staticClass:"flex-1",class:1===e.yearMounthValue?"active":"",on:{click:function(t){return e.yearMounthTab(1)}}},[e._v("年")])])]),a("van-popup",{attrs:{position:"top","get-container":"#filterContainer"},model:{value:e.filterShow,callback:function(t){e.filterShow=t},expression:"filterShow"}},[a("customer-filter-pop",{key:"customerPop",attrs:{orderType:"salesAmount-0",actionsList:[{name:"销售额正序",id:"salesAmount-1"},{name:"销售额倒序",id:"salesAmount-0"},{name:"同比正序",id:"periodComparePercent-1"},{name:"同比倒序",id:"periodComparePercent-0"}]},on:{filterSubmit:e.filterSubmit,reset:e.filterReset}})],1)],1)},i=[],o=a("5530"),r=a("d4ec"),n=a("bee2"),l=a("262e"),c=a("2caf"),u=(a("ac1f"),a("5319"),a("1276"),a("d81d"),a("99af"),a("b0c0"),a("9ab4")),d=a("1b40"),f=a("437a"),m=a("53ae"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customCard px-4 py-2"},[a("div",{staticClass:"color-gray-5 fontWight-500 font-16 d-flex align-center justify-space-between"},[a("span",[e._v(e._s(e.customObj.objId)+"/"+e._s(e.customObj.objName))]),a("van-icon",{attrs:{name:"arrow",size:"16px"}})],1),a("div",{staticClass:"d-flex pt-2"},[a("ul",{staticClass:"flex-3 d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v(e._s(0===e.yearMounthValue?"月":"年")+"销售额(万元)")]),a("li",{staticClass:"numberValue fontWight-500 color-gray-5 font-16"},[e._v(e._s(e.customObj.salesAmount))])]),a("ul",{staticClass:"flex-2 d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v(e._s(0===e.yearMounthValue?"月":"年")+"同比")]),a("li",{staticClass:"numberValue fontWight-500 color-main-2 font-16",class:e.getColor(e.customObj.periodComparePercent)},[e._v(" "+e._s(e.customObj.periodComparePercent>0?"+":"")+e._s(e.customObj.periodComparePercent)+"% ")])]),1===e.yearMounthValue?a("ul",{staticClass:"flex-2 d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v("年贡献率")]),a("li",{staticClass:"numberValue fontWight-500 color-main-2 font-16"},[e._v(e._s(e.customObj.salesAmountRatio)+"%")])]):e._e(),0===e.yearMounthValue?a("ul",{staticClass:"flex-2 d-flex justify-end"},[a("div",{staticClass:"d-flex flex-column",staticStyle:{width:"fit-content"}},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v("月贡献率")]),a("li",{staticClass:"numberValue fontWight-500 color-main-2 font-16"},[e._v(e._s(e.customObj.salesAmountRatio)+"%")])])]):e._e()]),0===e.yearMounthValue?a("div",{staticClass:"d-flex pt-2"},[0===e.yearMounthValue?a("ul",{staticClass:"flex-3 d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v("月环比")]),a("li",{staticClass:"numberValue fontWight-500 font-16",class:e.getColor(e.customObj.monthComparePercent)},[e._v(" "+e._s(e.customObj.monthComparePercent>0?"+":"")+e._s(e.customObj.monthComparePercent)+"% ")])]):e._e(),a("ul",{staticClass:"flex-2 d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v("近30天拜访")]),a("li",{staticClass:"numberValue fontWight-500 font-16"},[e._v(" "+e._s(e.customObj.visitNum)+" ")])]),a("ul",{staticClass:"flex-2"})]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.lineShow,expression:"lineShow"}],staticClass:"line mt-4"})])},p=[],h=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(n["a"])(a,[{key:"getColor",get:function(){return function(e){if(e){var t=String(e).replace(",","");return+t>0?"color-normal":"color-never"}}}}]),a}(d["d"]);Object(u["a"])([Object(d["c"])()],h.prototype,"customObj",void 0),Object(u["a"])([Object(d["c"])()],h.prototype,"lineShow",void 0),Object(u["a"])([Object(d["c"])()],h.prototype,"yearMounthValue",void 0),h=Object(u["a"])([Object(d["a"])({})],h);var y=h,v=y,j=(a("04fd"),a("2877")),O=Object(j["a"])(v,b,p,!1,null,"9dd9806a",null),C=O.exports,g=a("6b49"),_=a("2279"),T=a("5b92"),k=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.zdCustomerLoading=!1,e.zdCustomerObj={},e.filterObj={customerKeyword:"",orderType:"",orderTypeName:""},e.entryObj={},e.tabList=["重点客户","全客户"],e.yearMounthValue=1,e}return Object(n["a"])(a,[{key:"getColor",get:function(){return function(e){if(e){var t=String(e).replace(",","");return+t>0?"color-normal":"color-never"}}}},{key:"getName",get:function(){return function(e){if(e){var t=e.replace(",","");return t>0?"ytcrm-greenArrow":"ytcrm-redArrow"}}}},{key:"yearMounthTab",value:function(e){this.yearMounthValue=e,this.onRefresh()}},{key:"tabTypeClick",value:function(e){this.tabType=e,this._getDeptKeyCustomerSalesStat(),this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.dataList=[],this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,this._getDeptKeyCustomerSalesList()}},{key:"_getDeptKeyCustomerSalesList",value:function(){var e,t,a=this;Object(_["i"])({customerKeyword:this.filterObj.customerKeyword,selectDate:this.entryObj.date,deptId:this.entryObj.id,timeDimFlag:this.yearMounthValue,orderColumn:(null===(e=this.filterObj.orderType)||void 0===e?void 0:e.split("-")[0])||"salesAmount",orderType:(null===(t=this.filterObj.orderType)||void 0===t?void 0:t.split("-")[1])||"0",pageNum:this.page,tabType:this.tabType,pageSize:8,hideLoading:!0}).then((function(e){var t=e.data.list.map((function(e){return{objId:e.customerId,objName:e.customerName,salesAmount:Object(T["d"])(e.salesAmount,1),periodComparePercent:Object(T["d"])(e.periodComparePercent,2),periodCompareNetIncrease:Object(T["d"])(e.periodCompareNetIncrease,1),salesAmountRatio:Object(T["d"])(e.salesAmountRatio,2),monthComparePercent:Object(T["d"])(e.monthComparePercent,2),visitNum:e.visitNum}}));a.dataList=a.dataList.concat(t),e.data.hasNextPage?a.page++:a.finished=!0,a.loading=!1}))}},{key:"filterSubmit",value:function(e){this.filterObj=Object(o["a"])({},e),this.filterObj.customerKeyword||this.filterObj.orderTypeName?this.filterActive=!0:this.filterActive=!1,this.filterShow=!1,this.onRefresh()}},{key:"filterReset",value:function(){this.filterObj.customerKeyword="",this.filterObj.orderTypeName="",this.filterObj.orderType="",this.filterActive=!1,this.filterShow=!1,this.onRefresh()}},{key:"customerCardClick",value:function(e){this.$router.push({name:"salesLineCustomerSalesPage",query:{customerId:e.objId,customerName:e.objName,id:this.entryObj.id,name:this.entryObj.name}})}},{key:"_getDeptKeyCustomerSalesStat",value:function(){var e=this;this.zdCustomerLoading=!0,Object(_["j"])({deptId:this.entryObj.id,selectDate:this.$route.query.date,tabType:this.tabType,timeDimFlag:1}).then((function(t){e.zdCustomerLoading=!1,e.zdCustomerObj={number:t.data.increaseSaleGoodsNum||"--",salesAmount:Object(T["d"])(t.data.salesAmount,1),onSalesAmount:Object(T["d"])(t.data.onSalesAmount,1),periodComparePercent:Object(T["d"])(t.data.periodComparePercent,2),periodCompareNetIncrease:Object(T["d"])(t.data.periodCompareNetIncrease,1),salesDeclineNum:t.data.salesDeclineNum||"--",salesTotalNum:t.data.salesTotalNum||"--"}}))}},{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"salesLineHighRise0"!==t.name&&"salesLineHighRise0Inner"!==t.name&&"salesLineHighRise1"!==t.name&&"salesLineHighRise1Inner"!==t.name&&"salesLineMiddleRise2"!==t.name&&"salesLineMiddleRise2Inner"!==t.name&&"salesLineMiddleRise3"!==t.name&&"salesLineMiddleRise3Inner"!==t.name&&"salesLineMiddleRise4Inner"!==t.name||(e.tabType=0,e.entryObj={id:e.$route.query.id,name:e.$route.query.name,date:e.$route.query.date},e.onRefresh(),e._getDeptKeyCustomerSalesStat())}))}},{key:"activated",value:function(){this.entryObj={id:this.$route.query.id,name:this.$route.query.name,date:this.$route.query.date}}},{key:"created",value:function(){this.filterActive=!0,this.entryObj={id:this.$route.query.id,name:this.$route.query.name,date:this.$route.query.date},this._getDeptKeyCustomerSalesStat()}}]),a}(Object(d["b"])(f["a"],m["a"]));k=Object(u["a"])([Object(d["a"])({components:{customerCard:C,customerFilterPop:g["a"]}})],k);var x=k,w=x,S=(a("1f3f"),Object(j["a"])(w,s,i,!1,null,"04c1ea3a",null));t["default"]=S.exports},"93a1":function(e,t,a){},d2a0:function(e,t,a){}}]);