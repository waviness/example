(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ae9bf48"],{"291f":function(t,e,a){"use strict";a("d3fd")},"88ca":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-addgr"},[a("div",{staticClass:"font-14 inner-block"},[t._v("拜访层级"+t._s(t.data.cupId?"编辑":"新增"))]),a("van-form",{attrs:{"validate-first":""},on:{failed:t.onFailed}},[a("van-field",{attrs:{disabled:!!t.data.cupId,clearable:"",required:"",label:"人员信息","input-align":"right",placeholder:"请输入人员信息",rules:[{validator:t.validator,message:"请输入人员信息"}]},on:{click:t.choosePerson},model:{value:t.data.personName,callback:function(e){t.$set(t.data,"personName",e)},expression:"data.personName"}}),a("van-field",{staticClass:"mt-3",attrs:{disabled:"",clearable:"",required:"",label:"职位","input-align":"right",placeholder:"人员职位",rules:[{validator:t.validator,message:"请选择职位"}]},model:{value:t.data.position,callback:function(e){t.$set(t.data,"position",e)},expression:"data.position"}}),a("van-field",{staticClass:"mt-3",attrs:{clearable:"",required:"",label:"进度","input-align":"right",placeholder:"请输入进度",rules:[{validator:t.validator,message:"请输入进度"}]},model:{value:t.data.content,callback:function(e){t.$set(t.data,"content",e)},expression:"data.content"}}),a("van-field",{staticClass:"mt-3",attrs:{disabled:"",clearable:"",required:"",label:"事件类型","input-align":"right",placeholder:"事件类型"},model:{value:t.data.topicDetailVO.smallTagName,callback:function(e){t.$set(t.data.topicDetailVO,"smallTagName",e)},expression:"data.topicDetailVO.smallTagName"}}),a("van-field",{staticClass:"mt-3",attrs:{disabled:"",clearable:"",required:"",label:"时间","input-align":"right",placeholder:"事件时间"},model:{value:t.data.topicDetailVO.visitTime,callback:function(e){t.$set(t.data.topicDetailVO,"visitTime",e)},expression:"data.topicDetailVO.visitTime"}}),a("van-field",{staticClass:"mt-3",attrs:{disabled:"",clearable:"",required:"",label:"备注","input-align":"right",type:"textarea",placeholder:"事件备注"},model:{value:t.data.topicDetailVO.remark,callback:function(e){t.$set(t.data.topicDetailVO,"remark",e)},expression:"data.topicDetailVO.remark"}})],1),a("div",{staticClass:"footer d-flex justify-center"},[a("submit-btn",{staticClass:"mr-3",attrs:{title:"取消",type:"cancel"},on:{click:t.goBack}}),a("submit-btn",{attrs:{loading:t.submitLoading,title:"提交"},on:{click:t.submit}})],1),a("full-pop",{directives:[{name:"show",rawName:"v-show",value:t.personPopShow,expression:"personPopShow"}],attrs:{placeholder:t.placeholder,loading:t.personLoading,list:t.personList,keyProp:"userId",valueProp:"userName",descProp:"position"},on:{cancel:function(e){t.personPopShow=!1},input:t.getPersonList,select:t.onSelectPerson}})],1)},i=[],n=a("1da1"),r=a("d4ec"),o=a("bee2"),c=a("262e"),l=a("2caf"),d=(a("96cf"),a("9ab4")),u=a("1b40"),p=a("4bb5"),h=a("74d2"),m=Object(p["a"])("app"),b=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.placeholder="请输入人员ID|名称",t.personPopShow=!1,t.personLoading=!1,t.personList=[],t.custName="",t.data={cupId:"",personId:"",personName:"",position:"",content:"",topicDetailVO:{}},t.custId="",t.ccuId="",t.curDept={},t.submitLoading=!1,t}return Object(o["a"])(a,[{key:"choosePerson",value:function(){this.data.cupId||(this.personPopShow=!0)}},{key:"onSelectPerson",value:function(t){this.data.personId=t.userId,this.data.personName=t.userName,this.data.position=t.position,this.personPopShow=!1}},{key:"getPersonList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.personList=[],""===e){t.next=7;break}return this.personLoading=!0,t.next=5,Object(h["F"])({custId:this.custId,saleId:this.curDept.userId,person:e});case 5:a=t.sent,a.success&&(this.personLoading=!1,this.personList=a.data);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onSelectGoods",value:function(t){this.data.personId=t.userId,this.data.personName=t.userName,this.data.position=t.position,this.personPopShow=!1}},{key:"onFailed",value:function(t){}},{key:"validator",value:function(t){}},{key:"submit",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.data.personId){t.next=3;break}return this.$toast("人员信息不能为空"),t.abrupt("return");case 3:if(this.data.content){t.next=6;break}return this.$toast("进度不能为空"),t.abrupt("return");case 6:if(e={ccuId:this.ccuId,deptId:this.curDept.deptId,deptName:this.curDept.deptName,saleId:this.curDept.userId,saleName:this.curDept.userName,cupId:this.data.cupId,content:this.data.content,position:this.data.position,personId:this.data.personId,personName:this.data.personName},this.submitLoading=!0,!this.data.cupId){t.next=14;break}return t.next=11,Object(h["q"])(e);case 11:t.t0=t.sent,t.next=17;break;case 14:return t.next=16,Object(h["c"])(e);case 16:t.t0=t.sent;case 17:a=t.t0,a.success&&(this.SET_HADDONEONDETAIL(!0),this.$toast.success(a.msg||(this.data.cupId?"添加成功":"修改成功")),setTimeout((function(){s.submitLoading=!1,s.goBack()}),1e3));case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"goBack",value:function(){this.$router.back()}},{key:"mounted",value:function(){this.custId=this.$route.params.custId,this.ccuId=this.$route.params.ccuId,this.curDept=this.$route.params.curDept;var t=this.$route.params.item;t&&t.cupId&&(this.data=this.$route.params.item)}}]),a}(u["d"]);Object(d["a"])([m.Mutation],b.prototype,"SET_HADDONEONDETAIL",void 0),b=Object(d["a"])([Object(u["a"])({})],b);var f=b,v=f,g=(a("291f"),a("2877")),k=Object(g["a"])(v,s,i,!1,null,"29afd697",null);e["default"]=k.exports},d3fd:function(t,e,a){}}]);