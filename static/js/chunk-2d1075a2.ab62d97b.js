(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d1075a2"],{"39bf":function(t,a,e){},4728:function(t,a,e){"use strict";e("39bf")},"6a26":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"cabin",staticClass:"cabin"},[e("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{click:t.toSearch}}),e("div",{staticClass:"cabin-div"},[e("div",{staticClass:"cabin-item"},[e("div",{staticClass:"cabin-item__title"},[t._v("当前已收到客情日志")]),e("div",{staticClass:"cabin-item__content"},[e("div",{staticClass:"cabin-item__num"},[t._v(t._s(t.dataInfo.custViewCount))]),e("div",{},[t._v("条")])])]),e("div",{staticClass:"cabin-item"},[e("div",{staticClass:"cabin-item__title"},[t._v("涉及用户单位")]),e("div",{staticClass:"cabin-item__content"},[e("div",{staticClass:"cabin-item__num"},[t._v(t._s(t.dataInfo.custCount))]),e("div",{},[t._v("家")])])]),e("div",{staticClass:"cabin-item"},[e("div",{staticClass:"cabin-item__title"},[t._v("涉及客户(去重)")]),e("div",{staticClass:"cabin-item__content"},[e("div",{staticClass:"cabin-item__num"},[t._v(t._s(t.dataInfo.personCount))]),e("div",{},[t._v("人")])])])]),e("div",{staticClass:"cabin-div"},[e("div",{staticClass:"cabin-item"},[e("div",{staticClass:"cabin-item__title"},[t._v("已激活单位")]),e("div",{staticClass:"cabin-item__content"},[e("div",{staticClass:"cabin-item__num cabin-item__num--orange"},[t._v(t._s(t.dataInfo.actCust))]),e("div",{},[t._v("家")])])]),e("div",{staticClass:"cabin-item"},[e("div",{staticClass:"cabin-item__title"},[t._v("已激活单位⼈员")]),e("div",{staticClass:"cabin-item__content"},[e("div",{staticClass:"cabin-item__num cabin-item__num--orange"},[t._v(t._s(t.dataInfo.actPerson))]),e("div",{},[t._v("人")])])]),e("div",{staticClass:"cabin-item moreButton",on:{click:t.toGlobal}},[e("app-icon",{attrs:{name:"#ytcrm-a-gengduoshezhicaidan"}}),e("span",{staticClass:"cabin-more"},[t._v("更多")])],1),e("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.dataLoading,expression:"dataLoading"}],staticClass:"block-loading2",attrs:{type:"spinner",color:"#1989fa"}})],1),e("div",{staticClass:"cabin-title cabin-title-bg"},[e("div",{staticClass:"cabin-title__label"},[t._v("本周话题")]),t.dataInfo.topicRankList&&t.dataInfo.topicRankList.length>0?e("van-notice-bar",{staticClass:"cabin-title__inner",attrs:{color:"#4D6080",background:"#F5F6F9",scrollable:!1}},[e("van-swipe",{staticClass:"notice-swipe",attrs:{vertical:"",autoplay:3e3,"show-indicators":!1}},t._l(t.dataInfo.topicRankList,(function(a,i){return e("van-swipe-item",{key:i},[t._v(t._s(a.smallTagName)+" "+t._s(a.num)+" 条")])})),1)],1):e("div",{staticClass:"cabin-title__No"},[t._v("暂无话题")])],1),e("div",{staticClass:"entry-pic-wrapper"},[e("div",{ref:"cabinChart",staticClass:"cabin__chart"}),e("div",{staticClass:"entry-pic-tabs"},[e("div",{class:["entry-pic-tabs__item",1===t.timeType?"entry-pic-tabs__item--active":""],on:{click:function(a){return t.changeRate(1)}}},[t._v(" 单月 ")]),e("div",{class:["entry-pic-tabs__item",2===t.timeType?"entry-pic-tabs__item--active":""],on:{click:function(a){return t.changeRate(2)}}},[t._v(" 累计 ")])]),e("div",{staticClass:"list-board",on:{click:t.toRank}},[e("van-icon",{staticClass:"list-board__arrow",attrs:{name:"down"}}),e("div",{staticClass:"list-board__name"},[t._v("增速榜单")])],1),e("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.rateLoading,expression:"rateLoading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}})],1),e("div",{staticClass:"cabin-title"},[t._m(0),e("div",{staticClass:"cabin-title__right",on:{click:t.changeFlag}})]),e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(a){t.refreshing=a},expression:"refreshing"}},[e("van-list",{staticClass:"pb-100",attrs:{offset:20,finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(a){t.error=a},load:t.getDataList},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.dataList,(function(a,i){return e("cust-item",{key:i,attrs:{data:a},on:{toDetail:t.toCustDetail}})})),1)],1),e("div",{staticClass:"go-top",on:{click:t.goTop}},[e("van-icon",{attrs:{name:"arrow-up"}})],1),e("div",{staticClass:"go-more",on:{click:t.toCustList}},[t._v(" 更多 ")])],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cabin-title__left"},[e("div",{staticClass:"cabin-title__name"},[t._v("最新客情")]),e("div",{staticClass:"cabin-title__line"})])}],n=e("2909"),r=e("1da1"),c=e("d4ec"),o=e("bee2"),l=e("262e"),u=e("2caf"),d=(e("d3b7"),e("159b"),e("a434"),e("99af"),e("b0c0"),e("b680"),e("96cf"),e("9ab4")),v=e("1b40"),p=e("313e"),f=e("93bd"),h=e("d926"),_=e("74d2"),g=function(t){Object(l["a"])(e,t);var a=Object(u["a"])(e);function e(){var t;return Object(c["a"])(this,e),t=a.apply(this,arguments),t.dataLoading=!1,t.rateLoading=!1,t.timeType=1,t.dataInfo={xaxisData:[],seriesData:[]},t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.error=!1,t.page=1,t.pageSize=10,t.viewStarFlag=0,t.startTime=Object(h["c"])(new Date)+" 00:00:00",t.endTime=Object(h["c"])(new Date)+" 23:59:59",t.chartInstance=null,t.scrollTop="",t}return Object(o["a"])(e,[{key:"getDataInfo",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.dataLoading=!0,t.next=3,Object(_["z"])({deptId:163});case 3:a=t.sent,this.dataLoading=!1,this.dataInfo=a.data;case 6:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}()},{key:"getHomeRate",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var a,e,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.rateLoading=!0,t.next=3,Object(_["H"])({time:this.timeType});case 3:a=t.sent,this.rateLoading=!1,e=[],i=[],s=[],a.data.forEach((function(t){"省级医疗机构"===t.type?t.type="省级":"市级医疗机构"===t.type?t.type="市级":"县级医疗机构"===t.type?t.type="县级":"基层医疗机构"===t.type?t.type="基层":"民营医疗机构"===t.type?t.type="民营":"连锁药店"===t.type?t.type="连锁":"单体药店"===t.type?t.type="药店":"对外商业调拨"===t.type&&(t.type="商业"),e.push(t.type),i.push(t.rate),s.push(0)})),this.dataInfo.xaxisData=e,this.dataInfo.seriesData=i,this.dataInfo.baseData=s,this.initChart();case 13:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}()},{key:"changeRate",value:function(t){this.timeType=t,this.getHomeRate()}},{key:"changeFlag",value:function(){this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.dataList=[],this.page=1,this.getDataList()}},{key:"getDataList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var a,e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(_["o"])({pageNum:this.page,pageSize:this.pageSize,viewStarFlag:this.viewStarFlag});case 3:a=t.sent,this.loading=!1,this.refreshing=!1,a.success?(e=a.data.list,e.forEach((function(t){t.crmLabelRemarkDtoList=t.crmLabelRemarkDtoList.splice(0,2)})),this.dataList=[].concat(Object(n["a"])(this.dataList),Object(n["a"])(e)),this.finished=!a.data.hasNextPage,this.page++):this.error=!0;case 7:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}()},{key:"initChart",value:function(){var t=this.$refs.cabinChart;this.chartInstance=p["b"](t),this.chartInstance.clear();var a={tooltip:{trigger:"axis",formatter:function(t){for(var a="",e=0;e<t.length;e++){var i=t[e],s=i.name,n=i.value,r=i.color;0===e&&(a+=s+"<br/>"),a+='<span style="    display: inline-block;margin-right: 4px;border-radius: 10px;width: 10px;height: 10px;background-color: '+r+'"></span>',a+="增长率："+n.toFixed(2)+"%"}return a}},legend:{data:["增长"]},grid:{top:"10%",left:"9%",right:"20%"},xAxis:{type:"category",data:this.dataInfo.xaxisData},yAxis:{type:"value"},series:[{data:this.dataInfo.seriesData,showBackground:!0,barWidth:8,itemStyle:{normal:{barBorderRadius:6}},markLine:{symbol:"none",data:[{silent:!1,lineStyle:{type:"solid",color:"#EE6666",width:2},label:{formatter:""},yAxis:100}]},type:"bar",backgroundStyle:{color:"rgba(220, 220, 220, 0.8)"}}]};this.chartInstance.setOption(a)}},{key:"goTop",value:function(){window.scrollTo(0,0),this.$refs.cabin.scrollTop=0}},{key:"toCustList",value:function(){this.$router.push({name:"CustList"})}},{key:"toCustDetail",value:function(t){this.scrollTop=this.$refs.cabin.scrollTop,this.$router.push({name:"CustDetail",params:t})}},{key:"toRank",value:function(){this.$router.push({name:"CabinRank"})}},{key:"toGlobal",value:function(){this.$router.push({name:"CabinGlobal"})}},{key:"toSearch",value:function(){this.$router.push({name:"CabinSearch"})}},{key:"mounted",value:function(){this.getDataInfo(),this.getHomeRate()}}]),e}(v["d"]);g=Object(d["a"])([Object(v["a"])({components:{CustItem:f["a"]},beforeRouteEnter:function(t,a,e){e((function(t){"CustDetail"===a.name&&t.$nextTick((function(){t.$refs.cabin.scrollTop=t.scrollTop}))}))}})],g);var b=g,m=b,w=(e("9496"),e("2877")),y=Object(w["a"])(m,i,s,!1,null,"71f48bdc",null);a["default"]=y.exports},"74f7":function(t,a,e){},"93bd":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:["wrapper van-clearfix",2===t.data.warmthNum?"border-orange":3===t.data.warmthNum?"border-red":"border-green"],on:{click:function(a){return t.toDetail(t.data)}}},[e("div",{staticClass:"wrapper-left"},[e("div",{staticClass:"wrapper-left__location"},[t._v(t._s(t.data.companyId)+"/"+t._s(t.data.companyName))]),e("div",{staticClass:"wrapper-left__group gray-text"},[e("span",{staticClass:"mr-10"},[t._v(t._s(t.data.visitUserName))]),e("span",[t._v(t._s(t.data.visitUserPosition))])]),t._l(t.data.crmLabelRemarkDtoList,(function(a,i){return e("div",{key:i,staticClass:"wrapper-info"},[e("span",{staticClass:"wrapper-info__title"},[t._v(t._s(a.labelName)),e("span",{directives:[{name:"show",rawName:"v-show",value:a.expectTimeStr,expression:"item.expectTimeStr"}],staticClass:"time"},[t._v("("+t._s(a.expectTimeStr)+")")]),t._v("：")]),e("span",{staticClass:"wrapper-info__content"},[t._v(t._s(a.remark))])])}))],2),e("div",{staticClass:"wrapper-right"},[e("div",{staticClass:"gray-text"},[t._v(t._s(t.data.credate?t.data.credate.slice(0,t.data.credate.length-3):""))]),e("van-icon",{staticClass:"arrow-right",style:"color: "+t.data.color,attrs:{name:"down"}}),2===t.data.taskType?e("div",{staticClass:"wrapper-visit wrapper-visit--bom gray-text"},[e("span",{staticClass:"wrapper-visit__title"},[t._v("拜访人")]),e("span",{staticClass:"wrapper-visit__name"},[t._v(t._s(t.data.creName))])]):t._e(),2===t.data.taskType?e("div",{staticClass:"wrapper-visit gray-text"},[e("span",{staticClass:"wrapper-visit__title"},[t._v("协访人")]),e("span",{staticClass:"wrapper-visit__name"},[t._v(t._s(t.data.togetherUserName))])]):1===t.data.taskType?e("div",{staticClass:"wrapper-visit gray-text"},[e("span",{staticClass:"wrapper-visit__title"},[t._v("个人拜访")]),e("span",{staticClass:"wrapper-visit__name"},[t._v(t._s(t.data.creName))])]):3===t.data.taskType?e("div",{staticClass:"wrapper-visit gray-text"},[e("span",{staticClass:"wrapper-visit__title"},[t._v("接待")]),e("span",{staticClass:"wrapper-visit__name"},[t._v(t._s(t.data.creName))])]):t._e()],1)])},s=[],n=e("d4ec"),r=e("bee2"),c=e("262e"),o=e("2caf"),l=e("9ab4"),u=e("1b40"),d=function(t){Object(c["a"])(e,t);var a=Object(o["a"])(e);function e(){return Object(n["a"])(this,e),a.apply(this,arguments)}return Object(r["a"])(e,[{key:"toDetail",value:function(t){this.$emit("toDetail",t)}}]),e}(u["d"]);Object(l["a"])([Object(u["c"])()],d.prototype,"data",void 0),d=Object(l["a"])([Object(u["a"])({})],d);var v=d,p=v,f=(e("4728"),e("2877")),h=Object(f["a"])(p,i,s,!1,null,"75c321c6",null);a["a"]=h.exports},9496:function(t,a,e){"use strict";e("74f7")},d926:function(t,a,e){"use strict";e.d(a,"c",(function(){return d})),e.d(a,"d",(function(){return v})),e.d(a,"j",(function(){return p})),e.d(a,"i",(function(){return f})),e.d(a,"k",(function(){return h})),e.d(a,"b",(function(){return _})),e.d(a,"e",(function(){return g})),e.d(a,"g",(function(){return b})),e.d(a,"f",(function(){return m})),e.d(a,"a",(function(){return w})),e.d(a,"h",(function(){return y}));e("d3b7"),e("25f0"),e("ac1f"),e("1276");var i=e("5a0c"),s=e.n(i),n=new Date,r=n.getDay(),c=n.getDate(),o=n.getMonth(),l=n.getYear();l+=l<2e3?1900:0;var u=new Date;function d(t){var a=new Date(t),e=a.getFullYear(),i=(a.getMonth()+1).toString(),s=a.getDate().toString();return+i<10&&(i="0"+i),+s<10&&(s="0"+s),e+"-"+i+"-"+s}function v(t){var a=new Date(t),e=a.getFullYear(),i=(a.getMonth()+1).toString(),s=a.getDate().toString();return+i<10&&(i="0"+i),+s<10&&(s="0"+s),e+"/"+i+"/"+s}function p(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(a){var e=new Date(a),i=e.getDay();i=0===i?7:i;var s=e.getDate(),n=e.getMonth(),u=e.getYear();u+=u<2e3?1900:0,t=new Date(u,n,s-(i-1))}else t=new Date(l,o,c-(r-1));return d(t)}function f(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(a){var e=new Date(a),i=e.getDay();i=0===i?7:i;var s=e.getDate(),n=e.getMonth(),u=e.getYear();u+=u<2e3?1900:0,t=new Date(u,n,s+(6-(i-1)))}else t=new Date(l,o,c+(6-(r-1)));return d(t)}function h(t){return 0===s()(t).day()?s()(t).startOf("week").subtract(6,"day").format("YYYY-MM-DD"):s()(t).startOf("week").add(1,"day").format("YYYY-MM-DD")}function _(t){return 0===s()(t).day()?s()(t).endOf("week").subtract(6,"day").format("YYYY-MM-DD"):s()(t).endOf("week").add(1,"day").format("YYYY-MM-DD")}u.setDate(1),u.setMonth(u.getMonth()-1);var g=function(t,a){var e=[],i=t.split("-"),s=a.split("-"),n=new Date(i+" 08:00:00");n.setUTCFullYear(i[0],i[1]-1,i[2]);var r=new Date(s+" 08:00:00");r.setUTCFullYear(s[0],s[1]-1,s[2]);var c,o=n.getTime(),l=r.getTime(),u=864e5;for(c=o;c<=l;)e.push(d(new Date(parseInt(String(c))))),c+=u;return e},b=function(t,a){var e=new Date(t),i="";e.setDate(e.getDate()+a);var s=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate();return i=s+"-"+n+"-"+r,i},m=function(t){var a,e,i,s,n=new Date(t+"-01-01"),r=n.getFullYear(),c={result0:[],result1:[],result2:[],result3:[],result4:[],result5:[],result6:[]};for(a=1;a<=12;a++){switch(a){case 1:case 3:case 5:case 7:case 8:case 10:case 12:s=31;break;case 4:case 6:case 9:case 11:s=30;break;case 2:s=r%4===0&&r%100!==0||r%400===0?29:28;break}for(e=1;e<=s;e++){n.setMonth(a-1,e),i=n.getDay();var o=n.getFullYear(),l=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,u=n.getDate()<10?"0"+n.getDate():n.getDate();c["result"+i].push(o+"-"+l+"-"+u)}}return c};function w(t){switch(t){case 0:return"日";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";default:break}}var y=function(t){var a=new Date,e=a.getFullYear(),i=a.getMonth()+1,s=a.getDate(),n=t.split("-"),r=0;if(i>parseInt(n[0])||i==parseInt(n[0])&&s>parseInt(n[1])){var c=new Date(e+1,parseInt(n[0])-1,parseInt(n[1])).toLocaleDateString(),o=Date.parse(c),l=Date.parse(a.toLocaleDateString());r=(o-l)/864e5}else{var u=new Date(e,parseInt(n[1])-1,parseInt(n[2])).toLocaleDateString(),d=Date.parse(u),v=Date.parse(a.toLocaleDateString());r=(d-v)/864e5}if(r<0){var p=e+1,f=p%4===0&&p%100!==0||p%400===0?366:365;r+=f}return r}}}]);