(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37bc97a0"],{1491:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return u}));var i=a("1da1"),s=(a("96cf"),a("b32d")),n=a("90ae"),r=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].post(n["c"],"/api/saleReturn/queryPm4User",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].formDataPost(n["c"],"/api/saleReturn/querySaleReturnList",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].formDataPost(n["c"],"/api/saleReturn/querySaleReturnDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].formDataPost(n["c"],"/api/saleReturn/submitSaleReturn",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},2599:function(t,e,a){"use strict";a("4e06")},3355:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-space-between align-baseline"},[a("div",{staticClass:"color-gray-4",style:"width: "+t.titleWidth+"px"},[t._v(t._s(t.title))]),a("div",{staticClass:"flex-1 textAlignR"},[a("span",{class:t.contentClass},[t._v(t._s(t.content))]),t.hasCopy?a("app-icon",{staticClass:"color-main-2 ml-1 copy-content",attrs:{name:"#ytcrm-fuzhi","data-clipboard-text":t.content},on:{click:t.copy}}):t._e()],1),t._t("default")],2)},s=[],n=a("d4ec"),r=a("bee2"),c=a("262e"),l=a("2caf"),u=(a("a9e3"),a("9ab4")),o=a("1b40"),p=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a,[{key:"copy",value:function(){var t=this,e=new this.$Clipboard(".copy-content");e.on("success",(function(a){t.$toast.success("复制成功"),e.destroy()})),e.on("error",(function(a){t.$toast.fail("该浏览器不支持自动复制"),e.destroy()}))}}]),a}(o["d"]);Object(u["a"])([Object(o["c"])({type:String,default:""})],p.prototype,"title",void 0),Object(u["a"])([Object(o["c"])({type:[String,Number],default:""})],p.prototype,"content",void 0),Object(u["a"])([Object(o["c"])({type:String,default:"color-black-2"})],p.prototype,"contentClass",void 0),Object(u["a"])([Object(o["c"])({type:Number,default:80})],p.prototype,"titleWidth",void 0),Object(u["a"])([Object(o["c"])({type:Boolean,default:!1})],p.prototype,"hasCopy",void 0),p=Object(u["a"])([Object(o["a"])({})],p);var d=p,b=d,f=a("2877"),O=Object(f["a"])(b,i,s,!1,null,null,null);e["a"]=O.exports},"4e06":function(t,e,a){},f411:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-sticky",[a("div",{staticClass:"pa-2 background-color-white"},[a("div",{staticClass:"tag-primary-plain"},[t._v(t._s(t.saleReturnDetailObj.entryId)+"/"+t._s(t.saleReturnDetailObj.entryName))]),a("info-item",{staticClass:"mt-2",attrs:{title:"收货总单ID",content:t.saleReturnDetailObj.redocId}}),a("info-item",{staticClass:"mt-2",attrs:{title:"销退申请总单ID",titleWidth:140,content:t.saleReturnDetailObj.fetchId}}),a("info-item",{staticClass:"mt-2",attrs:{title:"客户",content:t.saleReturnDetailObj.custId+"/"+t.saleReturnDetailObj.custName}}),a("info-item",{staticClass:"mt-2",attrs:{title:"分支机构",content:t.saleReturnDetailObj.contactId?t.saleReturnDetailObj.contactId+"/"+t.saleReturnDetailObj.contactName:"--"}}),a("info-item",{staticClass:"mt-2",attrs:{title:"收货日期",content:t.saleReturnDetailObj.receiptDate}})],1)]),a("div",{staticClass:"pb-100"},[a("div",{staticClass:"cardList background-color-white"},[a("div",{staticClass:"cardList-detail"},[a("div",{staticClass:"tag-primary-plain"},[t._v(t._s(t.saleReturnDetailObj.goodsId)+"/"+t._s(t.saleReturnDetailObj.goodsName))]),a("info-item",{staticClass:"mt-2",attrs:{title:"规格",content:t.saleReturnDetailObj.goodsType}}),a("info-item",{staticClass:"mt-2",attrs:{title:"厂家",content:t.saleReturnDetailObj.factoryName}}),a("info-item",{staticClass:"mt-2",attrs:{title:"订单总数量",contentClass:"color-main-3",content:t.saleReturnDetailObj.oldGoodsQty}}),a("info-item",{staticClass:"mt-2",attrs:{title:"验收总数量",contentClass:"color-main-3",content:t.saleReturnDetailObj.rggoodsQty}}),a("info-item",{staticClass:"mt-2",attrs:{title:"批号",content:t.saleReturnDetailObj.lotNo}}),a("info-item",{staticClass:"mt-2",attrs:{title:"货品状态",contentClass:"color-normal",content:t.saleReturnDetailObj.goodsStatus}})],1),a("div",{staticClass:"cardList-button d-flex pb-2"},[2===t.saleReturnType?a("ul",{staticClass:"selectCard flex-1 d-flex align-center justify-space-between selectCard--active"},[a("li",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"pb-2"},[t._v("入库单价"),0!==t.saleReturnDetailObj.priceType?a("span",[t._v(" ("+t._s(1===t.saleReturnDetailObj.priceType?"收货单价":2===t.saleReturnDetailObj.priceType?"销售原单价":3===t.saleReturnDetailObj.priceType?"销售折后单价":"")+") ")]):t._e()]),a("span",{staticClass:"pb-2"},[t._v(t._s(t.saleReturnDetailObj.realPrice))])])]):t._l(t.priceList,(function(e,i){return a("ul",{key:"selectCard"+i,staticClass:"selectCard flex-1 d-flex align-center justify-space-between",class:t.selectPriceObj.type===e.type?"selectCard--active":"",on:{click:function(a){return t.selectPriceClick(e)}}},[a("li",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"pb-2"},[t._v(t._s(e.label))]),t._v(" "),a("span",[t._v(t._s(e.value))])]),a("li",{directives:[{name:"show",rawName:"v-show",value:t.selectPriceObj.type===e.type,expression:"selectPriceObj.type === item.type"}]},[a("van-icon",{attrs:{name:"success"}})],1)])}))],2)])]),1===t.saleReturnType?a("div",{staticClass:"commonOpButton-footer mx-4",staticStyle:{width:"calc(100% - 32px)"}},[a("van-button",{staticClass:"flex-1",attrs:{round:"",type:"default"},on:{click:t.goBack}},[t._v(" 取消 ")]),a("van-button",{staticClass:"flex-1",attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:t.sureAddOrderClick}},[t._v(" 确定点单 ")])],1):t._e()],1)},s=[],n=a("1da1"),r=a("d4ec"),c=a("bee2"),l=a("262e"),u=a("2caf"),o=(a("99af"),a("96cf"),a("9ab4")),p=a("1b40"),d=a("3355"),b=a("1491"),f=a("4bb5"),O=Object(f["a"])("salesReturnOrder"),j=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.saleReturnType="",t.priceList=[],t.selectPriceObj="",t.saleReturnDetailObj={},t}return Object(c["a"])(a,[{key:"selectPriceClick",value:function(t){this.selectPriceObj&&""!==this.selectPriceObj.value&&+this.selectPriceObj.value===+t.value?this.selectPriceObj="":(this.selectPriceObj={},this.$set(this.selectPriceObj,"type",t.type),this.$set(this.selectPriceObj,"value",t.value),this.$set(this.selectPriceObj,"label",t.label))}},{key:"goBack",value:function(){this.$router.back()}},{key:"_querySaleReturnDetail",value:function(){var t=this;this.priceList=[],Object(b["b"])({redocId:this.$route.query.redocId,status:this.saleReturnType}).then((function(e){t.saleReturnDetailObj=e.data,e.data.rgunitPrice&&t.priceList.push({label:"收货单价",type:1,value:e.data.rgunitPrice}),e.data.oldunitPrice&&t.priceList.push({label:"销售原单单价",type:2,value:e.data.oldunitPrice}),e.data.aftdicPrc&&t.priceList.push({label:"销售单折后单价",type:3,value:e.data.aftdicPrc})}))}},{key:"sureAddOrderClick",value:function(){var t=this;if(this.selectPriceObj){var e="";this.saleReturnDetailObj.aftdicPrc&&1===this.selectPriceObj.type&&this.saleReturnDetailObj.aftdicPrc<this.saleReturnDetailObj.rgunitPrice&&(e="当前所选价格大于销售单折后单价 是否继续？"),this.saleReturnDetailObj.aftdicPrc&&2===this.selectPriceObj.type&&this.saleReturnDetailObj.aftdicPrc<this.saleReturnDetailObj.oldunitPrice&&(e="当前所选价格大于销售单折后单价 是否继续？"),e?this.$dialog.confirm({title:"提示",message:e,confirmButtonColor:"#2271F5"}).then(Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t._submitSaleReturn();case 1:case"end":return e.stop()}}),e)})))).catch((function(){})):this._submitSaleReturn()}else this.$toast.fail("请选择价格")}},{key:"_submitSaleReturn",value:function(){var t=this;this.$dialog.confirm({title:"",message:'<div class="font-16 fontWeight-500">是否确定以选择的价格 对已选择的进行销退点单操作</div><div class="textAlignL pt-2">'.concat(this.selectPriceObj.label,":").concat(this.selectPriceObj.value,"</div>"),confirmButtonColor:"#2271F5"}).then(Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(b["d"])({deptId:t.identityObj.deptId,entryId:t.saleReturnDetailObj.entryId,pm4Id:t.identityObj.userId,price:t.selectPriceObj.value,priceType:t.selectPriceObj.type,redocId:t.saleReturnDetailObj.redocId}).then((function(e){"200"===e.code&&(t.$toast.success(e.msg),t.SET_HASFLAG(!0),t.$router.back())}));case 1:case"end":return e.stop()}}),e)})))).catch((function(){}))}},{key:"mounted",value:function(){window.scrollTo(0,0),this.saleReturnType=+this.$route.query.status,this._querySaleReturnDetail()}}]),a}(p["d"]);Object(o["a"])([O.Mutation],j.prototype,"SET_HASFLAG",void 0),Object(o["a"])([O.Getter],j.prototype,"identityObj",void 0),j=Object(o["a"])([Object(p["a"])({components:{InfoItem:d["a"]}})],j);var y=j,m=y,v=(a("2599"),a("2877")),h=Object(v["a"])(m,i,s,!1,null,"dda92cb6",null);e["default"]=h.exports}}]);