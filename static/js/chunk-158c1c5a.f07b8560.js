(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-158c1c5a"],{"34d1":function(t,e,n){"use strict";n.d(e,"i",(function(){return o})),n.d(e,"h",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return y})),n.d(e,"m",(function(){return b})),n.d(e,"n",(function(){return w})),n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return D})),n.d(e,"d",(function(){return R})),n.d(e,"e",(function(){return G})),n.d(e,"f",(function(){return _}));var r=n("1da1"),a=(n("96cf"),n("b32d")),i=n("90ae");function o(t){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/queryPm4Sales",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function c(t){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/queryHospitalPolicyList",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function l(t){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/queryHospitalPolicyDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/querySupplierHospitalList",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function h(t){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/queryUnVBPGoods",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function y(t){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/queryVBPGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function b(t){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/queryVisitGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function w(t){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/queryVisitGoodsList",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function k(t){return S.apply(this,arguments)}function S(){return S=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/addHospitalPolicyDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function j(t){return P.apply(this,arguments)}function P(){return P=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/addUnVBPGoods",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),P.apply(this,arguments)}function D(t){return O.apply(this,arguments)}function O(){return O=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/addUnVBPGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),O.apply(this,arguments)}function R(t){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/addVBPGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),I.apply(this,arguments)}function G(t){return N.apply(this,arguments)}function N(){return N=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/addVisitGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),N.apply(this,arguments)}function _(t){return C.apply(this,arguments)}function C(){return C=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].formDataPost(i["c"],"/api/vbp/deleteUnVBPGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}},"7b50":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pb-100"},[n("div",{staticClass:"px-4 pt-2 color-gray-4 font-14"},[t._v("中选品种")]),t._l(t.selectedlist,(function(e,r){return n("van-cell-group",{key:r,staticClass:"mt-2"},[n("van-field",{attrs:{label:"品种名称",value:e.goodsName,readonly:"","input-align":"right"}}),n("van-field",{attrs:{label:"厂家",value:e.factoryName,readonly:"","input-align":"right"}}),n("van-field",{attrs:{label:"规格",value:e.goodsType,readonly:"","input-align":"righ t"}}),n("van-field",{attrs:{label:"年签约量",value:e.yearTarget,readonly:"","input-align":"right"}}),e.visitUseStatus?n("van-field",{attrs:{label:"中选品种完成情况",readonly:"","input-align":"right"},scopedSlots:t._u([{key:"input",fn:function(){return[1===e.bidGoods?n("span",{staticClass:"color-normal"},[t._v("能完成")]):t._e(),2===e.bidGoods?n("span",{staticClass:"color-red"},[t._v("不能完成")]):t._e()]},proxy:!0}],null,!0)}):n("van-field",{attrs:{label:"中选品种完成情况",value:e.bidGoodsName,placeholder:"点击选择中选完成情况","input-align":"right",readonly:""},on:{"click-input":function(n){return t.onClickFinish(e,r)}}}),n("van-field",{attrs:{label:"品种政策",value:e.goodsPolicyName,placeholder:"点击选择品种政策","input-align":"right",readonly:""},on:{"click-input":function(n){return t.onClickPolicy(e,r)}}}),n("van-field",{attrs:{label:"完成量",placeholder:"点击输入完成量",readonly:!!e.visitUseStatus,"input-align":"right"},model:{value:e.complete,callback:function(n){t.$set(e,"complete",n)},expression:"item.complete"}}),e.visitUseStatus?t._e():n("div",{staticClass:"d-flex justify-space-between mx-4 py-2"},[n("van-button",{staticClass:"flex-1",staticStyle:{height:"40px"},attrs:{round:"",color:"#2271F5"},on:{click:function(e){return t.submit(r)}}},[t._v("提交")])],1)],1)})),n("div",{staticClass:"px-4 pt-2 color-gray-4 font-14"},[t._v("非中选品种")]),t.notSelectedlist.length?n("div",t._l(t.notSelectedlist,(function(e,r){return n("van-cell-group",{key:r,staticClass:"mt-2"},[n("van-field",{attrs:{label:"品种名称",value:e.goodsName,readonly:"","input-align":"right"}}),n("van-field",{attrs:{label:"厂家",value:e.factoryName,readonly:"","input-align":"right"}}),n("van-field",{attrs:{label:"规格",value:e.goodsType,readonly:"","input-align":"right"}}),n("van-field",{attrs:{label:"计划量",value:e.yearTarget,readonly:"","input-align":"right"}}),n("van-field",{attrs:{label:"完成量",placeholder:"点击输入完成量",readonly:!!e.visitUseStatus,"input-align":"right"},model:{value:e.complete,callback:function(n){t.$set(e,"complete",n)},expression:"item.complete"}}),e.visitUseStatus?t._e():n("div",{staticClass:"d-flex justify-space-between mx-4 py-2"},[n("van-button",{staticClass:"flex-1",staticStyle:{height:"40px"},attrs:{round:"",color:"#2271F5"},on:{click:function(e){return t.submitNotSelect(r)}}},[t._v("提交")])],1)],1)})),1):n("app-empty",{staticClass:"background-color-white mt-2",staticStyle:{padding:"56px 0"},attrs:{description:"暂无数据"}}),n("van-action-sheet",{attrs:{actions:t.finishActions,"cancel-text":"取消",description:"中选品种完成情况","close-on-click-action":""},on:{select:t.onSelectFinsh},model:{value:t.finishShow,callback:function(e){t.finishShow=e},expression:"finishShow"}}),n("van-action-sheet",{attrs:{actions:t.policyActions,"cancel-text":"取消",description:"品种政策","close-on-click-action":""},on:{select:t.onSelectPolicy},model:{value:t.policyShow,callback:function(e){t.policyShow=e},expression:"policyShow"}})],2)},a=[],i=n("1da1"),o=n("d4ec"),s=n("bee2"),c=n("262e"),u=n("2caf"),l=(n("96cf"),n("d3b7"),n("159b"),n("b0c0"),n("7db0"),n("9ab4")),p=n("1b40"),d=n("4bb5"),f=n("bd70"),h=n("34d1"),m=Object(d["a"])("app"),y=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(o["a"])(this,n),t=e.apply(this,arguments),t.goodsName=t.$route.params.goodsName,t.loading=!1,t.selectedlist=[],t.notSelectedlist=[],t.finishShow=!1,t.finishActions=[{id:1,name:"能完成"},{id:2,name:"不能完成"}],t.policyShow=!1,t.policyActions=f["c"],t.curIndex=-1,t}return Object(s["a"])(n,[{key:"getDataList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customId:this.detailInfor.customId,pm4Id:this.salerInfor.userId,goodsName:this.goodsName,type:1},n={customId:this.detailInfor.customId,pm4Id:this.salerInfor.userId,goodsName:this.goodsName,type:0},this.loading=!0,t.next=5,Object(h["m"])(e);case 5:return r=t.sent,t.next=8,Object(h["m"])(n);case 8:a=t.sent,this.loading=!1,this.selectedlist=r.data,this.selectedlist.forEach((function(t){t.bidGoodsName=t.bidGoods?i.findNameById(t.bidGoods,i.finishActions):"",t.goodsPolicyName=t.goodsPolicy?i.findNameById(t.goodsPolicy,i.policyActions):""})),this.notSelectedlist=a.data;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"findNameById",value:function(t,e){return e.find((function(e){return e.id===t})).name}},{key:"onClickFinish",value:function(t,e){t.visitUseStatus||(this.finishShow=!0,this.curIndex=e)}},{key:"onSelectFinsh",value:function(t){this.finishShow=!1,this.$set(this.selectedlist[this.curIndex],"bidGoods",t.id),this.$set(this.selectedlist[this.curIndex],"bidGoodsName",t.name),this.$forceUpdate()}},{key:"onClickPolicy",value:function(t,e){t.visitUseStatus||(this.policyShow=!0,this.curIndex=e)}},{key:"onSelectPolicy",value:function(t){this.finishShow=!1,this.$set(this.selectedlist[this.curIndex],"goodsPolicy",t.id),this.$set(this.selectedlist[this.curIndex],"goodsPolicyName",t.name),this.$forceUpdate()}},{key:"submit",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.selectedlist[e].bidGoods){t.next=3;break}return this.$toast("请选择中选品种完成情况"),t.abrupt("return");case 3:if(this.selectedlist[e].goodsPolicy){t.next=6;break}return this.$toast("请选择品种政策"),t.abrupt("return");case 6:if(this.selectedlist[e].complete){t.next=9;break}return this.$toast("请填写完成量"),t.abrupt("return");case 9:n=this.selectedlist[e],r=n.svDtlId,a=n.bidGoods,i=n.goodsPolicy,o=n.complete,this._addVisitGoodsDetail({svDtlId:r,bidGoods:a,goodsPolicy:i,complete:o});case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"submitNotSelect",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.notSelectedlist[e].complete){t.next=3;break}return this.$toast("请填写完成量"),t.abrupt("return");case 3:n=this.notSelectedlist[e],r=n.svDtlId,a=n.bidGoods,i=n.goodsPolicy,o=n.complete,this._addVisitGoodsDetail({svDtlId:r,bidGoods:a,goodsPolicy:i,complete:o});case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_addVisitGoodsDetail",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["e"])(e);case 2:n=t.sent,n.success?(this.$toast.success("提交成功"),this.SET_HADDONEONDETAIL(!0),this.getDataList()):this.$toast.fail(n.msg||"提交失败");case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){this.getDataList()}}]),n}(p["d"]);Object(l["a"])([m.Mutation],y.prototype,"SET_HADDONEONDETAIL",void 0),Object(l["a"])([m.Getter],y.prototype,"detailInfor",void 0),Object(l["a"])([m.Getter],y.prototype,"salerInfor",void 0),y=Object(l["a"])([Object(p["a"])({})],y);var v=y,b=v,g=(n("d319"),n("2877")),w=Object(g["a"])(b,r,a,!1,null,"031b131f",null);e["default"]=w.exports},"86fc":function(t,e,n){},bd70:function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"h",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return p}));n("b0c0");for(var r=[{id:1,name:"30%-50%"},{id:2,name:"51%-70%"},{id:3,name:"71%-90%"},{id:4,name:"91%-100%"}],a=[{id:1,name:"按比例使用"},{id:2,name:"一刀切，达量后放开"},{id:3,name:"一刀切，达量后不放开"}],i=[{id:1,name:"书记"},{id:2,name:"分管院长"},{id:3,name:"药剂科主任"},{id:4,name:"药事会讨论"}],o=[{id:1,name:"限门诊"},{id:2,name:"限病区"},{id:3,name:"限老干部特定人员使用"},{id:4,name:"限主任处方"}],s=[{id:1,name:"年度调整"},{id:2,name:"季度调整"},{id:3,name:"月度调整"}],c=[{id:1,name:"限控"},{id:2,name:"—刀切"},{id:3,name:"中选和非中选共存"}],u=[{value:0,name:"缺货",icon:"#ytcrm-qh"},{value:2,name:"价格限销",icon:"#ytcrm-jgxx"},{value:3,name:"库存下限",icon:"#ytcrm-kcxx"},{value:4,name:"两票制",icon:"#ytcrm-lpz"},{value:5,name:"紧俏药品",icon:"#ytcrm-jqyp"},{value:6,name:"禁限销",icon:"#ytcrm-jxx"},{value:7,name:"库存状态",icon:"#ytcrm-kczt"},{value:8,name:"近效期",icon:"#ytcrm-jxq"}],l=[],p=[],d=0;d<u.length;d++){var f=u[d];l.push({icon:f.icon+"-yw",path:"/lockList?role=1&conType=".concat(f.value),pmsName:f.name,pmsId:437,type:f.value,role:1,ingShowFlag:!1}),7!==f.value&&8!==f.value&&p.push({icon:f.icon+"-cg",path:"/lockList?role=2&conType=".concat(f.value),pmsName:f.name,pmsId:445,role:2,type:f.value,ingShowFlag:!1})}},d319:function(t,e,n){"use strict";n("86fc")}}]);