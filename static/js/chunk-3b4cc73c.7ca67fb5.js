(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b4cc73c"],{1491:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"b",(function(){return c})),i.d(e,"d",(function(){return l}));var a=i("1da1"),n=(i("96cf"),i("b32d")),r=i("90ae"),s=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].post(r["c"],"/api/saleReturn/queryPm4User",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].formDataPost(r["c"],"/api/saleReturn/querySaleReturnList",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].formDataPost(r["c"],"/api/saleReturn/querySaleReturnDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].formDataPost(r["c"],"/api/saleReturn/submitSaleReturn",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"1ef1":function(t,e,i){},3355:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex justify-space-between align-baseline"},[i("div",{staticClass:"color-gray-4",style:"width: "+t.titleWidth+"px"},[t._v(t._s(t.title))]),i("div",{staticClass:"flex-1 textAlignR"},[i("span",{class:t.contentClass},[t._v(t._s(t.content))]),t.hasCopy?i("app-icon",{staticClass:"color-main-2 ml-1 copy-content",attrs:{name:"#ytcrm-fuzhi","data-clipboard-text":t.content},on:{click:t.copy}}):t._e()],1),t._t("default")],2)},n=[],r=i("d4ec"),s=i("bee2"),o=i("262e"),c=i("2caf"),l=(i("a9e3"),i("9ab4")),u=i("1b40"),f=function(t){Object(o["a"])(i,t);var e=Object(c["a"])(i);function i(){return Object(r["a"])(this,i),e.apply(this,arguments)}return Object(s["a"])(i,[{key:"copy",value:function(){var t=this,e=new this.$Clipboard(".copy-content");e.on("success",(function(i){t.$toast.success("复制成功"),e.destroy()})),e.on("error",(function(i){t.$toast.fail("该浏览器不支持自动复制"),e.destroy()}))}}]),i}(u["d"]);Object(l["a"])([Object(u["c"])({type:String,default:""})],f.prototype,"title",void 0),Object(l["a"])([Object(u["c"])({type:[String,Number],default:""})],f.prototype,"content",void 0),Object(l["a"])([Object(u["c"])({type:String,default:"color-black-2"})],f.prototype,"contentClass",void 0),Object(l["a"])([Object(u["c"])({type:Number,default:80})],f.prototype,"titleWidth",void 0),Object(l["a"])([Object(u["c"])({type:Boolean,default:!1})],f.prototype,"hasCopy",void 0),f=Object(l["a"])([Object(u["a"])({})],f);var d=f,b=d,p=i("2877"),h=Object(p["a"])(b,a,n,!1,null,null,null);e["a"]=h.exports},"437a":function(t,e,i){"use strict";var a=i("bee2"),n=i("d4ec"),r=i("262e"),s=i("2caf"),o=i("9ab4"),c=i("1b40"),l=i("4bb5"),u=Object(l["a"])("app"),f=Object(l["a"])("crm");c["a"].registerHooks(["beforeRouteEnter"]);var d=function(t){Object(r["a"])(i,t);var e=Object(s["a"])(i);function i(){var t;return Object(n["a"])(this,i),t=e.apply(this,arguments),t.filterShow=!1,t.filterActive=!1,t.tabType=0,t}return Object(a["a"])(i)}(c["d"]);Object(o["a"])([u.Getter],d.prototype,"userInfor",void 0),Object(o["a"])([f.Mutation],d.prototype,"SET_DETAILOBJ",void 0),Object(o["a"])([u.Mutation],d.prototype,"SET_QUERYPARAMA",void 0),Object(o["a"])([u.Mutation],d.prototype,"SET_HADDONEONDETAIL",void 0),Object(o["a"])([u.Getter],d.prototype,"hadDoneOnDetail",void 0),d=Object(o["a"])([Object(c["a"])({})],d),e["a"]=d},"53ae":function(t,e,i){"use strict";var a=i("d4ec"),n=i("bee2"),r=i("262e"),s=i("2caf"),o=(i("b0c0"),i("9ab4")),c=i("1b40");c["a"].registerHooks(["beforeRouteEnter"]);var l=function(t){Object(r["a"])(i,t);var e=Object(s["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(n["a"])(i,[{key:"beforeRouteEnter",value:function(t,e,i){i((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),i}(c["d"]);l=Object(o["a"])([Object(c["a"])({})],l),e["a"]=l},6445:function(t,e,i){"use strict";i("e90e")},7228:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.Pm4CountFlag?i("IdentitySelection",{attrs:{identityList:t.identityList},on:{changePM4Count:t.changePM4Count}}):i("div",[i("van-sticky",[i("div",{staticClass:"header px-10 pt-10 white-bg"},[i("div",{class:["pa-10 common-filter",t.filterShow?"color-main-2":"",t.filterActive?"common-filter--active":""],on:{click:function(e){t.filterShow=!t.filterShow}}},[i("div",[t._v("条件筛选")]),i("van-icon",{attrs:{name:"arrow-"+(t.filterShow?"up":"down"),size:"16px"}})],1),i("van-tabs",{attrs:{color:"#2271F5"},on:{click:t.tabTypeClick},model:{value:t.tabType,callback:function(e){t.tabType=e},expression:"tabType"}},t._l(t.tabList,(function(t){return i("van-tab",{key:t,attrs:{title:t}})})),1)],1)]),i("div",{attrs:{id:"filterContainer"}},[i("van-pull-refresh",{staticStyle:{"min-height":"100%"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{directives:[{name:"show",rawName:"v-show",value:!t.finished||t.dataList.length>0,expression:"!finished || dataList.length > 0"}],attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e,a){return i("CardList",{key:"SalesReturnList"+a,attrs:{listItem:e},on:{listItemClick:function(i){return t.listItemClick(e,a)}}})})),1),t.loading||t.dataList.length?t._e():i("app-empty",{staticClass:"mt-4 py-6 white-bg",attrs:{description:"暂无数据"}})],1)],1),i("van-popup",{attrs:{position:"top","get-container":"#filterContainer"},model:{value:t.filterShow,callback:function(e){t.filterShow=e},expression:"filterShow"}},[i("filter-pop",{on:{filterSubmit:t.filterSubmit,reset:t.reset}})],1)],1),!t.Pm4CountFlag&&t.identityObj&&t.identityObj.userCode?i("div",{staticClass:"commonOpButton-footer",on:{click:function(e){t.Pm4CountFlag=!t.Pm4CountFlag}}},[i("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"}},[t._v(" PM4账号切换 "),t.identityObj.userCode?i("span",[t._v("当前("+t._s(t.identityObj.userCode)+")")]):t._e()])],1):t._e()],1)},n=[],r=i("5530"),s=i("d4ec"),o=i("bee2"),c=i("262e"),l=i("2caf"),u=(i("99af"),i("d3b7"),i("b0c0"),i("a434"),i("9ab4")),f=i("1b40"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pt-2"},[t._m(0),t._l(t.identityList,(function(e,a){return i("van-cell",{key:"identity"+a,staticClass:"mt-2 align-center",attrs:{"is-link":""},on:{click:function(i){return t.changePM4Count(e)}},scopedSlots:t._u([{key:"title",fn:function(){return[i("ul",[i("li",[t._v(t._s(e.userCode)+"/"+t._s(e.userName))]),i("li",{staticClass:"color-gray-4 font-12"},[t._v(t._s(e.entryId)+"/"+t._s(e.entryName))])])]},proxy:!0}],null,!0)})}))],2)},b=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header px-3"},[t._v("请选择 "),i("span",{staticClass:"color-main"},[t._v("PM4账号")]),t._v("进入")])}],p=function(t){Object(c["a"])(i,t);var e=Object(l["a"])(i);function i(){return Object(s["a"])(this,i),e.apply(this,arguments)}return Object(o["a"])(i,[{key:"changePM4Count",value:function(t){this.$emit("changePM4Count",t)}}]),i}(f["d"]);Object(u["a"])([Object(f["c"])()],p.prototype,"identityList",void 0),p=Object(u["a"])([Object(f["a"])({})],p);var h=p,m=h,y=i("2877"),v=Object(y["a"])(m,d,b,!1,null,"46b9f336",null),O=v.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cardList background-color-white",on:{click:t.listItemClick}},[i("div",{staticClass:"tag-primary-plain"},[t._v(t._s(t.listItem.entryId)+"/"+t._s(t.listItem.entryName))]),i("info-item",{staticClass:"mt-2",attrs:{title:"客户",content:t.listItem.custId+"/"+t.listItem.custName}}),i("info-item",{staticClass:"mt-2",attrs:{title:"分支机构",content:t.listItem.contactId?t.listItem.contactId+"/"+t.listItem.contactName:"--"}}),i("info-item",{staticClass:"mt-2",attrs:{title:"收货日期",content:t.listItem.receiptDate}})],1)},g=[],k=i("3355"),w=function(t){Object(c["a"])(i,t);var e=Object(l["a"])(i);function i(){return Object(s["a"])(this,i),e.apply(this,arguments)}return Object(o["a"])(i,[{key:"listItemClick",value:function(){this.$emit("listItemClick")}}]),i}(f["d"]);Object(u["a"])([Object(f["c"])()],w.prototype,"listItem",void 0),w=Object(u["a"])([Object(f["a"])({components:{InfoItem:k["a"]}})],w);var _=w,C=_,I=(i("6445"),Object(y["a"])(C,j,g,!1,null,"151ea0cc",null)),P=I.exports,S=i("53ae"),x=i("437a"),T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-form",[i("van-field",{attrs:{"label-width":"120px",label:"客户ID/客户名称","input-align":"right",placeholder:"客户ID|客户名称"},model:{value:t.filterObj.customerKeyword,callback:function(e){t.$set(t.filterObj,"customerKeyword",e)},expression:"filterObj.customerKeyword"}}),i("van-field",{attrs:{"label-width":"120px",label:"分支机构ID/名称","input-align":"right",placeholder:"分支机构ID|名称"},model:{value:t.filterObj.contactKeyword,callback:function(e){t.$set(t.filterObj,"contactKeyword",e)},expression:"filterObj.contactKeyword"}}),i("van-field",{attrs:{"label-width":"120px",clickable:"",readonly:"",label:"收货日期",placeholder:"点击选择收货日期","input-align":"right"},on:{click:t.showPickerDateClick},model:{value:t.filterObj.confirmTime,callback:function(e){t.$set(t.filterObj,"confirmTime",e)},expression:"filterObj.confirmTime"}})],1),i("div",{staticClass:"dropdown-opts"},[i("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",size:"small",block:"",round:""},on:{click:t.reset}},[t._v("重置")]),i("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"info",size:"small",block:"",round:"",color:"#2271F5"},on:{click:t.filterSubmit}},[t._v("确认")])],1),t.showPickerDate?i("van-calendar",{attrs:{"min-date":t.minDate,"get-container":"#app","default-date":t.dateValue,color:"#2271F5"},on:{confirm:t.onConfirmDate},model:{value:t.showPickerDate,callback:function(e){t.showPickerDate=e},expression:"showPickerDate"}}):t._e()],1)},D=[],L=function(t){Object(c["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.dateValue="",t.showPickerDate=!1,t.minDate=new Date(2019,0,1),t.filterObj={confirmTime:"",contactKeyword:"",customerKeyword:""},t}return Object(o["a"])(i,[{key:"filterSubmit",value:function(){this.$emit("filterSubmit",this.filterObj)}},{key:"showPickerDateClick",value:function(){this.showPickerDate=!0}},{key:"onConfirmDate",value:function(t){this.filterObj.confirmTime=this.$dayjs(t).format("YYYY-MM-DD"),this.showPickerDate=!1}},{key:"reset",value:function(){this.$emit("reset"),this.filterObj={confirmTime:"",contactKeyword:"",customerKeyword:""}}}]),i}(f["d"]);L=Object(u["a"])([Object(f["a"])({})],L);var R=L,E=R,$=(i("7d9b"),Object(y["a"])(E,T,D,!1,null,"9566da38",null)),K=$.exports,A=i("1491"),M=i("4bb5"),N=Object(M["a"])("salesReturnOrder"),F=function(t){Object(c["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.Pm4CountFlag=!0,t.tabList=["未处理","已处理"],t.identityList=[],t.filterParams={confirmTime:"",contactKeyword:"",customerKeyword:""},t.detailObj="",t}return Object(o["a"])(i,[{key:"changePM4Count",value:function(t){this.SET_IDENTITYOBJ(t),this.onRefresh(),this.Pm4CountFlag=!1}},{key:"tabTypeClick",value:function(t){this.tabType=t,this.onRefresh()}},{key:"onRefresh",value:function(){this.page=1,this.finished=!1,this.refreshing=!1,this.onLoad()}},{key:"_querySaleReturnList",value:function(){var t=this,e={contact:this.filterParams.contactKeyword,cust:this.filterParams.customerKeyword,pageNum:this.page,pageSize:20,receiptdate:this.filterParams.confirmTime,status:this.tabType+1};this.identityObj&&this.identityObj.userId&&(e=Object.assign(Object(r["a"])({},e),{saleId:this.identityObj.userId})),Object(A["c"])(e).then((function(e){"200"==e.code&&e.data&&e.data.list||(t.finished=!0,t.loading=!1,t.$toast.fail(e.msg)),t.dataList=t.dataList.concat(e.data.list),t.loading=!1,e.data.hasNextPage?t.page++:t.finished=!0}))}},{key:"onLoad",value:function(){this.loading=!0,1===this.page&&(this.dataList=[]),this._querySaleReturnList()}},{key:"listItemClick",value:function(t,e){this.detailObj=t,this.detailObj["index"]=e,this.$router.push({path:"/salesReturnOrder/detail",query:{redocId:t.redocId,status:String(this.tabType+1)}})}},{key:"_queryPm4User",value:function(){var t=this;Object(A["a"])({}).then((function(e){t.identityList=e.data,1===t.identityList.length&&t.changePM4Count(t.identityList[0])}))}},{key:"filterSubmit",value:function(t){this.filterParams=Object(r["a"])({},t),this.filterParams.confirmTime||this.filterParams.contactKeyword||this.filterParams.customerKeyword?this.filterActive=!0:this.filterActive=!1,this.filterShow=!1,this.onRefresh()}},{key:"reset",value:function(){this.filterParams.confirmTime="",this.filterParams.contactKeyword="",this.filterParams.customerKeyword="",this.filterActive=!1,this.filterShow=!1,this.onRefresh()}},{key:"init",value:function(){this.tabType=0,this.SET_IDENTITYOBJ();var t=JSON.parse(localStorage.getItem("permissions")||""),e=t.some((function(t){return"salesReturnOrderQueryAll"===t}));e?(this.Pm4CountFlag=!1,this.page=1,this.finished=!1,this.refreshing=!1):this._queryPm4User()}},{key:"mounted",value:function(){this.init()}},{key:"beforeRouteEnter",value:function(t,e,i){i((function(t){"Home"===e.name&&t.init(),"salesReturnOrderDetail"===e.name&&0===t.tabType&&t.hasFlag&&(t.dataList.splice(t.detailObj.index,1),t.detailObj.index="",t.SET_HASFLAG(!1))}))}}]),i}(Object(f["b"])(S["a"],x["a"]));Object(u["a"])([N.Mutation],F.prototype,"SET_IDENTITYOBJ",void 0),Object(u["a"])([N.Mutation],F.prototype,"SET_HASFLAG",void 0),Object(u["a"])([N.Getter],F.prototype,"identityObj",void 0),Object(u["a"])([N.Getter],F.prototype,"hasFlag",void 0),F=Object(u["a"])([Object(f["a"])({components:{IdentitySelection:O,CardList:P,filterPop:K}})],F);var q=F,Y=q,H=Object(y["a"])(Y,a,n,!1,null,"da5c7cbe",null);e["default"]=H.exports},"7d9b":function(t,e,i){"use strict";i("1ef1")},e90e:function(t,e,i){}}]);