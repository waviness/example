(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ba3fb07"],{"24ae":function(t,e,a){},5179:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"screenshotBody",staticClass:"full-HW van-popup-bg"},[a("switch-and-statistics",{attrs:{selectMode:4,nowName:t.nowName,showZl:!1,isLong:!0,detailInfo:t.detailInfo,info:t.info},on:{openSelect:t.openSelectJudge,changeTime:t.changeTime}}),a("select-popup",{ref:"selectPopup",attrs:{selectMode:4,nowData:t.nowData},on:{changeAnalysisChoose:t.changeAnalysisChoose}}),a("div",{ref:"screenshotLine",staticClass:"pt-2"},[a("van-tabs",{staticStyle:{padding:"0 10px","border-radius":"5px 5px 0 0","z-index":"1"},attrs:{color:"#2271F5"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabList,(function(t,e){return a("van-tab",{key:e,attrs:{title:t}})})),1)],1),a("div",{staticClass:"detail-body",class:t.isAnalysis?"":"active",style:1===t.active?"overflow-y: hidden;":""},[0===t.active&&t.cardList.length>0?a("div",{staticClass:"white-block pb-3 mb-4"},t._l(t.cardList,(function(t,e){return a("detail-card",{key:e,attrs:{data:t,name:t.id+"/"+t.name}})})),1):t._e(),1===t.active?a("div",{staticClass:"white-block py-2 px-4",staticStyle:{"border-radius":"0 0 5px 5px"}},[a("span",{staticClass:"color-main-2 font-14 fontWeight-500 lineHeight-20"},[t._v(" "+t._s(t.tabList[1])+"销售额 ")]),a("div",{staticClass:"d-flex justify-space-between mt-2"},[a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近30天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.isPz?t.pzDay.thirtyDaysAmount1st:t.khDay.thirtyDaysAmount1st))+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近31-60天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.isPz?t.pzDay.thirtyDaysAmount2nd:t.khDay.thirtyDaysAmount2nd))+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近61-90天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.isPz?t.pzDay.thirtyDaysAmount3rd:t.khDay.thirtyDaysAmount3rd))+"万 ")])])])]):t._e(),1===t.active&&t.lsList.length>0?a("div",{staticClass:"table-div mt-2"},[a("div",{staticClass:"table-body background-color-white"},[a("div",{staticClass:"table-line d-flex font-14 color-gray-5 lineHeight-20 align-center py-3",class:t.isPz?"active":""},[a("div",{staticClass:"table-div-1"},[t._v(t._s(t.isPz?"货品ID/货品名称":"客户ID/客户名称"))]),a("div",{staticClass:"table-div-2"},[t._v("近30天")]),a("div",{staticClass:"table-div-3"},[t._v("近31-60天")]),a("div",{staticClass:"table-div-4"},[t._v("近61-90天")]),t.isPz?a("div",{staticClass:"table-div-5"},[t._v("厂家")]):t._e(),t.isPz?a("div",{staticClass:"table-div-5"},[t._v("规格")]):t._e(),a("div",{staticClass:"table-div-6"},[t._v("最后一次销售时间")])]),a("div",{staticClass:"table-content",class:t.isPz?"active":""},t._l(t.lsList,(function(e,s){return a("div",{key:s+"pz",staticClass:"table-line d-flex font-14 color-black-2 lineHeight-20 align-center py-3",class:t.isPz?"active":"",style:s%2===0?"background-color: #F7F7F7":""},[a("div",{staticClass:"table-div-1"},[t._v(t._s(e.id)+"/"+t._s(e.name))]),a("div",{staticClass:"table-div-2"},[t._v(" "+t._s(t.yToW(e.recent30SalesAmount)+"万")+" ")]),a("div",{staticClass:"table-div-3"},[t._v(" "+t._s(t.yToW(e.recent31To60SalesAmount)+"万")+" ")]),a("div",{staticClass:"table-div-4"},[t._v(" "+t._s(t.yToW(e.recent61To90SalesAmount)+"万")+" ")]),t.isPz?a("div",{staticClass:"table-div-5"},[t._v(t._s(e.goodsProdArea?e.goodsProdArea:"-"))]):t._e(),t.isPz?a("div",{staticClass:"table-div-5"},[t._v(t._s(e.goodsType?e.goodsType:"-"))]):t._e(),a("div",{staticClass:"table-div-6"},[t._v(t._s(e.yearLastSaleTime?e.yearLastSaleTime:"-"))])])})),0)]),a("div",{staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.params.total,"show-page-size":t.params.size},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}],null,!1,3075570953),model:{value:t.params.currentPage,callback:function(e){t.$set(t.params,"currentPage",e)},expression:"params.currentPage"}})],1)]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active&&0==t.cardList.length||1==t.active&&0==t.lsList.length,expression:"(active == 0 && cardList.length == 0) || (active == 1 && lsList.length == 0)"}],staticClass:"white-block pb-3 mb-4"},[a("app-empty",{staticClass:"py-7",attrs:{description:"暂无数据"}})],1),a("screenshot",{attrs:{buttonMode:t.buttonMode,isFullScreen:0!==t.active},on:{openFilter:t.openFilter}})],1),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"d-flex flex-wrap"},t._l(t.pzfilterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"d-flex flex-wrap"},t._l(t.lsfilterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"mb-3"},[t._v("筛选")]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"filter-div px-4 mr-2",class:1===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(1)}}},[t._v(" 连续三个月下降"+t._s(t.isPz?"品种":"客户")+" ")]),a("div",{staticClass:"filter-div px-4",class:2===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(2)}}},[t._v(" 丢失"+t._s(t.isPz?"品种":"客户")+" ")])]),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.refresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)])],1)},r=[],i=a("53ca"),n=a("1da1"),o=a("d4ec"),c=a("bee2"),d=a("262e"),l=a("2caf"),h=(a("96cf"),a("d3b7"),a("25f0"),a("b0c0"),a("159b"),a("81b2"),a("0eb6"),a("b7ef"),a("8bd4"),a("9ab4")),u=a("1b40"),m=a("020e"),y=a("8b7c"),p=a("d926"),g=a("cc19"),f=a("4bb5"),v=Object(f["a"])("cdp"),b=function(t){Object(d["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.active=0,t.cardList=[],t.detailInfo={},t.tabList=[],t.isAnalysis=!0,t.buttonMode=1,t.lsList=[],t.type=0,t.params={keyword:"",currentPage:1,total:0,size:5,orderMethod:1,orderRule:1,orderColumn:"thirtyDaysReduce1st",filterIndex:0,selectType:0},t.customerId="",t.goodsId="",t.cardParams={keyword:"",currentPage:1,total:0,size:10,orderMethod:1,orderColumn:"currentYearMoney",orderRule:1,finish:!1,loading:!1,filterIndex:0},t.lsfilterList=["近30天销售下降降序","近30天销售下降升序","最后销售时间降序","最后销售时间升序"],t.pzfilterList=["本年累计销售额降序","本年累计销售额升序","本月销售额降序","本月销售额升序"],t.stagingFilter={keyword:"",filterIndex:0,selectType:0},t.khDay={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0},t.pzDay={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0},t.yToW=g["b"],t}return Object(c["a"])(a,[{key:"isPz",get:function(){return 1===this.type||3===this.type}},{key:"changeAnalysisChoose",value:function(t){this.nowData=t.data.id.toString(),"客户"===t.type?(this.nowName=t.data.id+"/"+t.data.name,this.tabList=["全品种","流失品种"],this.type=5):(this.nowName=t.data.name,this.tabList=["全客户","下降客户"],this.type=4),this.initData()}},{key:"changeTime",value:function(){this.initData()}},{key:"openSelectJudge",value:function(){this.isAnalysis&&this.openSelect()}},{key:"initData",value:function(){var t=this;this.params.currentPage=1,this.cardParams.currentPage=1,this.cardList=[],this.lsList=[],this.cardParams.finish=!1;var e=Object(p["c"])(this.nowTime),a=Object(p["d"])(this.nowTime);switch(this.type){case 0:break;case 1:this._getDailySale(e).then((function(){t._getSaleStat(e).then((function(){t._getDescentGoods(e).then((function(){t._getFullGoods(e).then((function(){t._getDescentGoodsStat(e)}))}))}))}));break;case 2:this._getDataUserGoodSalesList(a).then((function(){t._getUserGDCustomerSalesLost(a).then((function(){t._getUserGdCustomSalesList(a).then((function(){t._getUserGdCustomSalesLostTotal(a)}))}))}));break;case 3:this._getDataUserCustomerSalesList(a).then((function(){t._getUserCstmGoodSalesLost(a).then((function(){t.__getaUserCustomerSalesList(a).then((function(){t._getUserCstmGoodSalesLostTotal(a)}))}))}));break;case 4:this._getDataUserGoodSalesList(a).then((function(){t._getUserGDCustomerSalesLost(a).then((function(){t._getUserGdCustomSalesList(a).then((function(){t._getUserGdCustomSalesLostTotal(a)}))}))}));break;case 5:this._getDataUserCustomerSalesList(a).then((function(){t._getUserCstmGoodSalesLost(a).then((function(){t.__getaUserCustomerSalesList(a).then((function(){t._getUserCstmGoodSalesLostTotal(a)}))}))}));break}}},{key:"_getDailySale",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={customerId:this.customerId,deptId:this.nowData,selectedDate:e},t.next=3,Object(y["d"])(a);case 3:s=t.sent,200==s.code?this.info.data1=s.data?s.data:0:this.info.data1=0;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getSaleStat",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={customerId:this.customerId,deptId:this.nowData,selectedDate:e},t.next=3,Object(y["l"])(a);case 3:s=t.sent,200==s.code&&s.data?(this.info.data3=s.data.monthSalesAmount?s.data.monthSalesAmount:0,this.info.data4=s.data.monthOnMonthSalesAmount?s.data.monthOnMonthSalesAmount:0,this.info.data5=s.data.monthOnMonthPercent?s.data.monthOnMonthPercent:0,this.info.data6=s.data.yearSalesAmount?s.data.yearSalesAmount:0,this.info.data7=s.data.yearOnYearSalesAmount?s.data.yearOnYearSalesAmount:0,this.info.data8=s.data.yearOnYearPercent?s.data.yearOnYearPercent:0):(this.info.data3=0,this.info.data4=0,this.info.data5=0,this.info.data6=0,this.info.data7=0,this.info.data8=0);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getDescentGoods",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={customerId:this.customerId,deptId:this.nowData,selectedDate:e,goodsKeyword:this.params.keyword,filterCondition:this.params.selectType,orderMethod:this.params.orderMethod,orderRule:this.params.orderRule,pageNum:this.params.currentPage,pageSize:this.params.size},t.next=3,Object(y["h"])(a);case 3:s=t.sent,200==s.code&&s.data?(this.lsList=s.data.list,this.params.total=s.data.total,r=[],s.data.list.forEach((function(t){r.push({recent30SalesAmount:t.recent30SalesAmount,recent31To60SalesAmount:t.recent31To60SalesAmount,recent61To90SalesAmount:t.recent61To90SalesAmount,goodsProdArea:t.goodsProdArea,goodsType:t.goodsType,id:t.goodsId,name:t.goodsName,yearLastSaleTime:t.lastSaleDate})})),this.lsList=r,this.params.total=s.data.total):(this.lsList=[],this.params.total=0);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getFullGoods",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={customerId:this.customerId,deptId:this.nowData,selectedDate:e,orderMethod:this.cardParams.orderMethod,orderRule:this.cardParams.orderRule,pageNum:this.cardParams.currentPage,pageSize:this.cardParams.size,goodsKeyword:this.cardParams.keyword},this.cardParams.loading=!0,t.next=4,Object(y["j"])(a);case 4:s=t.sent,this.cardParams.loading=!1,200==s.code&&s.data?(s.data.list.forEach((function(t){r.cardList.push({id:t.goodsId,name:t.goodsName,data1:t.dailySalesAmount?t.dailySalesAmount:0,data2:t.monthSalesAmount?t.monthSalesAmount:0,data3:t.monthOnMonthPercent?t.monthOnMonthPercent:0,data4:t.entireOnMonthSalesAmount?t.entireOnMonthSalesAmount:0,data5:t.yearSalesAmount?t.yearSalesAmount:0,data6:t.yearOnYearPercent?t.yearOnYearPercent:0,data7:t.accuOnYearSalesAmount?t.accuOnYearSalesAmount:0})})),this.cardParams.total=s.data.total,this.cardList.length===this.cardParams.total&&(this.cardParams.finish=!0)):(this.cardParams.total=0,this.cardParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getDescentGoodsStat",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={customerId:this.customerId,deptId:this.nowData,selectedDate:e},t.next=3,Object(y["i"])(a);case 3:s=t.sent,200==s.code&&s.data?this.pzDay={thirtyDaysAmount1st:s.data.recent30SalesAmount,thirtyDaysAmount2nd:s.data.recent31To60SalesAmount,thirtyDaysAmount3rd:s.data.recent61To90SalesAmount}:this.pzDay={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getUserGdCustomSalesList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,custom:this.cardParams.keyword,orderColumn:this.cardParams.orderColumn,orderType:this.cardParams.orderRule-1,pageNum:this.cardParams.currentPage,pageSize:this.cardParams.size,userId:2==this.type?this.nowData:this.userInfor.userId,goodsId:2==this.type?this.goodsId:this.nowData},this.cardParams.loading=!0,t.next=4,Object(y["r"])(a);case 4:s=t.sent,this.cardParams.loading=!1,200==s.code&&s.data?(s.data.list.forEach((function(t){r.cardList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyCurrentMonthMoney?t.lyCurrentMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.cardParams.total=s.data.total,this.cardList.length===this.cardParams.total&&(this.cardParams.finish=!0)):(this.cardParams.total=0,this.cardParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getUserGdCustomSalesLostTotal",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,userId:2==this.type?this.nowData:this.userInfor.userId,goodsId:2==this.type?this.goodsId:this.nowData},t.next=3,Object(y["s"])(a);case 3:s=t.sent,200==s.code&&s.data?this.khDay=s.data:this.khDay={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getUserGDCustomerSalesLost",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,custom:this.params.keyword,selectType:this.params.selectType,orderColumn:this.params.orderColumn,orderType:this.params.orderRule-1,pageNum:this.params.currentPage,pageSize:this.params.size,userId:2==this.type?this.nowData:this.userInfor.userId,goodsId:2==this.type?this.goodsId:this.nowData},t.next=3,Object(y["q"])(a);case 3:s=t.sent,200==s.code&&s.data?(r=[],s.data.list.forEach((function(t){r.push({recent30SalesAmount:t.thirtyDaysAmount1st,recent31To60SalesAmount:t.thirtyDaysAmount2nd,recent61To90SalesAmount:t.thirtyDaysAmount3rd,id:t.customerId,name:t.customerName,yearLastSaleTime:t.lastSaleTime})})),this.lsList=r,this.params.total=s.data.total):(this.lsList=[],this.params.total=0);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"__getaUserCustomerSalesList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,goods:this.cardParams.keyword,orderColumn:this.cardParams.orderColumn,orderType:this.cardParams.orderRule-1,pageNum:this.cardParams.currentPage,pageSize:this.cardParams.size,userId:3==this.type?this.nowData:this.userInfor.userId,customerId:3==this.type?this.customerId:this.nowData},this.cardParams.loading=!0,t.next=4,Object(y["v"])(a);case 4:s=t.sent,this.cardParams.loading=!1,200==s.code&&s.data?(s.data.list.forEach((function(t){r.cardList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyCurrentMonthMoney?t.lyCurrentMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.cardParams.total=s.data.total,this.cardList.length===this.cardParams.total&&(this.cardParams.finish=!0)):(this.cardParams.total=0,this.cardParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getUserCstmGoodSalesLostTotal",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,userId:3==this.type?this.nowData:this.userInfor.userId,customerId:3==this.type?this.customerId:this.nowData},t.next=3,Object(y["n"])(a);case 3:s=t.sent,200==s.code&&s.data?this.pzDay=s.data:this.pzDay={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getUserCstmGoodSalesLost",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,goods:this.params.keyword,selectType:this.params.selectType,orderColumn:this.params.orderColumn,orderType:this.params.orderRule-1,pageNum:this.params.currentPage,pageSize:this.params.size,userId:3==this.type?this.nowData:this.userInfor.userId,customerId:3==this.type?this.customerId:this.nowData},t.next=3,Object(y["m"])(a);case 3:s=t.sent,200==s.code&&s.data?(r=[],s.data.list.forEach((function(t){r.push({recent30SalesAmount:t.thirtyDaysAmount1st,recent31To60SalesAmount:t.thirtyDaysAmount2nd,recent61To90SalesAmount:t.thirtyDaysAmount3rd,goodsProdArea:t.zxFactoryname,goodsType:t.goodStype,id:t.goodsId,name:t.goodsName,yearLastSaleTime:t.lastSaleTime})})),this.lsList=r,this.params.total=s.data.total):(this.lsList=[],this.params.total=0);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getDataUserCustomerSalesList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,userId:3==this.type?this.nowData:this.userInfor.userId,custom:3==this.type?this.customerId:this.nowData,pageNum:1,pageSize:1},t.next=3,Object(y["e"])(a);case 3:s=t.sent,200==s.code&&s.data&&s.data.list&&s.data.list.length>0?(r=s.data.list[0],this.info={data1:r.currentDayMoney?r.currentDayMoney:0,data3:r.currentMonthMoney?r.currentMonthMoney:0,data4:r.lyCurrentMonthMoney?r.lyCurrentMonthMoney:0,data5:r.monthPercentage?r.monthPercentage:0,data6:r.currentYearMoney?r.currentYearMoney:0,data7:r.lyCurrentYearMoney?r.lyCurrentYearMoney:0,data8:r.yearPercentage?r.yearPercentage:0}):this.info={data1:0,data3:0,data4:0,data5:0,data6:0,data7:0,data8:0};case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getDataUserGoodSalesList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={selectDate:e,userId:2==this.type?this.nowData:this.userInfor.userId,goods:2==this.type?this.goodsId:this.nowData,pageNum:1,pageSize:1},t.next=3,Object(y["f"])(a);case 3:s=t.sent,200==s.code&&s.data&&s.data.list?(r=s.data.list[0],this.info={data1:r.currentDayMoney?r.currentDayMoney:0,data3:r.currentMonthMoney?r.currentMonthMoney:0,data4:r.lyCurrentMonthMoney?r.lyCurrentMonthMoney:0,data5:r.monthPercentage?r.monthPercentage:0,data6:r.currentYearMoney?r.currentYearMoney:0,data7:r.lyCurrentYearMoney?r.lyCurrentYearMoney:0,data8:r.yearPercentage?r.yearPercentage:0}):this.info={data1:0,data3:0,data4:0,data5:0,data6:0,data7:0,data8:0};case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleTableChange",value:function(){if(1===this.type){var t=Object(p["c"])(this.nowTime);this._getDescentGoods(t)}else if(2===this.type||4===this.type){var e=Object(p["d"])(this.nowTime);this._getUserGDCustomerSalesLost(e)}else if(3===this.type||5===this.type){var a=Object(p["d"])(this.nowTime);this._getUserCstmGoodSalesLost(a)}}},{key:"scrollBottom",value:function(){if("analysisList"==this.$route.name&&0===this.active&&!this.cardParams.finish&&!this.cardParams.loading)if(this.cardParams.currentPage++,1===this.type){var t=Object(p["d"])(this.nowTime);this._getFullGoods(t)}else if(2===this.type||4===this.type){var e=Object(p["d"])(this.nowTime);this._getUserGdCustomSalesList(e)}else if(3===this.type||5===this.type){var a=Object(p["d"])(this.nowTime);this.__getaUserCustomerSalesList(a)}}},{key:"openFilter",value:function(){this.showFilter=!0,this.refresh()}},{key:"refresh",value:function(){1===this.active?(this.stagingFilter.filterIndex=this.params.filterIndex,this.stagingFilter.isgj=this.params.isgj):(this.stagingFilter.filterIndex=this.cardParams.filterIndex,this.stagingFilter.keyword=this.cardParams.keyword)}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"handleSx",value:function(t){this.stagingFilter.selectType===t?this.stagingFilter.selectType=0:this.stagingFilter.selectType=t}},{key:"handleFilterOk",value:function(){this.showFilter=!1;var t=Object(p["d"])(this.nowTime),e=Object(p["c"])(this.nowTime);if(0===this.active){if(this.cardList=[],this.cardParams.currentPage=1,this.cardParams.keyword=this.stagingFilter.keyword,this.cardParams.filterIndex=this.stagingFilter.filterIndex,this.cardParams.finish=!1,1===this.type){switch(this.cardParams.filterIndex){case 0:this.cardParams.orderMethod=1,this.cardParams.orderRule=1;break;case 1:this.cardParams.orderMethod=1,this.cardParams.orderRule=2;break;case 2:this.cardParams.orderMethod=2,this.cardParams.orderRule=1;break;case 3:this.cardParams.orderMethod=2,this.cardParams.orderRule=2;break}this._getFullGoods(e)}else if(2===this.type){switch(this.cardParams.filterIndex){case 0:this.cardParams.orderColumn="currentYearMoney",this.cardParams.orderRule=1;break;case 1:this.cardParams.orderColumn="currentYearMoney",this.cardParams.orderRule=2;break;case 2:this.cardParams.orderColumn="currentMonthMoney",this.cardParams.orderRule=1;break;case 3:this.cardParams.orderColumn="currentMonthMoney",this.cardParams.orderRule=2;break}this._getUserGdCustomSalesList(t)}else if(3===this.type){switch(this.cardParams.filterIndex){case 0:this.cardParams.orderColumn="currentYearMoney",this.cardParams.orderRule=1;break;case 1:this.cardParams.orderColumn="currentYearMoney",this.cardParams.orderRule=2;break;case 2:this.cardParams.orderColumn="currentMonthMoney",this.cardParams.orderRule=1;break;case 3:this.cardParams.orderColumn="currentMonthMoney",this.cardParams.orderRule=2;break}this.__getaUserCustomerSalesList(t)}}else if(this.lsList=[],this.params.currentPage=1,this.params.isgj=this.stagingFilter.isgj,this.params.filterIndex=this.stagingFilter.filterIndex,this.params.keyword=this.stagingFilter.keyword,this.params.selectType=this.stagingFilter.selectType,1===this.type){switch(this.params.filterIndex){case 0:this.params.orderMethod=1,this.params.orderRule=1;break;case 1:this.params.orderMethod=1,this.params.orderRule=2;break;case 2:this.params.orderMethod=2,this.params.orderRule=1;break;case 3:this.params.orderMethod=2,this.params.orderRule=2;break}this._getDescentGoods(e)}else if(2===this.type){switch(this.params.filterIndex){case 0:this.params.orderColumn="thirtyDaysReduce1st",this.params.orderRule=1;break;case 1:this.params.orderColumn="thirtyDaysReduce1st",this.params.orderRule=2;break;case 2:this.params.orderColumn="lastSaleTime",this.params.orderRule=1;break;case 3:this.params.orderColumn="lastSaleTime",this.params.orderRule=2;break}this._getUserGDCustomerSalesLost(t)}else if(3===this.type){switch(this.params.filterIndex){case 0:this.params.orderColumn="thirtyDaysReduce1st",this.params.orderRule=1;break;case 1:this.params.orderColumn="thirtyDaysReduce1st",this.params.orderRule=2;break;case 2:this.params.orderColumn="lastSaleTime",this.params.orderRule=1;break;case 3:this.params.orderColumn="lastSaleTime",this.params.orderRule=2;break}this._getUserCstmGoodSalesLost(t)}}},{key:"activated",value:function(){if(this.closeSelect(),this.$route.query){var t=this.$route.query;if("object"===Object(i["a"])(t)&&t.isAnalysis)this.nowData=null,this.detailInfo={},this.isAnalysis=!0,this.openSelect();else{if("object"===Object(i["a"])(t)){var e="";for(var a in t)e+=t[a];t=e}t=window.atob(t),t=JSON.parse(decodeURI(t)),this.nowName=t.name?t.name:"",this.nowData=t.id?t.id:"",this.type=t.type,this.detailInfo={name:t.detailName,type:t.type?t.type:0},1===t.type||3===t.type?(this.tabList=["全品种","流失品种"],this.customerId=t.detailId):2===t.type&&(this.tabList=["全客户","下降客户"],this.goodsId=t.detailId),this.initData(),this.buttonMode=t.buttonMode?t.buttonMode:1,this.isAnalysis=!1}}}}]),a}(Object(u["b"])(m["a"]));Object(h["a"])([v.Getter],b.prototype,"khTotal",void 0),b=Object(h["a"])([Object(u["a"])({components:{},beforeRouteLeave:function(t,e,a){this.closeSelect(),a(!0)}})],b);var w=b,P=w,k=(a("a82e"),a("2877")),D=Object(k["a"])(P,s,r,!1,null,"1568b99c",null);e["default"]=D.exports},a82e:function(t,e,a){"use strict";a("24ae")}}]);