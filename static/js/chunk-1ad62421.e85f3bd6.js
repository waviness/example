(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ad62421"],{"13d8":function(t,e,n){"use strict";n("79c6")},"34d1":function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"g",(function(){return p})),n.d(e,"j",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return v})),n.d(e,"n",(function(){return j})),n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return P})),n.d(e,"d",(function(){return V})),n.d(e,"e",(function(){return B})),n.d(e,"f",(function(){return C}));var a=n("1da1"),r=(n("96cf"),n("b32d")),i=n("90ae");function c(t){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/queryPm4Sales",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function s(t){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/queryHospitalPolicyList",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}function p(t){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/queryHospitalPolicyDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function d(t){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/querySupplierHospitalList",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function f(t){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/queryUnVBPGoods",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function h(t){return y.apply(this,arguments)}function y(){return y=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/queryVBPGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function v(t){return O.apply(this,arguments)}function O(){return O=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/queryVisitGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),O.apply(this,arguments)}function j(t){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/queryVisitGoodsList",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function w(t){return k.apply(this,arguments)}function k(){return k=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/addHospitalPolicyDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function x(t){return D.apply(this,arguments)}function D(){return D=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/addUnVBPGoods",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function P(t){return R.apply(this,arguments)}function R(){return R=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/addUnVBPGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}function V(t){return _.apply(this,arguments)}function _(){return _=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/addVBPGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function B(t){return q.apply(this,arguments)}function q(){return q=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/addVisitGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),q.apply(this,arguments)}function C(t){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["c"],"/api/vbp/deleteUnVBPGoodsDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),I.apply(this,arguments)}},5747:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cust-block",on:{click:t.onClick}},[n("div",{staticClass:"font-14"},[t._v(t._s(t.data.customId)+"/"+t._s(t.data.customName))]),n("div",{staticClass:"mt-2 color-gray-4"},[t._v("生成时间："+t._s(t.data.creDate?t.data.creDate.split(" ")[0]:""))]),t.active?n("div",{staticClass:"mt-2 color-gray-4"},[t._v(" 处理时间："+t._s(t.data.visitFinishDate?t.data.visitFinishDate.split(" ")[0]:"")+" ")]):t._e()])},r=[],i=n("d4ec"),c=n("bee2"),u=n("262e"),s=n("2caf"),o=(n("a9e3"),n("9ab4")),p=n("1b40"),l=function(t){Object(u["a"])(n,t);var e=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(c["a"])(n,[{key:"onClick",value:function(){this.$emit("click")}}]),n}(p["d"]);Object(o["a"])([Object(p["c"])({type:Object,default:{}})],l.prototype,"data",void 0),Object(o["a"])([Object(p["c"])({type:Number,default:0})],l.prototype,"active",void 0),l=Object(o["a"])([Object(p["a"])({})],l);var d=l,b=d,f=(n("f770"),n("2877")),m=Object(f["a"])(b,a,r,!1,null,"6a35133c",null);e["a"]=m.exports},"79c6":function(t,e,n){},bd70:function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return p})),n.d(e,"d",(function(){return l}));n("b0c0");for(var a=[{id:1,name:"30%-50%"},{id:2,name:"51%-70%"},{id:3,name:"71%-90%"},{id:4,name:"91%-100%"}],r=[{id:1,name:"按比例使用"},{id:2,name:"一刀切，达量后放开"},{id:3,name:"一刀切，达量后不放开"}],i=[{id:1,name:"书记"},{id:2,name:"分管院长"},{id:3,name:"药剂科主任"},{id:4,name:"药事会讨论"}],c=[{id:1,name:"限门诊"},{id:2,name:"限病区"},{id:3,name:"限老干部特定人员使用"},{id:4,name:"限主任处方"}],u=[{id:1,name:"年度调整"},{id:2,name:"季度调整"},{id:3,name:"月度调整"}],s=[{id:1,name:"限控"},{id:2,name:"—刀切"},{id:3,name:"中选和非中选共存"}],o=[{value:0,name:"缺货",icon:"#ytcrm-qh"},{value:2,name:"价格限销",icon:"#ytcrm-jgxx"},{value:3,name:"库存下限",icon:"#ytcrm-kcxx"},{value:4,name:"两票制",icon:"#ytcrm-lpz"},{value:5,name:"紧俏药品",icon:"#ytcrm-jqyp"},{value:6,name:"禁限销",icon:"#ytcrm-jxx"},{value:7,name:"库存状态",icon:"#ytcrm-kczt"},{value:8,name:"近效期",icon:"#ytcrm-jxq"}],p=[],l=[],d=0;d<o.length;d++){var b=o[d];p.push({icon:b.icon+"-yw",path:"/lockList?role=1&conType=".concat(b.value),pmsName:b.name,pmsId:437,type:b.value,role:1,ingShowFlag:!1}),7!==b.value&&8!==b.value&&l.push({icon:b.icon+"-cg",path:"/lockList?role=2&conType=".concat(b.value),pmsName:b.name,pmsId:445,role:2,type:b.value,ingShowFlag:!1})}},ceec:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pb-100"},[n("Item",{attrs:{active:t.statusType,data:t.detailObj}}),n("div",{},[n("policy-item",{attrs:{description:"中选品种报量政策 (按历史用量)",placeholder:"点击选择报量政策",selectValue:t.quantityObj,editable:!t.statusType,actions:t.quantityOptions},on:{"update:selectValue":function(e){t.quantityObj=e},"update:select-value":function(e){t.quantityObj=e}}}),n("policy-item",{attrs:{description:"VBP政策",placeholder:"点击选择VBP政策",selectValue:t.vbpObj,editable:!t.statusType,actions:t.vbpOptions},on:{"update:selectValue":function(e){t.vbpObj=e},"update:select-value":function(e){t.vbpObj=e}}}),n("policy-item",{attrs:{description:"VBP用量控制关键决策部门",placeholder:"点击选择VBP决策部门",selectValue:t.deptObj,editable:!t.statusType,actions:t.deptOptions},on:{"update:selectValue":function(e){t.deptObj=e},"update:select-value":function(e){t.deptObj=e}}}),n("policy-item",{attrs:{description:"对停限控的调整周期",placeholder:"点击选择调整周期",selectValue:t.cycleObj,editable:!t.statusType,actions:t.cycleOptions},on:{"update:selectValue":function(e){t.cycleObj=e},"update:select-value":function(e){t.cycleObj=e}}}),n("policy-item",{attrs:{description:"对停限控的管理类型",placeholder:"点击选择管理类型",selectValue:t.manageObj,editable:!t.statusType,actions:t.manageOptions},on:{"update:selectValue":function(e){t.manageObj=e},"update:select-value":function(e){t.manageObj=e}}})],1),t.statusType?t._e():n("div",{staticClass:"footer d-flex justify-space-between mx-4"},[n("van-button",{staticClass:"flex-1",attrs:{round:""},on:{click:t.goBack}},[t._v("取消")]),n("van-button",{staticClass:"ml-3 flex-1",attrs:{round:"",color:"#2271F5"},on:{click:t.submit}},[t._v("提交")])],1)],1)},r=[],i=n("1da1"),c=n("d4ec"),u=n("bee2"),s=n("262e"),o=n("2caf"),p=(n("b0c0"),n("7db0"),n("d3b7"),n("96cf"),n("9ab4")),l=n("1b40"),d=n("4bb5"),b=n("5747"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"font-14"},[n("div",{staticClass:"mx-4 my-2 color-gray-4"},[t._v(t._s(t.description))]),t.editable?n("van-cell",{staticClass:"background-color-white",attrs:{clickable:""},on:{click:t.onClick}},[t.selectValue.name?n("span",{},[t._v(t._s(t.selectValue.name))]):n("span",{staticClass:"color-gray-3"},[t._v(t._s(t.placeholder))])]):n("van-cell",{staticClass:"background-color-white"},[t.selectValue?n("span",{},[t._v(t._s(t.selectValue.name))]):t._e()]),n("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消",description:t.description,"close-on-click-action":""},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},m=[],h=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.show=!1,t}return Object(u["a"])(n,[{key:"onClick",value:function(){this.editable&&(this.show=!0)}},{key:"onSelect",value:function(t){this.$emit("update:selectValue",t)}}]),n}(l["d"]);Object(p["a"])([Object(l["c"])({type:String,default:""})],h.prototype,"description",void 0),Object(p["a"])([Object(l["c"])({type:String,default:""})],h.prototype,"placeholder",void 0),Object(p["a"])([Object(l["c"])({type:Array,default:[]})],h.prototype,"actions",void 0),Object(p["a"])([Object(l["c"])({type:Object,default:{}})],h.prototype,"selectValue",void 0),Object(p["a"])([Object(l["c"])({type:Boolean,default:!1})],h.prototype,"editable",void 0),h=Object(p["a"])([Object(l["a"])({})],h);var y=h,v=y,O=n("2877"),j=Object(O["a"])(v,f,m,!1,null,"431c680c",null),g=j.exports,w=n("34d1"),k=n("bd70"),x=Object(d["a"])("app"),D=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.statusType=+t.$route.params.statusType,t.recordId=+t.$route.params.id,t.detailObj={},t.loading=!1,t.submitShow=!1,t.quantityOptions=k["g"],t.vbpOptions=k["h"],t.deptOptions=k["b"],t.manageOptions=k["f"],t.cycleOptions=k["a"],t.quantityObj={},t.vbpObj={},t.deptObj={},t.cycleObj={},t.manageObj={},t}return Object(u["a"])(n,[{key:"getDetail",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=5,Object(w["g"])({recordId:this.recordId});case 5:e=t.sent,this.loading=!1,e.success&&(this.detailObj=e.data,this.statusType&&(this.quantityObj={id:e.data.goodsQuantity,name:this.findNameById(e.data.goodsQuantity,this.quantityOptions)},this.vbpObj={id:e.data.vbpPolicy,name:this.findNameById(e.data.vbpPolicy,this.vbpOptions)},this.deptObj={id:e.data.department,name:this.findNameById(e.data.department,this.deptOptions)},this.cycleObj={id:e.data.adjustCycle,name:this.findNameById(e.data.adjustCycle,this.cycleOptions)},this.manageObj={id:e.data.manageType,name:this.findNameById(e.data.manageType,this.manageOptions)}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"findNameById",value:function(t,e){return e.find((function(e){return e.id===t})).name}},{key:"goBack",value:function(){this.$router.back()}},{key:"submit",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.quantityObj.name){t.next=3;break}return this.$toast("请选择报量政策"),t.abrupt("return");case 3:if(this.vbpObj.name){t.next=6;break}return this.$toast("请选择VBP政策"),t.abrupt("return");case 6:if(this.deptObj.name){t.next=9;break}return this.$toast("请选择VBP决策部门"),t.abrupt("return");case 9:if(this.cycleObj.name){t.next=12;break}return this.$toast("请选择调整周期"),t.abrupt("return");case 12:if(this.manageObj.name){t.next=15;break}return this.$toast("请选择管理类型"),t.abrupt("return");case 15:return e={recordId:this.recordId,goodsQuantity:this.quantityObj.id,vbpPolicy:this.vbpObj.id,department:this.deptObj.id,adjustCycle:this.cycleObj.id,manageType:this.manageObj.id},t.next=18,Object(w["a"])(e);case 18:n=t.sent,n.success?(this.$toast.success(n.msg||"提交成功"),this.SET_HADDONEONDETAIL(!0),this.goBack()):this.$toast.fail(n.msg||"提交失败");case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){this.getDetail()}}]),n}(l["d"]);Object(p["a"])([x.Mutation],D.prototype,"SET_HADDONEONDETAIL",void 0),D=Object(p["a"])([Object(l["a"])({components:{Item:b["a"],PolicyItem:g}})],D);var P=D,R=P,V=(n("13d8"),Object(O["a"])(R,a,r,!1,null,"1c72e742",null));e["default"]=V.exports},e6ff:function(t,e,n){},f770:function(t,e,n){"use strict";n("e6ff")}}]);