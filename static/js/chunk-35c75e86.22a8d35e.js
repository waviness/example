(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35c75e86"],{1975:function(e,t,s){"use strict";s("5fa2")},"53ae":function(e,t,s){"use strict";var a=s("d4ec"),i=s("bee2"),n=s("262e"),c=s("2caf"),r=(s("b0c0"),s("9ab4")),o=s("1b40");o["a"].registerHooks(["beforeRouteEnter"]);var l=function(e){Object(n["a"])(s,e);var t=Object(c["a"])(s);function s(){var e;return Object(a["a"])(this,s),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(i["a"])(s,[{key:"beforeRouteEnter",value:function(e,t,s){s((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),s}(o["d"]);l=Object(r["a"])([Object(o["a"])({})],l),t["a"]=l},"5fa2":function(e,t,s){},a832:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"list"},[s("van-sticky",[s("div",{staticClass:"list-header mb-2 d-flex justify-space-between"},[s("div",[s("span",{staticClass:"font-16"},[e._v(e._s(e.cardItem.LABEL_NAME))]),e.cardItem.todayNum||0===e.cardItem.todayNum?s("span",{staticClass:"color-second pl-4"},[e._v(" 今日新增"+e._s(e.cardItem.todayNum)+"条 ")]):e._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.totalNum,expression:"totalNum !== 0"}],staticClass:"font-14"},[e._v(" 共"),s("span",{staticClass:"px-1"},[e._v(e._s(e.totalNum))]),e._v("条 ")])])]),s("div",{staticClass:"list-content"},[s("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[s("van-list",{staticClass:"pb-100",attrs:{offset:20,finished:e.finished,"finished-text":e.finishText},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e.loading||e.dataList.length?e._e():s("app-empty",{staticClass:"pb-6 white-bg",attrs:{description:"暂无数据"}}),e._l(e.dataList,(function(t,a){return s("list-item",{key:a,attrs:{listItem:t},on:{subscribeClick:e.subscribeClick,discussClick:e.discussClick,signToSignedClick:e.signToSignedClick},nativeOn:{click:function(s){return e.listClick(t)}}})}))],2)],1)],1),s("van-popup",{staticClass:"van-popup-bg",style:{width:"100%",height:"40%"},attrs:{position:"bottom",round:"",clearable:""},model:{value:e.dicussShow,callback:function(t){e.dicussShow=t},expression:"dicussShow"}},[e.dicussShow?s("dicuss",{attrs:{title:e.dicussTitle},on:{sureComment:e.sureComment}}):e._e()],1),e.hasDept?s("dept-user",{ref:"deptUer",attrs:{show:e.changeTypeShow,loading:e.getUserListLoading,depTreeList:e.depTreeList,deptUserData:e.deptUserData,searchList:e.userDataList},on:{search:e.refreshUserByKeywords,refresh:e.refreshUserByDepts,confirm:e.onTreeConfirm,cancel:e.cancelUserByDepts}}):e._e(),s("van-dialog",{attrs:{"show-cancel-button":"","confirm-button-color":"#2271f5",beforeClose:e.confirmDialog,title:"并留言"},model:{value:e.messageShow,callback:function(t){e.messageShow=t},expression:"messageShow"}},[s("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入留言"},model:{value:e.messageValue,callback:function(t){e.messageValue=t},expression:"messageValue"}})],1)],1)},i=[],n=s("d4ec"),c=s("bee2"),r=s("262e"),o=s("2caf"),l=(s("99af"),s("4de4"),s("d3b7"),s("caad"),s("2532"),s("498a"),s("e9c4"),s("b0c0"),s("9ab4")),d=s("1b40"),u=s("8393"),h=s("53ae"),f=s("80b8"),m=s("951e"),p=s("4bce"),g=function(e){Object(r["a"])(s,e);var t=Object(o["a"])(s);function s(){var e;return Object(n["a"])(this,s),e=t.apply(this,arguments),e.cardItem={},e.totalNum=0,e.reLoad=!0,e}return Object(c["a"])(s,[{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.queryTopicList()}},{key:"queryTopicList",value:function(){var e=this;1===this.page&&(this.dataList=[]),this.loading=!0;var t={startTime:this.cardItem.startTime+" 00:00:00",endTime:this.cardItem.endTime+" 23:59:59",labelId:this.cardItem.LABEL_ID?this.cardItem.LABEL_ID:"",pageNum:this.page,pageSize:10,selectType:this.cardItem.selectType?this.cardItem.selectType:0};Object(p["e"])(t).then((function(t){"200"===t.code&&(e.loading=!1,e.dataList=e.dataList.concat(t.data.list),e.totalNum=t.data.total,t.data.hasNextPage?e.page++:e.finished=!0)}))}},{key:"mounted",value:function(){this.cardItem=this.$route.query}},{key:"activated",value:function(){this.cardItem=this.$route.query,this.reLoad&&(this.onRefresh(),this.reLoad=!1)}},{key:"signToSignedClick",value:function(e){this.SET_DETAILOBJ(e),this.getUsersClick()}},{key:"onTreeConfirm",value:function(e){var t=this;this.checkedUsers=e;var s=this.userDataList.filter((function(t){return e.includes(t.userId)}));this.checkDetailList=this.checkDetailList.concat(s);for(var a=[],i=function(s){var i=t.checkDetailList[s];-1===e.indexOf(i.userId)||a.some((function(e){return i.userId===e.userId}))||a.push(i)},n=0;n<this.checkDetailList.length;n++)i(n);this.checkDetailList=a,this.messageShow=!0}},{key:"confirmDialog",value:function(e,t){var s=this;if("confirm"===e){var a={ctsId:this.detailObj.ctsId,signContent:this.messageValue.trim(),userIdList:this.checkedUsers};Object(p["h"])(a).then((function(e){if("200"===e.code){s.$toast.success(e.msg);for(var a=[],i=0;i<s.checkDetailList.length;i++){var n=s.checkDetailList[i];a.push({createHeadImgUrl:s.userInfor.headImgUrl,createName:s.userInfor.userName,signedName:n.userName,signContent:s.messageValue})}s.$set(s.detailObj,"signToSignedList",s.detailObj.signToSignedList.concat(a)),s.messageValue="",s.checkedUsers=[],s.checkDetailList=[],t()}s.hasDept=!1,s.changeTypeShow=!1}))}else t()}},{key:"onCartShow",value:function(){var e=this;!0===this.dataChangeOp&&(this.dataList.filter((function(t){t.ctsId===e.detailObj.ctsId&&e.$nextTick((function(){t=JSON.parse(JSON.stringify(e.detailObj))}))})),this.SET_DATACHANGEOP(""))}}]),s}(Object(d["b"])(u["a"],h["a"],f["a"]));Object(l["a"])([Object(d["e"])("detailObj",{deep:!0})],g.prototype,"onCartShow",null),g=Object(l["a"])([Object(d["a"])({components:{listItem:m["a"]},beforeRouteLeave:function(e,t,s){"topic"===e.name&&(this.reLoad=!0),s()}})],g);var b=g,v=b,k=(s("1975"),s("2877")),L=Object(k["a"])(v,a,i,!1,null,"4f394ac9",null);t["default"]=L.exports}}]);