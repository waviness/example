(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-230db200"],{"08de":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("van-popup",{staticClass:"full-height d-flex flex-column",attrs:{position:"top"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("van-search",{attrs:{placeholder:"搜索","input-align":"center"},on:{input:e.onInput},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e.keywords?r("div",{staticClass:"flex-1 overflow-y-auto"},[e.isSelect&&e.searchList.length?r("van-checkbox-group",{ref:"checkboxGroup",model:{value:e.checkedIdList,callback:function(t){e.checkedIdList=t},expression:"checkedIdList"}},e._l(e.searchList,(function(t,n){return r("van-checkbox",{key:n,staticClass:"font-14 font-bold mx-4 my-3",attrs:{"icon-size":"16px","checked-color":"#2271F5",name:t.userId}},[e._v(e._s(t.userName))])})),1):e._e(),!e.isSelect&&e.userDataList.length?r("van-radio-group",{model:{value:e.checkedId,callback:function(t){e.checkedId=t},expression:"checkedId"}},e._l(e.searchList,(function(t){return r("van-radio",{key:t.userId,ref:"checkboxes",refInFor:!0,staticClass:"font-14 font-bold mt-6",attrs:{"icon-size":"16px","checked-color":"#2271F5",name:t.userId}},[e._v(e._s(t.userName))])})),1):e._e(),e.searchList.length||e.loading?e._e():r("app-empty",{staticClass:"mt-7",attrs:{description:"暂无人员"}}),r("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{type:"spinner",color:"#2271F5"}})],1):[r("div",{staticClass:"font-14 color-main-2 px-4 py-1 tree-shadow"},e._l(e.breadList,(function(t,n){return r("span",{key:t.depId,on:{click:function(r){return e.changeBread(t,n)}}},[e._v(e._s(t.depName)),r("van-icon",{attrs:{name:"arrow"}})],1)})),0),r("div",{staticClass:"flex-1 d-flex px-4 py-3 overflow-hidden"},[r("div",{staticClass:"flex-2 full-height"},[r("van-collapse",{staticClass:"dep-collapse",attrs:{border:!1},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[r("van-collapse-item",{attrs:{title:e.curDeptObj.depName,name:"1","label-class":"pa-0",border:!1}},e._l(e.curDeptObj.childList,(function(t){return r("div",{key:t.depId,staticClass:"d-flex align-center justify-space-between mt-3 mb-6",on:{click:function(r){return e.changeDept(t)}}},[r("div",{staticClass:"color-black-2"},[e._v(e._s(t.depName))]),r("van-icon",{staticClass:"font-16",attrs:{name:"arrow-down"}})],1)})),0)],1)],1),r("div",{staticClass:"tree-div__line"}),r("div",{staticClass:"flex-1 full-height pl-4 overflow-y-auto"},[e.isSelect?r("div",{staticClass:"color-main-2 font-14",on:{click:e.onAllCheckClick}},[e._v(" "+e._s(e.selectAll?"取消全选":"全选")+" ")]):e._e(),e.isSelect&&e.userDataList.length?r("van-checkbox-group",{ref:"checkboxGroup",model:{value:e.checkedIdList,callback:function(t){e.checkedIdList=t},expression:"checkedIdList"}},e._l(e.userDataList,(function(t){return r("van-checkbox",{key:t.userId,ref:"checkboxes",refInFor:!0,staticClass:"font-14 font-bold mt-6",attrs:{"icon-size":"16px","checked-color":"#2271F5",name:t.userId}},[e._v(e._s(t.userName))])})),1):e._e(),!e.isSelect&&e.userDataList.length?r("van-radio-group",{model:{value:e.checkedId,callback:function(t){e.checkedId=t},expression:"checkedId"}},e._l(e.userDataList,(function(t){return r("van-radio",{key:t.userId,ref:"checkboxes",refInFor:!0,staticClass:"font-14 font-bold mt-6",attrs:{"icon-size":"16px","checked-color":"#2271F5",name:t.userId}},[e._v(e._s(t.userName))])})),1):e._e(),e.userDataList.length||e.loading?e._e():r("app-empty",{staticClass:"mt-7",attrs:{description:"暂无人员",size:"100px"}}),r("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{type:"spinner",color:"#2271F5"}})],1)])],r("div",{staticClass:"d-flex align-center px-4 py-10",staticStyle:{background:"#f7f8fa"}},[e.isSelect?r("div",{staticClass:"flex-1 color-main-2 font-14 d-flex align-center",on:{click:function(t){e.checkedShow=!0}}},[e._v(" 已选"+e._s(e.allCheckedList.length)+"人 "),r("van-icon",{staticClass:"ml-3",attrs:{name:"arrow-"+(e.checkedShow?"up":"down"),size:"16px"}})],1):e._e(),e.isSelect?e._e():r("div",{staticClass:"flex-1 color-main-2 font-14 d-flex align-center"}),r("van-button",{staticStyle:{width:"72px"},attrs:{size:"small",block:"",round:""},on:{click:e.cancel}},[e._v("取消")]),r("van-button",{staticClass:"ml-4",staticStyle:{width:"72px"},attrs:{type:"info",size:"small",block:"",round:"",color:"#3561F2"},on:{click:e.onTreeConfirm}},[e._v("确认")])],1),r("van-popup",{style:{height:"60%"},attrs:{position:"bottom",round:"",closeable:""},model:{value:e.checkedShow,callback:function(t){e.checkedShow=t},expression:"checkedShow"}},[r("div",{staticClass:"font-16 font-bold textAlignC my-3"},[e._v("已选"+e._s(e.allCheckedList.length)+"人")]),r("div",{staticClass:"overflow-y-auto",staticStyle:{height:"calc(100% - 125px)"}},e._l(e.allCheckedList,(function(t){return r("van-cell",{key:t.userId,attrs:{clickable:""},scopedSlots:e._u([{key:"title",fn:function(){return[r("span",[e._v(e._s(t.userId)+"/"+e._s(t.userName))])]},proxy:!0},{key:"right-icon",fn:function(){return[r("van-icon",{attrs:{name:"cross",size:"20px"},nativeOn:{click:function(r){return r.stopPropagation(),e.deletePerson(t)}}})]},proxy:!0}],null,!0)})})),1),r("div",{staticClass:"dropdown-opts"},[r("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",size:"small",block:"",round:""},on:{click:function(t){e.checkedShow=!1}}},[e._v("取消")]),r("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"info",size:"small",block:"",round:"",color:"#2271F5"},on:{click:function(t){e.checkedShow=!1}}},[e._v("确认")])],1)])],2)},a=[],s=r("2909"),i=r("d4ec"),c=r("bee2"),o=r("262e"),u=r("2caf"),l=(r("d81d"),r("d3b7"),r("caad"),r("2532"),r("a434"),r("b64b"),r("4de4"),r("6062"),r("3ca3"),r("ddb0"),r("99af"),r("9ab4")),p=r("1b40"),d=function(e){Object(o["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.keywords="",e.checkedShow=!1,e.checkedIdList=[],e.checkedId="",e.checkedName="",e.breadList=[],e.curDeptObj={},e.activeNames=["1"],e.allCheckedList=[],e}return Object(c["a"])(r,[{key:"userDataList",get:function(){var e,t=this.curDeptObj.depId||"";return(null===(e=this.deptUserData[t])||void 0===e?void 0:e.userList)||[]}},{key:"selectAll",get:function(){var e=this,t=this.userDataList.map((function(e){return e.userId})),r=!!t.length&&t.every((function(t){return e.checkedIdList.includes(t)}));return r}},{key:"onInput",value:function(){this.$emit("search",this.keywords)}},{key:"changeBread",value:function(e,t){this.breadList.splice(t+1),this.curDeptObj=e}},{key:"changeDept",value:function(e){var t=e.depId,r=e.depName,n=e.childList;this.breadList.push({depId:t,depName:r,childList:n}),this.curDeptObj=e,Object.keys(this.deptUserData).includes(String(e.depId))||this.$emit("refresh",e)}},{key:"onAllCheckClick",value:function(){var e=this.userDataList.map((function(e){return e.userId}));this.checkedIdList=this.selectAll?this.checkedIdList.filter((function(t){return!e.includes(t)})):Object(s["a"])(new Set([].concat(Object(s["a"])(this.checkedIdList),Object(s["a"])(e))))}},{key:"deletePerson",value:function(e){this.checkedIdList=this.checkedIdList.filter((function(t){return t!==e.userId}))}},{key:"onTreeConfirm",value:function(){if(this.isSelect)if(this.needName){var e=(this.allCheckedList.length>0?this.allCheckedList[0].userName:"")+(this.allCheckedList.length>1?","+this.allCheckedList[1].userName:"")+(this.allCheckedList.length>2?"等":"");this.$emit("confirm",{list:this.checkedIdList,name:e})}else this.$emit("confirm",this.checkedIdList);else{if(this.keywords){for(var t=0;t<this.searchList.length;t++)if(this.searchList[t].userId==this.checkedId){this.checkedName=this.searchList[t].userName;break}}else for(var r=0;r<this.userDataList.length;r++)if(this.userDataList[r].userId==this.checkedId){this.checkedName=this.userDataList[r].userName;break}this.$emit("confirm",this.checkedId,this.checkedName)}}},{key:"cancel",value:function(){this.$emit("cancel")}},{key:"mounted",value:function(){var e=this.depTreeList[0],t=e.depId,r=e.depName,n=e.childList;this.breadList=[{depId:t,depName:r,childList:n}],this.curDeptObj=this.depTreeList[0]}},{key:"onCheckedIdListChange",value:function(e){var t,r=this.depTreeList[0].depId,n=(null===(t=this.deptUserData[r])||void 0===t?void 0:t.userList)||[];this.allCheckedList=n.filter((function(t){return e.includes(t.userId)}))}}]),r}(p["d"]);Object(l["a"])([Object(p["c"])({type:Boolean,default:!0})],d.prototype,"isSelect",void 0),Object(l["a"])([Object(p["c"])({type:Boolean,default:!1})],d.prototype,"needName",void 0),Object(l["a"])([Object(p["c"])({type:Boolean,default:!1})],d.prototype,"show",void 0),Object(l["a"])([Object(p["c"])({type:Boolean,default:!1})],d.prototype,"loading",void 0),Object(l["a"])([Object(p["c"])({type:Array,default:[]})],d.prototype,"depTreeList",void 0),Object(l["a"])([Object(p["c"])({type:Object,default:{}})],d.prototype,"deptUserData",void 0),Object(l["a"])([Object(p["c"])({type:Array,default:[]})],d.prototype,"searchList",void 0),Object(l["a"])([Object(p["e"])("checkedIdList",{deep:!0,immediate:!0})],d.prototype,"onCheckedIdListChange",null),d=Object(l["a"])([Object(p["a"])({})],d);var h=d,f=h,m=(r("3da8"),r("2877")),v=Object(m["a"])(f,n,a,!1,null,"331fe828",null);t["a"]=v.exports},"1d1a":function(e,t,r){},"2bc1":function(e,t,r){"use strict";r("dfb9d")},"3da8":function(e,t,r){"use strict";r("ddf6")},"53ae":function(e,t,r){"use strict";var n=r("d4ec"),a=r("bee2"),s=r("262e"),i=r("2caf"),c=(r("b0c0"),r("9ab4")),o=r("1b40");o["a"].registerHooks(["beforeRouteEnter"]);var u=function(e){Object(s["a"])(r,e);var t=Object(i["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(a["a"])(r,[{key:"beforeRouteEnter",value:function(e,t,r){r((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),r}(o["d"]);u=Object(c["a"])([Object(o["a"])({})],u),t["a"]=u},"6e5a":function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"r",(function(){return c})),r.d(t,"d",(function(){return o})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return l})),r.d(t,"a",(function(){return p})),r.d(t,"i",(function(){return d})),r.d(t,"b",(function(){return h})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return m})),r.d(t,"k",(function(){return v})),r.d(t,"g",(function(){return y})),r.d(t,"h",(function(){return b})),r.d(t,"j",(function(){return k})),r.d(t,"n",(function(){return g})),r.d(t,"q",(function(){return w})),r.d(t,"p",(function(){return S})),r.d(t,"o",(function(){return O}));var n=r("1da1"),a=(r("99af"),r("96cf"),r("b32d")),s=r("90ae"),i=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymCustomerManager/getSzymCustomerMng",t,t.hideloading);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymCustomerManager/updSzymCustomer",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].formDataPost(s["c"],"/api/SzymCustomerManager/getSzymCustomerStaff",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].formDataPost(s["c"],"/api/SzymCustomerManager/getUserByPhoneNum",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymCustomerManager/optSzymCustomerStaff?szymCustomerId="+t.szymCustomerId,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymCustomerManager/dltSzymCustomerStaff?scStaffId="+t.scStaffId,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymUserVisit/getSzymUserVisit",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].formDataPost(s["c"],"/api/SzymCustomer/getSzymCustomerContact",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].formDataPost(s["c"],"/api/SzymCustomer/getSzymCustomerTransport",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymProjectMng/getSzymProjectMng",t,t.loading);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymUserVisit/getSzymUserVisitStat",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymUserVisit/getSzymUserProjectVisit",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymUserVisit/getSzymUserVisiByUserProject",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].formDataPost(s["c"],"/api/SzymUserVisit/getSzymUserVisitBySuvId",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymUserVisit/optSzymUserVisit",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymUserVisit/optSzymUserVisitPic?suvId=".concat(t.suvId,"&deleteFlag=").concat(t.deleteFlag),t.list);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(s["c"],"/api/SzymUserVisit/optSzymUserVisitLabelRemark",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].dataPost(s["c"],"/api/SzymUserVisit/optSzymUserVisitClockIn",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"760b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"customer-person"},[r("van-sticky",[r("div",{staticClass:"customer-person-sticky d-flex"},[r("div",{class:["flex-1 customer-person-filter justify-space-between px-10",e.filterShow?"color-main-2":"",e.filterActive?"customer-person-filter--active":""],on:{click:function(t){e.filterShow=!e.filterShow}}},[r("div",[e._v("条件筛选")]),r("van-icon",{attrs:{name:"arrow-"+(e.filterShow?"up":"down"),size:"16px"}})],1)])]),r("van-popup",{attrs:{position:"top",round:"","get-container":".my-container"},model:{value:e.filterShow,callback:function(t){e.filterShow=t},expression:"filterShow"}},[r("filter-pop",{ref:"filterPop",attrs:{relOptions:e.relOptions,customTypeList:e.customTypeList},on:{confirm:e.onConfirm,reset:e.refreshData}})],1),r("van-pull-refresh",{ref:"refreshList",staticClass:"my-container px-10",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[r("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",error:e.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){e.error=t},load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.dataList,(function(t,n){return r("div",{key:n,staticClass:"gray-block box-shadow mb-2 van-clearfix",on:{click:function(r){return e.toDetail(t)}}},[r("div",{staticClass:"white-block d-flex justify-space-between pt-2 px-2"},[r("div",{staticClass:"font-bold font-14"},[r("div",[e._v(e._s(t.szymCustomerId)+"/")]),r("div",[e._v(e._s(t.customerName.split("/")[0]||""))])]),r("div",{staticClass:"d-flex flex-column align-end",staticStyle:{"margin-left":"20px","min-width":"fit-content"}},[r("span",{staticClass:"tag-primary-plain mb-2"},[e._v(" "+e._s(t&&0===t.sourceType?"拓展客户":"业务系统内客户")+" ")]),r("span",{class:t.customerTypeName?"tag-primary-plain":"tag-text-plain"},[e._v(" "+e._s(t&&t.customerTypeName||"未维护")+" ")])])]),r("div",{staticClass:"white-block px-2"},[r("div",{staticClass:"color-gray-5 pb-2"},[e._v(e._s(t.registerAddress))]),r("div",{staticClass:"d-flex justify-space-between pb-2"},[t&&t.relCustomerId?r("div",{staticClass:"font-12 color-normal"},[e._v(" 已关联至"+e._s(t&&t.relCustomerId)+"/"+e._s(t&&t.relCustomerName||"--")+" ")]):r("div",{staticClass:"color-gray-7"},[e._v("暂未关联业务系统内客户")]),r("div",[r("span",[e._v("维护人：")]),r("span",[e._v(e._s(t.operateName))])])])]),r("div",{staticClass:"d-flex justify-space-between pa-10"},[r("div",{},[e._v("客户人员数")]),r("div",{staticClass:"font-bold color-main-2 font-16"},[e._v(e._s(t.customerStaffNum))])])])})),0)],1)],1)},a=[],s=r("1da1"),i=r("d4ec"),c=r("bee2"),o=r("262e"),u=r("2caf"),l=(r("96cf"),r("99af"),r("d81d"),r("b0c0"),r("d3b7"),r("9ab4")),p=r("1b40"),d=r("08de"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("van-form",[r("van-field",{attrs:{clearable:"",label:"客户名称","input-align":"right",placeholder:"请输入客户名称|客户ID"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),r("van-field",{attrs:{readonly:"",clickable:"",value:e.customerObj.name,label:"客户类型","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(1)}}}),r("van-field",{attrs:{readonly:"",clickable:"",value:e.relObj.name,label:"标签/关联","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(2)}}})],1),r("div",{staticClass:"dropdown-opts"},[r("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",size:"small",block:"",round:""},on:{click:e.reset}},[e._v("重置")]),r("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"info",size:"small",block:"",round:"",color:"#2271F5"},on:{click:e.onConfirm}},[e._v("确认")])],1),1===e.actionType?r("van-action-sheet",{attrs:{actions:e.customTypeList,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectCustomType},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),2===e.actionType?r("van-action-sheet",{attrs:{actions:e.relOptions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectRel},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e()],1)},f=[],m=(r("ac1f"),r("1276"),function(e){Object(o["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.actionShow=!1,e.actionType=0,e.customerObj={},e.relObj={},e.keywords="",e}return Object(c["a"])(r,[{key:"chooseFilter",value:function(e){this.actionShow=!0,this.actionType=e}},{key:"onSelectCustomType",value:function(e){this.customerObj=e}},{key:"onSelectRel",value:function(e){this.relObj=e}},{key:"reset",value:function(){this.customerObj={},this.relObj={},this.keywords="",this.$emit("reset")}},{key:"onConfirm",value:function(){var e={custom:this.keywords,sourceType:this.relObj.value&&this.relObj.value.split("-")[0]||"",customerType:this.customerObj.value||"",relStatus:this.relObj.value&&this.relObj.value.split("-")[1]||""};this.$emit("confirm",e)}}]),r}(p["d"]));Object(l["a"])([Object(p["c"])({type:Array,default:[]})],m.prototype,"relOptions",void 0),Object(l["a"])([Object(p["c"])({type:Array,default:[]})],m.prototype,"customTypeList",void 0),m=Object(l["a"])([Object(p["a"])({})],m);var v=m,y=v,b=(r("a077"),r("2877")),k=Object(b["a"])(y,h,f,!1,null,"45045262",null),g=k.exports,w=r("f727"),S=r("6e5a"),O=r("53ae"),L=r("4bb5"),x=Object(L["a"])("app"),j=Object(L["a"])("crm"),C=function(e){Object(o["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.value=1,e.userDataList=[],e.checkedUsers=[],e.getUserListLoading=!1,e.changeTypeShow=!1,e.filterActive=!1,e.filterShow=!1,e.relOptions=[{name:"拓展客户-已关联",value:"0-1"},{name:"拓展客户-暂未关联",value:"0-0"},{name:"业务系统内客户",value:"1"}],e.sourceType="",e.customerType="",e.relStatus="",e.searchValue="",e.selectType=0,e}return Object(c["a"])(r,[{key:"refreshData",value:function(){this.customerType="",this.relStatus="",this.sourceType="",this.searchValue="",this.filterActive=!1,this.dataList=[],this.page=1,this.finished=!1,this.loading=!1;var e=this.$refs.refreshList;e&&(this.refreshing=!0)}},{key:"onConfirm",value:function(e){this.customerType=e.customerType,this.relStatus=e.relStatus,this.sourceType=e.sourceType,this.searchValue=e.custom,this.customerType||this.relStatus||this.sourceType||this.searchValue?this.filterActive=!0:this.filterActive=!1,this.filterShow=!1,this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.dataList=[],this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this._getSzymCustomerMng()}},{key:"_getSzymCustomerMng",value:function(){var e=this;1===this.page&&(this.dataList=[]),Object(S["c"])({selectType:this.selectType,userIdList:this.checkedUsers,sourceType:this.sourceType,customerType:this.customerType,relStatus:this.relStatus,keyword:this.searchValue,pageNum:this.page,pageSize:20,hideloading:!0}).then((function(t){"200"===t.code?(e.loading=!1,e.dataList=e.dataList.concat(t.data.list),t.data.hasNextPage?e.page++:e.finished=!0):e.error=!0}))}},{key:"mapTreeList",value:function(e,t){for(var r=0;r<e.length;r++){var n,a=e[r];a.operationFlag&&t.push(a.depId),null!==(n=a.childList)&&void 0!==n&&n.length&&this.mapTreeList(a.childList,t)}return t}},{key:"toDetail",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.SET_DETAILINFOR(t),this.SET_HADDONEONDETAIL(!1),this.$router.push({name:"medicalCustomerUnitPersonDetail"});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTypeList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r={full:!0,pageNum:1,pageSize:1e5,usestatus:1,typeId:t},e.next=4,Object(w["d"])(r);case 4:return n=e.sent,a=n.data.list.map((function(e){var t=e.DIC_SELECT_ID,r=e.DIC_SELECT_NAME;return{value:t,name:r}})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"beforeRouteEnter",value:function(e,t,r){r((function(e){if("CrmIndex"===t.name||"Home"===t.name){e.customerType="",e.relStatus="",e.sourceType="",e.searchValue="",e.filterActive=!1,e.getTypeList(67).then((function(t){e.SET_CUSTOMTYPELIST(t)})),e.getTypeList(62).then((function(t){e.SET_SCIENCELINETYPELIST(t)})),e.getTypeList(63).then((function(t){e.SET_BUSINESSNATURETYPELIST(t)}));var r=JSON.parse(localStorage.getItem("webCRMPermissions")||"");e.selectType=r.some((function(e){return"szymVisit-query-all"===e||"szymVisit-query-entry"===e||"szymVisit-query-dept"===e}))?"":0;var n=e.$refs.filterPop;n&&(n.customerObj={},n.relObj={},n.keywords=""),e.refreshData()}}))}},{key:"created",value:function(){var e=this;this.customTypeList.length||(this.getTypeList(67).then((function(t){e.SET_CUSTOMTYPELIST(t)})),this.getTypeList(62).then((function(t){e.SET_SCIENCELINETYPELIST(t)})),this.getTypeList(63).then((function(t){e.SET_BUSINESSNATURETYPELIST(t)})))}}]),r}(Object(p["b"])(O["a"]));Object(l["a"])([x.Mutation],C.prototype,"SET_DETAILINFOR",void 0),Object(l["a"])([x.Mutation],C.prototype,"SET_HADDONEONDETAIL",void 0),Object(l["a"])([j.Mutation],C.prototype,"SET_CUSTOMTYPELIST",void 0),Object(l["a"])([j.Mutation],C.prototype,"SET_BUSINESSNATURETYPELIST",void 0),Object(l["a"])([j.Mutation],C.prototype,"SET_SCIENCELINETYPELIST",void 0),Object(l["a"])([j.Action],C.prototype,"actionGetDepTree",void 0),Object(l["a"])([j.Getter],C.prototype,"depTreeList",void 0),Object(l["a"])([j.Getter],C.prototype,"customTypeList",void 0),Object(l["a"])([j.Getter],C.prototype,"businessNatureTypeList",void 0),Object(l["a"])([j.Getter],C.prototype,"scienceLineTypeList",void 0),C=Object(l["a"])([Object(p["a"])({components:{FilterPop:g,DeptUser:d["a"]}})],C);var T=C,I=T,_=(r("2bc1"),Object(b["a"])(I,n,a,!1,null,"e6d54724",null));t["default"]=_.exports},a077:function(e,t,r){"use strict";r("1d1a")},ddf6:function(e,t,r){},dfb9d:function(e,t,r){}}]);