(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6887bc1b"],{"11b3":function(t,e,a){},3355:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-space-between align-baseline"},[a("div",{staticClass:"color-gray-4",style:"width: "+t.titleWidth+"px"},[t._v(t._s(t.title))]),a("div",{staticClass:"flex-1 textAlignR"},[a("span",{class:t.contentClass},[t._v(t._s(t.content))]),t.hasCopy?a("app-icon",{staticClass:"color-main-2 ml-1 copy-content",attrs:{name:"#ytcrm-fuzhi","data-clipboard-text":t.content},on:{click:t.copy}}):t._e()],1),t._t("default")],2)},r=[],i=a("d4ec"),s=a("bee2"),o=a("262e"),c=a("2caf"),l=(a("a9e3"),a("9ab4")),u=a("1b40"),d=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a,[{key:"copy",value:function(){var t=this,e=new this.$Clipboard(".copy-content");e.on("success",(function(a){t.$toast.success("复制成功"),e.destroy()})),e.on("error",(function(a){t.$toast.fail("该浏览器不支持自动复制"),e.destroy()}))}}]),a}(u["d"]);Object(l["a"])([Object(u["c"])({type:String,default:""})],d.prototype,"title",void 0),Object(l["a"])([Object(u["c"])({type:[String,Number],default:""})],d.prototype,"content",void 0),Object(l["a"])([Object(u["c"])({type:String,default:"color-black-2"})],d.prototype,"contentClass",void 0),Object(l["a"])([Object(u["c"])({type:Number,default:80})],d.prototype,"titleWidth",void 0),Object(l["a"])([Object(u["c"])({type:Boolean,default:!1})],d.prototype,"hasCopy",void 0),d=Object(l["a"])([Object(u["a"])({})],d);var f=d,p=f,m=a("2877"),h=Object(m["a"])(p,n,r,!1,null,null,null);e["a"]=h.exports},"80e5":function(t,e,a){"use strict";a("11b3")},"8b58":function(t,e,a){"use strict";a("afe1")},a133:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"c",(function(){return u}));var n=a("1da1"),r=(a("96cf"),a("b32d")),i=a("90ae");function s(t){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].post(i["d"],"/api/orderNew/getOrderDocSaler",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}function c(t){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].formDataPost(i["d"],"/api/orderNew/getOrderDtlSaler",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(t){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].post(i["d"],"/api/orderNew/updateInvoiceByInvoiceid",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}},afe1:function(t,e,a){},bee6:function(t,e,a){"use strict";a("dd8f")},cfd2:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-100"},[a("van-sticky",[a("filter-pop",{attrs:{formData:t.formData},on:{confirm:t.onFilterChange}}),a("van-tabs",{attrs:{color:"#2271F5"},on:{change:t.onRefresh},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"未审核"}}),a("van-tab",{attrs:{title:"已审核"}})],1)],1),a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{attrs:{finished:t.finished,"immediate-check":!1,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.error=e},load:t.getDataList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return a("approve-item",{key:n,staticClass:"mt-2",attrs:{data:e},on:{click:function(a){return t.toDetail(e)}}})})),1)],1)],1)},r=[],i=a("2909"),s=a("1da1"),o=a("d4ec"),c=a("bee2"),l=a("262e"),u=a("2caf"),d=(a("96cf"),a("99af"),a("b0c0"),a("9ab4")),f=a("1b40"),p=a("4bb5"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"approve-item background-color-white pa-10",on:{click:t.onClick}},[a("div",{staticClass:"d-flex align-center"},[a("div",{staticClass:"tag-blue slh"},[t._v(t._s(t.data.entryid)+"/"+t._s(t.data.entryname))]),3===t.data.status||4===t.data.status||5===t.data.status?a("div",{staticClass:"tag-red ml-2",staticStyle:{"flex-shrink":"0"}},[t._v(" "+t._s(t.statusNameArr[t.data.status])+" ")]):1===t.data.status||2===t.data.status||6===t.data.status||7===t.data.status||8===t.data.status?a("div",{staticClass:"tag-green ml-2",staticStyle:{"flex-shrink":"0"}},[t._v(" "+t._s(t.statusNameArr[t.data.status])+" ")]):a("div",{staticClass:"tag-default ml-2",staticStyle:{"flex-shrink":"0"}},[t._v("未审核")])]),a("info-item",{staticClass:"mt-2",attrs:{title:"创建时间",content:t.data.createtime}}),a("info-item",{staticClass:"mt-2",attrs:{title:"总单ID",content:t.data.invoiceid}}),a("info-item",{staticClass:"mt-2",attrs:{title:"销售合同ID",content:t.data.conid}}),a("info-item",{staticClass:"mt-2",attrs:{title:"总价格",content:t.data.totolprice}}),a("info-item",{staticClass:"mt-2",attrs:{title:"客户",content:t.data.customeid+"/"+t.data.customename}}),a("info-item",{staticClass:"mt-2",attrs:{title:"分支机构",content:t.data.contactid?t.data.contactid+"/"+t.data.contactname:"-"}}),a("info-item",{staticClass:"mt-2",attrs:{title:"运输地址",content:t.data.addressid+"/"+t.data.address}}),a("info-item",{staticClass:"mt-2",attrs:{title:"下单人",content:t.data.crmid+"/"+t.data.crmname}}),a("info-item",{staticClass:"mt-2",attrs:{title:"备注",content:t.data.memo||"-"}})],1)},h=[],v=a("3355"),b=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.statusNameArr=["待审核","已审核","已生成订单","审核未通过","传输到erp报错","ERP:作废","ERP:临时","ERP:正式","ERP:完成"],t}return Object(c["a"])(a,[{key:"onClick",value:function(){this.$emit("click")}}]),a}(f["d"]);Object(d["a"])([Object(f["c"])({type:Object,default:{}})],b.prototype,"data",void 0),b=Object(d["a"])([Object(f["a"])({components:{InfoItem:v["a"]}})],b);var g=b,D=g,O=(a("80e5"),a("2877")),y=Object(O["a"])(D,m,h,!1,null,"63899e7b",null),w=y.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"filter d-flex"},[a("div",{class:["filter-item justify-space-between px-10",t.filterShow?"color-main-2":"",t.filterSome?"background-color-main-2 color-white":""],on:{click:function(e){t.filterShow=!t.filterShow}}},[a("div",[t._v("条件筛选")]),a("van-icon",{attrs:{name:"arrow-"+(t.filterShow?"up":"down"),size:"16px"}})],1)]),a("van-popup",{attrs:{position:"top",round:"","get-container":t.getContainer},model:{value:t.filterShow,callback:function(e){t.filterShow=e},expression:"filterShow"}},[a("van-form",[a("van-field",{attrs:{readonly:"",clickable:"",value:t.filterVal.startDate?t.filterVal.startDate+" 至 "+t.filterVal.endDate:"",label:"时间范围","input-align":"right",placeholder:"点击选择时间范围"},on:{click:function(e){t.selectShow=!0}}}),a("van-field",{attrs:{clearable:"",label:"客户ID丨客户名称","input-align":"right",placeholder:"点击输入客户ID丨客户名称"},model:{value:t.filterVal.customIdOrName,callback:function(e){t.$set(t.filterVal,"customIdOrName",e)},expression:"filterVal.customIdOrName"}}),a("van-field",{attrs:{clearable:"",label:"货品ID丨货品名称","input-align":"right",placeholder:"点击输入货品ID丨货品名称"},model:{value:t.filterVal.goodsIdOrName,callback:function(e){t.$set(t.filterVal,"goodsIdOrName",e)},expression:"filterVal.goodsIdOrName"}})],1),a("div",{staticClass:"dropdown-opts"},[a("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",size:"small",block:"",round:""},on:{click:t.reset}},[t._v("重置")]),a("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"info",size:"small",block:"",round:"",color:"#2271F5"},on:{click:t.onConfirm}},[t._v("确认")])],1)],1),a("van-calendar",{attrs:{type:"range",color:"#2271F5","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.onDateConfirm},model:{value:t.selectShow,callback:function(e){t.selectShow=e},expression:"selectShow"}})],1)},j=[],C=a("d926"),S=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.filterShow=!1,t.selectShow=!1,t.minDate=new Date(2010,0,1),t.maxDate=new Date,t.columns=[],t.filterVal={startDate:"",endDate:"",customIdOrName:"",goodsIdOrName:""},t}return Object(c["a"])(a,[{key:"getContainer",value:function(){return document.querySelector(".my-container")}},{key:"filterSome",get:function(){return!(this.filterShow||!(this.filterVal.customIdOrName||this.filterVal.goodsIdOrName||this.filterVal.startDate||this.filterVal.endDate))}},{key:"onDateConfirm",value:function(t){this.selectShow=!1,this.filterVal.startDate=Object(C["c"])(new Date(t[0])),this.filterVal.endDate=Object(C["c"])(new Date(t[1]))}},{key:"reset",value:function(){this.filterVal={startDate:"",endDate:"",customIdOrName:"",goodsIdOrName:""}}},{key:"onConfirm",value:function(){this.filterShow=!1,this.$emit("confirm",this.filterVal)}}]),a}(f["d"]);Object(d["a"])([Object(f["c"])({type:Object,default:{}})],S.prototype,"formData",void 0),S=Object(d["a"])([Object(f["a"])({})],S);var I=S,x=I,N=(a("8b58"),Object(O["a"])(x,k,j,!1,null,"5b3f5c44",null)),_=N.exports,Y=a("a133"),M=Object(p["a"])("app");f["a"].registerHooks(["beforeRouteEnter"]);var R=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.active=0,t.page=1,t.pageSize=10,t.list=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.error=!1,t.formData={startDate:"",endDate:"",customIdOrName:"",goodsIdOrName:""},t}return Object(c["a"])(a,[{key:"onFilterChange",value:function(t){this.formData=t,this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.page=1,this.list=[],this.getDataList()}},{key:"getDataList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.formData,a=e.startDate,n=e.endDate,r=e.customIdOrName,s=e.goodsIdOrName,o={starttime:a?"".concat(a," 00:00:00"):"",endtime:n?"".concat(n," 23:59:59"):"",customIdOrName:r,goodsIdOrName:s,pageNum:this.page,pageSize:this.pageSize,usestatus:this.active,orderType:31},t.next=4,Object(Y["a"])(o);case 4:c=t.sent,this.loading=!1,this.refreshing=!1,c.success?(this.list=[].concat(Object(i["a"])(this.list),Object(i["a"])(c.data.list)),this.finished=!c.data.hasNextPage,this.page++):this.error=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toDetail",value:function(t){this.SET_HADDONEONDETAIL(!1);var e=t.status,a=t.invoiceid,n=t.entryid,r=t.entryname,i=t.customeid,s=t.customename,o=t.contactid,c=t.contactname,l=t.totolprice;this.$router.push({name:"CustomerOrderApproveDetail",query:{status:e,invoiceid:a,entryid:n,entryname:r,customeid:i,customename:s,contactid:o,contactname:c,totolprice:l}})}},{key:"created",value:function(){this.list=[],this.onRefresh()}},{key:"beforeRouteEnter",value:function(t,e,a){a((function(t){"Home"===e.name&&t.onRefresh()}))}},{key:"activated",value:function(){this.hadDoneOnDetail&&this.onRefresh()}}]),a}(f["d"]);Object(d["a"])([M.Mutation],R.prototype,"SET_HADDONEONDETAIL",void 0),Object(d["a"])([M.Getter],R.prototype,"hadDoneOnDetail",void 0),R=Object(d["a"])([Object(f["a"])({components:{ApproveItem:w,FilterPop:_}})],R);var V=R,E=V,F=(a("bee6"),Object(O["a"])(E,n,r,!1,null,"3fc8fcc0",null));e["default"]=F.exports},d926:function(t,e,a){"use strict";a.d(e,"c",(function(){return d})),a.d(e,"d",(function(){return f})),a.d(e,"j",(function(){return p})),a.d(e,"i",(function(){return m})),a.d(e,"k",(function(){return h})),a.d(e,"b",(function(){return v})),a.d(e,"e",(function(){return b})),a.d(e,"g",(function(){return g})),a.d(e,"f",(function(){return D})),a.d(e,"a",(function(){return O})),a.d(e,"h",(function(){return y}));a("d3b7"),a("25f0"),a("ac1f"),a("1276");var n=a("5a0c"),r=a.n(n),i=new Date,s=i.getDay(),o=i.getDate(),c=i.getMonth(),l=i.getYear();l+=l<2e3?1900:0;var u=new Date;function d(t){var e=new Date(t),a=e.getFullYear(),n=(e.getMonth()+1).toString(),r=e.getDate().toString();return+n<10&&(n="0"+n),+r<10&&(r="0"+r),a+"-"+n+"-"+r}function f(t){var e=new Date(t),a=e.getFullYear(),n=(e.getMonth()+1).toString(),r=e.getDate().toString();return+n<10&&(n="0"+n),+r<10&&(r="0"+r),a+"/"+n+"/"+r}function p(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var a=new Date(e),n=a.getDay();n=0===n?7:n;var r=a.getDate(),i=a.getMonth(),u=a.getYear();u+=u<2e3?1900:0,t=new Date(u,i,r-(n-1))}else t=new Date(l,c,o-(s-1));return d(t)}function m(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var a=new Date(e),n=a.getDay();n=0===n?7:n;var r=a.getDate(),i=a.getMonth(),u=a.getYear();u+=u<2e3?1900:0,t=new Date(u,i,r+(6-(n-1)))}else t=new Date(l,c,o+(6-(s-1)));return d(t)}function h(t){return 0===r()(t).day()?r()(t).startOf("week").subtract(6,"day").format("YYYY-MM-DD"):r()(t).startOf("week").add(1,"day").format("YYYY-MM-DD")}function v(t){return 0===r()(t).day()?r()(t).endOf("week").subtract(6,"day").format("YYYY-MM-DD"):r()(t).endOf("week").add(1,"day").format("YYYY-MM-DD")}u.setDate(1),u.setMonth(u.getMonth()-1);var b=function(t,e){var a=[],n=t.split("-"),r=e.split("-"),i=new Date(n+" 08:00:00");i.setUTCFullYear(n[0],n[1]-1,n[2]);var s=new Date(r+" 08:00:00");s.setUTCFullYear(r[0],r[1]-1,r[2]);var o,c=i.getTime(),l=s.getTime(),u=864e5;for(o=c;o<=l;)a.push(d(new Date(parseInt(String(o))))),o+=u;return a},g=function(t,e){var a=new Date(t),n="";a.setDate(a.getDate()+e);var r=a.getFullYear(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,s=a.getDate()<10?"0"+a.getDate():a.getDate();return n=r+"-"+i+"-"+s,n},D=function(t){var e,a,n,r,i=new Date(t+"-01-01"),s=i.getFullYear(),o={result0:[],result1:[],result2:[],result3:[],result4:[],result5:[],result6:[]};for(e=1;e<=12;e++){switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:r=31;break;case 4:case 6:case 9:case 11:r=30;break;case 2:r=s%4===0&&s%100!==0||s%400===0?29:28;break}for(a=1;a<=r;a++){i.setMonth(e-1,a),n=i.getDay();var c=i.getFullYear(),l=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,u=i.getDate()<10?"0"+i.getDate():i.getDate();o["result"+n].push(c+"-"+l+"-"+u)}}return o};function O(t){switch(t){case 0:return"日";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";default:break}}var y=function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=t.split("-"),s=0;if(n>parseInt(i[0])||n==parseInt(i[0])&&r>parseInt(i[1])){var o=new Date(a+1,parseInt(i[0])-1,parseInt(i[1])).toLocaleDateString(),c=Date.parse(o),l=Date.parse(e.toLocaleDateString());s=(c-l)/864e5}else{var u=new Date(a,parseInt(i[1])-1,parseInt(i[2])).toLocaleDateString(),d=Date.parse(u),f=Date.parse(e.toLocaleDateString());s=(d-f)/864e5}if(s<0){var p=a+1,m=p%4===0&&p%100!==0||p%400===0?366:365;s+=m}return s}},dd8f:function(t,e,a){}}]);