(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-671f5310"],{1402:function(e,t,i){"use strict";i("c780")},"437a":function(e,t,i){"use strict";var a=i("bee2"),n=i("d4ec"),r=i("262e"),s=i("2caf"),o=i("9ab4"),c=i("1b40"),l=i("4bb5"),u=Object(l["a"])("app"),d=Object(l["a"])("crm");c["a"].registerHooks(["beforeRouteEnter"]);var p=function(e){Object(r["a"])(i,e);var t=Object(s["a"])(i);function i(){var e;return Object(n["a"])(this,i),e=t.apply(this,arguments),e.filterShow=!1,e.filterActive=!1,e.tabType=0,e}return Object(a["a"])(i)}(c["d"]);Object(o["a"])([u.Getter],p.prototype,"userInfor",void 0),Object(o["a"])([d.Mutation],p.prototype,"SET_DETAILOBJ",void 0),Object(o["a"])([u.Mutation],p.prototype,"SET_QUERYPARAMA",void 0),Object(o["a"])([u.Mutation],p.prototype,"SET_HADDONEONDETAIL",void 0),Object(o["a"])([u.Getter],p.prototype,"hadDoneOnDetail",void 0),p=Object(o["a"])([Object(c["a"])({})],p),t["a"]=p},"53ae":function(e,t,i){"use strict";var a=i("d4ec"),n=i("bee2"),r=i("262e"),s=i("2caf"),o=(i("b0c0"),i("9ab4")),c=i("1b40");c["a"].registerHooks(["beforeRouteEnter"]);var l=function(e){Object(r["a"])(i,e);var t=Object(s["a"])(i);function i(){var e;return Object(a["a"])(this,i),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(n["a"])(i,[{key:"beforeRouteEnter",value:function(e,t,i){i((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),i}(c["d"]);l=Object(o["a"])([Object(c["a"])({})],l),t["a"]=l},6435:function(e,t,i){"use strict";i.d(t,"h",(function(){return s})),i.d(t,"g",(function(){return o})),i.d(t,"f",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"k",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"i",(function(){return p})),i.d(t,"j",(function(){return h})),i.d(t,"c",(function(){return f})),i.d(t,"e",(function(){return m})),i.d(t,"d",(function(){return b}));var a=i("1da1"),n=(i("96cf"),i("b32d")),r=i("90ae"),s=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/salesManage/getOutOfStockList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get(r["d"],"/api/salesManage/getOutOfStockDetail",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/salesManage/outOfStockSubmit",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/salesManage/batchUnlockOrder",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/salesManage/submitLimitSaleAdvice",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get(r["d"],"/api/salesManage/checkTicket",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/salesManage/salerActive",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/salesManage/secondActive",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get(r["d"],"/api/salesManage/getInventoryByLot",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get(r["d"],"/api/salesManage/getPendingNum",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get(r["d"],"/api/salesManage/getOperatingCustomerStatus",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},7385:function(e,t,i){},"77de":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"d",(function(){return u}));var a=i("1da1"),n=(i("96cf"),i("b32d")),r=i("90ae"),s=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/SubscribeArrive/getCanSubGoodsList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/SubscribeArrive/getSubscribeArriveList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get(r["d"],"/api/SubscribeArrive/activeSubscribe",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get(r["d"],"/api/SubscribeArrive/unsubscribe",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post(r["d"],"/api/SubscribeArrive/subscribeArrive",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"8e9c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"outOfStock full-height"},[e.messageEntry?e._e():i("van-sticky",[i("div",{staticClass:"header px-10 pt-10 white-bg"},[i("div",{class:["pa-10 common-filter",e.filterShow?"color-main-2":"",e.filterActive?"common-filter--active":""],on:{click:function(t){e.filterShow=!e.filterShow}}},[i("div",[e._v("条件筛选")]),i("van-icon",{attrs:{name:"arrow-"+(e.filterShow?"up":"down"),size:"16px"}})],1),i("van-tabs",{attrs:{color:"#2271F5"},on:{click:e.tabTypeClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}},e._l(e.tabList,(function(e){return i("van-tab",{key:e,attrs:{title:e}})})),1)],1)]),i("div",{attrs:{id:"filterContainer"}},[i("van-pull-refresh",{staticClass:"pt-10 px-10 pb-100",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[i("van-list",{attrs:{offset:20,finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e.loading||e.dataList.length||2!==e.tabType||0!==e.conType&&4!==e.conType?e._e():i("div",[i("app-empty",{staticClass:"mt-6 white-bg",attrs:{description:""}}),i("div",{staticClass:"background-color-white textAlignC pb-2 font-16"},[e._v("暂无可激活订单")])],1),e.loading||e.dataList.length||(0===e.conType||4===e.conType)&&(0!==e.conType&&4!==e.conType||2===e.tabType)?e._e():i("app-empty",{staticClass:"mt-6 white-bg",attrs:{description:e.description}}),e._l(e.dataList,(function(t,a){return i("lock-list",{key:"OutOfStock"+a,attrs:{role:+e.role,tabType:e.tabType,conType:e.conType,item:t,selectLabelFlag:e.batchUnlockFlag,index:a},on:{subscribeClick:function(i){return e.subscribeClick(i,t)},detailClick:function(i){e.detailClick(t,a,String(e.role))}}})}))],2)],1)],1),i("van-popup",{directives:[{name:"show",rawName:"v-show",value:!e.messageEntry&&e.filterShow,expression:"!messageEntry && filterShow"}],attrs:{position:"top","get-container":"#filterContainer"},model:{value:e.filterShow,callback:function(t){e.filterShow=t},expression:"filterShow"}},[i("filter-pop",{attrs:{conType:e.conType,role:e.role},on:{showPickerDateClick:function(t){e.showPickerDate=!0},operatingCustomerClick:e.operatingCustomerClick,filterSubmit:e.filterSubmit,reset:e.reset}})],1),e.messageEntry?e._e():i("div",{staticClass:"commonOpButton-footer"},[e.batchUnlockFlag||2!==e.conType&&3!==e.conType&&5!==e.conType||2!==e.role||1!==e.querySelfFlag&&!e.managementOpflagForPurchaser?e._e():i("van-button",{attrs:{plain:"",round:"",color:"#2271F5",type:"primary"},on:{click:e.batchUnlockClick},scopedSlots:e._u([{key:"icon",fn:function(){return[i("icon-Svg",{attrs:{size:"small",color:"white",name:"ytcrm-jiesuo_unlock"}})]},proxy:!0}],null,!1,1078193104)},[e._v(" 批量解锁 ")]),e.batchUnlockFlag?i("van-button",{attrs:{plain:"",round:"",color:"#BABABA",type:"primary"},on:{click:e.cancelbatchUnlock}},[e._v(" 取消 ")]):e._e(),e.batchUnlockFlag?i("van-button",{attrs:{round:"",color:"#00A870",type:"primary"},on:{click:function(t){return e.deblockingClick(2)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i("icon-Svg",{attrs:{size:"small",color:"white",name:"ytcrm-a-lujing3"}})]},proxy:!0}],null,!1,773185756)},[e._v(" 同意 ")]):e._e(),e.batchUnlockFlag?i("van-button",{attrs:{round:"",color:"#E34D59",type:"primary"},on:{click:function(t){return e.deblockingClick(-1)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i("icon-Svg",{attrs:{size:"small",color:"white",name:"ytcrm-a-lujing21"}})]},proxy:!0}],null,!1,3433002412)},[e._v(" 不同意 ")]):e._e(),e.batchUnlockFlag?e._e():i("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:e.orderClick}},[i("div",{staticClass:"d-flex align-center"},[i("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),i("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[e._v(" 当前"+e._s(0===e.orderByTime?"按时间降序":1===e.orderByTime?"按时间升序":2===e.orderByTime?"按客户ID降序":3===e.orderByTime?"按客户ID升序":"")+" ")])],1)]),(e.needQueryAll||e.needQueryAllEntrys||e.needQueryAllDept)&&!e.batchUnlockFlag?i("van-button",{attrs:{round:"",color:"#2271F5",type:"primary",plain:""},on:{click:e.justSelfClick}},[e._v(" "+e._s(1===e.querySelfFlag?"显示全部":"显示与我相关"))]):e._e()],1),e.messageEntry?e._e():i("van-popup",{style:{width:"100%",height:"90%"},attrs:{position:"bottom",round:"",closeable:""},model:{value:e.batchPopFlag,callback:function(t){e.batchPopFlag=t},expression:"batchPopFlag"}},[i("div",{staticClass:"px-4 pt-4 batchPop pb-100"},[i("div",{staticClass:"header"},[e._v("批量订单")]),e._l(e.selectObjList,(function(t,a){return i("div",{key:a,staticClass:"common-list positionR mb-2"},[i("div",{staticClass:"common-list-content"},[i("div",{staticClass:"common-list-two fontWeight"},[i("div",{staticClass:"tag-primary-plain"},[e._v(e._s(t.taskId))]),i("div",[e._v(e._s(t.createTime))])]),i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("核算单元")]),i("span",[e._v(e._s(t.entryId)+"/"+e._s(t.entryName))])]),i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("客户")]),i("span",[e._v(e._s(t.customerId)+"/"+e._s(t.customerName))])]),i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("品种")]),i("span",[e._v(e._s(t.goodsId)+"/"+e._s(t.goodsName))])]),i("van-field",{attrs:{name:"radio",label:"是否同意","input-align":"right"},scopedSlots:e._u([{key:"input",fn:function(){return[e._v(" 同意 ")]},proxy:!0}],null,!0)}),i("van-field",{attrs:{label:"解锁数量",type:"digit","input-align":"right",placeholder:"请输入解锁数量"},model:{value:t.agreeNumber,callback:function(i){e.$set(t,"agreeNumber",i)},expression:"item.agreeNumber"}}),2===e.conType?i("van-field",{attrs:{label:"调整合同价",type:"number","input-align":"right",placeholder:"请输入调整合同价"},model:{value:t.contractPrice,callback:function(i){e.$set(t,"contractPrice",i)},expression:"item.contractPrice"}}):e._e(),i("van-field",{attrs:{autosize:"",rows:"1",type:"textarea",label:"备注","input-align":"right",placeholder:"请输入备注"},model:{value:t.remark,callback:function(i){e.$set(t,"remark",i)},expression:"item.remark"}})],1),i("div",{staticClass:"commonButton-footer d-flex justify-center"},[i("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:function(t){e.batchPopFlag=!1}}},[e._v("取消")]),i("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:e.batchPopClick}},[e._v("确定")])],1)])}))],2)]),i("van-action-sheet",{attrs:{actions:e.customerStatusOptions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.operatingCustomSelect,cancel:function(t){e.operatingCustomerShow=!1}},model:{value:e.operatingCustomerShow,callback:function(t){e.operatingCustomerShow=t},expression:"operatingCustomerShow"}}),i("van-action-sheet",{attrs:{"is-link":"",actions:e.orderOptions,"close-on-click-action":"","cancel-text":"取消"},on:{select:e.orderSelect,cancel:function(t){e.showFilter=!1}},model:{value:e.showFilter,callback:function(t){e.showFilter=t},expression:"showFilter"}})],1)},n=[],r=i("1da1"),s=i("5530"),o=i("d4ec"),c=i("bee2"),l=i("262e"),u=i("2caf"),d=(i("96cf"),i("a4d3"),i("e01a"),i("d81d"),i("99af"),i("d3b7"),i("a434"),i("b0c0"),i("9ab4")),p=i("1b40"),h=i("53ae"),f=i("437a"),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("van-form",[i("van-field",{attrs:{clickable:"",readonly:"",label:"时间范围",placeholder:"点击选择时间范围","input-align":"right"},on:{click:e.showPickerDateClick},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),i("van-field",{attrs:{label:"货品信息","input-align":"right",placeholder:"ID精确搜索|名称模糊搜索|操作码模糊搜索"},model:{value:e.filterObj.goodsKeyword,callback:function(t){e.$set(e.filterObj,"goodsKeyword",t)},expression:"filterObj.goodsKeyword"}}),i("van-field",{attrs:{label:"客户信息","input-align":"right",placeholder:"ID精确搜索|名称模糊搜索"},model:{value:e.filterObj.customerKeyword,callback:function(t){e.$set(e.filterObj,"customerKeyword",t)},expression:"filterObj.customerKeyword"}}),2===e.role?i("van-field",{attrs:{label:"核心客户类型","input-align":"right",placeholder:"点击切换客户类型",readonly:""},on:{click:function(t){e.showTypeFlag=!0}},model:{value:e.filterObj.coreHospitalName,callback:function(t){e.$set(e.filterObj,"coreHospitalName",t)},expression:"filterObj.coreHospitalName"}}):e._e(),2===e.role?i("van-field",{attrs:{value:e.filterObj.exgoodsIds.length?"已选择"+e.filterObj.exgoodsIds.length+"个不包含货品ID":"",label:"不包含货品","input-align":"right",placeholder:"点击选择不包含货品",readonly:""},on:{click:e.exGoodsClick}}):e._e(),2!==e.conType&&3!==e.conType&&5!==e.conType||2!==e.role?e._e():i("van-field",{attrs:{label:"营运客户分类","input-align":"right",clickable:"",readonly:"",placeholder:"点击选择营运客户分类"},on:{click:e.operatingCustomerClick},model:{value:e.filterObj.operatingCustomerStatus,callback:function(t){e.$set(e.filterObj,"operatingCustomerStatus",t)},expression:"filterObj.operatingCustomerStatus"}})],1),i("div",{staticClass:"dropdown-opts"},[i("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",size:"small",block:"",round:""},on:{click:e.reset}},[e._v("重置")]),i("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"info",size:"small",block:"",round:"",color:"#2271F5"},on:{click:e.filterSubmit}},[e._v("确认")])],1),e.showPickerDate?i("van-calendar",{attrs:{"get-container":"#app","default-date":e.dateRangeValue,type:"range","min-date":e.minDate,maxDate:e.maxDate,color:"#2271F5","allow-same-day":""},on:{confirm:e.onConfirmDate},model:{value:e.showPickerDate,callback:function(t){e.showPickerDate=t},expression:"showPickerDate"}}):e._e(),i("van-action-sheet",{attrs:{actions:[{name:"全部",id:""},{name:"非核心客户",id:0},{name:"核心客户",id:1}],"cancel-text":"取消",description:"类型选择","get-container":"body","close-on-click-action":""},on:{select:e.showTypeSelect},model:{value:e.showTypeFlag,callback:function(t){e.showTypeFlag=t},expression:"showTypeFlag"}}),i("van-popup",{style:{height:"90%",width:"100%"},attrs:{"get-container":"body",round:"",position:"bottom",closeable:""},model:{value:e.exGoodsShow,callback:function(t){e.exGoodsShow=t},expression:"exGoodsShow"}},[i("div",{staticClass:"header font-16 py-4 fontWeight textAlignC"},[e._v("不包含货品")]),e.exGoodsShow?i("exGoodsPop",{attrs:{exgoodsIds:e.filterObj.exgoodsIds},on:{handleFilterOk:e.handleFilterOk,cancelClick:e.cancelClick}}):e._e()],1)],1)},b=[],g=i("3835"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"warp"},[i("van-search",{attrs:{placeholder:"搜索","input-align":"center"},on:{input:e.onRefresh,clear:e.onRefresh},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[i("van-list",{attrs:{offset:20,finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[i("van-checkbox-group",{model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[i("van-cell-group",e._l(e.dataList,(function(t,a){return i("van-cell",{key:a,attrs:{clickable:"",title:""+t.label},on:{click:function(t){return e.toggle(a)}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[i("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{name:t.value}})]},proxy:!0}],null,!0)})})),1)],1)],1)],1),i("div",{staticClass:"d-flex algin-center justify-space-around mx-2 button-div"},[i("van-button",{attrs:{round:""},on:{click:e.cancelClick}},[e._v(" 取消 ")]),i("van-button",{attrs:{round:"",type:"info"},on:{click:e.handleFilterOk}},[e._v(" 确定 ")])],1)],1)},y=[],k=i("f727"),O=function(e){Object(l["a"])(i,e);var t=Object(u["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.searchValue="",e.result=[],e}return Object(c["a"])(i,[{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,this._getAuthorizedList()}},{key:"_getAuthorizedList",value:function(){var e=this;1===this.page&&(this.dataList=[]);var t={menuName:"采购锁控模块",querySelfFlag:this.querySelfFlag,goodsKeyword:this.searchValue,pageNum:this.page,pageSize:20};Object(k["b"])(t).then((function(t){var i=t.data.list.map((function(e){return{value:e.goodsId,label:e.goodsId+"/"+e.goodsName}}));e.dataList=e.dataList.concat(i),t.data.hasNextPage?e.page++:e.finished=!0,e.loading=!1}))}},{key:"toggle",value:function(e){this.$refs.checkboxes[e].toggle()}},{key:"cancelClick",value:function(){this.$emit("cancelClick")}},{key:"handleFilterOk",value:function(){this.$emit("handleFilterOk",this.result)}},{key:"mounted",value:function(){this.result=this.exgoodsIds}}]),i}(Object(p["b"])(h["a"]));Object(d["a"])([Object(p["c"])()],O.prototype,"querySelfFlag",void 0),Object(d["a"])([Object(p["c"])()],O.prototype,"exgoodsIds",void 0),O=Object(d["a"])([Object(p["a"])({})],O);var j=O,w=j,C=(i("ebb1"),i("2877")),_=Object(C["a"])(w,v,y,!1,null,"ad736622",null),x=_.exports,T=function(e){Object(l["a"])(i,e);var t=Object(u["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.exGoodsShow=!1,e.dateRange="",e.dateRangeValue=[],e.showPickerDate=!1,e.minDate=new Date(2010,0,1),e.maxDate=new Date,e.filterObj={startTime:"",endTime:"",goodsKeyword:"",customerKeyword:"",operatingCustomerStatus:"",coreHospitalType:"",coreHospitalName:"",exgoodsIds:[]},e.showTypeFlag=!1,e}return Object(c["a"])(i,[{key:"filterSubmit",value:function(){this.$emit("filterSubmit",this.filterObj)}},{key:"showPickerDateClick",value:function(){this.showPickerDate=!0}},{key:"onConfirmDate",value:function(e){var t=Object(g["a"])(e,2),i=t[0],a=t[1];this.filterObj.startTime=this.$dayjs(i).format("YYYY-MM-DD"),this.filterObj.endTime=this.$dayjs(a).format("YYYY-MM-DD"),this.showPickerDate=!1,this.dateRange="".concat(this.filterObj.startTime," 至 ").concat(this.filterObj.endTime)}},{key:"reset",value:function(){this.$emit("reset"),this.filterObj={startTime:this.$dayjs().subtract(29,"day").format("YYYY-MM-DD"),endTime:this.$dayjs().format("YYYY-MM-DD"),goodsKeyword:"",customerKeyword:"",operatingCustomerStatus:"",exgoodsIds:[]},this.dateRange="".concat(this.filterObj.startTime," 至 ").concat(this.filterObj.endTime)}},{key:"operatingCustomerClick",value:function(){this.$emit("operatingCustomerClick")}},{key:"showTypeSelect",value:function(e){this.filterObj.coreHospitalType=e.id,this.filterObj.coreHospitalName=0===e.id||e.id?e.name:""}},{key:"handleFilterOk",value:function(e){this.filterObj.exgoodsIds=e,this.exGoodsShow=!1}},{key:"cancelClick",value:function(){this.exGoodsShow=!1,this.filterObj.exgoodsIds=[]}},{key:"exGoodsClick",value:function(){this.exGoodsShow=!0}},{key:"mounted",value:function(){this.filterObj.startTime=this.$dayjs().subtract(29,"day").format("YYYY-MM-DD"),this.filterObj.endTime=this.$dayjs().format("YYYY-MM-DD"),this.dateRange="".concat(this.filterObj.startTime," 至 ").concat(this.filterObj.endTime),this.dateRangeValue=[new Date(this.filterObj.startTime),new Date(this.filterObj.endTime)]}}]),i}(p["d"]);Object(d["a"])([Object(p["c"])()],T.prototype,"conType",void 0),Object(d["a"])([Object(p["c"])()],T.prototype,"role",void 0),T=Object(d["a"])([Object(p["a"])({components:{exGoodsPop:x}})],T);var S=T,R=S,A=(i("9367"),Object(C["a"])(R,m,b,!1,null,"0ba8d332",null)),D=A.exports,F=i("6435"),I=i("77de"),L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"common-list positionR mb-2",on:{click:e.detailClick}},[i("div",{staticClass:"common-list-content"},[i("div",{staticClass:"common-list-two fontWeight"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"tag-primary-plain"},[e._v(e._s(e.item.taskId))]),1===e.item.coreHospital&&2===e.role?i("div",{staticClass:"common-detail-two-right",staticStyle:{"justify-content":"end"}},[i("div",{staticClass:"tag-primary-plain",attrs:{round:""}},[e._v("核心医院")])]):e._e()]),i("div",[e._v(e._s(e.item.createTime))])]),i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("核算单元")]),i("span",[e._v(e._s(e.item.entryId)+"/"+e._s(e.item.entryName))])]),i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("客户")]),i("span",[e._v(e._s(e.item.customerId)+"/"+e._s(e.item.customerName))])]),i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("品种")]),i("span",[e._v(e._s(e.item.goodsId)+"/"+e._s(e.item.goodsName)+" "),3===e.conType&&e.item.goodsCurrencyName&&1===e.role?i("span",[e._v("/"+e._s(e.item.goodsCurrencyName))]):e._e()])]),i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("规格")]),i("span",{staticClass:"value fontWeight"},[e._v(e._s(e.item.goodsType))])]),i("div",{staticClass:"common-list-two",staticStyle:{"align-items":"center"}},[i("div",[i("span",{staticClass:"title"},[e._v("当前可销总库存")]),i("span",{staticClass:"color-main value fontWeight"},[e._v(e._s(e.item.totalAvailableStockQuantity))])]),i("div",{staticClass:"d-flex justify-space-between align-center",staticStyle:{"min-width":"120px"}},[i("span",{staticClass:"title"},[e._v("合同数量")]),i("span",{staticClass:"fontWeight"},[e._v(e._s(e.item.contractQuantity))])])]),0!==e.conType&&4!==e.conType||3!==e.tabType&&2!==e.tabType?i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("订单来源")]),i("span",{staticClass:"fontWeight value"},[e._v(e._s("自动补货"===e.item.signAddress?"自动补货":"huazhao"===e.item.signAddress?"华招平台":"manbing"===e.item.signAddress?"慢病平台":"微信"===e.item.signAddress?"微信订单":"其他"))])]):i("div",{staticClass:"common-list-two"},[i("div",[i("span",{staticClass:"title"},[e._v("已开数量")]),i("span",{staticClass:"value fontWeight"},[e._v(e._s(e.item.confirmedQuantity))])]),i("div",{staticStyle:{"min-width":"120px"}},[i("span",{staticClass:"title"},[e._v("订单来源")]),i("span",{staticClass:"fontWeight value"},[e._v(e._s(e.item.isAutoOrder&&1===e.item.isAutoOrder?"自动补货":"huazhao"===e.item.signAddress?"华招平台":"manbing"===e.item.signAddress?"慢病平台":"微信"===e.item.signAddress?"微信订单":"其他"))])])]),1===e.conType&&2===e.tabType?i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("到货时间")]),i("span",[e._v(e._s(e.item.arrivedTime))])]):e._e(),4===e.conType&&2===e.tabType?i("div",{staticClass:"common-list-one"},[i("span",{staticClass:"title"},[e._v("到票时间")]),i("span",[e._v(e._s(e.item.arrivedTime))])]):e._e()]),1===e.role?i("div",{staticClass:"common-list-button clearfix"},[i("div",{staticClass:"right"},[0!==e.conType?i("van-button",{staticClass:"ml-4",attrs:{size:"small",color:e.item.goodsReminder?"#BABABA":"#2271F5",round:""},on:{click:function(t){return t.stopPropagation(),e.subscribeClick(1)}}},[e._v(e._s(e.item.goodsReminder?"已订阅到货提醒":"订阅到货提醒"))]):e._e(),4!==e.conType?i("van-button",{staticClass:"ml-4",attrs:{size:"small",color:e.item.ticketReminder?"#BABABA":"#2271F5",round:""},on:{click:function(t){return t.stopPropagation(),e.subscribeClick(2)}}},[e._v(e._s(e.item.ticketReminder?"已订阅到票提醒":"订阅到票提醒"))]):e._e()],1)]):e._e(),e.selectLabelFlag?i("div",{staticClass:"changeClass",on:{click:function(t){return t.stopPropagation(),e.changeCheckClick.apply(null,arguments)}}},[i("van-checkbox",{attrs:{"icon-size":"30px"},model:{value:e.item.checked,callback:function(t){e.$set(e.item,"checked",t)},expression:"item.checked"}})],1):e._e()])},$=[],Y=function(e){Object(l["a"])(i,e);var t=Object(u["a"])(i);function i(){return Object(o["a"])(this,i),t.apply(this,arguments)}return Object(c["a"])(i,[{key:"detailClick",value:function(){this.$emit("detailClick")}},{key:"changeCheckClick",value:function(){this.$set(this.item,"checked",!this.item.checked)}},{key:"subscribeClick",value:function(e){this.$emit("subscribeClick",e)}}]),i}(p["d"]);Object(d["a"])([Object(p["c"])()],Y.prototype,"item",void 0),Object(d["a"])([Object(p["c"])()],Y.prototype,"index",void 0),Object(d["a"])([Object(p["c"])()],Y.prototype,"conType",void 0),Object(d["a"])([Object(p["c"])()],Y.prototype,"tabType",void 0),Object(d["a"])([Object(p["c"])()],Y.prototype,"role",void 0),Object(d["a"])([Object(p["c"])()],Y.prototype,"selectLabelFlag",void 0),Y=Object(d["a"])([Object(p["a"])({})],Y);var M=Y,P=M,N=(i("1402"),Object(C["a"])(P,L,$,!1,null,"132cc207",null)),E=N.exports,B=function(e){Object(l["a"])(i,e);var t=Object(u["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.tabList=["未处理","已处理","已到货"],e.role=1,e.orderByTime=0,e.querySelfFlag=1,e.detailIndex=-1,e.conType="",e.filterObj={startTime:"",endTime:"",goodsKeyword:"",customerKeyword:"",operatingCustomerStatus:"",coreHospitalType:"",coreHospitalName:"",exgoodsIds:[]},e.description="暂无数据",e.needQueryAll=!1,e.needQueryAllEntrys=!1,e.needQueryAllDept=!1,e.batchUnlockFlag=!1,e.batchPopFlag=!1,e.batchClickType=0,e.selectObjList=[],e.customerStatusOptions=[],e.operatingCustomerShow=!1,e.messageEntry=!1,e.showFilter=!1,e.orderOptions=[{name:"按时间降序",value:0},{name:"按时间升序",value:1},{name:"按客户ID降序",value:2},{name:"按客户ID升序",value:3}],e}return Object(c["a"])(i,[{key:"tabTypeClick",value:function(e){this.tabType=e,this.onRefresh()}},{key:"filterSubmit",value:function(e){this.filterObj=Object(s["a"])({},e),this.filterObj.goodsKeyword||this.filterObj.customerKeyword||this.filterObj.startTime||this.filterObj.operatingCustomerStatus||this.filterObj.endTime||this.filterObj.exgoodsIds.length||this.filterObj.coreHospitalType?this.filterActive=!0:this.filterActive=!1,this.filterShow=!1,this.onRefresh()}},{key:"reset",value:function(){this.filterObj.goodsKeyword="",this.filterObj.customerKeyword="",this.filterObj.operatingCustomerStatus="",this.filterObj.coreHospitalType="",this.filterObj.coreHospitalName="",this.filterObj.exgoodsIds=[],this.filterObj.startTime=this.$dayjs().subtract(29,"day").format("YYYY-MM-DD"),this.filterObj.endTime=this.$dayjs().format("YYYY-MM-DD"),this.filterActive=!0,this.filterShow=!1,this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.selectObjList=[],this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,this._queryOutOfStockInfo()}},{key:"_queryOutOfStockInfo",value:function(){var e=this;1===this.page&&(this.dataList=[]),Object(F["h"])({conType:this.conType,goodsKeyword:this.messageEntry?this.$route.query.goodsId:this.filterObj.goodsKeyword,customerKeyword:this.filterObj.customerKeyword,operatingCustomerStatus:this.filterObj.operatingCustomerStatus,startDate:this.filterObj.startTime?this.filterObj.startTime+" 00:00:00":"",endDate:this.filterObj.endTime?this.filterObj.endTime+" 23:59:59":"",excludeGoodsIdList:this.filterObj.exgoodsIds,identity:this.role,orderByTime:0===this.orderByTime||1===this.orderByTime?this.orderByTime:null,orderByCustomer:2===this.orderByTime?0:3===this.orderByTime?1:null,pageNum:this.page,pageSize:10,querySelfFlag:this.querySelfFlag,statusFlag:this.messageEntry?this.$route.query.statusFlag:this.tabType,coreHospital:this.filterObj.coreHospitalType}).then((function(t){if("200"===t.code){var i=[];i=2===e.conType||3===e.conType||5===e.conType?t.data.list.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{agreeNumber:e.contractQuantity})})):t.data.list,e.dataList=e.dataList.concat(i),t.data.hasNextPage?e.page++:e.finished=!0,e.loading=!1,e.description="暂无数据"}else"PMS00015"===t.code&&(e.description=t.msg,e.loading=!1,e.finished=!0)}))}},{key:"subscribeClick",value:function(e,t){this._subscribeArrive(e,t)}},{key:"_subscribeArrive",value:function(e,t){var i=this;Object(I["d"])({entryId:t.entryId,goodsId:t.goodsId,subType:e}).then((function(a){200==a.code?1==e?(i.$set(t,"goodsReminder",!0),i.$toast.success("订阅到货提醒成功")):(i.$set(t,"ticketReminder",!0),i.$toast.success("订阅到票提醒成功")):i.$toast.fail(a.msg)}))}},{key:"detailClick",value:function(e,t,i){this.detailIndex=t,2===this.conType||3===this.conType||5===this.conType?this.SET_QUERYPARAMA({taskId:e.taskId,querySelfFlag:this.querySelfFlag,role:i,operatingCustomerStatus:e.operatingCustomerStatus,ddlId:e.ddlId,ddlName:e.ddlName}):this.SET_QUERYPARAMA({taskId:e.taskId,querySelfFlag:this.querySelfFlag,role:i}),this.$router.push({name:"LockDetail"})}},{key:"justSelfClick",value:function(){1===this.querySelfFlag?this.querySelfFlag=2:this.querySelfFlag=1,this.onRefresh()}},{key:"orderClick",value:function(){this.showFilter=!0}},{key:"orderSelect",value:function(e){this.orderByTime=e.value,this.onRefresh()}},{key:"batchUnlockClick",value:function(){this.batchUnlockFlag=!0}},{key:"cancelbatchUnlock",value:function(){this.batchUnlockFlag=!1,this.selectObjList=[];for(var e=0;e<this.dataList.length;e++){var t=this.dataList[e];t.checked&&this.$set(t,"checked",!1)}}},{key:"deblockingClick",value:function(e){var t=this;this.batchClickType=e,this.selectObjList=[];for(var i=[],a=0;a<this.dataList.length;a++){var n=this.dataList[a];n.checked&&(this.selectObjList.push(n),i.push({isAgree:e,recordId:n.recordId,remark:n.remark,taskId:n.taskId,unlockQuantity:2===e?n.agreeNumber:"",adjustPrice:n.contractPrice}))}if(i.length){var s=this.Yz(i);s&&(-1===e?this.$dialog.confirm({title:"提示",message:"是否确认不同意已选".concat(this.selectObjList.length,"条订单"),confirmButtonColor:"#2271f5",beforeClose:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"confirm"===a?(t._batchUnlockOrder(i),n()):n();case 1:case"end":return e.stop()}}),e)})));function a(t,i){return e.apply(this,arguments)}return a}()}):2===e&&(this.batchPopFlag=!0))}else this.$toast.fail("请选择要处理的数据")}},{key:"batchPopClick",value:function(){for(var e=[],t=0;t<this.selectObjList.length;t++){var i=this.selectObjList[t];e.push({isAgree:2,recordId:i.recordId,remark:i.remark,taskId:i.taskId,unlockQuantity:i.agreeNumber,adjustPrice:i.contractPrice})}this._batchUnlockOrder(e)}},{key:"_batchUnlockOrder",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(t);case 2:i=e.sent,"200"===i.code?(this.$toast.success(i.msg),this.batchUnlockFlag=!1,this.batchPopFlag=!1,this.onRefresh()):this.$toast.fail(i.msg);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Yz",value:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(!i.isAgree)return void this.$toast.fail("解锁意见不能为空");if(2===i.isAgree){if(i.agreeNumber>i.contractQuantity)return void this.$toast.fail("解锁数量不能超过合同数量");if(""===i.agreeNumber)return void this.$toast.fail("解锁数量不能为空");if(parseInt(i.agreeNumber)<=0)return void this.$toast.fail("解锁数量不能小于等于0")}}return!0}},{key:"_getOperatingCustomerStatus",value:function(){var e=this;Object(F["d"])({}).then((function(t){e.customerStatusOptions=t.data.map((function(e){return{name:e,value:e}}))}))}},{key:"operatingCustomerClick",value:function(){this.operatingCustomerShow=!0}},{key:"operatingCustomSelect",value:function(e){for(var t=0;t<this.customerStatusOptions.length;t++){var i=this.customerStatusOptions[t];i.value===e.value?i.color="#2271f5":i.color=""}var a=this.$refs.popRef;a.filterObj.operatingCustomerStatus=e.value}},{key:"init",value:function(){var e=JSON.parse(localStorage.getItem("permissions")||"");switch(1===this.role?(this.needQueryAll=e.some((function(e){return"QueryAllSalesManageForSaler"===e})),this.needQueryAllEntrys=e.some((function(e){return"QueryEntriesSalesManageForSaler"===e})),this.needQueryAllDept=e.some((function(e){return"QuerySubordinateSalesManageForSaler"===e}))):2===this.role&&(this.needQueryAll=e.some((function(e){return"QueryAllSalesManageForSupply"===e})),this.needQueryAllEntrys=e.some((function(e){return"QueryEntriesSalesManageForSupply"===e})),this.needQueryAllDept=e.some((function(e){return"QuerySubordinateSalesManageForSupply"===e}))),this.role=+this.$route.query.role,this.conType=+this.$route.query.conType,this.messageEntry=!!this.$route.query.messageFlag,this.conType){case 0:1===this.role?this.tabList=["未处理","已处理","已到货","已激活"]:this.tabList=["未处理","已处理","已到货"];break;case 2:case 3:case 5:this.tabList=["未审核","已通过","未通过"];break;case 6:1===this.role?this.tabList=["未处理","已处理","已激活"]:this.tabList=["未处理","已处理"];break;case 7:case 8:this.tabList=["未激活","已激活"];break;case 4:1===this.role?this.tabList=["未处理","已处理","已到票","已激活"]:this.tabList=["未处理","已处理","已到票"];break;default:break}}},{key:"mounted",value:function(){this.filterObj.startTime=this.$dayjs().subtract(29,"day").format("YYYY-MM-DD"),this.filterObj.endTime=this.$dayjs().format("YYYY-MM-DD"),this.filterActive=!0,2!==this.role||2!==this.conType&&3!==this.conType&&5!==this.conType||this._getOperatingCustomerStatus(),this.init()}},{key:"activated",value:function(){this.hadDoneOnDetail&&-1!==this.detailIndex&&(this.dataList.splice(this.detailIndex,1),this.SET_HADDONEONDETAIL(!1),this.detailIndex=-1),this.init()}},{key:"beforeRouteEnter",value:function(e,t,i){i((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.tabType=0,e.querySelfFlag=1,e.orderByTime=0,e.detailIndex=-1,e.filterObj.goodsId="",e.filterObj.goodsOpcode="",e.filterObj.customerId="",e.filterObj.customName="",e.filterObj.coreHospitalType="",e.filterObj.coreHospitalName="",e.filterObj.startTime=e.$dayjs().subtract(29,"day").format("YYYY-MM-DD"),e.filterObj.endTime=e.$dayjs().format("YYYY-MM-DD"),e.filterActive=!0)}))}}]),i}(Object(p["b"])(h["a"],f["a"]));B=Object(d["a"])([Object(p["a"])({components:{filterPop:D,LockList:E}})],B);var Q=B,q=Q,H=(i("b802"),Object(C["a"])(q,a,n,!1,null,"53f44179",null));t["default"]=H.exports},9367:function(e,t,i){"use strict";i("ae17")},abb1:function(e,t,i){},ae17:function(e,t,i){},b802:function(e,t,i){"use strict";i("7385")},c780:function(e,t,i){},ebb1:function(e,t,i){"use strict";i("abb1")}}]);