(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-148f1f42"],{2483:function(t,e,a){},"3c79":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-100"},[a("van-sticky",[a("filter-pop",{attrs:{formData:t.formData},on:{confirm:t.onFilterChange}}),a("van-tabs",{attrs:{color:"#2271F5"},on:{change:t.onActiveChange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"未处理"}}),a("van-tab",{attrs:{title:"已处理"}}),a("van-tab",{attrs:{title:"已审核"}})],1)],1),a("van-pull-refresh",{staticClass:"px-10 pt-10",on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.error=e},load:t.getDataList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,i){return a("impulse-item",{key:i,staticClass:"mb-2",attrs:{active:t.active,data:e},on:{click:function(a){return t.toDetail(e)},download:t.download}})})),1)],1),a("van-popup",{staticStyle:{width:"80%"},model:{value:t.fileShow,callback:function(e){t.fileShow=e},expression:"fileShow"}},t._l(t.curFiles,(function(e){return a("file-item",{key:e.index,attrs:{data:e},on:{download:t._downloadFile}})})),1)],1)},n=[],s=a("2909"),o=a("1da1"),c=a("d4ec"),l=a("bee2"),r=a("262e"),d=a("2caf"),u=(a("96cf"),a("99af"),a("ac1f"),a("1276"),a("caad"),a("9ab4")),f=a("1b40"),h=a("4bb5"),p=a("dc4ae"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gray-block box-shadow",on:{click:t.onClick}},[a("div",{staticClass:"white-block pa-10"},[a("div",{staticClass:"d-flex justify-space-between align-center"},[a("div",{staticClass:"tag-blue"},[t._v(t._s(t.data.id))]),a("div",{staticClass:"font-bold"},[t._v(t._s(t.data.confirmDate)+"(确认时间)")])]),a("info-item",{staticClass:"mt-2",attrs:{title:"品种",content:t.data.goodsId?t.data.goodsId+"/"+t.data.goodsName:""}}),a("info-item",{staticClass:"mt-2",attrs:{title:"规格",content:t.data.goodsType}}),a("info-item",{staticClass:"mt-2",attrs:{title:"生产厂家",content:t.data.factoryName,contentClass:"font-bold"}}),a("info-item",{staticClass:"mt-2",attrs:{title:"冲差截止日期",content:t.data.endDate.split(" ")[0],contentClass:"color-main-2"}}),a("info-item",{staticClass:"mt-2",attrs:{title:"冲差说明",content:t.data.memo,contentClass:"color-main-2"}}),a("info-item",{staticClass:"mt-2",attrs:{title:"创建人",content:t.data.creId+"/"+t.data.creName}})],1),a("div",{staticClass:"inner-block textAlignR"},[t.data.files&&t.data.files.length?a("van-button",{staticClass:"submit-btn",attrs:{type:"info",size:"small",round:"",color:"#2271F5"},on:{click:function(e){return e.stopPropagation(),t.download.apply(null,arguments)}}},[t._v("下载附件")]):a("van-button",{attrs:{size:"small",round:"",disabled:""},on:{click:function(t){t.stopPropagation()}}},[t._v("下载附件")])],1)])},m=[],b=a("3355"),g=function(t){Object(r["a"])(a,t);var e=Object(d["a"])(a);function a(){return Object(c["a"])(this,a),e.apply(this,arguments)}return Object(l["a"])(a,[{key:"onClick",value:function(){this.$emit("click")}},{key:"download",value:function(){this.$emit("download",this.data.files)}}]),a}(f["d"]);Object(u["a"])([Object(f["c"])({type:Object,default:{}})],g.prototype,"data",void 0),g=Object(u["a"])([Object(f["a"])({components:{InfoItem:b["a"]}})],g);var y=g,O=y,j=(a("f2d4"),a("2877")),w=Object(j["a"])(O,v,m,!1,null,"2d8dda8d",null),k=w.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex align-center pa-10 white-bg"},[t.isImage(t.fileType)?a("van-image",{attrs:{src:t.data.address,width:"30",height:"30"}}):a("app-icon",{staticClass:"font-30",attrs:{name:"#ytcrm-word"}}),a("div",{staticClass:"flex-1 mx-2 slh"},[t._v(" "+t._s(t.fileName)+" ")]),a("div",{staticClass:"color-main-2",on:{click:function(e){return t._downloadFile(t.data)}}},[t._v("点击下载")])],1)])},D=[],_=function(t){Object(r["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.apply(this,arguments),t.fileType="",t.fileName="",t}return Object(l["a"])(a,[{key:"isImage",value:function(t){var e=["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"];return e.includes(t)}},{key:"_downloadFile",value:function(t){this.$emit("download",t)}},{key:"mounted",value:function(){var t=this.data.address.split("/");this.fileName=t[t.length-1];var e=this.data.address.split(".");this.fileType=e[e.length-1]}}]),a}(f["d"]);Object(u["a"])([Object(f["c"])({type:Object,default:{}})],_.prototype,"data",void 0),_=Object(u["a"])([Object(f["a"])({})],_);var x=_,I=x,F=(a("e4de"),Object(j["a"])(I,C,D,!1,null,"6ee7957c",null)),N=F.exports,S=a("ca48"),E=Object(h["a"])("app"),T=function(t){Object(r["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.apply(this,arguments),t.active=0,t.page=1,t.pageSize=10,t.list=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.error=!1,t.formData={docId:"",dtlId:"",goods:"",customer:"",factory:"",start:"",end:""},t.fileShow=!1,t.curFiles=[],t}return Object(l["a"])(a,[{key:"onFilterChange",value:function(t){this.formData=t,this.onRefresh()}},{key:"onActiveChange",value:function(){this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.list=[],this.page=1,this.getDataList()}},{key:"getDataList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,o,c,l,r,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.formData,a=e.docId,i=e.dtlId,n=e.goods,o=e.customer,c=e.factory,l=e.start,r=e.end,d={docId:a,dtlId:i,goods:n,customer:o,factory:c,start:l,end:r,status:this.active+1,pageNum:this.page,pageSize:this.pageSize},t.next=5,Object(S["c"])(d);case 5:u=t.sent,this.loading=!1,this.refreshing=!1,u.success?(this.list=[].concat(Object(s["a"])(this.list),Object(s["a"])(u.data.list)),this.page++,this.finished=!u.data.hasNextPage):this.error=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toDetail",value:function(t){var e=t.id;this.SET_HADDONEONDETAIL(!1),this.$router.push({name:"ImpulseDifferenceDetail",params:{statusType:String(this.active+1),docId:e}})}},{key:"download",value:function(t){1===t.length?this._downloadFile(t[0]):(this.fileShow=!0,this.curFiles=t)}},{key:"_downloadFile",value:function(t){var e=t.address.split("."),a=["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"];a.includes(e[e.length-1])?window.location.href=t.address:this.$router.push({path:"/impulseDifference/download",query:{fileUrl:t.address}})}},{key:"created",value:function(){this.list=[]}},{key:"activated",value:function(){this.hadDoneOnDetail&&this.onRefresh()}}]),a}(f["d"]);Object(u["a"])([E.Mutation],T.prototype,"SET_HADDONEONDETAIL",void 0),Object(u["a"])([E.Getter],T.prototype,"hadDoneOnDetail",void 0),T=Object(u["a"])([Object(f["a"])({components:{FilterPop:p["a"],ImpulseItem:k,FileItem:N}})],T);var R=T,$=R,A=Object(j["a"])($,i,n,!1,null,null,null);e["default"]=A.exports},d5db:function(t,e,a){},e4de:function(t,e,a){"use strict";a("d5db")},f2d4:function(t,e,a){"use strict";a("2483")}}]);