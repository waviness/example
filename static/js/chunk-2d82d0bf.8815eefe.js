(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d82d0bf"],{9257:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-color-white full-height"},[a("van-sticky",[a("div",{staticClass:"header background-color-white pa-4 d-flex align-center"},[a("div",{staticClass:"flex-3 d-flex flex-column"},[a("span",{staticClass:"font-24 fontWeight color-black-1",staticStyle:{"font-family":"'HarmonyOS Sans SC Black'"}},[t._v("客户趋势详情")]),a("span",{staticClass:"font-12 color-gray-5"},[t._v(t._s(t.entryObj.name))])]),a("div",{staticClass:"flex-2 font-16 textAlignR",staticStyle:{"font-family":"'HarmonyOS Sans SC Bold'"},on:{click:t.calendarClick}},[a("span",{staticClass:"time color-gray-4 fontWeight"},[t._v(t._s(t.dateTime))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)])]),a("div",{staticClass:"pa-2"},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("div",{staticClass:"card-2 background-color-white px-2 mb-2"},[a("div",{staticClass:"title d-flex justify-space-between"},[a("span",{staticClass:"font-18"},[t._v(t._s(t.detailInfor.customerOpClassName))]),a("div",{staticClass:"d-flex align-center"},[a("app-icon",{staticClass:"iconSvg",staticStyle:{width:"20px",height:"20px"},attrs:{name:t.detailInfor.periodComparePercent<0?"#ytcrm-rise-red":"#ytcrm-fall-green"}}),a("span",{staticClass:"pl-1 font-20",class:t.getColor(t.detailInfor.periodComparePercent)},[t._v(" "+t._s(Math.abs(t.detailInfor.periodComparePercent))+"%")])],1)]),a("div",{staticClass:"d-flex px-2"},[a("div",{staticClass:"flex-2 d-flex py-2 flex-column justify-space-around"},[a("div",{staticClass:"progressWarp positionR mb-1"},[a("div",{staticClass:"text font-12 py-1"},[t._v("销售实绩："+t._s(t.detailInfor.salesAmount)+"万元")]),a("div",{staticClass:"progress background-color-main",style:"width:"+t.detailInfor.progress+"%;"})]),a("div",{staticClass:"progressWarp positionR"},[a("div",{staticClass:"text font-12 py-1"},[t._v("去年同期销售实绩："+t._s(t.detailInfor.lastSalesAmount)+"万元")]),a("div",{staticClass:"progress background-color-main-4",style:"width:"+t.detailInfor.lastProgress+"%;"})])])])]),t.loading?a("div",{staticClass:"d-flex justify-center pa-8"},[a("van-loading",{attrs:{type:"spinner",color:"#3561F2"}})],1):t._e(),t._l(t.cstmCtgryDeptSalesResList,(function(e,s){return a("div",{key:"goods"+s,staticClass:"cardWarp px-4 py-10",class:s===t.cstmCtgryDeptSalesResList.length-1?"":"borderBottom"},[a("van-progress",{staticClass:"mb-1",attrs:{percentage:e.progress,color:"#3561F2","show-pivot":!1,"stroke-width":"12"}}),a("div",{staticClass:"d-flex justify-space-between align-center font-14 py-10"},[a("span",{staticClass:"flex-3 slh"},[t._v(t._s(e.deptId)+"/"+t._s(e.deptName))]),a("span",{staticClass:"color-main-3 flex-2 pl-1"},[t._v(t._s(e.salesAmount)+"万元")]),a("span",{staticClass:"flex-1 textAlignR",class:t.getColor(e.periodComparePercent)},[t._v(t._s(t.getFH(e.periodComparePercent))+t._s(e.periodComparePercent)+"%")])])],1)}))],2)],1),a("van-calendar",{attrs:{"default-date":t.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:t.calendarConfirm},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}})],1)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),c=a("262e"),l=a("2caf"),d=(a("96cf"),a("ac1f"),a("5319"),a("d81d"),a("b680"),a("a9e3"),a("9ab4")),p=a("1b40"),f=a("2279"),u=a("5b92"),m=a("7909"),C=a("4bb5"),g=Object(C["a"])("app"),h=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.entryObj={},t.calendarShow=!1,t.refreshing=!1,t.loading=!1,t.dateTime="",t.cstmCtgryDeptSalesResList=[],t.dataList=[],t}return Object(o["a"])(a,[{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}},{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}},{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"calendarConfirm",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.calendarShow=!1,this.SET_CSJNOWTIME(e),this.SET_CSJCHANGETIME(!0),this.dateTime=this.$dayjs(e).format("YYYY-MM-DD"),this._getCstmCtgryDeptSales();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onRefresh",value:function(){this._getCstmCtgryDeptSales(),this.refreshing=!1}},{key:"_getCstmCtgryDeptSales",value:function(){var t=this;this.loading=!0,this.dataList=[];var e={deptId:this.entryObj.id,customerOpClassId:this.detailInfor.customerOpClassId,orderColumn:"salesAmount",orderType:"0",selectDate:this.dateTime,deptSalesFlag:1,timeDimFlag:1};Object(f["f"])(e).then((function(e){t.loading=!1;var a=[];e.data.map((function(t){a.push(t.salesAmount)})),t.cstmCtgryDeptSalesResList=e.data.map((function(t){return{salesAmount:Object(u["d"])(t.salesAmount,1),periodComparePercent:Object(u["d"])(t.periodComparePercent,2),periodCompareNetIncrease:Object(u["d"])(t.periodCompareNetIncrease,1),deptName:t.deptName,deptId:t.deptId,progress:Number(m["d"](m["c"](Number(t.salesAmount),m["g"](a)),100)).toFixed(1)}}))}))}},{key:"created",value:function(){this.entryObj=this.$route.query,this.dateTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),this._getCstmCtgryDeptSales()}}]),a}(p["d"]);Object(d["a"])([g.Getter],h.prototype,"csjNowTime",void 0),Object(d["a"])([g.Getter],h.prototype,"csjChangeTime",void 0),Object(d["a"])([g.Mutation],h.prototype,"SET_CSJNOWTIME",void 0),Object(d["a"])([g.Mutation],h.prototype,"SET_CSJCHANGETIME",void 0),Object(d["a"])([g.Getter],h.prototype,"detailInfor",void 0),h=Object(d["a"])([Object(p["a"])({})],h);var v=h,y=v,b=(a("d0e3"),a("2877")),S=Object(b["a"])(y,s,r,!1,null,"ba7dad88",null);e["default"]=S.exports},cb6b:function(t,e,a){},d0e3:function(t,e,a){"use strict";a("cb6b")}}]);