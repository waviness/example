(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc12390e"],{"17b9":function(e,a,t){"use strict";t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){return o})),t.d(a,"b",(function(){return c}));var r=t("1da1"),n=(t("96cf"),t("b32d")),s=t("90ae"),i=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n["a"].formDataPost(s["a"],"/api/login/doLogin",a));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),o=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n["a"].post(s["a"],"/api/login/agreeAgreement",a));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),c=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n["a"].formDataPost(s["a"],"/api/login/plaintextLogin",a));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},2246:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"plaintextLogin"},[t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.username,callback:function(a){e.username=a},expression:"username"}}),t("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1),t("button",{on:{click:e.scanner}},[e._v("扫码")]),e._v("  "),t("button",{on:{click:e.close}},[e._v("关闭")]),e._v("  "),t("div",{staticClass:"container"},[e.mask?t("div",{staticClass:"mask"}):e._e()]),t("h4")],1)},n=[],s=t("2909"),i=t("d4ec"),o=t("bee2"),c=t("262e"),u=t("2caf"),l=(t("e9c4"),t("d3b7"),t("159b"),t("7db0"),t("ac1f"),t("5319"),t("4e82"),t("1276"),t("99af"),t("9ab4")),h=t("1b40"),d=t("17b9"),b=t("bd70"),p=t("4bb5"),m=t("224f"),y=Object(p["a"])("app"),f=function(e){Object(c["a"])(t,e);var a=Object(u["a"])(t);function t(){var e;return Object(i["a"])(this,t),e=a.apply(this,arguments),e.username="",e.password="",e.menuObj={},e.codeReader={},e.mask=!1,e.message="",e.selectedDeviceId="",e.hasTabFlag={ywzxFlag:!1,wdFlag:!1,sjzxFlag:!1},e.hasTabObj={ywzx:{},wd:{},sjzx:{}},e}return Object(o["a"])(t,[{key:"onSubmit",value:function(e){var a=this;localStorage.clear();var t={userCode:e.username,password:e.password};Object(d["b"])(t).then((function(e){for(var t=[],r=0;r<e.data.resListTree.length;r++){var n=e.data.resListTree[r];2===n.plantformType&&t.push(n)}for(var i=[],o=[],c=[],u={},l=[],h={},d={},p=[],m=0;m<e.data.resListTree.length;m++){var y=e.data.resListTree[m];if(1===y.plantformType&&y.children){var f=a.getPersmissions(y.children,[]);localStorage.setItem("webCRMPermissions",JSON.stringify(f))}y.pmsName&&"经营看板"==y.pmsName&&y.children&&(y.children.forEach((function(e){"平衡毛利"==e.pmsName&&e.children&&e.children.forEach((function(e){e.path&&p.push(e.pmsName)}))})),localStorage.setItem("phmlArray",JSON.stringify(p))),2!==y.plantformType||"AppIndex"===y.keyword&&!y.children||(i.push(y),"operationSystemWX"===y.keyword&&y.children?y.children.forEach((function(e){"lockMenuForSalesman"===e.keyword&&(h=e),3===e.pmsType&&o.push(e)})):"AppIndex"===y.keyword&&y.children?y.children.forEach((function(e){3===e.pmsType&&(e.icon="#ytcrm-"+e.keyword,c.push(e)),2===e.pmsType&&"medicalTradeForphone"===e.keyword&&(u=e)})):"taskIndex"===y.keyword&&y.children&&(l=Object(s["a"])(y.children),d=l.find((function(e){return"lockMenuForPurchaser"===e.keyword}))))}h&&h.children&&h.children.length>0&&(e.data.lockPowerForSalesman=!0,e.data.lockMenuForSalesman=b["e"]),d&&d.children&&d.children.length>0&&(e.data.lockPowerForPurchaser=!0,e.data.lockMenuForPurchaser=b["d"]),e.data.resListTree=i,e.data.indexMenu=o,e.data.crmMenu=c,e.data.taskMenu=l,e.data.medicalObj=u,a.getNewMenuObj(t),a.getNewPortMenu(e.data.lockMenuForSalesman,e.data.lockMenuForPurchaser),e.data.hasTabFlag=a.hasTabFlag,e.data.ywzx=a.hasTabObj.ywzx,e.data.sjzx=a.hasTabObj.sjzx,e.data.wd=a.hasTabObj.wd;var w=a.getPersmissions(e.data.resListTree,[]);localStorage.setItem("permissions",JSON.stringify(w)),localStorage.setItem("deviceType","3"),localStorage.setItem("type","1"),a.SET_USERINFOR(e.data),a.$router.replace({path:"/"})}))}},{key:"getNewMenuObj",value:function(e){var a=this;e.reduce((function(e,t){return t.newPortalType&&3===t.pmsType?(e[t.newPortalType]||(e[t.newPortalType]=[]),e[t.newPortalType].push(t)):t.children&&a.getNewMenuObj(t.children),e}),this.menuObj)}},{key:"getNewPortMenu",value:function(e,a){for(var t in this.menuObj)if(Object.prototype.hasOwnProperty.call(this.menuObj,t)){var r=this.menuObj[t].sort((function(e,a){return e.orderNum-a.orderNum})),n=t.split("000"),i=n[0],o=n[1];switch(+i){case 11:switch(this.hasTabFlag.ywzxFlag=!0,+o){case 1:this.hasTabObj.ywzx[t]={isMoreShow:r.length>=8,arr:r,title:["日常管理","客情、库存、任务等"]};break;case 2:this.hasTabObj.ywzx[t]={isMoreShow:r.length>=8,arr:r,title:["订单管理","报货单、二销、客户订单审批等"]};break;case 3:this.hasTabObj.ywzx[t]={isMoreShow:r.length>=8,arr:r,title:["锁控管理","锁控、证照、质量等"]};break;case 4:this.hasTabObj.ywzx[t]={isMoreShow:r.length>=8,arr:r,title:["业务协同","逾期、回款、询证函等"]};break;case 5:this.hasTabObj.ywzx[t]={isMoreShow:r.length>=8,arr:r,title:["项目管理","VBP"]};break;default:break}break;case 44:this.hasTabFlag.wdFlag=!0,this.hasTabObj.wd[t]=r;break;case 33:this.hasTabFlag.sjzxFlag=!0,this.hasTabObj.sjzx[t]=r;break;default:break}}a&&a.length&&(this.hasTabObj.ywzx&&this.hasTabObj.ywzx[110003]&&this.hasTabObj.ywzx[110003].arr&&this.hasTabObj.ywzx[110003].arr.length?(this.hasTabObj.ywzx[110003].arr=this.hasTabObj.ywzx[110003].arr.concat(a),this.hasTabObj.ywzx[110003].isMoreShow=this.hasTabObj.ywzx[110003].arr.length>=8):(this.hasTabObj.ywzx[110003]={},this.hasTabObj.ywzx[110003].arr=[],this.hasTabObj.ywzx[110003]={arr:a,title:["订单异常处理","锁控、证照、质量等"]},this.hasTabObj.ywzx[110003].isMoreShow=this.hasTabObj.ywzx[110003].arr.length>=8)),e&&e.length&&(this.hasTabObj.ywzx&&this.hasTabObj.ywzx[110003]&&this.hasTabObj.ywzx[110003].arr&&this.hasTabObj.ywzx[110003].arr.length?(this.hasTabObj.ywzx[110003].arr=this.hasTabObj.ywzx[110003].arr.concat(Object(s["a"])(e)),this.hasTabObj.ywzx[110003].isMoreShow=this.hasTabObj.ywzx[110003].arr.length>=8):(this.hasTabObj.ywzx[110003]={},this.hasTabObj.ywzx[110003].arr=[],this.hasTabObj.ywzx[110003]={arr:e,title:["订单异常处理","锁控、证照、质量等"]},this.hasTabObj.ywzx[110003].isMoreShow=this.hasTabObj.ywzx[110003].arr.length>=8))}},{key:"getPersmissions",value:function(e,a){var t=this;return e.forEach((function(e){var r;1!==e.pmsType&&4!==e.pmsType||a.push(e.keyword),null!==(r=e.children)&&void 0!==r&&r.length&&t.getPersmissions(e.children,a)})),a}},{key:"init",value:function(){var e=this;this.codeReader=new m["BrowserMultiFormatReader"],this.codeReader.getVideoInputDevices().then((function(a){a.length>1?e.selectedDeviceId=a[1].deviceId:e.selectedDeviceId=a[0].deviceId}))}},{key:"mounted",value:function(){this.init()}},{key:"scanner",value:function(){this.$router.push({path:"/scanCode"})}},{key:"close",value:function(){this.codeReader.reset(),this.message="",this.mask=!1}},{key:"created",value:function(){localStorage.removeItem("type")}}]),t}(h["d"]);Object(l["a"])([y.Mutation],f.prototype,"SET_USERINFOR",void 0),f=Object(l["a"])([Object(h["a"])({})],f);var w=f,v=w,g=(t("e4e0"),t("2877")),j=Object(g["a"])(v,r,n,!1,null,"de57b02e",null);a["default"]=j.exports},9963:function(e,a,t){"use strict";function r(e,a){var t=Object.setPrototypeOf;t?t(e,a):e.__proto__=a}function n(e,a){void 0===a&&(a=e.constructor);var t=Error.captureStackTrace;t&&t(e,a)}t.d(a,"a",(function(){return i}));var s=function(){var e=function(a,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])},e(a,t)};return function(a,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),i=function(e){function a(a,t){var s=this.constructor,i=e.call(this,a,t)||this;return Object.defineProperty(i,"name",{value:s.name,enumerable:!1,configurable:!0}),r(i,s.prototype),n(i),i}return s(a,e),a}(Error)},abfe:function(e,a,t){},bd70:function(e,a,t){"use strict";t.d(a,"g",(function(){return r})),t.d(a,"h",(function(){return n})),t.d(a,"b",(function(){return s})),t.d(a,"f",(function(){return i})),t.d(a,"a",(function(){return o})),t.d(a,"c",(function(){return c})),t.d(a,"e",(function(){return l})),t.d(a,"d",(function(){return h}));t("b0c0");for(var r=[{id:1,name:"30%-50%"},{id:2,name:"51%-70%"},{id:3,name:"71%-90%"},{id:4,name:"91%-100%"}],n=[{id:1,name:"按比例使用"},{id:2,name:"一刀切，达量后放开"},{id:3,name:"一刀切，达量后不放开"}],s=[{id:1,name:"书记"},{id:2,name:"分管院长"},{id:3,name:"药剂科主任"},{id:4,name:"药事会讨论"}],i=[{id:1,name:"限门诊"},{id:2,name:"限病区"},{id:3,name:"限老干部特定人员使用"},{id:4,name:"限主任处方"}],o=[{id:1,name:"年度调整"},{id:2,name:"季度调整"},{id:3,name:"月度调整"}],c=[{id:1,name:"限控"},{id:2,name:"—刀切"},{id:3,name:"中选和非中选共存"}],u=[{value:0,name:"缺货",icon:"#ytcrm-qh"},{value:2,name:"价格限销",icon:"#ytcrm-jgxx"},{value:3,name:"库存下限",icon:"#ytcrm-kcxx"},{value:4,name:"两票制",icon:"#ytcrm-lpz"},{value:5,name:"紧俏药品",icon:"#ytcrm-jqyp"},{value:6,name:"禁限销",icon:"#ytcrm-jxx"},{value:7,name:"库存状态",icon:"#ytcrm-kczt"},{value:8,name:"近效期",icon:"#ytcrm-jxq"}],l=[],h=[],d=0;d<u.length;d++){var b=u[d];l.push({icon:b.icon+"-yw",path:"/lockList?role=1&conType=".concat(b.value),pmsName:b.name,pmsId:437,type:b.value,role:1,ingShowFlag:!1}),7!==b.value&&8!==b.value&&h.push({icon:b.icon+"-cg",path:"/lockList?role=2&conType=".concat(b.value),pmsName:b.name,pmsId:445,role:2,type:b.value,ingShowFlag:!1})}},e4e0:function(e,a,t){"use strict";t("abfe")}}]);