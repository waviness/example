(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-288e4819"],{"21c0":function(t,a,e){"use strict";e("99cc")},"99cc":function(t,a,e){},ac35:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"screenshotBody",staticClass:"full-HW van-popup-bg"},[e("switch-and-statistics",{attrs:{selectMode:2,nowName:t.nowName,isLong:!t.isChild,info:t.info,per:3===t.mode?t.info.data9:-1},on:{openSelect:t.openSelect,changeTime:t.changeTime}}),e("select-popup",{ref:"selectPopup",attrs:{selectMode:2,nowData:t.nowData},on:{changeChoose:t.changeChoose}}),t.isChild?t._e():e("scroll-bar",{attrs:{textList:t.textList},nativeOn:{click:function(a){return t.toDimension.apply(null,arguments)}}}),t.isChild?t._e():e("van-tabs",{staticStyle:{padding:"0 10px"},attrs:{color:"#2271F5"},on:{change:t.handleTabChange},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-tab",{attrs:{title:"业务员"}}),e("van-tab",{attrs:{title:"Top20客户"}})],1),t.isChild?t._e():e("div",{staticClass:"detail-body"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"white-block pb-3 mb-4"},[t._l(t.salesmanList,(function(a,s){return e("detail-card",{key:s,attrs:{data:a,name:a.name,per:a.data8},nativeOn:{click:function(e){return t.toDetail(a)}}})})),e("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.salesmanList.length,expression:"salesmanList.length == 0"}],staticClass:"py-7",attrs:{description:"暂无数据"}})],2),e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"white-block pb-3 mb-4"},[t._l(t.khList,(function(a,s){return e("detail-card",{key:s,attrs:{data:a,name:a.id+"/"+a.name},nativeOn:{click:function(e){return t.toDetail(a)}}})})),e("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.khList.length,expression:"khList.length == 0"}],staticClass:"py-7",attrs:{description:"暂无数据"}})],2),e("screenshot",{attrs:{buttonMode:0===t.active?2:0},on:{openFilter:t.openFilter}}),e("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(a){t.showFilter=a},expression:"showFilter"}},[e("div",{staticClass:"px-2 pb-3 font-14"},[e("div",{staticClass:"mb-3"},[t._v("排序")]),e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(a,s){return e("div",{key:s,staticClass:"filter-div px-5 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(a){return t.chooseFilter(s)}}},[t._v(" "+t._s(a)+" ")])})),0),e("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[e("van-button",{attrs:{round:""},on:{click:t.refresh}},[t._v(" 重置 ")]),e("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)])])],1),t.isChild?e("div",{staticClass:"detail-body mt-2"},[e("div",{staticClass:"white-block pb-3 mb-4"},[t._l(t.dataList,(function(a,s){return e("detail-card",{key:s,attrs:{data:a,name:a.name,per:a.data8},nativeOn:{click:function(e){return t.toDetail(a)}}})})),e("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.dataList.length,expression:"dataList.length == 0"}],staticClass:"py-7",attrs:{description:"暂无数据"}})],2),e("screenshot")],1):t._e()],1)},i=[],n=e("1da1"),r=e("d4ec"),o=e("bee2"),d=e("262e"),l=e("2caf"),h=(e("96cf"),e("b0c0"),e("d3b7"),e("25f0"),e("e9c4"),e("0eb6"),e("b7ef"),e("8bd4"),e("4e82"),e("159b"),e("9ab4")),c=e("1b40"),u=e("020e"),m=e("8b7c"),p=e("d926"),f=function(t){Object(d["a"])(e,t);var a=Object(l["a"])(e);function e(){var t;return Object(r["a"])(this,e),t=a.apply(this,arguments),t.salesmanList=[],t.khList=[],t.dataList=[],t.textList=["点击查看客户丨品种维度详情"],t.active=0,t.nowFilter=6,t.stagingFilter={filterIndex:6},t.filterList=["本年累计销售额升序","本年累计销售额降序","本月销售额升序","本月销售额降序","年同比升序"," 年同比降序","月同比升序","月同比降序"],t.isChild=!1,t}return Object(o["a"])(e,[{key:"changeChoose",value:function(t){this.nowName=t.name,this.nowData=t.id.toString(),this.isChild=t.isChild,this.initData()}},{key:"changeTime",value:function(){this.initData()}},{key:"toDimension",value:function(){var t={name:this.nowName,id:this.nowData,selectMode:2};this.$crmUserClick({catalogType:1,catalogTypeName:"CDP",cucrId:"",menuId:2,menuName:"部门权限",menuOperation:"点击查看客户丨品种维度详情",operationType:4}),t=JSON.stringify(t),t=window.btoa(encodeURI(t)),this.$router.push({name:"dimensionList",query:t})}},{key:"toDetail",value:function(t){if(this.$crmUserClick({catalogType:1,catalogTypeName:"CDP",cucrId:"",menuId:t.id,menuName:t.name,menuOperation:t.name+"下钻点击",operationType:4}),this.isChild){var a={name:t.name,id:t.id};this.$router.push({name:"bmList",query:a})}else if(1===this.active){var e={name:this.nowName+"(客户详情)",id:this.nowData,detailName:t.id+"/"+t.name,detailId:t.id,type:1,buttonMode:2};e=JSON.stringify(e),e=window.btoa(encodeURI(e)),this.$router.push({name:"analysisList",query:e})}else{var s={name:t.name,id:t.id};this.$router.push({name:"staffList",query:s})}}},{key:"openFilter",value:function(){this.showFilter=!0,this.refresh()}},{key:"refresh",value:function(){this.stagingFilter.filterIndex=this.nowFilter}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"handleFilterOk",value:function(){switch(this.showFilter=!1,this.nowFilter=this.stagingFilter.filterIndex,this.nowFilter){case 6:this.salesmanList=this.salesmanList.sort((function(t,a){return t.data3-a.data3}));break;case 7:this.salesmanList=this.salesmanList.sort((function(t,a){return a.data3-t.data3}));break;case 0:this.salesmanList=this.salesmanList.sort((function(t,a){return t.data5-a.data5}));break;case 1:this.salesmanList=this.salesmanList.sort((function(t,a){return a.data5-t.data5}));break;case 2:this.salesmanList=this.salesmanList.sort((function(t,a){return t.data2-a.data2}));break;case 3:this.salesmanList=this.salesmanList.sort((function(t,a){return a.data2-t.data2}));break;case 4:this.salesmanList=this.salesmanList.sort((function(t,a){return t.data6-a.data6}));break;case 5:this.salesmanList=this.salesmanList.sort((function(t,a){return a.data6-t.data6}));break}}},{key:"handleTabChange",value:function(){}},{key:"initData",value:function(){var t=this,a={deptId:this.nowData,date:Object(p["c"])(this.nowTime),type:1};this.khList=[],this.salesmanList=[],this._dataCenterHome(a).then((function(){t.isChild?t._querySubDeptSales():t._queryDeptTopCustData(a).then((function(){t._queryDeptSaleData(a)}))}))}},{key:"_dataCenterHome",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["b"])(a);case 2:e=t.sent,200==e.code&&e.data?(this.info.data1=e.data.dailySales?e.data.dailySales:0,this.info.data2=e.data.unStrategySales?e.data.unStrategySales:0,this.info.data3=e.data.monthSales?e.data.monthSales:0,this.info.data4=e.data.lastMonthSales?e.data.lastMonthSales:0,this.info.data5=e.data.monthGrowthRate?e.data.monthGrowthRate:0,this.info.data6=e.data.yearSales?e.data.yearSales:0,this.info.data7=e.data.lastYearSales?e.data.lastYearSales:0,this.info.data8=e.data.yearGrowthRate?e.data.yearGrowthRate:0,this.info.data9=e.data.progress?e.data.progress:0,this.info.data10=e.data.tzYearGrowthRate?e.data.tzYearGrowthRate:0):(this.info.data1=0,this.info.data2=0,this.info.data3=0,this.info.data4=0,this.info.data5=0,this.info.data6=0,this.info.data7=0,this.info.data8=0,this.info.data9=0,this.info.data10=0);case 4:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}()},{key:"_queryDeptTopCustData",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.khList=[],t.next=3,Object(m["z"])(a);case 3:e=t.sent,200==e.code&&e.data&&e.data.forEach((function(t){s.khList.push({id:t.deptId,name:t.deptName,data1:t.dataHomeVO.dailySales?t.dataHomeVO.dailySales:0,data2:t.dataHomeVO.monthSales?t.dataHomeVO.monthSales:0,data3:t.dataHomeVO.monthGrowthRate?t.dataHomeVO.monthGrowthRate:0,data4:t.dataHomeVO.lastMonthSales?t.dataHomeVO.lastMonthSales:0,data5:t.dataHomeVO.yearSales?t.dataHomeVO.yearSales:0,data6:t.dataHomeVO.yearGrowthRate?t.dataHomeVO.yearGrowthRate:0,data7:t.dataHomeVO.lastYearSales?t.dataHomeVO.lastYearSales:0,data8:t.progress?t.progress:0})}));case 5:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}()},{key:"_queryDeptSaleData",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.salesmanList=[],t.next=3,Object(m["y"])(a);case 3:e=t.sent,200==e.code&&e.data&&(e.data.forEach((function(t){s.salesmanList.push({id:t.deptId,name:t.deptName,data1:t.dataHomeVO.dailySales?t.dataHomeVO.dailySales:0,data2:t.dataHomeVO.monthSales?t.dataHomeVO.monthSales:0,data3:t.dataHomeVO.monthGrowthRate?t.dataHomeVO.monthGrowthRate:0,data4:t.dataHomeVO.lastMonthSales?t.dataHomeVO.lastMonthSales:0,data5:t.dataHomeVO.yearSales?t.dataHomeVO.yearSales:0,data6:t.dataHomeVO.yearGrowthRate?t.dataHomeVO.yearGrowthRate:0,data7:t.dataHomeVO.lastYearSales?t.dataHomeVO.lastYearSales:0,data8:t.progress?t.progress:0})})),this.handleFilterOk());case 5:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}()},{key:"_querySubDeptSales",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var a,e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={deptId:this.nowData,date:Object(p["c"])(this.nowTime)},this.dataList=[],t.next=4,Object(m["E"])(a);case 4:e=t.sent,200==e.code&&e.data&&e.data.deptData&&(e.data.deptData.forEach((function(t){s.dataList.push({id:t.deptId,name:t.deptName,data1:t.dataHomeVO.dailySales?t.dataHomeVO.dailySales:0,data2:t.dataHomeVO.monthSales?t.dataHomeVO.monthSales:0,data3:t.dataHomeVO.monthGrowthRate?t.dataHomeVO.monthGrowthRate:0,data4:t.dataHomeVO.lastMonthSales?t.dataHomeVO.lastMonthSales:0,data5:t.dataHomeVO.yearSales?t.dataHomeVO.yearSales:0,data6:t.dataHomeVO.yearGrowthRate?t.dataHomeVO.yearGrowthRate:0,data7:t.dataHomeVO.lastYearSales?t.dataHomeVO.lastYearSales:0,data8:t.progress?t.progress:0,data9:t.dataHomeVO.tzYearGrowthRate?t.dataHomeVO.tzYearGrowthRate:0})})),this.dataList=this.dataList.sort((function(t,a){return t.data3-a.data3})));case 6:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}()},{key:"activated",value:function(){if(this.closeSelect(),this.$route.query.id&&this.$route.query.fromHome)return this.nowName=this.$route.query.name,this.nowData=this.$route.query.id.toString(),this.isChild=!!this.$route.query.isChild,void this.initData();var t=this.$route.meta;if(t.isFresh&&!this.$route.query.id)return this.nowData=null,void this.openSelect();this.$route.query.id&&t.isPush&&(this.nowName=this.$route.query.name,this.nowData=this.$route.query.id.toString(),this.isChild=!!this.$route.query.isChild),this.initData()}}]),e}(Object(c["b"])(u["a"]));f=Object(h["a"])([Object(c["a"])({components:{},beforeRouteEnter:function(t,a,e){"analysisList"==a.name||"staffList"==a.name||"dimensionList"==a.name||"bmList"==a.name?(t.meta.isPush=!1,e(!0)):(t.meta.isPush=!0,e(!0))},beforeRouteLeave:function(t,a,e){this.closeSelect(),a.meta.isFresh=!1,e(!0)}})],f);var v=f,y=v,w=(e("21c0"),e("2877")),b=Object(w["a"])(y,s,i,!1,null,"0f110423",null);a["default"]=b.exports}}]);