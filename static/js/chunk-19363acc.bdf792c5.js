(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19363acc"],{"0430":function(t,e,n){},"53ae":function(t,e,n){"use strict";var i=n("d4ec"),a=n("bee2"),r=n("262e"),s=n("2caf"),o=(n("b0c0"),n("9ab4")),c=n("1b40");c["a"].registerHooks(["beforeRouteEnter"]);var u=function(t){Object(r["a"])(n,t);var e=Object(s["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(a["a"])(n,[{key:"beforeRouteEnter",value:function(t,e,n){n((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),n}(c["d"]);u=Object(o["a"])([Object(c["a"])({})],u),e["a"]=u},5713:function(t,e,n){"use strict";n("f35a")},"77de":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return l}));var i=n("1da1"),a=(n("96cf"),n("b32d")),r=n("90ae"),s=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].post(r["d"],"/api/SubscribeArrive/getCanSubGoodsList",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].post(r["d"],"/api/SubscribeArrive/getSubscribeArriveList",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].get(r["d"],"/api/SubscribeArrive/activeSubscribe",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].get(r["d"],"/api/SubscribeArrive/unsubscribe",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].post(r["d"],"/api/SubscribeArrive/subscribeArrive",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"9cb3":function(t,e,n){"use strict";n("0430")},a13e:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-height"},[n("van-sticky",[n("div",{staticClass:"d-flex background-color-white"},[n("van-dropdown-menu",{staticStyle:{width:"120px"},attrs:{"active-color":"#1989fa"}},[n("van-dropdown-item",{attrs:{options:t.searchOption},on:{change:t.onInput},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}})],1),n("van-search",{staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:t.placeholder},on:{search:t.onInput,input:t.onInput},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)]),n("van-pull-refresh",{staticClass:"pt-10 px-10",attrs:{id:"filterContainer"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{staticClass:"pb-100",attrs:{offset:20,finished:t.finished,"finished-text":""},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t.loading||t.dataList.length||!t.searchValue?t._e():n("app-empty",{staticClass:"pb-6 white-bg",attrs:{description:"暂无数据"}}),t._l(t.dataList,(function(e,i){return n("list",{key:"InventoryQuery"+i,attrs:{item:e},on:{detailClick:t.detailClick,searchLimit:t.searchLimit,queryPrice:t.queryPrice,subscribeClick:function(n){return t.subscribeClick(n,e)}}})}))],2)],1)],1)},a=[],r=n("1da1"),s=n("d4ec"),o=n("bee2"),c=n("262e"),u=n("2caf"),l=(n("99af"),n("b0c0"),n("96cf"),n("9ab4")),d=n("1b40"),p=n("b32d"),m=n("90ae"),f=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].get(m["c"],"/api/inventory/infoList",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].get(m["c"],"/api/inventory/lowerLimit",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].get(m["c"],"/api/inventory/price",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].get(m["c"],"/api/inventory/byLot",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].get(m["c"],"/api/inventory/getPackageInfo",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=n("77de"),k=n("53ae"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"common-list mb-2",on:{click:function(e){return t.detailClick(e)}}},[n("van-swipe-cell",{scopedSlots:t._u([{key:"right",fn:function(){return[n("van-button",{staticClass:"delete-button",attrs:{type:"info"},on:{click:function(e){return e.stopPropagation(),t.subscribeClick(1,t.item.goodsReminder)}}},[t.item.goodsReminder?n("div",[n("div",[t._v("已订阅")]),n("div",[t._v("到货提醒")])]):n("div",[n("div",[t._v("订阅到货")]),n("div",[t._v("提醒")])])]),n("van-button",{staticClass:"delete-button",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.subscribeClick(2,t.item.ticketReminder)}}},[t.item.ticketReminder?n("div",[n("div",[t._v("已订阅")]),n("div",[t._v("到票提醒")])]):n("div",[n("div",[t._v("订阅到票")]),n("div",[t._v("提醒")])])])]},proxy:!0}])},[n("div",{staticClass:"common-list-content"},[n("div",{staticClass:"common-list-two"},[n("div",{staticClass:"flex-5"},[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("核算单元")]),n("span",[t._v(t._s(t.item.entryId)+"/"+t._s(t.item.entryName))])]),n("div",{staticClass:"flex-3"},[n("div",[n("span",{staticClass:"color-gray-4 pr-2",staticStyle:{width:"60px"}},[t._v("平台id")]),t.item.erpGoodsIdList.length?n("span",{staticClass:"fontWeight"},t._l(t.item.erpGoodsIdList,(function(e,i){return n("span",{key:i},[n("span",{staticClass:"color-main"},[t._v(t._s(e))]),t.item.erpGoodsIdList.length-1>i?n("span",[t._v(",")]):t._e()])})),0):n("span",[t._v("暂未维护")])])])]),n("div",[n("div",{staticClass:"common-list-one"},[n("div",[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("品种")]),n("span",[t._v(" "+t._s(t.item.goodsId)+"/"+t._s(t.item.currencyName?t.item.goodsName+"("+t.item.currencyName+")":t.item.goodsName)+" ")])]),n("div",{staticClass:"flex-3 ml-2",staticStyle:{"min-width":"60px"},on:{click:function(e){return t.copyContent(t.item.goodsId)}}},[n("van-button",{attrs:{size:"mini","data-clipboard-text":t.item.goodsId+"/"+t.item.goodsName+"/"+t.item.goodsType+"\n产地："+(t.item.prodArea||"主档信息暂未维护  包装："+t.item.packSize+t.item.goodsUnit+"/"+t.item.packName)+"  可销库存："+(t.item.goodsQuantity||"0")+"  平台id："+(t.item.erpGoodsIdList&&t.item.erpGoodsIdList.length?t.item.erpGoodsIdList.join(","):"暂未维护"),id:"copy_custsetinfor"+t.item.goodsId,type:"info"}},[t._v(" 点击复制 ")])],1)])]),n("div",{staticClass:"common-list-two"},[n("div",[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("规格")]),n("span",[t._v(t._s(t.item.goodsType))])]),n("div",[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("产地")]),n("span",{staticClass:"fontWeight"},[t._v(t._s(t.item.prodArea||"主档信息暂未维护"))])])]),n("div",{staticClass:"common-list-two"},[n("div",[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("储备计划数量")]),n("span",[t._v(t._s(t.item.reservePlanQuantity||"无计划"))])]),n("div",[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("销项税")]),n("span",{staticClass:"fontWeight"},[t._v(t._s(t.item.salestaxrate||"系统未维护"))])]),n("div",{staticClass:"textAlignR",staticStyle:{"min-width":"90px"}},[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("采购员")]),n("span",[t._v(t._s(t.item.buyerName||"--"))])])]),n("div",{staticClass:"common-list-two"},[n("div",[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("可销库存")]),n("span",[t._v(t._s(t.item.goodsQuantity||"0"))])]),n("div",[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("最小开票数量")]),n("span",{staticClass:"fontWeight"},[t._v(t._s(t.item.minSaleQuantity||"-"))])])]),n("div",{staticClass:"common-list-two",staticStyle:{"padding-bottom":"0px"}},[n("div",{staticStyle:{"min-width":"100px"}},[n("span",{staticClass:"color-gray-4 pr-2"},[t._v("跟标医院限价")]),n("span",{staticClass:"fontWeight"},[t._v(t._s(t.item.hospitalLimitPrice||"-"))])]),n("div",{staticClass:"textAlignR"},[n("van-tag",{staticClass:"ml-2 mb-2",attrs:{color:"rgba(50,51,51,0.1)","text-color":"#323333"}},[t._v(t._s(0===t.item.coldFlag||null===t.item.coldFlag?"非":(t.item.coldFlag,""))+"冷链")]),t._l(t.item.globalGoodsTagList,(function(e,i){return n("van-tag",{key:i,staticClass:"ml-2 mb-2",attrs:{color:"rgba(50,51,51,0.1)","text-color":"#323333"}},[t._v(t._s(e))])}))],2)])])]),n("div",{staticClass:"common-list-button clearfix"},[n("div",{staticClass:"right"},[n("van-button",{attrs:{size:"small",color:"#2271F5",round:"",type:"info"},on:{click:function(e){return e.stopPropagation(),t.searchLimit.apply(null,arguments)}}},[t._v("查看可销库存下限")])],1)])],1)},w=[],x=n("48b8"),C=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.detailDataList=[],t}return Object(o["a"])(n,[{key:"guoTanGoodsLabel",get:function(){return function(t){return 2e3===t?"过往国谈":2024===t?"存续国谈":2025===t?"新进国谈":""}}},{key:"detailClick",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,i,a,r,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e||window.event,i=n?(null===n||void 0===n?void 0:n.target)||n.srcElement:{},!i||i.id!=="copy_custsetinfor"+this.item.goodsId){t.next=4;break}return t.abrupt("return");case 4:if(this.item.goodsQuantity){t.next=12;break}return t.next=7,b({goodsId:this.item.goodsId});case 7:a=t.sent,r='<span class="font-16">包装：'.concat(a.data,"</span>"),this.$dialog.confirm({message:r,allowHtml:!0,confirmButtonText:"确定",confirmButtonColor:"#2271F5"}),t.next=13;break;case 12:g({entryId:this.item.entryId,goodsId:this.item.goodsId}).then((function(t){s.detailDataList=t.data,"200"===t.code&&s.$emit("detailClick",{item:s.item,detailDataList:s.detailDataList})}));case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchLimit",value:function(){this.$emit("searchLimit",{item:this.item})}},{key:"queryPrice",value:function(){this.$emit("queryPrice",{item:this.item})}},{key:"copyContent",value:function(t){Object(x["b"])("#copy_custsetinfor"+t,this)}},{key:"subscribeClick",value:function(t,e){e||this.$emit("subscribeClick",t)}},{key:"mounted",value:function(){}}]),n}(d["d"]);Object(l["a"])([Object(d["c"])()],C.prototype,"item",void 0),C=Object(l["a"])([Object(d["a"])({})],C);var L=C,I=L,O=(n("9cb3"),n("2877")),j=Object(O["a"])(I,_,w,!1,null,"42bfbf7f",null),R=j.exports,T=n("4bb5"),S=Object(T["a"])("crm"),$=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.placeholder="搜索",t.searchValue="",t.detailDataList=[],t.detailObj={},t.detailShow=!1,t.reload=!1,t.timer=null,t.searchOption=[{text:"货品",value:0},{text:"省平台ID",value:1}],t.searchType=0,t}return Object(o["a"])(n,[{key:"onInput",value:function(){var t=this;this.loading=!0,clearTimeout(this.timer),this.timer=setTimeout(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.onRefresh();case 1:case"end":return e.stop()}}),e)}))),800)}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.refreshing=!1,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this._getInfoList()}},{key:"_getInfoList",value:function(){var t=this;if(!this.searchValue)return this.loading=!1,void this.$toast.fail("请输入要查询的货品信息");this.loading=!0,1===this.page&&(this.dataList=[]);var e={type:this.searchType,keyWords:this.searchValue,page:this.page,pageSize:10};f(e).then((function(e){"200"===e.code&&(t.dataList=t.dataList.concat(e.data.list),e.data.hasNextPage?t.page++:t.finished=!0,t.loading=!1)}))}},{key:"detailClick",value:function(t){var e=t.item,n=t.detailDataList;e.detailDataList=n,this.SET_DETAILOBJ(e),this.$router.push({name:"InventoryQueryList"})}},{key:"searchLimit",value:function(t){var e=this,n=t.item;v({entryId:n.entryId,goodsId:n.goodsId}).then((function(t){for(var n="",i=0;i<t.data.length;i++){var a=t.data[i];n+='<div class="lock-info"><span>'.concat(a.ddlName,'：</span><span class="fontWeight color-main">').concat(a.forbidsqty,"</span></div>")}e.$dialog.confirm({message:n||"暂无可销库存下限",allowHtml:!0,confirmButtonText:"确定",confirmButtonColor:"#2271F5"})}))}},{key:"queryPrice",value:function(t){var e=this,n=t.item;h({entryId:n.entryId,goodsId:n.goodsId}).then((function(t){var i=t.data||0===t.data?"".concat(n.goodsName,"的跟标医院限价是").concat(t.data,"元"):"未查到".concat(n.goodsName,"价格");e.$dialog.confirm({message:i,allowHtml:!0,confirmButtonText:"确定",confirmButtonColor:"#2271F5"})}))}},{key:"subscribeClick",value:function(t,e){this._subscribeArrive(t,e)}},{key:"_subscribeArrive",value:function(t,e){var n=this,i=this.$toast.loading();Object(y["d"])({entryId:e.entryId,goodsId:e.goodsId,subType:t}).then((function(a){i.clear(),200==a.code?1==t?(n.$set(e,"goodsReminder",!0),e.goodsReminder++,n.$toast.success("订阅到货提醒成功")):(n.$set(e,"ticketReminder",!0),n.$toast.success("订阅到票提醒成功")):n.$toast.fail(a.msg)}))}},{key:"mounted",value:function(){this.loading=!1}},{key:"activated",value:function(){this.searchType=0,this.reload&&(this.dataList=[],this.searchValue="",this.page=1,this.reload=!1)}}]),n}(Object(d["b"])(k["a"]));Object(l["a"])([S.Mutation],$.prototype,"SET_DETAILOBJ",void 0),$=Object(l["a"])([Object(d["a"])({components:{list:R},beforeRouteLeave:function(t,e,n){"Home"===t.name&&(this.reload=!0),n()},beforeRouteEnter:function(t,e,n){"Home"===t.name&&(this.reload=!0),n()}})],$);var A=$,N=A,P=(n("5713"),Object(O["a"])(N,i,a,!1,null,"32aa8924",null));e["default"]=P.exports},f35a:function(t,e,n){}}]);