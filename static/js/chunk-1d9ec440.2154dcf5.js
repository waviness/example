(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d9ec440"],{"0251":function(t,e,i){},"69d2":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pb-100"},[i("div",{staticClass:"font-14 inner-block"},[t._v("转职至")]),i("van-form",{attrs:{"validate-first":""},on:{failed:t.onFailed}},[i("van-field",{attrs:{readonly:"",clickable:"",value:t.customer.custId?t.customer.custId+"/"+t.customer.custName:"",required:"","label-width":"4em",label:"客户信息","input-align":"right","right-icon":"arrow",placeholder:"请输入关键词",rules:[{validator:t.validator,message:"请选择客户信息"}]},on:{click:function(e){return t.chooseFilter(4)}}}),i("van-field",{staticClass:"mt-3",attrs:{readonly:"",clickable:"",value:t.role.name,required:"","label-width":"4em",label:"科室角色","input-align":"right","right-icon":"arrow",placeholder:"点击选择",rules:[{validator:t.validator,message:"请选择科室角色"}]},on:{click:function(e){return t.chooseFilter(1)}}}),i("van-field",{staticClass:"mt-3",attrs:{readonly:"",clickable:"",value:t.dept.name,required:"","label-width":"4em",label:"部门信息","input-align":"right","right-icon":"arrow",placeholder:"点击选择",rules:[{validator:t.validator,message:"请选择部门信息"}]},on:{click:function(e){return t.chooseFilter(2)}}}),i("van-field",{staticClass:"mt-3",attrs:{readonly:"",clickable:"",value:t.position.name,required:"","label-width":"4em",label:"职位信息","input-align":"right","right-icon":"arrow",placeholder:"点击选择",rules:[{validator:t.validator,message:"请选择职位信息"}]},on:{click:function(e){return t.chooseFilter(3)}}})],1),i("div",{staticClass:"footer d-flex justify-center"},[i("submit-btn",{staticClass:"mr-4",attrs:{title:"取消",type:"cancel"},on:{click:t.goBack}}),i("submit-btn",{attrs:{loading:t.submitLoading,title:"提交"},on:{click:t.transfer}})],1),1===t.actionType?i("van-action-sheet",{attrs:{actions:t.roleList,"cancel-text":"取消","close-on-click-action":""},on:{select:t.onSelectRole},model:{value:t.actionShow,callback:function(e){t.actionShow=e},expression:"actionShow"}}):t._e(),2===t.actionType?i("van-action-sheet",{attrs:{actions:t.deptList,"cancel-text":"取消","close-on-click-action":""},on:{select:t.onSelectDept},model:{value:t.actionShow,callback:function(e){t.actionShow=e},expression:"actionShow"}}):t._e(),3===t.actionType?i("van-action-sheet",{attrs:{actions:t.positionList,"cancel-text":"取消","close-on-click-action":""},on:{select:t.onSelectPosition},model:{value:t.actionShow,callback:function(e){t.actionShow=e},expression:"actionShow"}}):t._e(),i("full-pop",{directives:[{name:"show",rawName:"v-show",value:t.fullPopShow,expression:"fullPopShow"}],attrs:{loading:t.custLoading,list:t.custList,keyProp:"custId",valueProp:"custName"},on:{cancel:function(e){t.fullPopShow=!1},input:t.getCustList,select:t.onSelectCustomer}})],1)},a=[],s=i("1da1"),o=i("d4ec"),r=i("bee2"),c=i("262e"),u=i("2caf"),l=(i("d81d"),i("99af"),i("ac1f"),i("1276"),i("96cf"),i("9ab4")),p=i("1b40"),d=i("4bb5"),h=i("f727"),v=i("74d2"),f=Object(d["a"])("app"),m=function(t){Object(c["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.actionShow=!1,t.actionType=0,t.fullPopShow=!1,t.custLoading=!1,t.custList=[],t.roleList=[],t.deptList=[],t.positionList=[],t.customer={},t.role={},t.dept={},t.position={},t.cupId=t.$route.params.cupId,t.igonreCustId=t.$route.params.igonreCustId,t.submitLoading=!1,t}return Object(r["a"])(i,[{key:"getCustList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.custList=[],""===e){t.next=7;break}return this.custLoading=!0,t.next=5,Object(v["K"])({custom:e,igonreCustId:this.igonreCustId});case 5:i=t.sent,i.success&&(this.custLoading=!1,this.custList=i.data);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getRoleList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(v["J"])({custId:e});case 2:i=t.sent,i.success&&(this.roleList=i.data.map((function(t){return{value:t.creId+"-"+t.orgRoleId,name:"".concat(t.orgRoleName,"（").concat(t.creName,"）")}})));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getDeptList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={dicUpperSelectId:e,keyword:"",pageNum:1,pageSize:1e4,typeId:3,upperTypeId:2,usestatus:1,typeSecondId:1},t.next=3,Object(h["d"])(i);case 3:n=t.sent,n.success&&(this.deptList=n.data.list.map((function(t){var e=t.DIC_SELECT_ID,i=t.DIC_SELECT_NAME;return{value:e,name:i}})));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getPostionFun",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={dicUpperSelectId:e,keyword:"",pageNum:1,pageSize:1e4,typeId:4,upperTypeId:3,usestatus:1,typeSecondId:1},t.next=3,Object(h["d"])(i);case 3:n=t.sent,n.success&&(this.positionList=n.data.list.map((function(t){var e=t.DIC_SELECT_ID,i=t.DIC_SELECT_NAME;return{value:e,name:i}})));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onSelectCustomer",value:function(t){this.customer=t,this.role={},this.dept={},this.position={},this.getRoleList(t.custId),this.fullPopShow=!1}},{key:"onSelectRole",value:function(t){this.role=t,this.dept={},this.position={},this.getDeptList(t.value.split("-")[1])}},{key:"onSelectDept",value:function(t){this.dept=t,this.position={},this.getPostionFun(t.value)}},{key:"onSelectPosition",value:function(t){this.position=t}},{key:"onFailed",value:function(t){}},{key:"validator",value:function(t){}},{key:"chooseFilter",value:function(t){4===t?this.fullPopShow=!0:(this.actionShow=!0,this.actionType=t)}},{key:"transfer",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.customer.custId){t.next=3;break}return this.$toast("请选择客户"),t.abrupt("return");case 3:if(this.role.value){t.next=6;break}return this.$toast("请选择科室角色"),t.abrupt("return");case 6:if(this.dept.value){t.next=9;break}return this.$toast("请选择部门"),t.abrupt("return");case 9:if(this.position.value){t.next=12;break}return this.$toast("请选择职位"),t.abrupt("return");case 12:return this.submitLoading=!0,t.next=15,Object(v["s"])({custId:this.customer.custId,orgRoleId:this.role.value.split("-")[1],deptId:this.dept.value,positionId:this.position.value,oldCupId:this.cupId,userId:this.role.value.split("-")[0]});case 15:e=t.sent,this.submitLoading=!1,e.success&&(this.SET_HADDONEONDETAIL(!0),this.$toast.success(e.msg),this.goBack());case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"goBack",value:function(){this.$router.back()}},{key:"mounted",value:function(){this.cupId=this.$route.params.cupId,this.igonreCustId=this.$route.params.igonreCustId}}]),i}(p["d"]);Object(l["a"])([f.Mutation],m.prototype,"SET_HADDONEONDETAIL",void 0),m=Object(l["a"])([Object(p["a"])({})],m);var b=m,g=b,k=(i("d725"),i("2877")),w=Object(k["a"])(g,n,a,!1,null,"505a8a78",null);e["default"]=w.exports},d725:function(t,e,i){"use strict";i("0251")}}]);