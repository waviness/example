(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39e71460"],{"00a6":function(t,e,i){},1601:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gray-block box-shadow"},[i("div",{staticClass:"white-block"},[t.isTogether&&t.data.togetherUserName?i("div",{staticClass:"background-color-main-2 font-bold visit-name"},[i("div",{staticClass:"mr-4"},[t._v(t._s(1===t.data.taskType?"随访人":"协访人"))]),i("div",[t._v(t._s(t.data.togetherUserName))])]):t._e(),i("div",{staticClass:"inner-block"},[i("div",{staticClass:"d-flex justify-space-between align-baseline font-bold"},[i("div",{staticClass:"font-14"},[t._v(t._s(t.data.labelName))]),i("div",{staticClass:"color-gray"},[t._v(" "+t._s(t.data.visitTime?t.data.visitTime.slice(0,t.data.visitTime.length-3):"")+" ")])]),i("info-item",{staticClass:"mt-4",attrs:{title:"医院",content:t.data.companyName}}),t.data.expectTimeStr?i("info-item",{staticClass:"mt-2",attrs:{title:"预期时间",content:t.data.expectTimeStr}}):t._e(),i("info-item",{staticClass:"my-2",attrs:{title:"业务员",content:t.data.userName}})],1)]),i("div",{staticClass:"inner-block"},[i("div",{},[t._v("备注")]),i("div",{staticClass:"mt-1"},[t._v(t._s(t.data.remark||"无"))])])])},s=[],n=i("bee2"),r=i("d4ec"),c=i("262e"),o=i("2caf"),l=i("9ab4"),u=i("1b40"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex justify-space-between align-baseline"},[i("div",{staticClass:"color-gray-4",staticStyle:{width:"80px"}},[t._v(t._s(t.title))]),i("div",{staticClass:"flex-1 font-bold textAlignR"},[t._v(t._s(t.content))])])},h=[],f=function(t){Object(c["a"])(i,t);var e=Object(o["a"])(i);function i(){return Object(r["a"])(this,i),e.apply(this,arguments)}return Object(n["a"])(i)}(u["d"]);Object(l["a"])([Object(u["c"])({type:String,default:""})],f.prototype,"title",void 0),Object(l["a"])([Object(u["c"])({type:String,default:""})],f.prototype,"content",void 0),f=Object(l["a"])([Object(u["a"])({})],f);var v=f,b=v,p=i("2877"),g=Object(p["a"])(b,d,h,!1,null,null,null),m=g.exports,x=function(t){Object(c["a"])(i,t);var e=Object(o["a"])(i);function i(){return Object(r["a"])(this,i),e.apply(this,arguments)}return Object(n["a"])(i)}(u["d"]);Object(l["a"])([Object(u["c"])({type:Object,default:{}})],x.prototype,"data",void 0),Object(l["a"])([Object(u["c"])({type:Boolean,default:!1})],x.prototype,"isTogether",void 0),x=Object(l["a"])([Object(u["a"])({components:{InfoItem:m}})],x);var I=x,j=I,y=(i("db1b"),Object(p["a"])(j,a,s,!1,null,"69153aee",null));e["a"]=y.exports},"3f06":function(t,e,i){"use strict";i("00a6")},7470:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"customer-unit"},[a("van-sticky",[a("div",{staticClass:"customer-unit-sticky"},[a("div",{class:["customer-unit-filter",e.treeShow?"color-main-2":"","条件筛选"!==e.filterText?"customer-unit-filter--active":""],on:{click:function(){t.treeShow=!t.treeShow}}},[a("div",[e._v(e._s(0!==e.activeIndex?e.filterText:"条件筛选"))]),a("van-icon",{attrs:{name:"arrow-"+(e.treeShow?"up":"down"),size:"16px"}})],1)])]),a("van-pull-refresh",{staticClass:"msg-list",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{finished:e.finished,"immediate-check":!1,"finished-text":"没有更多了",error:e.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){e.error=t},load:e.getDataList},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t,i){return a("visit-item",{key:i,staticClass:"mb-2 van-clearfix",attrs:{data:t,isTogether:1===e.flag}})})),1)],1),a("van-popup",{attrs:{position:"top",round:""},model:{value:e.treeShow,callback:function(t){e.treeShow=t},expression:"treeShow"}},[a("van-tree-select",{attrs:{items:e.labelTreeList,"active-id":e.activeId,"main-active-index":e.activeIndex},on:{"update:activeId":function(t){e.activeId=t},"update:active-id":function(t){e.activeId=t},"update:mainActiveIndex":function(t){e.activeIndex=t},"update:main-active-index":function(t){e.activeIndex=t}}}),a("div",{staticClass:"dropdown-opts"},[a("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",block:"",round:""},on:{click:e.reset}},[e._v("重置")]),a("van-button",{staticClass:"dropdown-opts__btn background-color-main-2",attrs:{type:"info",block:"",round:""},on:{click:e.onConfirm}},[e._v("确认")])],1)],1),a("fix-button",{attrs:{title:0===e.flag?"协防":"拜访",icon:"#ytcrm-"+(0===e.flag?"xingzhuangjiehe1":"a-xingzhuangjiehe2")},on:{click:e.onFlagChange}})],1)},s=[],n=i("2909"),r=i("1da1"),c=i("d4ec"),o=i("bee2"),l=i("262e"),u=i("2caf"),d=(i("96cf"),i("d81d"),i("99af"),i("7db0"),i("d3b7"),i("9ab4")),h=i("1b40"),f=i("1601"),v=i("f727"),b=i("74d2");h["a"].registerHooks(["beforeRouteLeave"]);var p=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.custId=t.$route.params.custId,t.curMan=t.$route.params.curMan,t.isCabin=t.$route.params.isCabin,t.treeShow=!1,t.activeId=-1,t.activeIndex=0,t.labelTreeList=[],t.page=1,t.pageSize=10,t.list=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.error=!1,t.filterText="条件筛选",t.flag=0,t}return Object(o["a"])(i,[{key:"typeResult",get:function(){if(0===this.activeIndex)return null;if(this.activeId<0){var t=this.labelTreeList[this.activeIndex].children.map((function(t){return+t.id}));return t.shift(),t}return[+this.activeId]}},{key:"_getLabelTree",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={type:"1"},t.next=3,Object(v["e"])(e);case 3:i=t.sent,this.labelTreeList=i.data.map((function(t,e){var i=[];return t.CHILD_LIST.length&&(i=t.CHILD_LIST.map((function(t){return{id:t.LABEL_ID,text:t.LABEL_NAME}}))),{id:t.LABEL_ID,text:t.LABEL_NAME,children:[{id:-e-2,text:"全部"}].concat(Object(n["a"])(i))}})),this.labelTreeList.unshift({id:-1,text:"全部"});case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){this.activeId=-1,this.activeIndex=0}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.list=[],this.page=1,this.getDataList()}},{key:"getDataList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},e=this.curMan?{custId:this.custId,pageNum:this.page,pageSize:this.pageSize,flag:this.flag,type:this.typeResult,userId:this.curMan.salerId,visitUserId:this.curMan.userId}:{custId:this.custId,pageNum:this.page,pageSize:this.pageSize,flag:this.flag,type:this.typeResult},"true"!==this.isCabin){t.next=8;break}return t.next=5,Object(b["e"])(e);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,Object(b["w"])(e);case 10:t.t0=t.sent;case 11:i=t.t0,this.loading=!1,this.refreshing=!1,i.success?(this.list=[].concat(Object(n["a"])(this.list),Object(n["a"])(i.data.list)),this.page++,this.finished=!i.data.hasNextPage):this.error=!0;case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onConfirm",value:function(){var t=this;if(this.treeShow=!this.treeShow,0===this.activeIndex)this.filterText="条件筛选";else if(this.activeId<0)this.filterText="".concat(this.labelTreeList[this.activeIndex].text,"/全部");else{var e=this.labelTreeList[this.activeIndex].children.find((function(e){return+e.id===t.activeId}));this.filterText="".concat(this.labelTreeList[this.activeIndex].text,"/").concat(e.text)}this.onRefresh()}},{key:"onFlagChange",value:function(){this.flag=1===this.flag?0:1,this.onRefresh()}},{key:"created",value:function(){this.custId=this.$route.params.custId,this.curMan=this.$route.params.curMan,this.isCabin=this.$route.params.isCabin,this._getLabelTree(),this.onRefresh()}}]),i}(h["d"]);p=Object(d["a"])([Object(h["a"])({components:{VisitItem:f["a"]}})],p);var g=p,m=g,x=(i("3f06"),i("2877")),I=Object(x["a"])(m,a,s,!1,null,"0ef5a97a",null);e["default"]=I.exports},"8c6c":function(t,e,i){},db1b:function(t,e,i){"use strict";i("8c6c")}}]);