(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8ab634e"],{"0637":function(t,e,o){"use strict";o("30d6")},"0f54":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pb-100"},[o("div",{staticClass:"font-14 inner-block"},[t._v("目标品种新增")]),o("van-form",{attrs:{"validate-first":""},on:{failed:t.onFailed}},[o("van-field",{attrs:{disabled:!!t.data.id,clearable:"",required:"",label:"货品信息","input-align":"right","right-icon":"arrow",placeholder:"点击选择",rules:[{validator:t.validator,message:"请输入货品信息"}]},on:{click:t.chooseGoods},model:{value:t.goods,callback:function(e){t.goods=e},expression:"goods"}})],1),o("div",{staticClass:"footer d-flex justify-center"},[o("submit-btn",{staticClass:"mr-4",attrs:{title:"取消",type:"cancel"},on:{click:t.goBack}}),o("submit-btn",{attrs:{loading:t.submitLoading,title:"提交"},on:{click:t.submit}})],1),o("full-pop",{directives:[{name:"show",rawName:"v-show",value:t.goodsPopShow,expression:"goodsPopShow"}],attrs:{placeholder:t.placeholder,loading:t.goodsLoading,list:t.goodsList,keyProp:"goodsId",valueProp:"goodsName"},on:{cancel:function(e){t.goodsPopShow=!1},input:t.getGoodsList,select:t.onSelectGoods}})],1)},a=[],i=o("1da1"),d=o("d4ec"),n=o("bee2"),c=o("262e"),r=o("2caf"),u=(o("96cf"),o("9ab4")),l=o("1b40"),g=o("4bb5"),h=o("74d2"),p=Object(g["a"])("app"),b=function(t){Object(c["a"])(o,t);var e=Object(r["a"])(o);function o(){var t;return Object(d["a"])(this,o),t=e.apply(this,arguments),t.placeholder="请输入货品ID|名称",t.goodsPopShow=!1,t.goodsLoading=!1,t.goodsList=[],t.goods="",t.ccuId="",t.curDept={},t.data={cugId:"",goodsId:"",goodsName:""},t.submitLoading=!1,t}return Object(n["a"])(o,[{key:"chooseGoods",value:function(){this.data.id||(this.goodsPopShow=!0)}},{key:"getGoodsList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.goodsList=[],""===e){t.next=7;break}return this.goodsLoading=!0,t.next=5,Object(h["C"])({goods:e});case 5:o=t.sent,o.success&&(this.goodsLoading=!1,this.goodsList=o.data);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onSelectGoods",value:function(t){this.goods=t.goodsId+"/"+t.goodsName,this.data.goodsId=t.goodsId,this.data.goodsName=t.goodsName,this.goodsPopShow=!1}},{key:"onFailed",value:function(t){}},{key:"validator",value:function(t){}},{key:"submit",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,o,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.data.goodsId){t.next=3;break}return this.$toast("货品信息不能为空"),t.abrupt("return");case 3:return e={ccuId:this.ccuId,deptId:this.curDept.deptId,deptName:this.curDept.deptName,saleId:this.curDept.userId,saleName:this.curDept.userName,cugId:this.data.cugId,goodsId:this.data.goodsId,goodsName:this.data.goodsName},this.submitLoading=!0,t.next=7,Object(h["a"])(e);case 7:o=t.sent,o.success&&(this.SET_HADDONEONDETAIL(!0),this.$toast.success(o.msg||"添加成功"),setTimeout((function(){s.submitLoading=!1,s.goBack()}),1e3));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"goBack",value:function(){this.$router.back()}},{key:"mounted",value:function(){this.ccuId=this.$route.params.ccuId,this.curDept=this.$route.params.curDept,this.$route.params.cugId&&(this.data=this.$route.params,this.goods=this.data.goodsId+"/"+this.data.goodsName)}}]),o}(l["d"]);Object(u["a"])([p.Mutation],b.prototype,"SET_HADDONEONDETAIL",void 0),b=Object(u["a"])([Object(l["a"])({})],b);var f=b,m=f,v=(o("0637"),o("2877")),k=Object(v["a"])(m,s,a,!1,null,"24f12eb8",null);e["default"]=k.exports},"30d6":function(t,e,o){}}]);