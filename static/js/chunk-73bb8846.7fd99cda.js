(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73bb8846"],{3268:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header d-flex align-center"},[a("div",{staticClass:"flex-1 pl-8"},[t._v(t._s(t.enterDeptObj.deptName))]),a("div",{staticClass:"flex-1 textAlignR pr-8",on:{click:t.calendarClick}},[a("span",{staticClass:"time"},[t._v(t._s(t.dateTime))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)]),a("div",{staticClass:"totalContent ma-2"},[a("div",{staticClass:"dailySales background-color-main-3 background-color-white"},[a("div",{staticClass:"d-flex flex-column pt-3 pl-4"},[a("div",[t._v("当日销售(万元)")]),a("div",{staticClass:"font-32 py-1"},[t._v(t._s(t.salesDataObj.cdmoney))])])]),a("div",{staticClass:"background-color-white"},[a("div",{staticClass:"color-second d-flex align-center justify-space-between font-14 pl-4 pt-2"},[a("span",[t._v("本年销售堆积图（亿元）")]),a("span",{staticClass:"d-flex align-center px-4",on:{click:t.echartsBarClick}},[a("van-icon",{attrs:{size:"16px",name:"arrow"}})],1)]),t.echartsLoading?a("div",{staticClass:"d-flex align-center justify-center",staticStyle:{height:"120px"}},[a("van-loading",{attrs:{color:"#3561f2"}})],1):t._e(),t.echartsLoading?t._e():a("div",{staticClass:"echartsWarp",staticStyle:{height:"120px"},attrs:{id:t.echartsWarpName}})]),a("div",{staticClass:"totalData background-color-white mt-2"},[a("MouthYearData",{attrs:{dataVal:t.salesDataObj}})],1)]),a("div",{staticClass:"departData"},[a("van-tabs",{attrs:{color:"#3561f2"},on:{click:t.tabsChange}},t._l(t.departNameTabs,(function(e){return a("van-tab",{key:e.deptId,staticClass:"background-color-white",attrs:{title:e.shortName}},[a("ul",{staticClass:"departData-header",on:{click:function(a){return t.departClick(e)}}},[a("li",[a("span",{staticClass:"color-gray-5 font-16"},[t._v(t._s(e.showName))]),a("span",{staticClass:"color-second pl-4"},[t._v("目标增长率"+t._s(t.innerSalesDataObj.increaseGoal)+"%")]),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.hasClick,expression:"nameVal.hasClick"}],staticClass:"right",attrs:{name:"arrow"}})],1),a("li",{staticClass:"pb-4 pt-1 color-gray-2"},[t._v(" 营收贡献 "),a("span",{staticClass:"color-main-3"},[t._v(t._s(t.innerSalesDataObj.contributePercent)+"%")]),t._v("，净增贡献 "),a("span",{staticClass:"color-main-3"},[t._v(t._s(t.innerSalesDataObj.netIncreaseContributePercent)+"%")]),t._v("，"),a("span",{staticClass:"color-main-3"},[t._v(t._s(t.innerSalesDataObj.effectPercent>0?"拉升":"降低"))]),t._v(t._s(1===t.deptLevel?"集团":2===t.deptLevel?"事业部":3===t.deptLevel?"中心":"")+"增幅 "),a("span",{staticClass:"color-main-3"},[t._v(t._s(t.innerSalesDataObj.effectPercent)+"个百分点")])])]),t.innerSalesDataObj?a("MouthYearData",{attrs:{dataVal:t.innerSalesDataObj}}):t._e()],1)})),1)],1),a("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},model:{value:t.echartsShow,callback:function(e){t.echartsShow=e},expression:"echartsShow"}},[a("span",{staticClass:"echartsTitle"},[t._v("本年销售堆积图（亿元）")]),t.echartsShow?a("echarts-bar",{attrs:{currentYearDatalist:t.currentYearDatalist,lastYearDatalist:t.lastYearDatalist,dateTime:t.dateTime,echartsWarpName:t.echartsWarpName}}):t._e()],1)],1)},c=[],r=a("5530"),n=a("d4ec"),i=a("bee2"),o=a("262e"),l=a("2caf"),d=(a("d81d"),a("b0c0"),a("d3b7"),a("159b"),a("b680"),a("fb6a"),a("9ab4")),p=a("1b40"),b=a("313e"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mouthYearData"},[a("div",{staticClass:"d-flex py-4",staticStyle:{height:"50%","border-bottom":"1px solid #ebedf0"}},[a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"font-14"},[t._v("本月累计")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.dataVal.cmmoney))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"font-14"},[t._v("净增")]),a("span",{staticClass:"font-16 color-main"},[t._v(t._s(t.getFH(t.dataVal.cmperiodIncrease))+t._s(t.dataVal.cmperiodIncrease))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"font-14"},[t._v("同比增幅")]),a("span",{staticClass:"font-16",class:t.getColor(t.dataVal.cmonPercent)},[t._v(t._s(t.getFH(t.dataVal.cmonPercent))+t._s(t.dataVal.cmonPercent)+"%")])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"font-14"},[t._v("环比增幅")]),a("span",{staticClass:"font-16",class:t.getColor(t.dataVal.cmcircleOnPercent)},[t._v(t._s(t.getFH(t.dataVal.cmcircleOnPercent))+t._s(t.dataVal.cmcircleOnPercent)+"%")])])]),a("div",{staticClass:"d-flex py-4",staticStyle:{height:"50%"}},[a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"font-14"},[t._v("本年累计")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.dataVal.cymoney))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"font-14"},[t._v("净增")]),a("span",{staticClass:"font-16 color-main"},[t._v(t._s(t.getFH(t.dataVal.cyperiodIncrease))+t._s(t.dataVal.cyperiodIncrease))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"font-14"},[t._v("同比增幅")]),a("span",{staticClass:"font-16",class:t.getColor(t.dataVal.cyonPercent)},[t._v(t._s(t.getFH(t.dataVal.cyonPercent))+t._s(t.dataVal.cyonPercent)+"%")])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"font-14"},[t._v("较目标")]),a("span",{staticClass:"font-16",class:t.getColor(t.dataVal.comparedTarget)},[t._v(t._s(t.getFH(t.dataVal.comparedTarget))+t._s(t.dataVal.comparedTarget)+"p")])])])])},h=[],f=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(i["a"])(a,[{key:"getColor",get:function(){return function(t){return t>0?"color-normal":"color-never"}}},{key:"getFH",get:function(){return function(t){return t>0?"+":""}}}]),a}(p["d"]);Object(d["a"])([Object(p["c"])()],f.prototype,"dataVal",void 0),f=Object(d["a"])([Object(p["a"])({})],f);var v=f,m=v,y=(a("9419"),a("2877")),O=Object(y["a"])(m,u,h,!1,null,"e639ede0",null),C=O.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-HW",attrs:{id:t.echartsWarpName+"Bar"}})},g=[],_=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.myChart=null,t}return Object(i["a"])(a,[{key:"getEchartsBar",value:function(t,e){this.myChart&&this.myChart.clear();var a,s=document.getElementById(this.echartsWarpName+"Bar");this.myChart=b["b"](s);for(var c=[],r=0;r<t.length;r++){var n=t[r];c.push({value:n,label:{show:!0}})}for(var i=[],o=0;o<e.length;o++){var l=e[o];i.push({value:l,label:{show:!0}})}a={color:["#3561f2","#00a870"],grid:{left:50},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{saveAsImage:{show:!0}},itemSize:20,right:"10",bottom:"10"},legend:{data:["",""]},xAxis:[{type:"value",name:"",interval:50,axisLabel:{formatter:"{value}亿元"}}],yAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisPointer:{type:"shadow"}}],series:[{name:"",type:"bar",tooltip:{valueFormatter:function(t){return t+"亿元"}},rotate:180,data:c},{name:"",type:"bar",tooltip:{valueFormatter:function(t){return t+"亿元"}},rotate:180,data:i}]},a&&this.myChart.setOption(a)}},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t.getEchartsBar(t.currentYearDatalist,t.lastYearDatalist)}))}}]),a}(p["d"]);Object(d["a"])([Object(p["c"])()],_.prototype,"echartsWarpName",void 0),Object(d["a"])([Object(p["c"])()],_.prototype,"currentYearDatalist",void 0),Object(d["a"])([Object(p["c"])()],_.prototype,"lastYearDatalist",void 0),Object(d["a"])([Object(p["c"])()],_.prototype,"dateTime",void 0),_=Object(d["a"])([Object(p["a"])({})],_);var x=_,w=x,k=Object(y["a"])(w,j,g,!1,null,"db869a0c",null),D=k.exports,S=a("2279"),P=a("5b92"),T=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.innerSalesDataObj="",t.innerDepartObj={},t.deptObj="",t.echartsShow=!1,t.myChart=null,t.echartsLoading=!1,t.lastYearDatalist=[],t.currentYearDatalist=[],t}return Object(i["a"])(a,[{key:"calendarClick",value:function(){this.$emit("calendarClick")}},{key:"departClick",value:function(t){t.hasClick&&this.$emit("departClick",t,this.innerDepartObj,this.deptLevel)}},{key:"echartsBarClick",value:function(){this.echartsShow=!0}},{key:"getEcharts",value:function(t,e){var a=this,s=document.getElementById(this.echartsWarpName);this.myChart=b["b"](s);for(var c,r=new Date(this.dateTime).getMonth(),n=[1,1,1,1,1,1,1,1,1,1,1,1],i=[],o=0;o<t.length;o++){var l=t[o];i.push({value:l,symbolSize:o===r?10:0,label:{show:o===r}})}for(var d=[],p=0;p<e.length;p++){var u=e[p];d.push({value:u,symbolSize:p===r?10:0,label:{show:p===r}})}c={grid:{top:"20px",bottom:"25px",left:"0px",right:"0px"},xAxis:[{type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:function(t){return t+"月"},interval:0},data:["1","2","3","4","5","6","7","8","9","10","11","12"]}],yAxis:[{show:!1},{show:!1},{show:!1}],series:[{name:"Evaporation",type:"bar",barCategoryGap:"2px",emphasis:{itemStyle:{color:"#F2F3FD"}},data:n.map((function(t,e){return{value:t,itemStyle:{color:e+1===r+1?"#F2F3FD":new b["a"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(245,246,250, 0.17)"},{offset:1,color:"rgba(225,228,252, 0.17)"}]),emphasis:{color:new b["a"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(245,246,250, 0.17)"},{offset:1,color:"rgba(225,228,252, 0.17)"}])}}}}))},{type:"line",smooth:!0,yAxisIndex:1,symbol:"circle",symbolSize:0,lineStyle:{width:1.8},smoothMonotone:.5,itemStyle:{normal:{color:"#3561f2",borderColor:"#3561f2",borderWidth:0}},data:i},{type:"line",smooth:!0,yAxisIndex:1,symbol:"circle",symbolSize:0,lineStyle:{width:1.8},smoothMonotone:.5,itemStyle:{normal:{color:"#C8C9CC",borderColor:"#C8C9CC",borderWidth:0}},data:d}]},this.myChart.on("click",(function(t){r=+t.name,c.series[0].data=n.map((function(t,e){return{value:t,itemStyle:{color:e+1===r?"#F2F3FD":new b["a"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(245,246,250, 0.17)"},{offset:1,color:"rgba(225,228,252, 0.17)"}])}}}));var e=t.dataIndex,s=c.series[1];s.data.forEach((function(t,a){s.data[a].label=a===e?{show:!0}:{show:!1},s.data[a].symbolSize=a===e?10:0}));var i=c.series[2];i.data.forEach((function(t,a){i.data[a].label=a===e?{show:!0}:{show:!1},i.data[a].symbolSize=a===e?10:0})),a.myChart.setOption(c)})),c&&this.myChart.setOption(c)}},{key:"_getQuickOverview",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S["E"])(Object(r["a"])(Object(r["a"])({date:this.dateTime,deptLevel:this.deptLevel},e),{},{full:!0})).then((function(e){t.innerSalesDataObj={cdmoney:Object(P["d"])(e.data.cdmoney,1),cmcircleOnPercent:Object(P["d"])(e.data.cmcircleOnPercent,2),cmmoney:Object(P["d"])(e.data.cmmoney,1),cmonPercent:Object(P["d"])(e.data.cmonPercent,2),cmperiodIncrease:Object(P["d"])(e.data.cmperiodIncrease,1),cymoney:Object(P["d"])(e.data.cymoney,1),cyonPercent:Object(P["d"])(e.data.cyonPercent,2),cyperiodIncrease:Object(P["d"])(e.data.cyperiodIncrease,1),increaseGoal:Object(P["d"])(e.data.increaseGoal,2),comparedTarget:e.data.increaseGoal?Object(P["d"])(t.$arithmetic.subtract(e.data.cyonPercent,e.data.increaseGoal),2):"--",contributePercent:Object(P["d"])(e.data.contributePercent,2),effectPercent:Object(P["d"])(e.data.effectPercent,2),netIncreaseContributePercent:987654321===e.data.netIncreaseContributePercent?">100":Object(P["d"])(e.data.netIncreaseContributePercent,2)},t.innerDepartObj=e.data}))}},{key:"_getMonthCumulativeMoney",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.myChart&&this.myChart.dispose(),this.echartsLoading=!0,Object(S["A"])(Object(r["a"])(Object(r["a"])({date:this.dateTime,deptLevel:this.deptLevel-1},e),{},{full:!0})).then((function(e){var a=e.data.map((function(e){return t.$arithmetic.divide(e,1e8).toFixed(1)}));t.echartsLoading=!1,t.$nextTick((function(){t.lastYearDatalist=a.slice(0,12),t.currentYearDatalist=a.slice(12,e.length),t.getEcharts(t.currentYearDatalist,t.lastYearDatalist)}))}))}},{key:"tabsChange",value:function(t){this.deptObj={deptId:this.departNameTabs[t].deptId,deptName:this.departNameTabs[t].showName},this._getQuickOverview(this.deptObj),this.$emit("tabsChange",t)}},{key:"mounted",value:function(){this.deptObj=Object(r["a"])({},this.enterDeptObj)}}]),a}(p["d"]);Object(d["a"])([Object(p["c"])()],T.prototype,"enterDeptObj",void 0),Object(d["a"])([Object(p["c"])()],T.prototype,"dateTime",void 0),Object(d["a"])([Object(p["c"])()],T.prototype,"departNameTabs",void 0),Object(d["a"])([Object(p["c"])()],T.prototype,"echartsWarpName",void 0),Object(d["a"])([Object(p["c"])({default:1})],T.prototype,"deptLevel",void 0),Object(d["a"])([Object(p["c"])()],T.prototype,"salesDataObj",void 0),T=Object(d["a"])([Object(p["a"])({components:{MouthYearData:C,echartsBar:D}})],T);var E=T,I=E,L=(a("aba2"),Object(y["a"])(I,s,c,!1,null,"24ab0a01",null));e["a"]=L.exports},"32b4":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pt-4 px-2"},[a("ul",{staticClass:"lineRow background-color-white pa-4 d-flex align-center justify-space-between mb-2",on:{click:function(e){return t.lineRowClick(1)}}},[t._m(0),a("li",{staticClass:"color-gray-3"},[t._v("点击查看不同品种大类")])]),a("ul",{staticClass:"lineRow background-color-white pa-4 d-flex align-center justify-space-between mb-2",on:{click:function(e){return t.lineRowClick(2)}}},[t._m(1),a("li",{staticClass:"color-gray-3"},[t._v("点击查看不同客户分类")])]),a("ul",{staticClass:"lineRow background-color-white pa-4 d-flex align-center justify-space-between",on:{click:function(e){return t.lineRowClick(3)}}},[t._m(2),a("li",{staticClass:"color-gray-3"},[t._v("点击查看不同品牌详情")])])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"d-flex align-center"},[a("span",{staticClass:"imgWarp imgWarp-1"}),a("span",{staticClass:"pl-2 color-gray-5 font-16"},[t._v("按成分维度查看")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"d-flex align-center"},[a("span",{staticClass:"imgWarp imgWarp-2"}),a("span",{staticClass:"pl-2 color-gray-5 font-16"},[t._v("按客户维度查看")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"d-flex align-center"},[a("span",{staticClass:"imgWarp imgWarp-3"}),a("span",{staticClass:"pl-2 color-gray-5 font-16"},[t._v("按KA品牌查看")])])}],r=a("5530"),n=a("d4ec"),i=a("bee2"),o=a("262e"),l=a("2caf"),d=a("9ab4"),p=a("1b40"),b=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(i["a"])(a,[{key:"lineRowClick",value:function(t){this.$router.push({name:"DimensionIndex",params:Object(r["a"])(Object(r["a"])({id:t},this.enterDeptObj),{},{deptLevel:this.deptLevel,date:this.dateTime})})}}]),a}(p["d"]);Object(d["a"])([Object(p["c"])()],b.prototype,"enterDeptObj",void 0),Object(d["a"])([Object(p["c"])()],b.prototype,"deptLevel",void 0),Object(d["a"])([Object(p["c"])()],b.prototype,"dateTime",void 0),b=Object(d["a"])([Object(p["a"])({})],b);var u=b,h=u,f=(a("37e0"),a("2877")),v=Object(f["a"])(h,s,c,!1,null,"2fa74a2a",null);e["a"]=v.exports},"37e0":function(t,e,a){"use strict";a("80d8")},5420:function(t,e,a){"use strict";var s=a("d4ec"),c=a("bee2"),r=a("262e"),n=a("2caf"),i=(a("d3b7"),a("9ab4")),o=a("1b40"),l=a("2279"),d=a("3268"),p=a("4bb5");o["a"].registerHooks(["beforeRouteEnter"]);var b=Object(p["a"])("app"),u=function(t){Object(r["a"])(a,t);var e=Object(n["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"_getQuickOverviewMix",value:function(t){return new Promise((function(e,a){Object(l["E"])(t).then((function(t){e(t)})).catch((function(t){a(t)}))}))}}]),a}(o["d"]);Object(i["a"])([b.Getter],u.prototype,"csjDepartObj",void 0),Object(i["a"])([b.Getter],u.prototype,"csjNowTime",void 0),Object(i["a"])([b.Getter],u.prototype,"csjChangeTime",void 0),Object(i["a"])([b.Mutation],u.prototype,"SET_CSJNOWTIME",void 0),Object(i["a"])([b.Mutation],u.prototype,"SET_CSJCHANGETIME",void 0),Object(i["a"])([b.Mutation],u.prototype,"SET_CSJDEPARTOBJ",void 0),u=Object(i["a"])([Object(o["a"])({components:{DepartIndex:d["a"]}})],u),e["a"]=u},"80d8":function(t,e,a){},"87b8":function(t,e,a){},9419:function(t,e,a){"use strict";a("87b8")},"9fa2":function(t,e,a){},aba2:function(t,e,a){"use strict";a("9fa2")}}]);