(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b7a0a8c"],{"1ad2":function(t,e,a){"use strict";a("ea32")},"1fcf":function(t,e,a){},"3fbb":function(t,e,a){},"4cbb":function(t,e,a){"use strict";a("1fcf")},"500b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-100"},[a("project-common-block",{attrs:{leaderLevel:t.leaderLevel,data:t.data,title:t.projectObj.projectName,selectMonth:t.selectMonth,columns:t.columns,orgList:t.orgList,resList:t.resList},on:{tabChange:t.onTabChange,monthChange:t.onMonthChange,search:t.onUserSearch,userChange:t.onUserChange}},[a("van-search",{attrs:{clearable:"",placeholder:t.placeholder},on:{search:t.getGoodsList},model:{value:t.searchGoodsParams.key,callback:function(e){t.$set(t.searchGoodsParams,"key",e)},expression:"searchGoodsParams.key"}}),a("van-tabs",{attrs:{color:"#3561F2"},on:{change:t.getGoodsList},model:{value:t.searchGoodsParams.status,callback:function(e){t.$set(t.searchGoodsParams,"status",e)},expression:"searchGoodsParams.status"}},[a("van-tab",{attrs:{title:"全部"}}),a("van-tab",{attrs:{title:"未准入"}}),a("van-tab",{attrs:{title:"已准入"}})],1),t._l(t.list,(function(e,s){return a("project-goods-item",{key:s,attrs:{data:e,gray:s%2===0},on:{click:t.toDetail}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.list.length,expression:"!loading && !list.length"}],staticClass:"py-7",attrs:{description:"暂无数据"}}),a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}})],2),a("fix-button",{attrs:{title:"点击查看项目品种政策",smallFont:""},on:{click:t.toPolicy}})],1)},i=[],o=a("2909"),r=a("1da1"),c=a("d4ec"),n=a("bee2"),l=a("262e"),u=a("2caf"),d=(a("96cf"),a("ac1f"),a("5319"),a("d81d"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("25f0"),a("b0c0"),a("9ab4")),h=a("1b40"),p=a("5238"),b=a("a8c3"),f=a("4bb5"),v=Object(f["a"])("app"),m=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.apply(this,arguments),t.leaderLevel=0,t.projectObj={},t.data={},t.searchGoodsParams={key:"",status:0},t.list=[],t.loading=!1,t}return Object(n["a"])(a,[{key:"onTabChange",value:function(){this.$route.params.flag="1",this.$router.back()}},{key:"getData",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={date:this.selectMonth.replace(".","-"),userIdList:this.leaderLevel?this.resList[2].filter((function(t){var e=t.userId;return-1!==e})).map((function(t){var e=t.userId;return e})):[this.userInfor.userId],projectId:this.projectObj.projectId},this.leaderLevel&&(e.centerId=1===this.resList[0].id?"":this.resList[0].id,e.crmDeptId=this.resList[1].id.toString().includes("-1")?"":this.resList[1].id),t.next=4,Object(b["c"])(e);case 4:a=t.sent,this.data=a.data;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onMonthChange",value:function(t){this.selectMonth=t,this.getData(),this.getGoodsList()}},{key:"onUserChange",value:function(t){this.onUserSearch(""),this.resList=Object(o["a"])(t),this.getData(),this.getGoodsList()}},{key:"getGoodsList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.list=[],this.loading=!0,e=this.searchGoodsParams,a=e.key,s=e.status,i={date:this.selectMonth.replace(".","-"),userIdList:this.leaderLevel?this.resList[2].filter((function(t){var e=t.userId;return-1!==e})).map((function(t){var e=t.userId;return e})):[this.userInfor.userId],projectId:this.projectObj.projectId,key:a,accessFlag:s?s-1:""},this.leaderLevel&&(i.centerId=1===this.resList[0].id?"":this.resList[0].id,i.crmDeptId=this.resList[1].id.toString().includes("-1")?"":this.resList[1].id),t.next=8,Object(b["d"])(i);case 8:o=t.sent,this.loading=!1,o.success&&(this.list=o.data);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toDetail",value:function(t){this.SET_HADDONEONDETAIL(!1),this.$router.push({name:"ProjectManageDetail",params:{data:t,date:this.selectMonth.replace(".","-")}})}},{key:"toPolicy",value:function(){this.$router.push({name:"ProjectManagePolicy",params:{type:"1",date:this.selectMonth.replace(".","-"),projectObj:this.projectObj}})}},{key:"initData",value:function(){var t=this.projectParams,e=t.columns,a=t.selectMonth,s=t.orgOriginList,i=t.resList,r=t.data,c=t.leaderLevel;this.columns=e,this.selectMonth=a,this.orgOriginList=s,this.orgList=Object(o["a"])(this.orgOriginList),this.resList=i,this.projectObj=r,this.leaderLevel=c,this.getData(),this.getGoodsList()}},{key:"activated",value:function(){this.hadDoneOnDetail&&this.initData()}}]),a}(Object(h["b"])(p["a"]));Object(d["a"])([v.Getter],m.prototype,"userInfor",void 0),Object(d["a"])([v.Mutation],m.prototype,"SET_HADDONEONDETAIL",void 0),Object(d["a"])([v.Getter],m.prototype,"projectParams",void 0),Object(d["a"])([v.Getter],m.prototype,"hadDoneOnDetail",void 0),m=Object(d["a"])([Object(h["a"])({beforeRouteEnter:function(t,e,a){a((function(t){"ProjectManage"===e.name&&t.$nextTick((function(){t.initData()}))}))}})],m);var g=m,j=g,O=(a("897d"),a("2877")),L=Object(O["a"])(j,s,i,!1,null,"53899be0",null);e["default"]=L.exports},5238:function(t,e,a){"use strict";var s=a("2909"),i=a("d4ec"),o=a("bee2"),r=a("262e"),c=a("2caf"),n=(a("d3b7"),a("159b"),a("caad"),a("2532"),a("b0c0"),a("9ab4")),l=a("1b40"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-sticky",[a("block-tab",{attrs:{active:0,list:t.leaderLevel?1===t.leaderLevel?["准入管理","深分进度"]:["深分进度"]:["准入管理"]},on:{change:t.onTabChange}})],1),a("div",{staticClass:"pa-10"},[t.leaderLevel?a("div",{staticClass:"d-flex font-14"},[a("div",{staticClass:"background-color-main-3 border-radius-10 color-white fontWeight py-3 px-4",on:{click:function(e){t.showSelectMonth=!0}}},[t._v(" "+t._s(t.selectMonth)+" ")]),a("div",{staticClass:"flex-1 ml-2 background-color-white border-radius-10 color-black-2 fontWeight pa-10 d-flex align-center slh",on:{click:function(e){t.showSelect=!0}}},[a("div",{staticClass:"flex-1 slh"},[t._v(" "+t._s(t.resList.length?t.resList[0].name:"")+"/"+t._s(t.resList[1]?t.resList[1].name:"")+t._s(t.resList[1]&&-1===t.resList[1].id?"部门":"")+"/"+t._s(t.resList[2]&&t.resList[2].map((function(t){return t.userName})).join("、"))+t._s(t.resList[2]&&-1===t.resList[2][0].userId?"业务员":"")+" ")]),a("van-icon",{staticClass:"ml-1 font-14 color-gray-4",attrs:{name:t.showSelect?"arrow-up":"arrow-down"}})],1)]):a("div",{staticClass:"d-flex justify-space-between align-center pa-10 font-14 fontWeight background-color-white border-radius-10",on:{click:function(e){t.showSelectMonth=!0}}},[a("div",{staticClass:"color-black-2"},[t._v(t._s(t.selectMonth))]),a("div",{staticClass:"color-gray-3"},[t._v("月份筛选")])]),a("div",{staticClass:"d-flex pt-10"},[t.title?a("project-data",{staticClass:"flex-1",attrs:{icon:"zhanbitu_chart-proportion",title:t.title,specialTitle:""}}):a("project-data",{staticClass:"flex-1",attrs:{icon:"zhanbitu_chart-proportion",title:"项目数",value:t.data.projectNum}}),a("project-data",{staticClass:"flex-1 ml-2",attrs:{icon:"hezi_box",title:"品规数量",value:t.data.productNum}})],1),a("div",{staticClass:"pt-2 d-flex"},[a("project-data",{staticClass:"flex-1",attrs:{icon:"a-bianzu8",title:"目标条目",growNum:t.data.goalNumInc,value:t.data.goalNum,grow:""}}),a("project-data",{staticClass:"flex-1 ml-2",attrs:{icon:"a-bianzu122",title:"准入条目",growNum:t.data.accessNumInc,value:t.data.accessNum,grow:""}})],1),a("div",{staticClass:"mt-2 border-radius-10 background-color-white"},[t._t("default")],2)]),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showSelectMonth,callback:function(e){t.showSelectMonth=e},expression:"showSelectMonth"}},[a("van-picker",{attrs:{"show-toolbar":"",title:"选择年月",columns:t.columns},on:{confirm:t.onConfirm}})],1),t.showSelect?a("org-dept",{attrs:{show:t.showSelect,resList:t.resList,orgList:t.orgList},on:{search:t.onSearch,confirm:t.onUserConfirm,cancel:t.onCancel}}):t._e()],1)},d=[],h=(a("fb6a"),a("99af"),a("a9e3"),a("5eee")),p=a("5452"),b=a("f270"),f=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.showSelectMonth=!1,t.showSelect=!1,t}return Object(o["a"])(a,[{key:"onTabChange",value:function(){this.$emit("tabChange")}},{key:"onConfirm",value:function(t){var e=t[1].slice(0,t[1].length-1),a="".concat(t[0].slice(0,4),".").concat(+e>9?e:"0"+e);this.showSelectMonth=!1,this.$emit("monthChange",a)}},{key:"onSearch",value:function(t){this.$emit("search",t)}},{key:"onCancel",value:function(){this.showSelect=!1,this.$emit("search","")}},{key:"onUserConfirm",value:function(t){this.showSelect=!1,this.$emit("userChange",t)}}]),a}(l["d"]);Object(n["a"])([Object(l["c"])({type:Object,default:function(){return{}}})],f.prototype,"data",void 0),Object(n["a"])([Object(l["c"])({type:String,default:""})],f.prototype,"title",void 0),Object(n["a"])([Object(l["c"])({type:String,default:""})],f.prototype,"selectMonth",void 0),Object(n["a"])([Object(l["c"])({type:Number,default:0})],f.prototype,"leaderLevel",void 0),Object(n["a"])([Object(l["c"])({type:Array,default:[]})],f.prototype,"columns",void 0),Object(n["a"])([Object(l["c"])({type:Array,default:[]})],f.prototype,"orgList",void 0),Object(n["a"])([Object(l["c"])({type:Array,default:function(){return[]}})],f.prototype,"resList",void 0),f=Object(n["a"])([Object(l["a"])({components:{BlockTab:h["a"],OrgDept:p["a"],ProjectData:b["a"]}})],f);var v=f,m=v,g=(a("1ad2"),a("2877")),j=Object(g["a"])(m,u,d,!1,null,"72f97c49",null),O=j.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["d-flex align-center py-3 pl-4 textAlignL font-14",t.gray?"background-color-gray-8":"background-color-white"],on:{click:t.onClick}},[a("div",{staticClass:"flex-1 color-main-3"},[t._v(t._s(t.data.projectName))]),a("div",{staticClass:"flex-1 ml-2 slh"},[t._v(t._s(t.data.productNum))]),a("div",{staticClass:"flex-1 ml-2 slh d-flex"},[a("div",[t._v(t._s(t.data.goalNum))]),a("div",{staticClass:"color-normal ml-3"},[t.data.goalNumInc>=0?a("span",[t._v("+")]):t._e(),t._v(t._s(t.data.goalNumInc))])]),a("div",{staticClass:"flex-1 ml-2 slh d-flex"},[a("div",[t._v(t._s(t.data.accessNum))]),a("div",{staticClass:"color-normal ml-3"},[t.data.accessNumInc>=0?a("span",[t._v("+")]):t._e(),t._v(t._s(t.data.accessNumInc))])])])},y=[],k=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"onClick",value:function(){this.$emit("click")}}]),a}(l["d"]);Object(n["a"])([Object(l["c"])({type:Object,default:{}})],k.prototype,"data",void 0),Object(n["a"])([Object(l["c"])({type:Boolean,default:!1})],k.prototype,"gray",void 0),k=Object(n["a"])([Object(l["a"])({})],k);var C=k,w=C,_=(a("4cbb"),Object(g["a"])(w,L,y,!1,null,"17942e27",null)),x=_.exports,I=a("5acd"),D=a("5669"),M=a("a8ce"),N=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.columns=[],t.orgOriginList=[],t.orgList=[],t.resList=[],t.selectMonth="",t.placeholder="搜索",t}return Object(o["a"])(a,[{key:"onUserSearch",value:function(t){var e=this;t?(this.orgList=[],this.orgOriginList.forEach((function(a){var s;if(a.name.includes(t))e.orgList.push(a);else if(null!==(s=a.children)&&void 0!==s&&s.length){var i=[];a.children.forEach((function(e){var s;if(e.name.includes(t))i.push(e);else if(null!==(s=e.crmUserDtoList)&&void 0!==s&&s.length){var o=[];e.crmUserDtoList.forEach((function(e){e.userName.includes(t)&&o.push(e)})),o.length&&i.push({id:e.id,name:e.name,parentId:a.id,crmUserDtoList:o})}})),i.length&&e.orgList.push({id:a.id,name:a.name,children:i})}}))):this.orgList=Object(s["a"])(this.orgOriginList)}}]),a}(l["d"]);N=Object(n["a"])([Object(l["a"])({components:{ProjectCommonBlock:O,ThItem:I["a"],ProjectItem:x,ProjectGoodsItem:D["a"],FixButton:M["a"]}})],N);e["a"]=N},"897d":function(t,e,a){"use strict";a("3fbb")},ea32:function(t,e,a){}}]);