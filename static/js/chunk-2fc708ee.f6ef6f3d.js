(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fc708ee"],{"03c3":function(e,t,a){},c9e0:function(e,t,a){"use strict";a("03c3")},f217:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-100"},[a("div",{staticClass:"font-14 inner-block"},[e._v("客户信息"+e._s(1===+e.type?"详情":"编辑"))]),a("div",{staticClass:"font-14 mt-4 mb-2 customer-title"},[e._v("基础信息")]),a("van-cell-group",{staticClass:"detail__card"},[a("app-cell",{attrs:{title:"客户信息",value:e.formData.custId?e.formData.custId+"/"+e.formData.custName:""}}),a("app-cell",{attrs:{title:"医院等级",value:e.formData.hospitalLevel,"value-class":"color-gray-5"}}),e.formData.isShare?e._e():a("app-cell",{attrs:{title:"已维护人数",value:e.formData.personNum,"value-class":"color-main-2"}}),e.formData.isShare?e._e():a("app-cell",{attrs:{title:"一般客情热力值",value:e.formData.warmthPersonNum,"value-class":"color-normal"}}),a("app-cell",{attrs:{title:"维护人",value:e.formData.cceId&&e.formData.creName?e.formData.creName:"","value-class":"color-gray-5"}})],1),a("div",{staticClass:"font-14 mt-4 mb-2 customer-title"},[e._v("拓展信息")]),2===+e.type?a("div",{staticClass:"detail__card"},[a("van-form",{attrs:{"validate-first":""},on:{failed:e.onFailed}},[e.orgRoleEdit?a("van-field",{attrs:{readonly:"",clickable:"",required:"",value:e.formData.orgRole?e.formData.orgRole.name:"",label:"科室角色维护","input-align":"right",placeholder:"点击选择",rules:[{validator:e.validator,message:"请选择科室角色"}]},on:{click:function(t){return e.chooseFilter(1)}}}):a("van-field",{attrs:{readonly:"",value:e.formData.orgRole?e.formData.orgRole.name:"",disabled:!e.orgRoleEdit,label:"科室角色维护","input-align":"right"}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.formData.yearSalesVolume?e.formData.yearSalesVolume.name:"",label:"年药品总采购额","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(2)}}}),a("van-field",{attrs:{clearable:"",type:"number",label:"英特占比","input-align":"right",placeholder:"请输入英特占比(数字)"},model:{value:e.formData.intPercent,callback:function(t){e.$set(e.formData,"intPercent",t)},expression:"formData.intPercent"}}),a("van-field",{attrs:{readonly:"",clickable:"",required:"",value:e.formData.scienceLine?e.formData.scienceLine.name:"",label:"学术专线","input-align":"right",placeholder:"点击选择",rules:[{validator:e.validator,message:"请选择学术专线"}]},on:{click:function(t){return e.chooseFilter(3)}}}),a("van-field",{attrs:{clearable:"",label:"股东成分","input-align":"right",placeholder:"请输入股东成分"},model:{value:e.formData.shareholderCompose,callback:function(t){e.$set(e.formData,"shareholderCompose",t)},expression:"formData.shareholderCompose"}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.formData.isProfit?e.formData.isProfit.name:"",label:"经营性质","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(4)}}}),a("van-field",{attrs:{clearable:"",label:"营利性质","input-align":"right",placeholder:"请输入营利性质"},model:{value:e.formData.profitProperty,callback:function(t){e.$set(e.formData,"profitProperty",t)},expression:"formData.profitProperty"}})],1)],1):a("van-cell-group",{staticClass:"detail__card"},[a("app-cell",{attrs:{title:"科室角色维护",value:e.formData.orgRole.name}}),a("app-cell",{attrs:{title:"年药品总采购额",value:e.formData.yearSalesVolume.name?e.formData.yearSalesVolume.name:""}}),a("app-cell",{attrs:{title:"英特占比",value:e.formData.intPercent||""}}),a("app-cell",{attrs:{title:"学术专线",value:e.formData.scienceLine?e.formData.scienceLine.name:""}}),a("app-cell",{attrs:{title:"股东成分",value:e.formData.shareholderCompose||""}}),a("app-cell",{attrs:{title:"经营性质",value:e.formData.isProfit?1===e.formData.isProfit.value?"政府办":2===e.formData.isProfit.value?"非政府办营利":3===e.formData.isProfit.value?"非政府办非营利":"":""}}),a("app-cell",{attrs:{title:"营利性质",value:e.formData.profitProperty||""}})],1),a("div",{staticClass:"d-flex justify-center mx-4 mt-7"},[2===+e.type?a("submit-btn",{attrs:{loading:e.submitLoading,title:"保存"},on:{click:e.submit}}):e.detailInfor.onlyRead?e._e():a("submit-btn",{attrs:{title:"编辑"},on:{click:e.editDetail}})],1),1===e.actionType?a("van-action-sheet",{attrs:{actions:e.roleTypeList,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectRoleType},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),2===e.actionType?a("van-action-sheet",{attrs:{actions:e.saleTypeList,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectSaleType},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),3===e.actionType?a("van-action-sheet",{attrs:{actions:e.learnTypeList,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectLearnType},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),4===e.actionType?a("van-action-sheet",{attrs:{actions:e.isProfitList,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectProfit},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e()],1)},o=[],r=a("5530"),n=a("3835"),s=a("1da1"),l=a("d4ec"),c=a("bee2"),u=a("262e"),f=a("2caf"),m=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("7db0"),a("d81d"),a("9ab4")),p=a("1b40"),h=a("4bb5"),d=a("f727"),v=a("74d2"),y=Object(h["a"])("app"),D=function(e){Object(u["a"])(a,e);var t=Object(f["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.type=e.$route.params.type,e.customerInfo=e.$route.params.item,e.activeId=-1,e.activeIndex=0,e.labelTreeList=[],e.loading=!1,e.submitLoading=!1,e.actionShow=!1,e.actionType=0,e.hosTypeList=[],e.saleTypeList=[],e.learnTypeList=[],e.isProfitList=[],e.roleTypeList=[],e.orgRoleEdit=!0,e.formData={orgRole:{},yearSalesVolume:{},intPercent:"",scienceLine:{},shareholderCompose:"",isProfit:{},profitProperty:""},e}return Object(c["a"])(a,[{key:"getSearchList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i,o,s,l,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.hosTypeList=[],this.saleTypeList=[],this.learnTypeList=[],this.isProfitList=[{value:1,name:"政府办"},{value:2,name:"非政府办营利"},{value:3,name:"非政府办非营利"}],this.roleTypeList=[],e.next=7,Promise.all([this.getTypeList(12),this.getTypeList(13),this.getTypeList(1),this.getTypeList(2,1)]);case 7:t=e.sent,a=Object(n["a"])(t,4),i=a[0],o=a[1],s=a[2],l=a[3],this.hosTypeList=i,this.saleTypeList=o,this.learnTypeList=s,this.roleTypeList=l,this.formData=Object(r["a"])({},this.customerInfo),this.formData.orgRole=this.formData.orgRoleId?{value:this.formData.orgRoleId,name:this.roleTypeList.find((function(e){return e.value===+c.formData.orgRoleId})).name}:{},this.formData.yearSalesVolume=this.formData.yearSalesVolume?{value:this.formData.yearSalesVolume,name:this.saleTypeList.find((function(e){return e.value===+c.formData.yearSalesVolume})).name}:{},this.formData.scienceLine=this.formData.scienceLine?{value:this.formData.scienceLine,name:this.learnTypeList.find((function(e){return e.value===+c.formData.scienceLine})).name}:{},this.formData.isProfit={value:this.formData.isProfit,name:1===this.formData.isProfit?"政府办":2===this.formData.isProfit?"非政府办营利":3===this.formData.isProfit?"非政府办非营利":""};case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTypeList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var i,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},i=a?{full:!0,pageNum:1,pageSize:1e5,typeId:t,usestatus:1,typeSecondId:a}:{full:!0,pageNum:1,pageSize:1e5,usestatus:1,typeId:t},e.next=4,Object(d["d"])(i);case 4:return o=e.sent,r=o.data.list.map((function(e){var t=e.DIC_SELECT_ID,a=e.DIC_SELECT_NAME;return{value:t,name:a}})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"chooseFilter",value:function(e){this.actionShow=!0,this.actionType=e}},{key:"onSelectRoleType",value:function(e){this.actionShow=!1,this.formData.orgRole=e,this.$forceUpdate()}},{key:"onSelectSaleType",value:function(e){this.actionShow=!1,this.formData.yearSalesVolume=e,this.$forceUpdate()}},{key:"onSelectLearnType",value:function(e){this.actionShow=!1,this.formData.scienceLine=e,this.$forceUpdate()}},{key:"onSelectProfit",value:function(e){this.actionShow=!1,this.formData.isProfit=e,this.$forceUpdate()}},{key:"validator",value:function(e){}},{key:"onFailed",value:function(e){}},{key:"submit",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i,o,r,n,s,l,c,u,f,m,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.formData,a=t.cceId,i=t.custId,o=t.custName,r=t.intPercent,n=t.profitProperty,s=t.shareholderCompose,l=t.orgRole,c=t.scienceLine,u=t.yearSalesVolume,f=t.isProfit,l.value){e.next=4;break}return this.$toast("请选择科室角色"),e.abrupt("return");case 4:if(c.value){e.next=7;break}return this.$toast("请选择学术专线"),e.abrupt("return");case 7:return this.submitLoading=!0,e.next=10,Object(v["ab"])({cceId:a,customId:i,customName:o,intPercent:r,isProfit:f.value||"",orgRoleId:l.value,profitProperty:n,scienceLine:c.value,shareholderCompose:s,yearSalesVolume:u.value||""});case 10:m=e.sent,m.success&&(this.SET_HADDONEONDETAIL(!0),this.$toast.success(m.msg||"保存成功"),setTimeout((function(){p.submitLoading=!1,p.$router.back()}),500));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isAllow",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["p"])({custId:t});case 2:a=e.sent,a.success?this.orgRoleEdit=!0:this.orgRoleEdit=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editDetail",value:function(){this.type=2,this.customerInfo.cceId&&this.isAllow(this.customerInfo.custId)}},{key:"created",value:function(){this.getSearchList(),2===+this.type&&this.customerInfo.cceId&&this.isAllow(this.customerInfo.custId)}}]),a}(p["d"]);Object(m["a"])([y.Mutation],D.prototype,"SET_HADDONEONDETAIL",void 0),Object(m["a"])([y.Getter],D.prototype,"detailInfor",void 0),D=Object(m["a"])([Object(p["a"])({})],D);var b=D,g=b,L=(a("c9e0"),a("2877")),S=Object(L["a"])(g,i,o,!1,null,"1f47f0c4",null);t["default"]=S.exports}}]);