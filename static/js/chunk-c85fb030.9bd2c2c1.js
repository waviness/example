(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c85fb030"],{"0ce9":function(t,e,a){"use strict";a("c03a")},"1b1a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-100"},[a("div",{staticClass:"px-10 pt-10"},[t._v(t._s(1===+t.statusType?"未处理":2===+t.statusType?"已处理":"已审核")+"总单详情")]),t.loading||t.list.length?a("div",{staticClass:"px-10 pt-10"},t._l(t.list,(function(e,s){return a("impulse-detail-item",{key:s,staticClass:"mb-2",attrs:{data:e,status:t.statusType},on:{submit:t.onSubmit}})})),1):a("app-empty",{attrs:{description:"暂无数据"}}),t.imgShow?a("upload-pop",{attrs:{type:t.showType,data:t.curData,loading:t.imgSubmiting},on:{close:function(e){t.imgShow=!1},confirm:t.submitImg}}):t._e(),a("van-dialog",{attrs:{title:"是否确认提交并添加补充说明",confirmButtonColor:"#2271F5","show-cancel-button":"","before-close":t.submitDesc},model:{value:t.submitShow,callback:function(e){t.submitShow=e},expression:"submitShow"}},[a("van-field",{staticClass:"text-div",attrs:{type:"textarea",label:"",placeholder:"点击输入补充说明(选填)",center:!0,"input-align":"center"},model:{value:t.replenishDesc,callback:function(e){t.replenishDesc=e},expression:"replenishDesc"}})],1)],1)},i=[],n=a("2909"),c=a("1da1"),o=a("d4ec"),r=a("bee2"),l=a("262e"),u=a("2caf"),d=(a("d81d"),a("96cf"),a("9ab4")),m=a("1b40"),p=a("4bb5"),f=a("dc4ae"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gray-block box-shadow"},[a("div",{staticClass:"white-block pa-10"},[a("div",{staticClass:"d-flex justify-space-between align-center"},[a("div",{staticClass:"tag-blue"},[t._v(t._s(t.data.id))]),a("div",{staticClass:"font-bold"},[t._v(t._s(t.data.confirmDate))])]),a("info-item",{staticClass:"mt-2",attrs:{title:"客户",content:t.data.customId?t.data.customId+"/"+t.data.customName:""}}),a("info-item",{staticClass:"mt-2",attrs:{title:"业务部门",content:t.data.deptId?t.data.deptId+"/"+t.data.deptName:""}}),a("info-item",{staticClass:"mt-2",attrs:{title:"销售数据核算单元",content:t.data.entryId?t.data.entryId+"/"+t.data.entryName:"",titleWidth:96,contentClass:"font-bold"}}),1!==t.status?a("info-item",{staticClass:"mt-2",attrs:{title:"补充说明",content:t.data.confirmMemo}}):t._e(),a("info-item",{staticClass:"mt-2",attrs:{title:"备注",content:t.data.memo,contentClass:"color-main-2"}})],1),1!==t.status?a("div",{staticClass:"inner-block textAlignC"},[a("van-button",{staticClass:"submit-btn",attrs:{type:"info",size:"small",round:"",color:"#2271F5",plain:""},on:{click:function(e){return t.submit(2)}}},[t._v("查看图片")]),a("van-button",{staticClass:"submit-btn ml-3",attrs:{size:"small",round:"",disabled:""}},[t._v("已提交")])],1):a("div",{staticClass:"inner-block textAlignC"},[a("van-button",{staticClass:"submit-btn",attrs:{type:"info",size:"small",round:"",color:"#2271F5",plain:""},on:{click:function(e){return t.submit(1)}}},[t._v("上传图片")]),a("van-button",{staticClass:"submit-btn ml-3",attrs:{type:"info",size:"small",round:"",color:"#2271F5"},on:{click:function(e){return t.submit(3)}}},[t._v("提交")])],1)])},h=[],v=(a("a9e3"),a("3355")),y=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a,[{key:"submit",value:function(t){this.$emit("submit",t,this.data)}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])({type:Object,default:{}})],y.prototype,"data",void 0),Object(d["a"])([Object(m["c"])({type:Number,default:0})],y.prototype,"status",void 0),y=Object(d["a"])([Object(m["a"])({components:{InfoItem:v["a"]}})],y);var g=y,O=g,j=(a("e1a5"),a("2877")),C=Object(j["a"])(O,b,h,!1,null,"471401f7",null),w=C.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-popup",{style:{height:"90%"},attrs:{closeable:"",position:"bottom",round:""},on:{close:t.onClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"d-flex flex-column full-height"},[a("div",{staticClass:"font-16 font-bold textAlignC py-3"},[t._v("细单图片"+t._s(1===t.type?"上传":"查看"))]),a("div",{staticClass:"main-div"},[a("div",{staticClass:"infor-div white-block pa-10"},[a("div",{staticClass:"d-flex justify-space-between align-center"},[a("div",{staticClass:"impulse-tag color-main-2"},[t._v(t._s(t.data.id))]),a("div",{staticClass:"font-bold"},[t._v(t._s(t.data.confirmDate))])]),a("info-item",{staticClass:"mt-2",attrs:{title:"客户",content:t.data.customId?t.data.customId+"/"+t.data.customName:""}}),a("info-item",{staticClass:"mt-2",attrs:{title:"业务部门",content:t.data.deptId?t.data.deptId+"/"+t.data.deptName:""}}),a("info-item",{staticClass:"mt-2",attrs:{title:"销售数据核算单元",content:t.data.entryId?t.data.entryId+"/"+t.data.entryName:"",titleWidth:96,contentClass:"font-bold"}}),t.data.status?a("info-item",{staticClass:"mt-2",attrs:{title:"补充说明",content:t.data.desc}}):t._e(),a("info-item",{staticClass:"mt-2",attrs:{title:"备注",content:t.data.memo,contentClass:"color-main-2"}})],1),a("div",{staticClass:"mx-4 my-3"},[t._l(t.data.files,(function(e,s){return a("van-image",{key:s,staticClass:"upload-item",attrs:{fit:"cover",src:e.address},on:{click:function(e){return t.previewImg(s)}}})})),1===t.type||t.data.files&&t.data.files.length?t._e():a("app-empty",{attrs:{description:"未上传图片"}})],2),1===t.type?a("div",{staticClass:"mx-4"},[a("van-uploader",{attrs:{"after-read":t.afterRead,"max-size":10485760,accept:""},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1):t._e()]),a("van-button",{staticClass:"ma-4 height-40",attrs:{color:"#2271F5",round:"",loading:t.loading},on:{click:t.confirm}},[t._v("确认")])],1)])},I=[],x=(a("4662"),a("28a2")),D=a("f727"),_=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.show=!0,t.fileList=[],t}return Object(r["a"])(a,[{key:"previewImg",value:function(t){var e=this.data.files.map((function(t){var e=t.address;return e}));Object(x["a"])({images:e,startPosition:t,closeable:!0})}},{key:"afterRead",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,s,i,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.status="uploading",e.message="上传中...",t.next=5,Object(D["l"])({file:e.file});case 5:a=t.sent,a.success?(e.status="success",e.message="上传成功",e.result=a.data,s=e.result,i=s.fileName,n=s.suffix,c=s.fullPath,e.fileName=i,e.fileType=n,e.fileUrl=c,this.$forceUpdate()):(e.status="failed",e.message="上传失败");case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"confirm",value:function(){if(1===this.type){if(!this.fileList.length)return void this.$toast("请至少上传一张图片");this.$emit("confirm",this.fileList)}else this.$emit("close")}},{key:"onClose",value:function(){this.$emit("close")}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])({type:Number,default:0})],_.prototype,"type",void 0),Object(d["a"])([Object(m["c"])({type:Object,default:{}})],_.prototype,"data",void 0),Object(d["a"])([Object(m["c"])({type:Boolean,default:!1})],_.prototype,"loading",void 0),_=Object(d["a"])([Object(m["a"])({components:{InfoItem:v["a"]}})],_);var S=_,N=S,T=(a("a92e"),Object(j["a"])(N,k,I,!1,null,"255eb357",null)),L=T.exports,$=a("ca48"),R=Object(p["a"])("app"),E=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.statusType=+t.$route.params.statusType,t.docId=+t.$route.params.docId,t.loading=!1,t.list=[],t.submitShow=!1,t.replenishDesc="",t.curData={},t.imgShow=!1,t.showType=0,t.imgSubmiting=!1,t}return Object(r["a"])(a,[{key:"getDetailList",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={docId:this.docId,status:this.statusType},this.loading=!0,t.next=5,Object($["b"])(e);case 5:a=t.sent,this.loading=!1,a.success&&(this.list=Object(n["a"])(a.data));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onSubmit",value:function(t,e){this.curData=e,3===t?(this.replenishDesc="",this.submitShow=!0):(this.imgShow=!0,this.showType=t)}},{key:"submitImg",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,s,i,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this.curData,s=a.docId,i=a.id,n=e.map((function(t){return{docId:s,dtlId:i,url:t.result.url}})),this.imgSubmiting=!0,t.next=5,Object($["e"])(n);case 5:c=t.sent,this.imgSubmiting=!1,c.success&&(this.$toast.success(c.msg||"上传成功"),this.imgShow=!1,this.getDetailList());case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"submitDesc",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"!==e){t.next=9;break}return s={dtlId:this.curData.id,memo:this.replenishDesc,userId:this.curData.salerId},t.next=4,Object($["d"])(s);case 4:i=t.sent,i.success&&(this.$toast.success(i.msg||"提交成功"),this.submitShow=!1,this.SET_HADDONEONDETAIL(!0),this.getDetailList()),a(),t.next=10;break;case 9:a();case 10:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){this.list=[],this.getDetailList()}},{key:"activated",value:function(){this.hadDoneOnDetail&&this.getDetailList()}}]),a}(m["d"]);Object(d["a"])([R.Mutation],E.prototype,"SET_HADDONEONDETAIL",void 0),Object(d["a"])([R.Getter],E.prototype,"hadDoneOnDetail",void 0),E=Object(d["a"])([Object(m["a"])({components:{FilterPop:f["a"],ImpulseDetailItem:w,UploadPop:L}})],E);var A=E,F=A,z=(a("0ce9"),Object(j["a"])(F,s,i,!1,null,"19a5421b",null));e["default"]=z.exports},a92e:function(t,e,a){"use strict";a("c6e5")},af76:function(t,e,a){},c03a:function(t,e,a){},c6e5:function(t,e,a){},e1a5:function(t,e,a){"use strict";a("af76")}}]);