(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-608e6bb4"],{1145:function(e,t,a){"use strict";a("5ff2")},"5ff2":function(e,t,a){},bb3d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-100"},[a("div",{staticClass:"font-14 inner-block"},[e._v("分享至")]),a("van-pull-refresh",{staticClass:"px-10",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",error:e.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){e.error=t},load:e.getDataList},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t){return a("div",{key:t.cueId,staticClass:"share-item mb-2 van-clearfix",on:{click:function(a){return e.toEdit(2,t)}}},[a("van-swipe-cell",{scopedSlots:e._u([{key:"right",fn:function(){return[a("van-button",{staticClass:"del-btn",attrs:{square:"",type:"danger",text:"删除"},on:{click:function(a){return a.stopPropagation(),e.deleteDonor(t.cesId)}}})]},proxy:!0}],null,!0)},[a("share-item",{attrs:{data:t}})],1)],1)})),0)],1),a("fix-button",{attrs:{title:"分享新增",icon:"#ytcrm-xingzhuangjiehe2"},on:{click:function(t){return e.toEdit(1)}}})],1)},r=[],i=a("1da1"),n=a("d4ec"),c=a("bee2"),o=a("262e"),l=a("2caf"),u=(a("e9c4"),a("b0c0"),a("96cf"),a("9ab4")),d=a("1b40"),f=a("4bb5"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"white-block d-flex justify-space-between align-center py-4"},[a("div",{staticClass:"ml-5 d-flex"},[a("user-img",{staticClass:"d-flex",attrs:{url:e.$root.domainUrl+e.data.headImgUrl}}),a("div",{staticClass:"font-bold d-flex flex-column justify-space-between ml-2"},[a("div",{staticClass:"font-16"},[e._v(e._s(e.data.shareToUserName))]),a("div",{staticClass:"color-gray-2"},[e._v("/"+e._s(e.data.shareToUserId))])])],1),a("div",{staticClass:"mr-4"},[a("div",{staticClass:"d-flex justify-end"},[a("div",{},[e._v("是否更新")]),a("div",{staticClass:"font-bold ml-4"},[e._v(e._s(1===e.data.isUpdate?"是":0===e.data.isUpdate?"否":""))])]),a("div",{staticClass:"d-flex justify-end mt-4"},[a("div",{},[e._v("过期时间")]),a("div",{staticClass:"font-bold ml-4"},[e._v(e._s(e.data.validDate))])])])])},p=[],v=function(e){Object(o["a"])(a,e);var t=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(c["a"])(a)}(d["d"]);Object(u["a"])([Object(d["c"])({type:Object,default:{}})],v.prototype,"data",void 0),v=Object(u["a"])([Object(d["a"])({})],v);var b=v,m=b,g=(a("1145"),a("2877")),y=Object(g["a"])(m,h,p,!1,null,"170b1b32",null),O=y.exports,j=a("74d2"),x=Object(f["a"])("app");d["a"].registerHooks(["beforeRouteLeave"]);var k=function(e){Object(o["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.shareType=+e.$route.params.shareType,e.personDetail=e.$route.params.personDetail,e.flag=!0,e.list=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.error=!1,e}return Object(c["a"])(a,[{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.list=[],this.getDataList()}},{key:"getDataList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==this.shareType){e.next=6;break}return e.next=3,Object(j["S"])({cceId:this.detailInfor.cceId});case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Object(j["T"])({cueId:this.personDetail.cueId});case 8:e.t0=e.sent;case 9:t=e.t0,this.loading=!1,this.refreshing=!1,t.success?(this.list=t.data,this.finished=!0):this.error=!0;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"refreshData",value:function(){this.list=[],this.finished=!1,this.loading=!0,this.getDataList()}},{key:"deleteDonor",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$dialog.confirm({title:"提示",message:"确定移除？",confirmButtonColor:"#2271F5"}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==a.shareType){e.next=6;break}return e.next=3,Object(j["m"])({cesId:t});case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Object(j["n"])({cesId:t});case 8:e.t0=e.sent;case 9:s=e.t0,s.success?(a.$toast.success(s.msg||"移除成功"),a.refreshData()):a.$toast.fail(s.msg||"移除失败");case 11:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"toEdit",value:function(e,t){var a={cesId:"",user:{},isUpdate:{},date:""};2===e&&(a={cesId:t.cesId,user:{value:t.shareToUserId,name:t.shareToUserName},isUpdate:{value:t.isUpdate,name:1===+t.isUpdate?"是":0===+t.isUpdate?"否":""},date:t.validDate}),this.SET_HADDONEONDETAIL(!1),this.$router.push({name:"CustomerAddShare",params:{type:String(this.shareType),personDetail:this.personDetail,formData:JSON.stringify(a)}})}},{key:"created",value:function(){this.list=[]}},{key:"activated",value:function(){this.flag&&(this.shareType=+this.$route.params.shareType,this.personDetail=this.$route.params.personDetail||{}),(this.flag||this.hadDoneOnDetail)&&this.onRefresh()}},{key:"beforeRouteLeave",value:function(e,t,a){"CustomerAddShare"===e.name?this.flag=!1:this.flag=!0,a()}}]),a}(d["d"]);Object(u["a"])([x.Mutation],k.prototype,"SET_HADDONEONDETAIL",void 0),Object(u["a"])([x.Getter],k.prototype,"hadDoneOnDetail",void 0),Object(u["a"])([x.Getter],k.prototype,"detailInfor",void 0),k=Object(u["a"])([Object(d["a"])({components:{ShareItem:O}})],k);var D=k,w=D,C=Object(g["a"])(w,s,r,!1,null,null,null);t["default"]=C.exports}}]);