(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67449778"],{"15a2":function(t,e,a){"use strict";a("eec9")},"250a":function(t,e,a){"use strict";a("ae2a")},"292d":function(t,e,a){},"38d7":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"white-block py-2 px-4"},[a("span",{staticClass:"color-main-2 font-14 fontWeight-500 lineHeight-20"},[t._v(" 下降客户销售额 ")]),a("div",{staticClass:"d-flex justify-space-between mt-2"},[a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近30天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.totalObj.thirtyDaysAmount1st||0===t.totalObj.thirtyDaysAmount1st?t.yToW(t.totalObj.thirtyDaysAmount1st):"--")+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近31-60天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.totalObj.thirtyDaysAmount2nd||0===t.totalObj.thirtyDaysAmount2nd?t.yToW(t.totalObj.thirtyDaysAmount2nd):"--")+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近61-90天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.totalObj.thirtyDaysAmount3rd||0===t.totalObj.thirtyDaysAmount3rd?t.yToW(t.totalObj.thirtyDaysAmount3rd):"--")+"万 ")])])])]),a("div",{staticClass:"table-div"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.dataList.length&&!t.filterParams.loading,expression:"dataList.length == 0 && !filterParams.loading"}],staticClass:"white-block pb-3 mb-4"},[a("app-empty",{staticClass:"py-7",attrs:{description:"暂无数据"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterParams.loading,expression:"filterParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),a("div",{staticClass:"table-body background-color-white mt-2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"table-line d-flex font-14 color-gray-5 lineHeight-20 align-center py-3"},[a("div",{staticClass:"table-div-1"},[t._v("客户ID/客户名称")]),a("div",{staticClass:"table-div-2"},[t._v("近30天")]),a("div",{staticClass:"table-div-3"},[t._v("近31-60天")]),a("div",{staticClass:"table-div-4"},[t._v("近61-90天")]),a("div",{staticClass:"table-div-6"},[t._v("最后一次销售时间")])]),t.dataList.length>0?a("div",{staticClass:"table-content"},t._l(t.dataList,(function(e,s){return a("div",{key:s+"pz",staticClass:"table-line d-flex font-14 color-black-2 lineHeight-20 align-center py-3",style:s%2===0?"background-color: #F7F7F7":""},[a("div",{staticClass:"table-div-1"},[t._v(t._s(e.id)+"/"+t._s(e.name))]),a("div",{staticClass:"table-div-2"},[t._v(t._s(e.count1)+"万")]),a("div",{staticClass:"table-div-3"},[t._v(t._s(e.count2)+"万")]),a("div",{staticClass:"table-div-4"},[t._v(t._s(e.count3)+"万")]),a("div",{staticClass:"table-div-6"},[t._v(t._s(e.time?e.time:"-"))])])})),0):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.filterParams.total,"items-per-page":5},on:{change:t.handlePzTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}]),model:{value:t.filterParams.currentPage,callback:function(e){t.$set(t.filterParams,"currentPage",e)},expression:"filterParams.currentPage"}})],1)]),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"mb-3"},[t._v("筛选")]),a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"filter-div px-4 mr-2",class:1===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(1)}}},[t._v(" 连续三个月下降客户 ")]),a("div",{staticClass:"filter-div px-4",class:2===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(2)}}},[t._v(" 丢失客户 ")])]),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.filterRefresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isFooterShow,expression:"isFooterShow"}],staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:t.openFilter}},[a("div",{staticClass:"d-flex align-center"},[a("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),a("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[t._v("高级操作")])],1)])],1)],1)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),l=a("262e"),c=a("2caf"),d=(a("d3b7"),a("159b"),a("96cf"),a("9ab4")),h=a("1b40"),u=a("8b7c"),m=a("2279"),p=a("cc19"),f=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.dataList=[],t.totalObj={},t.showFilter=!1,t.filterParams={keyword:"",selectType:0,orderColumn:"thirtyDaysReduce1st",orderType:0,currentPage:1,total:0,filterIndex:0,orderMethod:1,orderRule:1,loading:!1},t.stagingFilter={keyword:"",filterIndex:0,selectType:0},t.filterList=["近30天销售下降降序","近30天销售下降升序","最后销售时间降序","最后销售时间升序"],t.yToW=p["b"],t}return Object(o["a"])(a,[{key:"openFilter",value:function(){this.showFilter=!0}},{key:"_getUserCustomerSalesLostTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId},t.next=3,Object(u["p"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj=a.data:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserCustomerSalesLost",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,custom:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType},this.filterParams.loading=!0,t.next=4,Object(u["o"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(this.filterParams.total=a.data.total,s=[],a.data.list.forEach((function(t){s.push({id:t.customerId,name:t.customerName,count1:Object(p["b"])(t.thirtyDaysAmount1st),count2:Object(p["b"])(t.thirtyDaysAmount2nd),count3:Object(p["b"])(t.thirtyDaysAmount3rd),time:t.lastSaleTime})})),this.dataList=s):this.filterParams.total=0;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_queryLostCust",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id};Object(u["A"])(e).then((function(e){200==e.code&&e.data?t.totalObj=e.data:t.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0}}))}},{key:"_queryLostCustDetail",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id,custom:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType};this.filterParams.loading=!0,Object(u["B"])(e).then((function(e){if(t.filterParams.loading=!1,200==e.code&&e.data){t.filterParams.total=e.data.total;var a=[];e.data.list.forEach((function(t){a.push({id:t.lostId,name:t.lostName,count1:Object(p["b"])(t.thirtyDaysAmount1st),count2:Object(p["b"])(t.thirtyDaysAmount2nd),count3:Object(p["b"])(t.thirtyDaysAmount3rd),time:t.lastSaleTime})})),t.dataList=a}else t.filterParams.total=0}))}},{key:"_getDescentCustomerStat",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id,goodsId:this.entryObj.goodsId};Object(m["p"])(e).then((function(e){200==e.code&&e.data?t.totalObj={thirtyDaysAmount1st:e.data.recent30SalesAmount,thirtyDaysAmount2nd:e.data.recent31To60SalesAmount,thirtyDaysAmount3rd:e.data.recent61To90SalesAmount}:t.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0}}))}},{key:"_getDescentCustomerDetailList",value:function(){var t=this,e={selectedDate:this.dateTime,deptId:this.entryObj.id,goodsId:this.entryObj.goodsId,customerKeyword:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,filterCondition:this.filterParams.selectType,orderMethod:this.filterParams.orderMethod,orderRule:this.filterParams.orderRule};this.filterParams.loading=!0,Object(m["o"])(e).then((function(e){if(t.filterParams.loading=!1,200==e.code&&e.data){t.filterParams.total=e.data.total;var a=[];e.data.list.forEach((function(t){a.push({id:t.customerId,name:t.customerName,count1:Object(p["b"])(t.recent30SalesAmount),count2:Object(p["b"])(t.recent31To60SalesAmount),count3:Object(p["b"])(t.recent61To90SalesAmount),time:t.lastSaleDate})})),t.dataList=a}else t.filterParams.total=0}))}},{key:"_getUserGDCustomerSalesLost",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,custom:this.filterParams.keyword,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:5,goodsId:this.entryObj.goodsId,userId:this.entryObj.userId,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(u["q"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(s=[],a.data.list.forEach((function(t){s.push({count1:Object(p["b"])(t.thirtyDaysAmount1st),count2:Object(p["b"])(t.thirtyDaysAmount2nd),count3:Object(p["b"])(t.thirtyDaysAmount3rd),id:t.customerId,name:t.customerName,time:t.lastSaleTime})})),this.dataList=s,this.filterParams.total=a.data.total):(this.dataList=[],this.filterParams.total=0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserGdCustomSalesLostTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,goodsId:this.entryObj.goodsId,userId:this.entryObj.userId},t.next=3,Object(u["s"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj=a.data:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSx",value:function(t){this.stagingFilter.selectType===t?this.stagingFilter.selectType=0:this.stagingFilter.selectType=t}},{key:"handlePzTableChange",value:function(){this.dataList=[],"departmentRelate"===this.type&&this._queryLostCustDetail(),"goodsDepartRelate"===this.type?this._getDescentCustomerDetailList():"personGoodsRelate"===this.type?this._getUserGDCustomerSalesLost():"personRelate"===this.type&&this._getUserCustomerSalesLost()}},{key:"filterRefresh",value:function(){this.filterParams.keyword="",this.filterParams.filterIndex=0,this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=0,this.filterParams.selectType=0,this.stagingFilter.filterIndex=this.filterParams.filterIndex,this.stagingFilter.keyword=this.filterParams.keyword,this.stagingFilter.selectType=this.filterParams.selectType,this.showFilter=!1,this.init()}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"handleFilterOk",value:function(){if(this.showFilter=!1,this.dataList=[],this.filterParams.currentPage=1,this.filterParams.goods=this.stagingFilter.keyword,this.filterParams.filterIndex=this.stagingFilter.filterIndex,this.filterParams.selectType=this.stagingFilter.selectType,this.filterParams.keyword=this.stagingFilter.keyword,"personRelate"===this.type)switch(this.filterParams.filterIndex){case 0:this.filterParams.orderMethod=1,this.filterParams.orderRule=1;break;case 1:this.filterParams.orderMethod=1,this.filterParams.orderRule=2;break;case 2:this.filterParams.orderMethod=2,this.filterParams.orderRule=1;break;case 3:this.filterParams.orderMethod=2,this.filterParams.orderRule=2;break}else switch(this.filterParams.filterIndex){case 0:this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=0;break;case 1:this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=1;break;case 2:this.filterParams.orderColumn="lastSaleTime",this.filterParams.orderType=0;break;case 3:this.filterParams.orderColumn="lastSaleTime",this.filterParams.orderType=1;break}this.init()}},{key:"init",value:function(){this.dataList=[],"departmentRelate"===this.type&&(this._queryLostCust(),this._queryLostCustDetail()),"goodsDepartRelate"===this.type?(this._getDescentCustomerStat(),this._getDescentCustomerDetailList()):"personGoodsRelate"===this.type?(this._getUserGDCustomerSalesLost(),this._getUserGdCustomSalesLostTotal()):"personRelate"===this.type&&(this._getUserCustomerSalesLostTotal(),this._getUserCustomerSalesLost())}},{key:"mounted",value:function(){this.init()}}]),a}(h["d"]);Object(d["a"])([Object(h["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(h["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(h["c"])({default:!0})],f.prototype,"isFooterShow",void 0),Object(d["a"])([Object(h["c"])({default:""})],f.prototype,"type",void 0),f=Object(d["a"])([Object(h["a"])({})],f);var y=f,v=y,g=(a("d37c"),a("2877")),b=Object(g["a"])(v,s,r,!1,null,"13d1bf2b",null);e["a"]=b.exports},4388:function(t,e,a){"use strict";var s=a("d4ec"),r=a("bee2"),i=a("262e"),n=a("2caf"),o=(a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("d81d"),a("9ab4")),l=a("1b40"),c=a("2279"),d=a("856a"),h=a("de29"),u=a("6f96"),m=a("8d1d"),p=a("38d7"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex pt-2"},[a("div",{staticClass:"dailySales flex-5",class:t.visitFlag?"mr-2":""},[a("div",{staticClass:"d-flex flex-column justify-space-between font-14 pt-3 pl-4"},[a("div",[t._v("当日销售(万元)")]),t.objName?a("div",{staticClass:"py-1"},[a("span",{staticClass:"fontWeight"},[t._v(t._s(t.objName))])]):a("div",{staticClass:"py-1",staticStyle:{visibility:"hidden"}},[t._v("占位")]),t.loading?a("van-loading",{attrs:{type:"spinner",color:"#fff"}}):t._e(),a("div",{staticClass:"font-28 pt-2 fontWeight",staticStyle:{"font-family":"HarmonyOS_Sans_SC_Black"}},[t._v(t._s(t.currentDayMoney))])],1)]),t.visitFlag?a("div",{staticClass:"visitCard pb-2 color-gray-4 d-flex flex-column justify-space-between fontWeight flex-3",on:{click:t.visitClick}},[a("div",{staticClass:"d-flex pl-4 pr-2 pt-3 align-center justify-space-between"},[a("span",{staticClass:"font-16"},[t._v("近30天拜访")]),a("van-icon",{attrs:{name:"arrow",size:"16px"}})],1),a("div",{staticClass:"font-28 pl-4 pt-2 color-main-3"},[t._v(t._s(t.visitNumber)+"次")])]):t._e()])])},y=[],v=function(t){Object(i["a"])(a,t);var e=Object(n["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a,[{key:"visitClick",value:function(){this.$emit("visitClick")}}]),a}(l["d"]);Object(o["a"])([Object(l["c"])()],v.prototype,"currentDayMoney",void 0),Object(o["a"])([Object(l["c"])()],v.prototype,"visitNumber",void 0),Object(o["a"])([Object(l["c"])()],v.prototype,"objName",void 0),Object(o["a"])([Object(l["c"])({default:!0})],v.prototype,"visitFlag",void 0),Object(o["a"])([Object(l["c"])()],v.prototype,"loading",void 0),v=Object(o["a"])([Object(l["a"])({})],v);var g=v,b=g,P=(a("15a2"),a("2877")),O=Object(P["a"])(b,f,y,!1,null,"6e6210ca",null),j=O.exports,C=a("5b65"),w=a("84c3"),k=a("4bb5"),x=Object(k["a"])("app"),_=Object(k["a"])("cdp");l["a"].registerHooks(["beforeRouteEnter"]);var T=function(t){Object(i["a"])(a,t);var e=Object(n["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.refreshData=!0,t}return Object(r["a"])(a,[{key:"_getQuickOverviewMix",value:function(t){return new Promise((function(e,a){Object(c["E"])(t).then((function(t){e(t)})).catch((function(t){a(t)}))}))}},{key:"hasDifferentValues",value:function(t,e){return new Set(t.map((function(t){return t[e]}))).size>1}}]),a}(l["d"]);Object(o["a"])([_.Getter],T.prototype,"mode",void 0),Object(o["a"])([x.Getter],T.prototype,"csjNowTime",void 0),Object(o["a"])([x.Getter],T.prototype,"csjChangeTime",void 0),Object(o["a"])([_.Getter],T.prototype,"sybOriginList",void 0),Object(o["a"])([_.Getter],T.prototype,"xszxOriginList",void 0),Object(o["a"])([_.Getter],T.prototype,"bmList",void 0),Object(o["a"])([_.Getter],T.prototype,"bmChildList",void 0),Object(o["a"])([x.Getter],T.prototype,"userInfor",void 0),Object(o["a"])([_.Mutation],T.prototype,"SET_MODE",void 0),Object(o["a"])([x.Mutation],T.prototype,"SET_CSJNOWTIME",void 0),Object(o["a"])([x.Mutation],T.prototype,"SET_CSJCHANGETIME",void 0),Object(o["a"])([x.Mutation],T.prototype,"SET_QUERYPARAMA",void 0),Object(o["a"])([_.Action],T.prototype,"_getsybOriginList",void 0),Object(o["a"])([_.Action],T.prototype,"_getxszxOriginList",void 0),Object(o["a"])([_.Action],T.prototype,"_getbmList",void 0),Object(o["a"])([_.Action],T.prototype,"_getbmChildList",void 0),Object(o["a"])([_.Action],T.prototype,"_refreshList",void 0),Object(o["a"])([_.Mutation],T.prototype,"SET_SELECTDEPTFLAG",void 0),T=Object(o["a"])([Object(l["a"])({components:{Header:d["a"],VisitCard:j,CommonCard:C["a"],GoodsList:h["a"],LoseGoodsTable:m["a"],CustomerList:u["a"],LoseCustomerTable:p["a"],BalanceGross:w["a"]}})],T);e["a"]=T},5167:function(t,e,a){},"5b65":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cardWarp positionR white-block mt-2"},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#1989fa"}}),a("div",{staticClass:"d-flex justify-space-between py-4",staticStyle:{height:"50%","border-bottom":"1px solid #ebedf0"}},[a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("本月累计")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.salesDataObj.currentMonthMoney))])]),a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("去年同期")]),a("span",{staticClass:"font-16 color-main-2"},[t._v(" "+t._s(t.salesDataObj.lyCurrentMonthMoney))])]),a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("同比增幅")]),a("span",{staticClass:"font-16",class:t.getColor(t.salesDataObj.monthPercentage)},[t._v(t._s(t.getFH(t.salesDataObj.monthPercentage))+t._s(t.salesDataObj.monthPercentage)+"%")])])]),a("div",{staticClass:"d-flex justify-space-between py-4",staticStyle:{height:"50%"}},[a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("本年累计")]),a("span",{staticClass:"font-16"},[t._v(t._s(t.salesDataObj.currentYearMoney))])]),a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("去年同期")]),a("span",{staticClass:"font-16 color-main-2"},[t._v(t._s(t.salesDataObj.lyCurrentYearMoney))])]),a("div",{staticClass:"cardWarp-line flex-1 d-flex flex-column pl-2"},[a("span",{staticClass:"font-14"},[t._v("同比增幅")]),a("span",{staticClass:"font-16",class:t.getColor(t.salesDataObj.yearPercentage)},[t._v(t._s(t.getFH(t.salesDataObj.yearPercentage))+t._s(t.salesDataObj.yearPercentage)+"%")])])])],1)},r=[],i=a("d4ec"),n=a("bee2"),o=a("262e"),l=a("2caf"),c=(a("ac1f"),a("5319"),a("9ab4")),d=a("1b40"),h=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(n["a"])(a,[{key:"getFH",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"+":""}}}},{key:"getColor",get:function(){return function(t){if(t){var e=String(t).replace(",","");return+e>0?"color-normal":"color-never"}}}}]),a}(d["d"]);Object(c["a"])([Object(d["c"])()],h.prototype,"salesDataObj",void 0),Object(c["a"])([Object(d["c"])()],h.prototype,"loading",void 0),h=Object(c["a"])([Object(d["a"])({})],h);var u=h,m=u,p=(a("b37f"),a("2877")),f=Object(p["a"])(m,s,r,!1,null,"47311820",null);e["a"]=f.exports},"6c8f":function(t,e,a){"use strict";a("a41d")},"6f96":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-block pb-3 mb-4"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterParams.loading,expression:"filterParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t._l(t.dataList,(function(e,s){return a("detail-card",{key:s,attrs:{isClick:t.isClick,data:e,name:e.id+"/"+e.name,showDrxs:!0},nativeOn:{click:function(a){return t.toDetail(e)}}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.dataList.length&&!t.filterParams.loading,expression:"dataList.length == 0 && !filterParams.loading"}],staticClass:"py-7",attrs:{description:"暂无数据"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.filterParams.total,"items-per-page":t.filterParams.pageSize},on:{change:t.handleKbTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}]),model:{value:t.filterParams.currentPage,callback:function(e){t.$set(t.filterParams,"currentPage",e)},expression:"filterParams.currentPage"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isFooterShow,expression:"isFooterShow"}],staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:t.openFilter}},[a("div",{staticClass:"d-flex align-center"},[a("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),a("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[t._v("高级操作")])],1)])],1),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.refresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)])],2)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),l=a("262e"),c=a("2caf"),d=(a("96cf"),a("d3b7"),a("159b"),a("b0c0"),a("9ab4")),h=a("1b40"),u=a("ff2d"),m=a("8b7c"),p=a("2279"),f=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.showFilter=!1,t.dataList=[],t.filterList=["本年累计销售额降序","本年累计销售额升序","本月销售额降序","本月销售额升序"],t.stagingFilter={keyword:"",filterIndex:0},t.filterParams={keyword:"",orderColumn:"currentYearMoney",orderType:0,currentPage:1,pageSize:10,total:0,loading:!1,finish:!1,filterIndex:0,selectType:0},t}return Object(o["a"])(a,[{key:"handleKbTableChange",value:function(){this.init()}},{key:"_getDataUserCustomerSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,custom:this.filterParams.keyword,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(m["e"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.dataList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.filterParams.total=a.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserGdCustomSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,custom:this.filterParams.keyword,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,userId:this.entryObj.userId,goodsId:this.entryObj.goodsId,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(m["r"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.dataList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.filterParams.total=a.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getFixGoodsNewGoodsSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,customerKeyword:this.filterParams.keyword,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,userId:this.entryObj.userId,goodsId:this.entryObj.goodsId,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(p["v"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.dataList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.filterParams.total=a.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getDifferentCustomerDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={date:this.dateTime,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,customerKeyword:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,deptId:this.entryObj.id,goodsId:this.entryObj.goodsId,hideLoading:!0,type:e},this.filterParams.loading=!0,t.next=4,Object(p["q"])(a);case 4:s=t.sent,this.filterParams.loading=!1,200==s.code&&s.data&&s.data.list?(s.data.list.forEach((function(t){r.dataList.push({id:t.customerId,name:t.customerName,data1:t.dayAmount?t.dayAmount:0,data2:t.monthAmount?t.monthAmount:0,data3:t.monthOnPercent?t.monthOnPercent:0,data4:t.entireOnMonthAmount?t.entireOnMonthAmount:0,data5:t.yearAmount?t.yearAmount:0,data6:t.yearOnPercent?t.yearOnPercent:0,data7:t.accuOnYearAmount?t.accuOnYearAmount:0})})),this.filterParams.total=s.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"toDetail",value:function(t){this.isClick&&(this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605011,menuName:t.id+"/"+t.name+"-客户列表点击进入",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"salesLineCustomerSalesPage",query:{customerId:t.id,customerName:t.name,userId:this.entryObj.userId,userName:this.entryObj.userName,id:this.entryObj.id,name:this.entryObj.name}}))}},{key:"_customerGetDeptDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={deptId:this.entryObj.id,date:this.dateTime,customerKeyword:this.filterParams.keyword,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:this.filterParams.pageSize,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(p["a"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.dataList.push({id:t.customerId,name:t.customerName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.filterParams.total=a.data.total,this.dataList.length===this.filterParams.total&&(this.filterParams.finish=!0)):(this.filterParams.total=0,this.filterParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"refresh",value:function(){this.filterParams.keyword="",this.filterParams.filterIndex=1,this.filterParams.orderColumn="currentYearMoney",this.filterParams.orderType=0,this.stagingFilter.keyword=this.filterParams.keyword,this.stagingFilter.filterIndex=this.filterParams.filterIndex}},{key:"openFilter",value:function(){this.showFilter=!0}},{key:"handleFilterOk",value:function(){switch(this.dataList=[],this.showFilter=!1,this.filterParams.currentPage=1,this.filterParams.keyword=this.stagingFilter.keyword,this.filterParams.filterIndex=this.stagingFilter.filterIndex,this.filterParams.finish=!1,this.filterParams.filterIndex){case 0:this.filterParams.orderColumn="currentYearMoney",this.filterParams.orderType=0;break;case 1:this.filterParams.orderColumn="currentYearMoney",this.filterParams.orderType=1;break;case 2:this.filterParams.orderColumn="currentMonthMoney",this.filterParams.orderType=0;break;case 3:this.filterParams.orderColumn="currentMonthMoney",this.filterParams.orderType=1;break}this.init()}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"init",value:function(){this.dataList=[],"personRelate"===this.type?this._getDataUserCustomerSalesList():"goodsPersonRelate"===this.type?("全客户"===this.customerName&&this._getUserGdCustomSalesList(),"新增客户"===this.customerName&&this._getFixGoodsNewGoodsSalesList()):"departmentRelate"===this.type?this._customerGetDeptDetailList():"goodsDepartmentRelate"===this.type&&("新增客户"===this.customerName&&this._getDifferentCustomerDetailList(2),"全客户"===this.customerName&&this._getDifferentCustomerDetailList(1))}},{key:"mounted",value:function(){this.init()}}]),a}(h["d"]);Object(d["a"])([Object(h["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(h["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(h["c"])({default:!0})],f.prototype,"isFooterShow",void 0),Object(d["a"])([Object(h["c"])({default:1})],f.prototype,"type",void 0),Object(d["a"])([Object(h["c"])({default:!0})],f.prototype,"isClick",void 0),Object(d["a"])([Object(h["c"])({default:""})],f.prototype,"customerName",void 0),f=Object(d["a"])([Object(h["a"])({components:{detailCard:u["a"]}})],f);var y=f,v=y,g=(a("7292"),a("2877")),b=Object(g["a"])(v,s,r,!1,null,"5c8c957e",null);e["a"]=b.exports},7292:function(t,e,a){"use strict";a("5167")},"7e5c":function(t,e,a){},"84c3":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.shouldShow?a("div",{staticClass:"balance-gross",on:{click:t.navigateToBalanceGross}},[a("div",{staticClass:"circle-btn"},[a("van-icon",{staticClass:"icon-left",attrs:{name:"circle",size:"16px"}}),a("span",{staticClass:"btn-text"},[t._v("点击进入平衡毛利面板")]),a("van-icon",{staticClass:"icon-right",attrs:{name:"arrow",size:"16px"}})],1)]):t._e()},r=[],i=a("d4ec"),n=a("bee2"),o=a("262e"),l=a("2caf"),c=(a("7db0"),a("d3b7"),a("9ab4")),d=a("1b40"),h=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.defaultDeptId="",t.defaultDeptName="",t.departments=[{deptId:968,deptName:"英特药业"},{deptId:974,deptName:"英特电商"},{deptId:998,deptName:"宁波英特"},{deptId:984,deptName:"温州英特"},{deptId:985,deptName:"台州英特"},{deptId:990,deptName:"嘉兴英特"},{deptId:991,deptName:"嘉信医药"},{deptId:992,deptName:"湖州英特"},{deptId:993,deptName:"绍兴英特"},{deptId:994,deptName:"金华英特"},{deptId:995,deptName:"浦江英特"},{deptId:996,deptName:"丽水英特"},{deptId:997,deptName:"英特海斯"},{deptId:999,deptName:"明州英特"},{deptId:1e3,deptName:"舟山卫盛"},{deptId:1001,deptName:"淳安英特"},{deptId:1002,deptName:"英特盛健"},{deptId:1042,deptName:"英特生物"}],t}return Object(n["a"])(a,[{key:"shouldShow",get:function(){var t=JSON.parse(localStorage.getItem("phmlArray")||"[]");return!!(Array.isArray(t)&&t.length>0)&&(this.calculateDefaultDeptId(t),!0)}},{key:"calculateDefaultDeptId",value:function(t){var e=this.departments.find((function(e){return e.deptName==t[0]}));this.defaultDeptId=e?e.deptId:null,this.defaultDeptName=t[0]}},{key:"navigateToBalanceGross",value:function(){this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605006,menuName:"平衡毛利",menuOperation:"平衡毛利点击载入",operationType:1});var t=JSON.parse(localStorage.getItem("phmlArray")||"[]");Array.isArray(t)&&1==t.length?this.$router.push({name:"BalanceGross",query:{deptId:this.defaultDeptId,deptName:this.defaultDeptName,type:"0",role:this.$route.query.role}}):this.$router.push({name:"AllBalanceGross",query:{role:this.$route.query.role}})}}]),a}(d["d"]);h=Object(c["a"])([d["a"]],h);var u=h,m=u,p=(a("250a"),a("2877")),f=Object(p["a"])(m,s,r,!1,null,"a585606a",null);e["a"]=f.exports},"856a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header px-4 d-flex align-center"},[a("div",{staticClass:"flex-3 d-flex align-center",on:{click:function(e){return e.stopPropagation(),t.deptSelectClick.apply(null,arguments)}}},[a("span",{staticClass:"fontWeight",class:t.entryObj.name.length>6?"font-24":"font-30",staticStyle:{"font-family":"'HarmonyOS Sans SC Black'"}},[t._v(t._s(t.entryObj.name)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.entryObj.parentName&&5!==t.level,expression:"entryObj.parentName && level !== 5"}],staticClass:"font-12"},[t._v("("+t._s(t.entryObj.parentName)+")")])]),t.selectDeptFlagEnter&&t.selectDeptFlag?a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}}):t._e()],1),a("div",{staticClass:"flex-2 textAlignR pr-8",staticStyle:{"font-family":"'HarmonyOS Sans SC Bold'"},on:{click:t.calendarClick}},[a("span",{staticClass:"time color-gray-4 fontWeight"},[t._v(t._s(t.dateTime))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)]),a("van-calendar",{attrs:{"default-date":t.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:t.calendarConfirm},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}})],1)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),l=a("262e"),c=a("2caf"),d=(a("96cf"),a("9ab4")),h=a("1b40"),u=a("4bb5"),m=Object(u["a"])("app"),p=Object(u["a"])("cdp"),f=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.calendarShow=!1,t}return Object(o["a"])(a,[{key:"deptSelectClick",value:function(){this.selectDeptFlag&&this.$emit("deptSelectClick")}},{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"calendarConfirm",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.calendarShow=!1,this.SET_CSJNOWTIME(e),this.SET_CSJCHANGETIME(!0),this.$emit("calendarConfirm");case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),a}(h["d"]);Object(d["a"])([Object(h["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(h["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(h["c"])()],f.prototype,"level",void 0),Object(d["a"])([Object(h["c"])({default:!0})],f.prototype,"selectDeptFlagEnter",void 0),Object(d["a"])([m.Getter],f.prototype,"csjNowTime",void 0),Object(d["a"])([p.Getter],f.prototype,"selectDeptFlag",void 0),Object(d["a"])([m.Mutation],f.prototype,"SET_CSJNOWTIME",void 0),Object(d["a"])([m.Mutation],f.prototype,"SET_CSJCHANGETIME",void 0),f=Object(d["a"])([Object(h["a"])({})],f);var y=f,v=y,g=(a("dc9f"),a("2877")),b=Object(g["a"])(v,s,r,!1,null,"1e132d6c",null);e["a"]=b.exports},"8d1d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.totalObj.thirtyDaysAmount1st||0===t.totalObj.thirtyDaysAmount1st?a("div",{staticClass:"white-block py-2 px-4"},[a("span",{staticClass:"color-main-2 font-14 fontWeight-500 lineHeight-20"},[t._v(" 流失品种销售额 ")]),a("div",{staticClass:"d-flex justify-space-between mt-2"},[a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近30天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.totalObj.thirtyDaysAmount1st))+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近31-60天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.totalObj.thirtyDaysAmount2nd))+"万 ")])]),a("div",[a("div",{staticClass:"color-gray-5 font-14 lineHeight-20"},[t._v("近61-90天")]),a("div",{staticClass:"color-black-2 font-16 fontWeight-500 lineHeight-24 mt-1"},[t._v(" "+t._s(t.yToW(t.totalObj.thirtyDaysAmount3rd))+"万 ")])])])]):t._e(),a("div",{staticClass:"table-div"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.dataList.length&&!t.filterParams.loading,expression:"dataList.length == 0 && !filterParams.loading"}],staticClass:"white-block pb-3 mb-4"},[a("app-empty",{staticClass:"py-7",attrs:{description:"暂无数据"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.filterParams.loading,expression:"filterParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),a("div",{staticClass:"table-body background-color-white mt-2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"table-line d-flex font-14 color-gray-5 lineHeight-20 align-center py-3"},[a("div",{staticClass:"table-div-1"},[t._v("货品ID/货品名称")]),a("div",{staticClass:"table-div-2"},[t._v("近30天")]),a("div",{staticClass:"table-div-3"},[t._v("近31-60天")]),a("div",{staticClass:"table-div-4"},[t._v("近61-90天")]),a("div",{staticClass:"table-div-6"},[t._v("最后一次销售时间")])]),t.dataList.length>0?a("div",{staticClass:"table-content"},t._l(t.dataList,(function(e,s){return a("div",{key:s+"pz",staticClass:"table-line d-flex font-14 color-black-2 lineHeight-20 align-center py-3",style:s%2===0?"background-color: #F7F7F7":""},[a("div",{staticClass:"table-div-1"},[t._v(t._s(e.id)+"/"+t._s(e.name))]),a("div",{staticClass:"table-div-2"},[t._v(t._s(e.count1)+"万")]),a("div",{staticClass:"table-div-3"},[t._v(t._s(e.count2)+"万")]),a("div",{staticClass:"table-div-4"},[t._v(t._s(e.count3)+"万")]),a("div",{staticClass:"table-div-6"},[t._v(t._s(e.time?e.time:"-"))])])})),0):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.filterParams.total,"items-per-page":5},on:{change:t.handlePzTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}]),model:{value:t.filterParams.currentPage,callback:function(e){t.$set(t.filterParams,"currentPage",e)},expression:"filterParams.currentPage"}})],1)]),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"mb-3"},[t._v("筛选")]),a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"filter-div px-4 mr-2",class:1===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(1)}}},[t._v(" 连续三个月下降品种 ")]),a("div",{staticClass:"filter-div px-4",class:2===t.stagingFilter.selectType?"active":"",on:{click:function(e){return t.handleSx(2)}}},[t._v(" 丢失品种 ")])]),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.filterRefresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isFooterShow,expression:"isFooterShow"}],staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:t.openFilter}},[a("div",{staticClass:"d-flex align-center"},[a("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),a("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[t._v("高级操作")])],1)])],1)],1)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),l=a("262e"),c=a("2caf"),d=(a("96cf"),a("d3b7"),a("159b"),a("9ab4")),h=a("1b40"),u=a("8b7c"),m=a("cc19"),p=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.dataList=[],t.totalObj={},t.showFilter=!1,t.filterParams={keyword:"",selectType:0,orderColumn:"thirtyDaysReduce1st",orderType:0,currentPage:1,total:0,filterIndex:0,orderMethod:1,orderRule:1,loading:!1},t.stagingFilter={keyword:"",filterIndex:0,selectType:0},t.filterList=["近30天销售下降降序","近30天销售下降升序","最后销售时间降序","最后销售时间升序"],t.yToW=m["b"],t}return Object(o["a"])(a,[{key:"openFilter",value:function(){this.showFilter=!0}},{key:"_getDescentGoods",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customerId:this.entryObj.customerId,deptId:this.entryObj.id,selectedDate:this.dateTime,goodsKeyword:this.filterParams.keyword,filterCondition:this.filterParams.selectType,orderMethod:this.filterParams.orderMethod,orderRule:this.filterParams.orderRule,pageNum:this.filterParams.currentPage,pageSize:5,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(u["h"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(this.dataList=a.data.list,this.filterParams.total=a.data.total,s=[],a.data.list.forEach((function(t){s.push({count1:Object(m["b"])(t.recent30SalesAmount),count2:Object(m["b"])(t.recent31To60SalesAmount),count3:Object(m["b"])(t.recent61To90SalesAmount),id:t.goodsId,name:t.goodsName,time:t.lastSaleDate})})),this.dataList=s,this.filterParams.total=a.data.total):(this.dataList=[],this.filterParams.total=0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getDescentGoodsStat",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customerId:this.entryObj.customerId,deptId:this.entryObj.id,selectedDate:this.dateTime,hideLoading:!0},t.next=3,Object(u["i"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj={thirtyDaysAmount1st:a.data.recent30SalesAmount,thirtyDaysAmount2nd:a.data.recent31To60SalesAmount,thirtyDaysAmount3rd:a.data.recent61To90SalesAmount}:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserCstmGoodSalesLostTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,customerId:this.entryObj.customerId,hideLoading:!0},t.next=3,Object(u["n"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj=a.data:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserCstmGoodSalesLost",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,goods:this.filterParams.keyword,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType,pageNum:this.filterParams.currentPage,pageSize:5,userId:this.entryObj.userId,customerId:this.entryObj.customerId,hideLoading:!0},this.filterParams.loading=!0,t.next=4,Object(u["m"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(s=[],a.data.list.forEach((function(t){s.push({count1:Object(m["b"])(t.thirtyDaysAmount1st),count2:Object(m["b"])(t.thirtyDaysAmount2nd),count3:Object(m["b"])(t.thirtyDaysAmount3rd),id:t.goodsId,name:t.goodsName,time:t.lastSaleTime})})),this.dataList=s,this.filterParams.total=a.data.total):(this.dataList=[],this.filterParams.total=0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_queryLostGoods",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id};Object(u["C"])(e).then((function(e){200==e.code&&e.data?t.totalObj=e.data:t.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0}}))}},{key:"_queryLostGoodsDetail",value:function(){var t=this,e={date:this.dateTime,deptId:this.entryObj.id,goods:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType};this.filterParams.loading=!0,Object(u["D"])(e).then((function(e){if(t.filterParams.loading=!1,200==e.code&&e.data){t.filterParams.total=e.data.total;var a=[];e.data.list.forEach((function(t){a.push({id:t.lostId,name:t.lostName,count1:Object(m["b"])(t.thirtyDaysAmount1st),count2:Object(m["b"])(t.thirtyDaysAmount2nd),count3:Object(m["b"])(t.thirtyDaysAmount3rd),time:t.lastSaleTime})})),t.dataList=a}else t.filterParams.total=0}))}},{key:"_getUserGoodSalesLostTotal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId},t.next=3,Object(u["u"])(e);case 3:a=t.sent,200==a.code&&a.data?this.totalObj=a.data:this.totalObj={thirtyDaysAmount1st:0,thirtyDaysAmount2nd:0,thirtyDaysAmount3rd:0};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getUserGoodSalesLost",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,goods:this.filterParams.keyword,pageNum:this.filterParams.currentPage,pageSize:5,selectType:this.filterParams.selectType,orderColumn:this.filterParams.orderColumn,orderType:this.filterParams.orderType},this.filterParams.loading=!0,t.next=4,Object(u["t"])(e);case 4:a=t.sent,this.filterParams.loading=!1,200==a.code&&a.data?(this.filterParams.total=a.data.total,s=[],a.data.list.forEach((function(t){s.push({id:t.goodsId,name:t.goodsName,count1:Object(m["b"])(t.thirtyDaysAmount1st),count2:Object(m["b"])(t.thirtyDaysAmount2nd),count3:Object(m["b"])(t.thirtyDaysAmount3rd),time:t.lastSaleTime})})),this.dataList=s):this.filterParams.total=0;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSx",value:function(t){this.stagingFilter.selectType===t?this.stagingFilter.selectType=0:this.stagingFilter.selectType=t}},{key:"handlePzTableChange",value:function(){this.dataList=[],"personCustomRelate"===this.type?this._getUserCstmGoodSalesLost():"customDepartmentRelate"===this.type?this._getDescentGoods():"departmentRelate"===this.type?this._queryLostGoodsDetail():"personRelate"===this.type&&this._getUserGoodSalesLost()}},{key:"filterRefresh",value:function(){this.filterParams.keyword="",this.filterParams.filterIndex=0,this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=0,this.filterParams.selectType=0,this.stagingFilter.filterIndex=this.filterParams.filterIndex,this.stagingFilter.keyword=this.filterParams.keyword,this.stagingFilter.selectType=this.filterParams.selectType,this.showFilter=!1,this.init()}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"handleFilterOk",value:function(){if(this.showFilter=!1,this.dataList=[],this.filterParams.currentPage=1,this.filterParams.keyword=this.stagingFilter.keyword,this.filterParams.filterIndex=this.stagingFilter.filterIndex,this.filterParams.selectType=this.stagingFilter.selectType,"departmentRelate"!==this.type)switch(this.filterParams.filterIndex){case 0:this.filterParams.orderMethod=1,this.filterParams.orderRule=1;break;case 1:this.filterParams.orderMethod=1,this.filterParams.orderRule=2;break;case 2:this.filterParams.orderMethod=2,this.filterParams.orderRule=1;break;case 3:this.filterParams.orderMethod=2,this.filterParams.orderRule=2;break}else switch(this.filterParams.filterIndex){case 0:this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=0;break;case 1:this.filterParams.orderColumn="thirtyDaysReduce1st",this.filterParams.orderType=1;break;case 2:this.filterParams.orderColumn="lastSaleTime",this.filterParams.orderType=0;break;case 3:this.filterParams.orderColumn="lastSaleTime",this.filterParams.orderType=1;break}this.init()}},{key:"init",value:function(){this.dataList=[],"personCustomRelate"===this.type?(this._getUserCstmGoodSalesLostTotal(),this._getUserCstmGoodSalesLost()):"customDepartmentRelate"===this.type?(this._getDescentGoods(),this._getDescentGoodsStat()):"departmentRelate"===this.type?(this._queryLostGoods(),this._queryLostGoodsDetail()):"personRelate"===this.type&&(this._getUserGoodSalesLostTotal(),this._getUserGoodSalesLost())}},{key:"mounted",value:function(){this.init()}}]),a}(h["d"]);Object(d["a"])([Object(h["c"])()],p.prototype,"entryObj",void 0),Object(d["a"])([Object(h["c"])()],p.prototype,"dateTime",void 0),Object(d["a"])([Object(h["c"])({default:!0})],p.prototype,"isFooterShow",void 0),Object(d["a"])([Object(h["c"])({default:""})],p.prototype,"type",void 0),p=Object(d["a"])([Object(h["a"])({})],p);var f=p,y=f,v=(a("9500"),a("2877")),g=Object(v["a"])(y,s,r,!1,null,"8d1c9134",null);e["a"]=g.exports},9500:function(t,e,a){"use strict";a("292d")},a41d:function(t,e,a){},ae2a:function(t,e,a){},b37f:function(t,e,a){"use strict";a("e8d5")},cb2b:function(t,e,a){"use strict";a("7e5c")},cc19:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r}));a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("b680");function s(t){var e=t/1e4;return Math.round(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function r(t){var e=100*t;return e.toFixed(1)}},d37c:function(t,e,a){"use strict";a("ee16")},dc9f:function(t,e,a){"use strict";a("e657")},de29:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-block pb-3 mb-4"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.pzParams.loading,expression:"pzParams.loading"}],staticClass:"d-flex py-8 justify-center align-center"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1),t._l(t.pzList,(function(e,s){return a("detail-card",{key:s,attrs:{isClick:t.isClick,showDrxs:!0,data:e,name:e.id+"/"+e.name},nativeOn:{click:function(a){return t.toDetail(e)}}})})),a("app-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.pzList.length&&!t.pzParams.loading,expression:"pzList.length == 0 && !pzParams.loading"}],staticClass:"py-7",attrs:{description:"暂无数据"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pzList.length>0,expression:"pzList.length > 0"}],staticClass:"py-4 background-color-white"},[a("van-pagination",{attrs:{"force-ellipses":!0,"total-items":t.pzParams.total,"items-per-page":t.pzParams.pageSize},on:{change:t.handlePzTableChange},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("van-icon",{attrs:{name:"arrow"}})]},proxy:!0},{key:"page",fn:function(e){var a=e.text;return[t._v(t._s(a))]}}]),model:{value:t.pzParams.currentPage,callback:function(e){t.$set(t.pzParams,"currentPage",e)},expression:"pzParams.currentPage"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isFooterShow,expression:"isFooterShow"}],staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",type:"info"},on:{click:t.openFilter}},[a("div",{staticClass:"d-flex align-center"},[a("icon-svg",{staticStyle:{width:"15px",height:"15px"},attrs:{name:"ytcrm-shaixuanfilter1"}}),a("div",{staticClass:"color-main-2 font-12 fontWeight-500 ml-2"},[t._v("高级操作")])],1)])],1),a("van-action-sheet",{attrs:{title:"高级操作"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"px-2 pb-3 font-14"},[a("div",{staticClass:"mb-3"},[t._v("搜索")]),a("van-search",{staticClass:"pa-2 mb-2",attrs:{placeholder:"输入搜索关键词"},model:{value:t.stagingFilter.keyword,callback:function(e){t.$set(t.stagingFilter,"keyword",e)},expression:"stagingFilter.keyword"}}),a("div",{staticClass:"mb-3"},[t._v("排序")]),a("div",{staticClass:"d-flex flex-wrap"},t._l(t.filterList,(function(e,s){return a("div",{key:s,staticClass:"filter-div px-4 mr-2 mb-3",class:t.stagingFilter.filterIndex===s?"active":"",on:{click:function(e){return t.chooseFilter(s)}}},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"d-flex algin-center justify-space-between mx-2 button-div"},[a("van-button",{attrs:{round:""},on:{click:t.refresh}},[t._v(" 重置 ")]),a("van-button",{attrs:{round:"",type:"info"},on:{click:t.handleFilterOk}},[t._v(" 确定 ")])],1)],1)])],2)},r=[],i=a("1da1"),n=a("d4ec"),o=a("bee2"),l=a("262e"),c=a("2caf"),d=(a("96cf"),a("d3b7"),a("159b"),a("b0c0"),a("9ab4")),h=a("1b40"),u=a("ff2d"),m=a("8b7c"),p=a("2279"),f=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.showFilter=!1,t.pzList=[],t.filterList=["本年累计销售额降序","本年累计销售额升序","本月销售额降序","本月销售额升序"],t.stagingFilter={keyword:"",filterIndex:0},t.pzParams={keyword:"",orderColumn:"currentYearMoney",orderType:0,orderMethod:1,orderRule:1,currentPage:1,pageSize:10,total:0,loading:!1,finish:!1,filterIndex:0},t}return Object(o["a"])(a,[{key:"handlePzTableChange",value:function(){this.pzList=[],this.init()}},{key:"_getDataUserGoodSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,userId:this.entryObj.userId,goods:this.pzParams.keyword,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(m["f"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data&&a.data.list?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getaUserCustomerSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,goods:this.pzParams.keyword,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,userId:this.entryObj.userId,customerId:this.entryObj.customerId,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(m["v"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyCurrentMonthMoney?t.lyCurrentMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getFixCustomerNewGoodSalesList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={selectDate:this.dateTime,goodsKeyword:this.pzParams.keyword,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,userId:this.entryObj.userId,customerId:this.entryObj.customerId,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(p["u"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyCurrentMonthMoney?t.lyCurrentMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_goodsGetDeptDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={deptId:this.entryObj.id,date:this.dateTime,orderColumn:this.pzParams.orderColumn,orderType:this.pzParams.orderType,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,goodsKeyword:this.pzParams.keyword,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(p["S"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.currentDayMoney?t.currentDayMoney:0,data2:t.currentMonthMoney?t.currentMonthMoney:0,data3:t.monthPercentage?t.monthPercentage:0,data4:t.lyAllMonthMoney?t.lyAllMonthMoney:0,data5:t.currentYearMoney?t.currentYearMoney:0,data6:t.yearPercentage?t.yearPercentage:0,data7:t.lyAllYearMonthMoney?t.lyAllYearMonthMoney:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getFullGoods",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customerId:this.entryObj.customerId,deptId:this.entryObj.id,selectedDate:this.dateTime,orderMethod:this.pzParams.orderMethod,orderRule:this.pzParams.orderRule,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,goodsKeyword:this.pzParams.keyword,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(m["j"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.dailySalesAmount?t.dailySalesAmount:0,data2:t.monthSalesAmount?t.monthSalesAmount:0,data3:t.monthOnMonthPercent?t.monthOnMonthPercent:0,data4:t.entireOnMonthSalesAmount?t.entireOnMonthSalesAmount:0,data5:t.yearSalesAmount?t.yearSalesAmount:0,data6:t.yearOnYearPercent?t.yearOnYearPercent:0,data7:t.accuOnYearSalesAmount?t.accuOnYearSalesAmount:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getNewGoodsDetailList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customerId:this.entryObj.customerId,deptId:this.entryObj.id,date:this.dateTime,orderMethod:this.pzParams.orderMethod,orderRule:this.pzParams.orderRule,pageNum:this.pzParams.currentPage,pageSize:this.pzParams.pageSize,goodsKeyword:this.pzParams.keyword,hideLoading:!0},this.pzParams.loading=!0,t.next=4,Object(p["C"])(e);case 4:a=t.sent,this.pzParams.loading=!1,200==a.code&&a.data?(a.data.list.forEach((function(t){s.pzList.push({id:t.goodsId,name:t.goodsName,data1:t.dailySalesAmount?t.dailySalesAmount:0,data2:t.monthSalesAmount?t.monthSalesAmount:0,data3:t.monthOnMonthPercent?t.monthOnMonthPercent:0,data4:t.entireOnMonthSalesAmount?t.entireOnMonthSalesAmount:0,data5:t.yearSalesAmount?t.yearSalesAmount:0,data6:t.yearOnYearPercent?t.yearOnYearPercent:0,data7:t.accuOnYearSalesAmount?t.accuOnYearSalesAmount:0})})),this.pzParams.total=a.data.total,this.pzList.length===this.pzParams.total&&(this.pzParams.finish=!0)):(this.pzParams.total=0,this.pzParams.finish=!0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toDetail",value:function(t){this.isClick&&(this.$crmUserClick({catalogType:605,catalogTypeName:"查数据",menuId:605012,menuName:t.id+"/"+t.name+"-品种列表点击进入",menuOperation:this.entryObj.id+"-"+this.entryObj.name,operationType:1}),this.$router.push({name:"salesLineGoodsSalesPage",query:{goodsId:t.id,goodsName:t.name,id:this.entryObj.id,name:this.entryObj.name,userId:this.entryObj.userId,userName:this.entryObj.userName}}))}},{key:"refresh",value:function(){this.stagingFilter.filterIndex=0,this.stagingFilter.keyword="",this.pzParams.keyword="",this.pzParams.filterIndex=0,this.pzParams.orderColumn="currentYearMoney",this.pzParams.orderType=0,this.showFilter=!1,this.init()}},{key:"openFilter",value:function(){this.showFilter=!0}},{key:"handleFilterOk",value:function(){if(this.showFilter=!1,this.pzList=[],this.pzParams.currentPage=1,this.pzParams.keyword=this.stagingFilter.keyword,this.pzParams.filterIndex=this.stagingFilter.filterIndex,this.pzParams.finish=!1,0===this.type||"customDepartmentRelate"==this.type)switch(this.pzParams.filterIndex){case 0:this.pzParams.orderMethod=1,this.pzParams.orderRule=1;break;case 1:this.pzParams.orderMethod=1,this.pzParams.orderRule=2;break;case 2:this.pzParams.orderMethod=2,this.pzParams.orderRule=1;break;case 3:this.pzParams.orderMethod=2,this.pzParams.orderRule=2;break}else switch(this.pzParams.filterIndex){case 0:this.pzParams.orderColumn="currentYearMoney",this.pzParams.orderType=0;break;case 1:this.pzParams.orderColumn="currentYearMoney",this.pzParams.orderType=1;break;case 2:this.pzParams.orderColumn="currentMonthMoney",this.pzParams.orderType=0;break;case 3:this.pzParams.orderColumn="currentMonthMoney",this.pzParams.orderType=1;break}this.init()}},{key:"chooseFilter",value:function(t){this.stagingFilter.filterIndex=t}},{key:"init",value:function(){this.pzList=[],"customerPersonRelate"===this.type?("全品种"===this.goodsTypeName&&this._getaUserCustomerSalesList(),"新增品种"===this.goodsTypeName&&this._getFixCustomerNewGoodSalesList()):"personRelate"===this.type?this._getDataUserGoodSalesList():"customDepartmentRelate"===this.type?("全品种"===this.goodsTypeName&&this._getFullGoods(),"新增品种"===this.goodsTypeName&&this._getNewGoodsDetailList()):"departmentRelate"===this.type&&this._goodsGetDeptDetailList()}},{key:"mounted",value:function(){this.init()}}]),a}(h["d"]);Object(d["a"])([Object(h["c"])()],f.prototype,"entryObj",void 0),Object(d["a"])([Object(h["c"])()],f.prototype,"dateTime",void 0),Object(d["a"])([Object(h["c"])({default:!0})],f.prototype,"isFooterShow",void 0),Object(d["a"])([Object(h["c"])({default:!0})],f.prototype,"isClick",void 0),Object(d["a"])([Object(h["c"])({default:""})],f.prototype,"goodsTypeName",void 0),Object(d["a"])([Object(h["c"])({default:""})],f.prototype,"type",void 0),f=Object(d["a"])([Object(h["a"])({components:{detailCard:u["a"]}})],f);var y=f,v=y,g=(a("6c8f"),a("2877")),b=Object(g["a"])(v,s,r,!1,null,"6659ec16",null);e["a"]=b.exports},e657:function(t,e,a){},e8d5:function(t,e,a){},ee16:function(t,e,a){},eec9:function(t,e,a){},ff2d:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-bg detail-card mt-2 pa-2"},[t.showDepName?a("div",[a("div",{staticClass:"d-flex align-center justify-space-between font-16 lineHeight-23 px-2"},[a("div",{staticClass:"fontWeight-500 color-main-2"},[t._v(t._s(t.name))]),a("div",{staticClass:"fontWeight-500 color-main-2"},[t._v(t._s(t.getUnitValueUse(t.data.data1,1))+"万元")])]),a("div",{staticClass:"d-flex align-center justify-space-between font-12 lineHeight-20 mb-1 px-2"},[a("div",{staticClass:"color-gray-5"},[t._v(t._s(t.data.mainDeptName))]),a("div",{staticClass:"color-gray-5"},[t._v("当日销售")])])]):a("div",{staticClass:"d-flex align-center justify-space-between font-16 lineHeight-23 card-header",class:t.isClick?"color-main-2 ":""},[a("div",{staticClass:"fontWeight-500"},[t._v(t._s(t.name))]),t.showDrxs?a("div",[a("span",{staticClass:"fontWeight-500 color-gray-5"},[t._v("当日销售")]),a("span",{staticClass:"fontWeight"},[t._v(t._s(t.getUnitValueUse(t.data.data1,1))+"万元")])]):t._e()]),a("div",{staticClass:"card-line my-1"}),"台州销售部"==t.name?a("div",{staticClass:"mb-1"},[a("span",{staticClass:"font-12 lineHeight-17"},[t._v("根据23年业务下沉协议，23年实际增长率")]),a("span",{staticClass:"font-13 fontWeight-500 ml-2",class:t.data.data9>0?"color-normal":"color-never"},[t._v(" "+t._s(t.nToP(t.data.data9))+"% ")])]):t._e(),"金华销售部"==t.name?a("div",{staticClass:"mb-1"},[a("span",{staticClass:"font-12 lineHeight-17"},[t._v("剔除浙四，23年增长率")]),a("span",{staticClass:"font-13 fontWeight-500 ml-2",class:t.data.data9>0?"color-normal":"color-never"},[t._v(" "+t._s(t.nToP(t.data.data9))+"% ")])]):t._e(),a("div",{staticClass:"d-flex justify-space-between align-baseline"},[a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("本月销售")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20"},[t._v(t._s(t.yToW(t.data.data2)))])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("月同比")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20",class:t.data.data3>0?"color-normal":"color-never"},[t._v(" "+t._s(t.nToP(t.data.data3))+"% ")])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("去年整月")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20"},[t._v(t._s(t.yToW(t.data.data4)))])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("本年累计")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20"},[t._v(t._s(t.yToW(t.data.data5)))])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("年同比")]),a("span",{staticClass:"font-13 fontWeight-500 lineHeight-20 d-felx",class:t.data.data6>0?"color-normal":"color-never"},[t._v(" "+t._s(t.nToP(t.data.data6))+"% ")])]),a("div",{staticClass:"d-flex align-center flex-column"},[a("span",{staticClass:"font-12 color-gray-4 lineHeight-17 mb-1"},[t._v("去年累计整月")]),a("span",{staticClass:"font-13 lineHeight-20 fontWeight-500"},[t._v(t._s(t.yToW(t.data.data7)))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.per>-1&&t.perShow,expression:"per > -1 && perShow"}],staticClass:"positionR"},[a("van-progress",{staticClass:"mt-1",attrs:{percentage:t.per,"track-color":"rgba($color: #646566, $alpha: 0.6)",color:"#4970F3","show-pivot":!1,"stroke-width":"20"}}),a("div",{staticClass:"color-white progress-text font-14 lineHeight-20 pl-3"},[t._v("预算进度达成率"+t._s(t.nToP(t.per))+"%")])],1)])},r=[],i=a("bee2"),n=a("d4ec"),o=a("262e"),l=a("2caf"),c=(a("a9e3"),a("9ab4")),d=a("1b40"),h=a("cc19"),u=a("5b92"),m=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.yToW=h["b"],t.nToP=h["a"],t.getUnitValueUse=u["d"],t}return Object(i["a"])(a)}(d["d"]);Object(c["a"])([Object(d["c"])({type:Object,default:{}})],m.prototype,"data",void 0),Object(c["a"])([Object(d["c"])({type:String,default:""})],m.prototype,"name",void 0),Object(c["a"])([Object(d["c"])({type:String,default:""})],m.prototype,"mainDeptName",void 0),Object(c["a"])([Object(d["c"])({type:Number,default:-1})],m.prototype,"per",void 0),Object(c["a"])([Object(d["c"])({default:!1})],m.prototype,"showDrxs",void 0),Object(c["a"])([Object(d["c"])({default:!1})],m.prototype,"showDepName",void 0),Object(c["a"])([Object(d["c"])({default:!0})],m.prototype,"isClick",void 0),Object(c["a"])([Object(d["c"])({default:!0})],m.prototype,"perShow",void 0),m=Object(c["a"])([Object(d["a"])({components:{}})],m);var p=m,f=p,y=(a("cb2b"),a("2877")),v=Object(y["a"])(f,s,r,!1,null,"6faad624",null);e["a"]=v.exports}}]);