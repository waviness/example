(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58de01a3"],{1230:function(e,t,s){"use strict";s("d4f1")},"312f":function(e,t,s){},"53ae":function(e,t,s){"use strict";var a=s("d4ec"),i=s("bee2"),n=s("262e"),r=s("2caf"),o=(s("b0c0"),s("9ab4")),c=s("1b40");c["a"].registerHooks(["beforeRouteEnter"]);var l=function(e){Object(n["a"])(s,e);var t=Object(r["a"])(s);function s(){var e;return Object(a["a"])(this,s),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(i["a"])(s,[{key:"beforeRouteEnter",value:function(e,t,s){s((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),s}(c["d"]);l=Object(o["a"])([Object(c["a"])({})],l),t["a"]=l},"77de":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"d",(function(){return d}));var a=s("1da1"),i=(s("96cf"),s("b32d")),n=s("90ae"),r=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(n["d"],"/api/SubscribeArrive/getCanSubGoodsList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(n["d"],"/api/SubscribeArrive/getSubscribeArriveList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get(n["d"],"/api/SubscribeArrive/activeSubscribe",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get(n["d"],"/api/SubscribeArrive/unsubscribe",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(n["d"],"/api/SubscribeArrive/subscribeArrive",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"98d6":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"full-HW"},[s("div",{staticClass:"white-bg px-4 py-2"},[s("van-field",{staticClass:"search-div",attrs:{placeholder:"搜索货品添加","left-icon":"search",clearable:""},on:{input:e.handleChange},model:{value:e.params.goodsKeyword,callback:function(t){e.$set(e.params,"goodsKeyword",t)},expression:"params.goodsKeyword"}})],1),s("van-tabs",{directives:[{name:"show",rawName:"v-show",value:!e.params.goodsKeyword,expression:"!params.goodsKeyword"}],attrs:{color:"#2271F5"},on:{change:e.handleChange},model:{value:e.params.subType,callback:function(t){e.$set(e.params,"subType",t)},expression:"params.subType"}},[s("van-tab",{attrs:{title:"到货提醒",name:1}}),s("van-tab",{attrs:{title:"到票提醒",name:2}})],1),s("div",{staticClass:"overflow-x-hidden card-list",class:e.params.goodsKeyword?"card-list-long":""},[s("van-pull-refresh",{staticStyle:{"min-height":"100%"},on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[e.loading||e.dataList.length?e._e():s("app-empty",{staticClass:"mt-6 white-bg",attrs:{description:"暂无数据"}}),s("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.dataList,(function(t,a){return s("card-detail",{key:a,attrs:{info:t,isSearch:!!e.params.goodsKeyword,timeTitle:1==e.params.subType?"到货时间":"到票时间"},on:{handleClick:e.onRefresh}})})),1)],1)],1),s("van-popup",{attrs:{round:"",position:"bottom"},on:{"click-overlay":e.closePupup},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("van-field",{staticClass:"mt-4",attrs:{label:"货品ID",placeholder:"请输入货品ID","input-align":"right",clearable:""},model:{value:e.filterObj.goodsId,callback:function(t){e.$set(e.filterObj,"goodsId",t)},expression:"filterObj.goodsId"}}),s("van-field",{attrs:{label:"货品名称",placeholder:"请输入货品名称","input-align":"right",clearable:""},model:{value:e.filterObj.goodsName,callback:function(t){e.$set(e.filterObj,"goodsName",t)},expression:"filterObj.goodsName"}}),s("div",{staticClass:"d-flex align-center justify-space-between font-14 fitler-radio ml-4 mr-3"},[s("span",{staticClass:"color-gray-5"},[e._v("状态筛选")]),s("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.filterObj.sendFlag,callback:function(t){e.$set(e.filterObj,"sendFlag",t)},expression:"filterObj.sendFlag"}},[s("van-radio",{attrs:{name:0}},[e._v("全部")]),s("van-radio",{attrs:{name:1}},[e._v("已发送")]),s("van-radio",{attrs:{name:2}},[e._v("未发送")])],1)],1),s("div",{staticClass:"d-flex justify-center mt-4 mb-5"},[s("van-button",{staticClass:"popup-button mr-3",attrs:{round:""},on:{click:e.refreshFilter}},[e._v("重置")]),s("van-button",{staticClass:"popup-button",attrs:{round:"",type:"info"},on:{click:e.handleFilter}},[e._v("确认")])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.params.goodsKeyword,expression:"!params.goodsKeyword"}],staticClass:"d-flex justify-center full-width filter-button"},[s("van-button",{attrs:{icon:"filter-o",round:"",type:"info",plain:!e.isFilter,size:"normal"},on:{click:e.showPopup}},[e._v(" 高级筛选 ")])],1)],1)},i=[],n=s("d4ec"),r=s("bee2"),o=s("262e"),c=s("2caf"),l=(s("99af"),s("e9c4"),s("9ab4")),d=s("1b40"),u=s("53ae"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-detail gray-block box-shadow font-12"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isSearch,expression:"!isSearch"}],staticClass:"card-detail-top white-bg"},[s("span",{staticClass:"card-detail-top-title-blue"},[e._v(e._s(e.info.entryId)+"/"+e._s(e.info.entryName))]),s("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[s("span",{staticClass:"color-gray-4"},[e._v("品种")]),s("span",[e._v(e._s(e.info.goodsId)+"/"+e._s(e.info.goodsName))])]),s("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[s("span",{staticClass:"color-gray-4"},[e._v("发票号")]),s("span",[e._v(e._s(e.info.invNo))])]),s("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[s("span",{staticClass:"color-gray-4"},[e._v("订阅时间")]),s("span",[e._v(e._s(e.info.subDate))])]),e.isSearch||1!=e.info.sendFlag?e._e():s("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[s("span",{staticClass:"color-gray-4"},[e._v(e._s(e.timeTitle))]),s("span",[e._v(e._s(e.info.lastSendTime))])]),s("div",{staticClass:"d-flex align-center justify-space-between"},[s("span",{staticClass:"color-gray-4"},[e._v("状态")]),s("div",{class:1==e.info.sendFlag?"card-detail-top-title-green":2==e.info.sendFlag?"card-detail-top-title-red":"",staticStyle:{"margin-bottom":"0"}},[e._v(" "+e._s(1==e.info.sendFlag?"已发送":2==e.info.sendFlag?"未发送":"")+" ")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isSearch,expression:"isSearch"}],staticClass:"card-detail-top white-bg"},[s("span",{staticClass:"card-detail-top-title-blue"},[e._v(e._s(e.info.entryId)+"/"+e._s(e.info.entryName))]),s("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[s("span",{staticClass:"color-gray-4"},[e._v("品种")]),s("span",[e._v(e._s(e.info.goodsId)+"/"+e._s(e.info.goodsName))])]),s("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[s("span",{staticClass:"color-gray-4"},[e._v("厂家")]),s("span",[e._v(e._s(e.info.zxFactoryName))])]),s("div",{staticClass:"d-flex align-center justify-space-between"},[s("span",{staticClass:"color-gray-4"},[e._v("规格")]),s("span",[e._v(e._s(e.info.goodsType))])])]),s("div",{staticClass:"d-flex align-center justify-end card-detail-bottom"},[s("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSearch,expression:"!isSearch"}],staticClass:"mr-4",attrs:{round:"",type:"danger",size:"small"},on:{click:function(t){return e.handleClick(1)}}},[e._v(" 删除订阅 ")]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSearch,expression:"!isSearch"}],attrs:{round:"",type:1==e.info.sendFlag?"info":"default",disabled:1!=e.info.sendFlag,size:"small"},on:{click:function(t){return e.handleClick(2)}}},[e._v(" 激活订阅 ")]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:e.isSearch&&1!=e.info.subGoodsType,expression:"isSearch && info.subGoodsType != 1"}],staticClass:"mr-4",attrs:{round:"",type:"info",size:"small",disabled:e.info.subGoodsType>0},on:{click:function(t){return e.handleClick(3)}}},[e._v(" 订阅到货提醒 ")]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:e.isSearch&&1!=e.info.sublnvnoType,expression:"isSearch && info.sublnvnoType != 1"}],attrs:{round:"",type:"info",size:"small",disabled:e.info.sublnvnoType>0},on:{click:function(t){return e.handleClick(4)}}},[e._v(" 订阅到票提醒 ")]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:e.isSearch&&1==e.info.subGoodsType,expression:"isSearch && info.subGoodsType == 1"}],staticClass:"mr-4",attrs:{round:"",type:"info",size:"small"},on:{click:function(t){return e.handleClick(5)}}},[e._v(" 激活到货提醒 ")]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:e.isSearch&&1==e.info.sublnvnoType,expression:"isSearch && info.sublnvnoType == 1"}],attrs:{round:"",type:"info",size:"small"},on:{click:function(t){return e.handleClick(6)}}},[e._v(" 激活到票提醒 ")])],1)])},b=[],p=s("77de"),h=function(e){Object(o["a"])(s,e);var t=Object(c["a"])(s);function s(){return Object(n["a"])(this,s),t.apply(this,arguments)}return Object(r["a"])(s,[{key:"handleClick",value:function(e){var t=this,s="";switch(e){case 1:s="是否确认删除订阅";break;case 2:s="是否确认激活订阅";break;case 3:s="是否确认订阅到货提醒";break;case 4:s="是否确认订阅到票提醒";break;case 5:s="是否确认激活到货提醒";break;case 6:s="是否确认激活到票提醒";break}this.$dialog.confirm({message:s}).then((function(){switch(e){case 1:t._unsubscribe();break;case 2:t._activeSubscribe(t.info.subId);break;case 3:t._subscribeArrive(1);break;case 4:t._subscribeArrive(2);break;case 5:t._activeSubscribe(t.info.subGoodsId);break;case 6:t._activeSubscribe(t.info.subinvnoId);break}})).catch((function(){}))}},{key:"_unsubscribe",value:function(){var e=this;Object(p["e"])({subId:this.info.subId}).then((function(t){200==t.code?(e.$toast.success("删除订阅成功"),e.$emit("handleClick")):e.$toast.fail(t.msg)}))}},{key:"_activeSubscribe",value:function(e){var t=this;Object(p["a"])({subId:e}).then((function(e){200==e.code?(t.$toast.success("激活订阅成功"),t.$emit("handleClick")):t.$toast.fail(e.msg)}))}},{key:"_subscribeArrive",value:function(e){var t=this;Object(p["d"])({entryId:this.info.entryId,goodsId:this.info.goodsId,subType:e}).then((function(s){200==s.code?1==e?(t.info.subGoodsNum++,t.$toast.success("订阅到货提醒成功")):(t.info.subInvnoNum++,t.$toast.success("订阅到票提醒成功")):t.$toast.fail(s.msg)}))}}]),s}(d["d"]);Object(l["a"])([Object(d["c"])({type:Object,default:{}})],h.prototype,"info",void 0),Object(l["a"])([Object(d["c"])({type:Boolean,default:!1})],h.prototype,"isSearch",void 0),Object(l["a"])([Object(d["c"])({type:String,default:""})],h.prototype,"timeTitle",void 0),h=Object(l["a"])([Object(d["a"])({components:{}})],h);var v=h,g=v,m=(s("1230"),s("2877")),y=Object(m["a"])(g,f,b,!1,null,"54d90bba",null),w=y.exports,j=function(e){Object(o["a"])(s,e);var t=Object(c["a"])(s);function s(){var e;return Object(n["a"])(this,s),e=t.apply(this,arguments),e.params={goodsKeyword:"",subType:1},e.filterObj={goodsId:"",goodsName:"",sendFlag:0},e.originFilter={goodsId:"",goodsName:"",sendFlag:0},e.show=!1,e}return Object(r["a"])(s,[{key:"isFilter",get:function(){return!!(this.filterObj.goodsId||this.filterObj.goodsName||this.filterObj.sendFlag)}},{key:"handleChange",value:function(){this.onRefresh()}},{key:"onRefresh",value:function(){this.page=1,this.finished=!1,this.refreshing=!1,this.params.goodsKeyword?this._getCanSubGoodsList():this._getSubscribeArriveList()}},{key:"onLoad",value:function(){var e=this;this.$nextTick((function(){e.params.goodsKeyword?e._getCanSubGoodsList():e._getSubscribeArriveList()}))}},{key:"_getSubscribeArriveList",value:function(){var e=this;this.loading=!0,1===this.page&&(this.dataList=[]);var t={subType:this.params.subType,goodsId:this.filterObj.goodsId,goodsName:this.filterObj.goodsName,sendFlag:this.filterObj.sendFlag?this.filterObj.sendFlag:null,pageNum:this.page,pageSize:10};Object(p["c"])(t).then((function(t){200==t.code&&t.data||(e.finished=!0,e.loading=!1,e.$toast.fail(t.msg)),e.dataList=e.dataList.concat(t.data.list),e.loading=!1,t.data.hasNextPage?e.page++:e.finished=!0}))}},{key:"_getCanSubGoodsList",value:function(){var e=this;this.loading=!0,1===this.page&&(this.dataList=[]);var t={goodsKeyword:this.params.goodsKeyword,pageNum:this.page,pageSize:10};Object(p["b"])(t).then((function(t){200==t.code&&t.data||(e.finished=!0,e.loading=!1,e.$toast.fail(t.msg)),e.dataList=e.dataList.concat(t.data.list),e.loading=!1,t.data.hasNextPage?e.page++:e.finished=!0}))}},{key:"closePupup",value:function(){this.filterObj.goodsId=this.originFilter.goodsId,this.filterObj.goodsName=this.originFilter.goodsName,this.filterObj.sendFlag=this.originFilter.sendFlag}},{key:"showPopup",value:function(){this.originFilter=JSON.parse(JSON.stringify(this.filterObj)),this.show=!0}},{key:"refreshFilter",value:function(){this.filterObj.goodsId="",this.filterObj.goodsName="",this.filterObj.sendFlag=0}},{key:"handleFilter",value:function(){this.show=!1,this.filterObj.goodsId===this.originFilter.goodsId&&this.filterObj.goodsName===this.originFilter.goodsName&&this.filterObj.sendFlag===this.originFilter.sendFlag||(this.page=1,this.finished=!1,this._getSubscribeArriveList())}}]),s}(Object(d["b"])(u["a"]));j=Object(l["a"])([Object(d["a"])({components:{cardDetail:w}})],j);var k=j,_=k,O=(s("efde"),Object(m["a"])(_,a,i,!1,null,"7720f3d6",null));t["default"]=O.exports},d4f1:function(e,t,s){},efde:function(e,t,s){"use strict";s("312f")}}]);