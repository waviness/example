(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-356ead45"],{"53ae":function(t,e,i){"use strict";var a=i("d4ec"),n=i("bee2"),r=i("262e"),s=i("2caf"),o=(i("b0c0"),i("9ab4")),c=i("1b40");c["a"].registerHooks(["beforeRouteEnter"]);var u=function(t){Object(r["a"])(i,t);var e=Object(s["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(n["a"])(i,[{key:"beforeRouteEnter",value:function(t,e,i){i((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),i}(c["d"]);u=Object(o["a"])([Object(c["a"])({})],u),e["a"]=u},ae46:function(t,e,i){},c0c8:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full-height"},[i("van-sticky",[i("div",{staticClass:"header px-10 pt-10 white-bg"},[i("div",{class:["pa-10 common-filter",t.filterShow?"color-main-2":"",t.filterActive?"common-filter--active":""],on:{click:function(e){t.filterShow=!t.filterShow}}},[i("div",[t._v("条件筛选")]),i("van-icon",{attrs:{name:"arrow-"+(t.filterShow?"up":"down"),size:"16px"}})],1),i("van-tabs",{attrs:{color:"#2271F5"},on:{click:t.inquiryTypeClick}},[i("van-tab",{attrs:{title:"未处理"}}),i("van-tab",{attrs:{title:"进行中"}}),i("van-tab",{attrs:{title:"已完成"}}),i("van-tab",{attrs:{title:"已审核"}})],1)],1),t.validNumber?i("van-notice-bar",{attrs:{color:"#969799",background:"#FFFBE8"},on:{click:function(e){return t.$router.push({name:"InquiryLetterAssistantOverdue"})}},scopedSlots:t._u([{key:"left-icon",fn:function(){return[i("van-icon",{staticClass:"mr-2",attrs:{size:"18px",color:"#ED6A0C",name:"warning-o"}})]},proxy:!0}],null,!1,2987429654)},[t._v(" 预警：你有"+t._s(t.validNumber)+"条询证函超期未完成 "),i("van-icon",{staticClass:"right",attrs:{name:"arrow"}})],1):t._e()],1),i("van-pull-refresh",{staticClass:"pt-10 px-10",attrs:{id:"filterContainer"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{attrs:{offset:20,finished:t.finished,"finished-text":""},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t.loading||t.inquiryDataList.length?t._e():i("app-empty",{staticClass:"pb-6 white-bg",attrs:{description:"暂无数据"}}),t._l(t.inquiryDataList,(function(e,a){return i("list",{key:"inquiry"+a,attrs:{item:e,index:a},on:{changeStatus:t.changeStatus,detailClick:t.detailClick}})}))],2)],1),i("div",{staticClass:"commonOpButton-footer"},[i("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:function(e){return t.$router.push({name:"InquiryLetterAssistantAdd"})}},scopedSlots:t._u([{key:"icon",fn:function(){return[i("icon-Svg",{attrs:{size:"small",color:"white",name:"ytcrm-a-xingzhuang2"}})]},proxy:!0}])},[t._v(" 新增客户信息")]),i("van-button",{attrs:{round:"",color:"#2271F5",plain:"",type:"info"},on:{click:t.dealClick},scopedSlots:t._u([{key:"icon",fn:function(){return[i("icon-Svg",{attrs:{size:"small",color:"#000000",name:"ytcrm-a-xingzhuang2"}})]},proxy:!0}])},[t._v("询证函异常")])],1),i("van-popup",{attrs:{position:"top","get-container":"#filterContainer"},model:{value:t.filterShow,callback:function(e){t.filterShow=e},expression:"filterShow"}},[i("filter-pop",{on:{showPickerDateClick:function(e){t.showPickerDate=!0},filterSubmit:t.filterSubmit,reset:t.reset}})],1)],1)},n=[],r=i("5530"),s=i("d4ec"),o=i("bee2"),c=i("262e"),u=i("2caf"),l=(i("99af"),i("a434"),i("b0c0"),i("9ab4")),d=i("1b40"),f=i("fa08"),m=i("53ae"),h=i("c71e"),p=i("c68a"),v=i("e6a1"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-form",[i("van-field",{attrs:{clickable:"",readonly:"",label:"时间范围",placeholder:"点击选择时间范围","input-align":"right"},on:{click:t.showPickerDateClick},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}}),i("van-field",{attrs:{label:"总单编号","input-align":"right",placeholder:"请输入总单编号"},model:{value:t.filterObj.confirmadocid,callback:function(e){t.$set(t.filterObj,"confirmadocid",e)},expression:"filterObj.confirmadocid"}}),i("van-field",{attrs:{label:"客户ID","input-align":"right",placeholder:"请输入客户ID"},model:{value:t.filterObj.customerId,callback:function(e){t.$set(t.filterObj,"customerId",e)},expression:"filterObj.customerId"}}),i("van-field",{attrs:{label:"客户名称","input-align":"right",placeholder:"请输入客户名称"},model:{value:t.filterObj.customName,callback:function(e){t.$set(t.filterObj,"customName",e)},expression:"filterObj.customName"}})],1),i("div",{staticClass:"dropdown-opts"},[i("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",size:"small",block:"",round:""},on:{click:t.reset}},[t._v("重置")]),i("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"info",size:"small",block:"",round:"",color:"#2271F5"},on:{click:t.filterSubmit}},[t._v("确认")])],1),t.showPickerDate?i("van-calendar",{attrs:{"get-container":"#app",type:"range","min-date":t.minDate,maxDate:t.maxDate,color:"#2271F5","allow-same-day":""},on:{confirm:t.onConfirmDate},model:{value:t.showPickerDate,callback:function(e){t.showPickerDate=e},expression:"showPickerDate"}}):t._e()],1)},g=[],O=i("3835"),k=function(t){Object(c["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.dateRange="",t.showPickerDate=!1,t.minDate=new Date(2010,0,1),t.maxDate=new Date,t.filterObj={startTime:"",endTime:"",confirmadocid:"",customerId:"",customName:""},t}return Object(o["a"])(i,[{key:"filterSubmit",value:function(){this.$emit("filterSubmit",this.filterObj)}},{key:"showPickerDateClick",value:function(){this.showPickerDate=!0}},{key:"onConfirmDate",value:function(t){var e=Object(O["a"])(t,2),i=e[0],a=e[1];this.filterObj.startTime=this.$dayjs(i).format("YYYY-MM-DD"),this.filterObj.endTime=this.$dayjs(a).format("YYYY-MM-DD"),this.showPickerDate=!1,this.dateRange="".concat(this.filterObj.startTime," 至 ").concat(this.filterObj.endTime)}},{key:"reset",value:function(){this.$emit("reset"),this.filterObj={confirmadocid:"",customerId:"",customName:"",startTime:"",endTime:""},this.dateRange=""}}]),i}(d["d"]);k=Object(l["a"])([Object(d["a"])({})],k);var j=k,y=j,w=(i("f20c"),i("2877")),x=Object(w["a"])(y,b,g,!1,null,"2fa3c3e0",null),D=x.exports,_=function(t){Object(c["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.filterShow=!1,t.filterActive=!1,t.inquiryType=0,t.reload=!0,t.filterObj={startTime:"",endTime:"",confirmadocid:"",customerId:"",customName:""},t}return Object(o["a"])(i,[{key:"inquiryTypeClick",value:function(t){this.inquiryType=t,this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.inquiryDataList=[],this.refreshing=!1),this.loading=!0,this._getConfirmationRequestList()}},{key:"_getConfirmationRequestList",value:function(){var t=this;1===this.page&&(this.inquiryDataList=[]),Object(p["d"])({startTime:this.filterObj.startTime?this.filterObj.startTime:"",endTime:this.filterObj.endTime?this.filterObj.endTime:"",confirmadocid:this.filterObj.confirmadocid,customerId:this.filterObj.customerId,customName:this.filterObj.customName,type:this.inquiryType,keyWords:"",pageNum:this.page,pageSize:10}).then((function(e){"200"===e.code&&(t.inquiryDataList=t.inquiryDataList.concat(e.data.list),e.data.hasNextPage?t.page++:t.finished=!0,t.loading=!1)}))}},{key:"filterSubmit",value:function(t){this.filterObj=Object(r["a"])({},t),this.filterObj.confirmadocid||this.filterObj.customerId||this.filterObj.customName||this.filterObj.startTime||this.filterObj.endTime?this.filterActive=!0:this.filterActive=!1,this.filterShow=!1,this.onRefresh()}},{key:"reset",value:function(){this.filterObj.confirmadocid="",this.filterObj.customerId="",this.filterObj.customName="",this.filterObj.startTime="",this.filterObj.endTime="",this.filterActive=!1,this.onRefresh()}},{key:"dealClick",value:function(){this.$router.push({path:"/inquiryAbnormalDeal",query:{role:"1"}})}},{key:"mounted",value:function(){this._exceedTimeLimitTask(1)}},{key:"activated",value:function(){this.hadDoneOnDetail&&this.inquiryDataList.splice(this.detailObj.inquiryDetailIndex,1),this.reload&&(this.inquiryType=0,this._exceedTimeLimitTask(1),this.reset(),this.reload=!1)}}]),i}(Object(d["b"])(f["a"],m["a"],h["a"]));_=Object(l["a"])([Object(d["a"])({components:{list:v["a"],filterPop:D},beforeRouteLeave:function(t,e,i){"TaskIndex"!==t.name&&"Home"!==e.name||(this.reload=!0),i()}})],_);var C=_,T=C,L=(i("d312"),Object(w["a"])(T,a,n,!1,null,"9ca5e5bc",null));e["default"]=L.exports},c68a:function(t,e,i){"use strict";i.d(e,"d",(function(){return s})),i.d(e,"g",(function(){return o})),i.d(e,"h",(function(){return c})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return d})),i.d(e,"f",(function(){return f})),i.d(e,"e",(function(){return m}));var a=i("1da1"),n=(i("96cf"),i("b32d")),r=i("90ae"),s=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].post(r["d"],"/api/task/getConfirmationRequestList",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].get(r["d"],"/api/task/updateConfirmationRequestStatue",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].post(r["d"],"/api/task/uploadConfirmationRequestPictures",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].post(r["d"],"/api/task/downloadConfirmationRequestPictures",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].get(r["d"],"/api/task/exceedTimeLimitTask",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].post(r["d"],"/api/task/activeInitiateConfirmationRequest",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].get(r["d"],"/api/task/initiatedConfirmationRequest",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].putGet(r["d"],"/api/task/handleConfirmationRequest/".concat(e),i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()},c71e:function(t,e,i){"use strict";var a=i("d4ec"),n=i("bee2"),r=i("262e"),s=i("2caf"),o=(i("99af"),i("9ab4")),c=i("1b40"),u=i("c68a"),l=function(t){Object(r["a"])(i,t);var e=Object(s["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.validfinished=!1,t.validrefreshing=!1,t.validDataLoading=!1,t.validpage=1,t.validDataList=[],t.validShow=!1,t.validNumber=0,t}return Object(n["a"])(i,[{key:"onValidRefresh",value:function(){this.validfinished=!1,this.validDataLoading=!1,this.validpage=1,this.validDataList=[],this.onValidLoad()}},{key:"onValidLoad",value:function(){this.validrefreshing&&(this.validpage=1,this.validDataList=[],this.validrefreshing=!1),this._exceedTimeLimitTask(10)}},{key:"_exceedTimeLimitTask",value:function(t){var e=this;this.validDataLoading=!0,Object(u["c"])({pageNum:this.validpage,pageSize:t}).then((function(i){"200"===i.code?(e.validDataLoading=!1,1===t?e.validNumber=i.data.total:(e.validDataList=e.validDataList.concat(i.data.list),i.data.hasNextPage?e.validpage++:e.validfinished=!0)):e.$toast.fail(i.msg)}))}}]),i}(c["d"]);l=Object(o["a"])([Object(c["a"])({})],l),e["a"]=l},ca0a:function(t,e,i){},d312:function(t,e,i){"use strict";i("ca0a")},e6a1:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-list mb-2",on:{click:t.detailClick}},[i("div",{staticClass:"common-list-content"},[i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight"},[t._v("#"+t._s(t.item.confirmadocid))]),i("div",{staticClass:"fontWeight-500 color-gray-4"},[t._v(t._s(t.item.credate&&t.item.credate.substring(0,10)))])]),i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight-500 color-gray-5"},[t._v(t._s(t.item.customid)+"/"+t._s(t.item.customerName.split("/")[0]))]),i("div",{staticClass:"fontWeight-500 common-list-minWidth"},[t._v("核算单元 "+t._s(t.item.entryid))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.item.contactId,expression:"item.contactId"}],staticClass:"common-list-one color-gray-4"},[t._v(t._s(t.item.contactId)+t._s(t.item.contactMan))]),i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight-500 font-14"},[t._v("出函金额 "+t._s(t.item.total))]),5!==t.item.usestate&&6!==t.item.usestate?i("div",[t.item.validDays<0?i("van-tag",{attrs:{color:"rgba(227, 77, 89, 0.1)","text-color":"#E34D59"}},[t._v("已过期"+t._s(Math.abs(t.item.validDays))+"天")]):i("van-tag",{attrs:{color:"rgba(0, 168, 112, 0.1)","text-color":"#00A870"}},[t._v("距到期还剩"+t._s(Math.abs(t.item.validDays))+"天")])],1):t._e()])]),2===t.item.usestate||6!==t.item.usestate?i("div",{staticClass:"common-list-button clearfix"},[i("div",{staticClass:"right"},[2===t.item.usestate?i("van-button",{attrs:{size:"small",color:"#2271F5",round:"",type:"info"},on:{click:t.changeStatus}},[t._v("启动询证")]):t._e(),6!==t.item.usestate?i("van-button",{staticClass:"ml-4",attrs:{size:"small",color:"#2271F5",round:"",type:"info"},on:{click:t.detailClick}},[t._v("上传照片")]):t._e()],1)]):t._e()])},n=[],r=i("d4ec"),s=i("bee2"),o=i("262e"),c=i("2caf"),u=i("9ab4"),l=i("1b40"),d=function(t){Object(o["a"])(i,t);var e=Object(c["a"])(i);function i(){return Object(r["a"])(this,i),e.apply(this,arguments)}return Object(s["a"])(i,[{key:"detailClick",value:function(){this.$emit("detailClick",{item:this.item,index:this.index})}},{key:"changeStatus",value:function(){var t=this,e="请核对财务下发的纸质材料，确认无误后点击下方“确定”！";this.$dialog.confirm({message:e,allowHtml:!0,confirmButtonText:"确定",confirmButtonColor:"#2271F5",beforeClose:function(e,i){if("confirm"===e){var a={index:t.index,confirmadocid:t.item.confirmadocid,statue:4};t.$emit("changeStatus",a),i()}else i()}})}}]),i}(l["d"]);Object(u["a"])([Object(l["c"])()],d.prototype,"item",void 0),Object(u["a"])([Object(l["c"])()],d.prototype,"index",void 0),d=Object(u["a"])([Object(l["a"])({})],d);var f=d,m=f,h=i("2877"),p=Object(h["a"])(m,a,n,!1,null,"e3e2f2d8",null);e["a"]=p.exports},f20c:function(t,e,i){"use strict";i("ae46")},fa08:function(t,e,i){"use strict";var a=i("d4ec"),n=i("bee2"),r=i("262e"),s=i("2caf"),o=(i("a434"),i("9ab4")),c=i("1b40"),u=i("c68a"),l=i("4bb5"),d=Object(l["a"])("app"),f=Object(l["a"])("crm"),m=function(t){Object(r["a"])(i,t);var e=Object(s["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.inquiryDataList=[],t}return Object(n["a"])(i,[{key:"changeStatus",value:function(t){var e=this,i=t.confirmadocid,a=t.statue,n=t.index,r={confirmadocid:i,statue:a};Object(u["g"])(r).then((function(t){"200"===t.code&&(e.$toast.success(t.msg),e.inquiryDataList.splice(n,1))}))}},{key:"detailClick",value:function(t){var e=t.item,i=t.index;e.inquiryDetailIndex=i,this.SET_DETAILOBJ(e),this.$router.push({name:"InquiryLetterAssistantDetail"})}}]),i}(c["d"]);Object(o["a"])([f.Getter],m.prototype,"detailObj",void 0),Object(o["a"])([d.Getter],m.prototype,"hadDoneOnDetail",void 0),Object(o["a"])([f.Mutation],m.prototype,"SET_DETAILOBJ",void 0),m=Object(o["a"])([Object(c["a"])({components:{}})],m),e["a"]=m}}]);