(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a3db2d6"],{"0a77":function(t,e,a){"use strict";a("691f")},1828:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["type-tag",t.typeClass]},[t._v(t._s(t.name))])},i=[],n=a("d4ec"),c=a("bee2"),r=a("262e"),o=a("2caf"),l=(a("c96a"),a("9ab4")),u=a("1b40"),d=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"typeClass",get:function(){return"type-tag--".concat(this.small?"small":"big")}}]),a}(u["d"]);Object(l["a"])([Object(u["c"])({type:String,default:""})],d.prototype,"name",void 0),Object(l["a"])([Object(u["c"])({type:Boolean,default:!1})],d.prototype,"small",void 0),d=Object(l["a"])([Object(u["a"])({})],d);var p=d,h=p,v=(a("ee0e"),a("2877")),f=Object(v["a"])(h,s,i,!1,null,"9ecbcc9e",null);e["a"]=f.exports},5505:function(t,e,a){},"691f":function(t,e,a){},"71e1":function(t,e,a){"use strict";a("5505")},d921:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"increase-table"},[a("div",{staticClass:"d-flex color-gray-2"},[a("div",{staticClass:"flex-3"}),a("div",{staticClass:"flex-4 font-14"},[a("app-icon",{staticClass:"mr-2",attrs:{name:"#ytcrm-lujing1"}}),t._v(" 销售额 ")],1),a("div",{staticClass:"flex-3 font-14"},[a("app-icon",{staticClass:"mr-2",attrs:{name:"#ytcrm-xingzhuang1"}}),t._v(" 联合体 ")],1)]),t._l(t.data,(function(e,s){return a("div",{key:s,staticClass:"d-flex mt-5"},[a("div",{staticClass:"flex-3 color-black"},[t._v(t._s(e.name))]),"target"===e.type?a("div",{staticClass:"flex-4"},[t._v(" "+t._s(e.saleValue?e.saleValue+"%":"-")+" ")]):e.saleValue?a("div",{staticClass:"flex-4 d-flex align-center"},[a("app-icon",{staticClass:"mr-1",attrs:{name:e.saleValue<e.targetSaleValue?"#ytcrm-a-lujing2":"#ytcrm-a-bianzu60"}}),a("div",{class:e.saleValue<e.targetSaleValue?"color-normal":"color-never"},[t._v(t._s(e.saleValue)+"%")])],1):a("div",{staticClass:"flex-4"},[t._v("-")]),"target"===e.type?a("div",{staticClass:"flex-3"},[t._v(" "+t._s(e.unionValue?e.unionValue+"%":"-")+" ")]):e.unionValue?a("div",{staticClass:"flex-3 d-flex align-center"},[a("app-icon",{staticClass:"mr-1",attrs:{name:e.unionValue<e.targetUnionValue?"#ytcrm-a-lujing2":"#ytcrm-a-bianzu60"}}),a("div",{class:e.unionValue<e.targetUnionValue?"color-normal":"color-never"},[t._v(" "+t._s(e.unionValue)+"% ")])],1):a("div",{staticClass:"flex-3"},[t._v("-")])])}))],2)},i=[],n=a("bee2"),c=a("d4ec"),r=a("262e"),o=a("2caf"),l=a("9ab4"),u=a("1b40"),d=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(c["a"])(this,a),e.apply(this,arguments)}return Object(n["a"])(a)}(u["d"]);Object(l["a"])([Object(u["c"])({type:Array,default:[]})],d.prototype,"data",void 0),d=Object(l["a"])([Object(u["a"])({})],d);var p=d,h=p,v=a("2877"),f=Object(v["a"])(h,s,i,!1,null,null,null);e["a"]=f.exports},dafb:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"pb-100"},[s("van-search",{attrs:{value:e.searchValue,placeholder:e.placeholder},on:{click:function(){t.fullPopShow=!0}}}),e.curCustom.custName?e.nopermit?s("app-empty",{staticClass:"mt-7",attrs:{description:"网格层级信息未维护，请先去管理后台进行维护"}}):s("div",{staticClass:"key-follow__container"},[s("div",{staticClass:"gray-block box-shadow"},[s("div",{staticClass:"white-block inner-block"},[s("div",{staticClass:"font-14 font-bold"},[e._v(e._s(e.dataSource.custId||"")+"/")]),s("div",{staticClass:"customer-info",on:{click:function(){t.showFullTitle=!t.showFullTitle}}},[s("div",{ref:"custName",class:["customer-info__title font-14 font-bold",e.showFullTitle?"":"customer-info__title--ellipsis"]},[e._v(" "+e._s(e.dataSource.custName||"")+" ")]),e.titleOverflow?s("van-icon",{class:["customer-info__more",e.showFullTitle?"customer-info__more--up":"customer-info__more--down"],attrs:{name:"play"}}):e._e()],1),s("div",{staticClass:"d-flex align-center mt-4"},[s("div",{staticClass:"color-gray mr-4"},[e._v("联合体")]),s("div",{staticClass:"font-bold"},[e._v(" "+e._s(e.dataSource.communtyId?e.dataSource.communtyId+"/"+e.dataSource.communtyName:"无")+" ")])]),s("div",{staticClass:"d-flex align-center mt-2"},[s("div",{staticClass:"color-gray mr-4"},[e._v("网格层级")]),s("div",{staticClass:"font-bold"},[e._v(e._s(e.dataSource.gridGrade))])])]),s("div",{staticClass:"inner-block"},[e._v("项目类型")]),s("div",{staticClass:"d-flex flex-wrap inner-margin"},e._l(e.dataSource.typeList,(function(t,e){return s("type-tag",{key:e,staticClass:"mb-2 mr-2",attrs:{name:t.type[0],small:""}})})),1)]),s("div",{staticClass:"white-block mt-2 py-2"},[s("van-tabs",{directives:[{name:"show",rawName:"v-show",value:e.dataSource.deptList&&e.dataSource.deptList.length>1,expression:"dataSource.deptList && dataSource.deptList.length > 1"}],attrs:{color:"#2271F5","title-inactive-color":"#969799",ellipsis:!1},on:{change:e.handleClick},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.dataSource.deptList,(function(t,e){return s("van-tab",{key:e,attrs:{title:t.deptName,name:t.deptId}})})),1),s("div",{staticClass:"d-flex mx-3 mt-3"},[s("div",{staticClass:"d-flex align-center"},[s("div",{staticClass:"color-gray mr-4"},[e._v("业务员")]),s("div",{staticClass:"font-bold"},[e._v(e._s(e.dataSource.saler))])]),s("div",{staticClass:"d-flex align-center ml-7"},[s("div",{staticClass:"color-gray mr-4"},[e._v("领航员")]),s("div",{staticClass:"font-bold"},[e._v(e._s(e.dataSource.pilotName))])])])],1),s("div",{staticClass:"white-block mt-2 inner-block"},[s("div",{staticClass:"block-title"},[s("div",{staticClass:"font-14 font-bold"},[e._v("统计")])]),s("increase-table",{staticClass:"mt-2",attrs:{data:e.dataSource.increaseTableData}}),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"dataLoading"}],staticClass:"block-loading",attrs:{type:"spinner",color:"#2271F5"}})],1),s("div",{staticClass:"white-block mt-2"},[s("div",{staticClass:"d-flex justify-space-between align-center pt-2"},[s("van-tabs",{staticStyle:{width:"70%"},attrs:{color:"#2271F5"},on:{change:e.onRefresh},model:{value:e.typeActive,callback:function(t){e.typeActive=t},expression:"typeActive"}},[s("van-tab",{attrs:{title:"拜访层级",name:"1"}}),s("van-tab",{attrs:{title:"目标任务",name:"2"}}),s("van-tab",{attrs:{title:"目标品种",name:"3"}})],1),s("app-icon",{staticClass:"font-30 mr-4",attrs:{name:"#ytcrm-a-xinzengmian"},on:{click:e.toAddPage}})],1),s("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[s("van-list",{attrs:{finished:e.finished,"immediate-check":!1,"finished-text":"没有更多了",error:e.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){e.error=t},load:e.getDataList},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:1===+e.typeActive,expression:"+typeActive === 1"}]},[s("gr-list",{attrs:{list:e.grList},on:{edit:e.toEdit,delete:e.deleteItem}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:2===+e.typeActive,expression:"+typeActive === 2"}]},[s("status-tab",{staticClass:"inner-block mt-2",attrs:{options:e.statusOptions,active:e.targetStatus},on:{change:e.changeStatus}}),s("target-list",{attrs:{list:e.targetList,disabled:2===e.targetStatus},on:{finish:e.finishTarget,edit:e.toEdit,delete:e.deleteItem}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:3===+e.typeActive,expression:"+typeActive === 3"}]},[s("van-form",{staticClass:"mt-4 mb-4"},[s("van-field",{attrs:{label:"时间范围",placeholder:"点击选择时间范围","input-align":"right"},on:{click:function(){t.showPickerDate=!0}},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),s("van-field",{attrs:{label:"关键词",placeholder:"请输入货品ID|名称","input-align":"right",clearable:""},on:{input:e.onRefresh},model:{value:e.goods,callback:function(t){e.goods=t},expression:"goods"}}),s("goods-list",{staticClass:"mt-4",attrs:{list:e.goodsList},on:{delete:e.deleteItem}})],1)],1)])],1)],1),e.buttonShow?s("fix-button",{attrs:{title:"网格化管理",icon:"#ytcrm-wangge"},on:{click:e.toKeyProjects}}):e._e()],1):s("app-empty",{staticClass:"mt-7",attrs:{description:"请先输入指定客户"}}),s("full-pop",{directives:[{name:"show",rawName:"v-show",value:e.fullPopShow,expression:"fullPopShow"}],attrs:{placeholder:e.placeholder,loading:e.custLoading,list:e.custList,keyProp:"custId",valueProp:"custName"},on:{cancel:function(t){e.fullPopShow=!1},input:e.getCustList,select:e.onSelectCustomer}}),s("van-calendar",{attrs:{type:"range","min-date":e.minDate,maxDate:e.maxDate,color:"#2271F5","allow-same-day":""},on:{confirm:e.onConfirmDate},model:{value:e.showPickerDate,callback:function(t){e.showPickerDate=t},expression:"showPickerDate"}})],1)},i=[],n=a("5530"),c=a("2909"),r=a("1da1"),o=a("3835"),l=a("d4ec"),u=a("bee2"),d=a("262e"),p=a("2caf"),h=(a("96cf"),a("ac1f"),a("1276"),a("99af"),a("d3b7"),a("159b"),a("5319"),a("4de4"),a("9ab4")),v=a("1b40"),f=a("4bb5"),m=a("d921"),g=a("1828"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status-tabs"},t._l(t.options,(function(e,s){return a("van-button",{key:s,staticClass:"mr-3",attrs:{color:t.active===e.value?"#2271F5":"",size:"mini"},on:{click:function(a){return t.onChange(e.value)}}},[t._v(t._s(e.label))])})),1)},y=[],k=(a("a9e3"),function(t){Object(d["a"])(a,t);var e=Object(p["a"])(a);function a(){return Object(l["a"])(this,a),e.apply(this,arguments)}return Object(u["a"])(a,[{key:"onChange",value:function(t){this.$emit("change",t)}}]),a}(v["d"]));Object(h["a"])([Object(v["c"])({type:Number,default:0})],k.prototype,"active",void 0),Object(h["a"])([Object(v["c"])({type:Array,default:[]})],k.prototype,"options",void 0),k=Object(h["a"])([Object(v["a"])({})],k);var O=k,C=O,j=(a("0a77"),a("2877")),_=Object(j["a"])(C,b,y,!1,null,"f091d89a",null),x=_.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.list,(function(e){return a("div",{key:e.custId,staticClass:"van-clearfix"},[a("app-swipe-item",{staticClass:"mx-2 mt-2",attrs:{data:e,shadow:""},scopedSlots:t._u([{key:"opts",fn:function(){return[a("van-button",{staticClass:"del-btn",attrs:{square:"",type:"info",text:"编辑"},on:{click:function(a){return a.stopPropagation(),t.onEdit(e)}}}),a("van-button",{staticClass:"del-btn",attrs:{square:"",type:"danger",text:"删除"},on:{click:function(a){return a.stopPropagation(),t.onDelete(e)}}})]},proxy:!0}],null,!0)},[a("div",{staticClass:"white-block inner-block"},[a("div",{staticClass:"d-flex justify-space-between align-baseline"},[a("div",{staticClass:"font-14 font-bold"},[t._v(t._s(e.personId)+"/"+t._s(e.personName))]),a("div",{staticClass:"color-gray"},[t._v(t._s(e.position))])]),a("div",{staticClass:"d-flex justify-space-between align-baseline mt-4"},[a("div",{staticClass:"color-gray"},[t._v("进度")]),a("div",{},[t._v(t._s(e.content))])])]),a("div",{staticClass:"inner-block"},[a("div",[t._v("最新")]),a("div",{staticClass:"d-flex align-center mt-2"},[e.topicDetailVO.smallTagName?a("type-tag",{staticClass:"mr-2",attrs:{name:e.topicDetailVO.smallTagName}}):t._e(),a("div",{staticClass:"color-main"},[t._v(" "+t._s(e.topicDetailVO.visitTime.slice(0,e.topicDetailVO.visitTime.length-3))+" ")])],1),a("div",{staticClass:"mt-2"},[t._v(t._s(e.topicDetailVO.remark||"无"))])])])],1)})),0)},D=[],I=function(t){Object(d["a"])(a,t);var e=Object(p["a"])(a);function a(){return Object(l["a"])(this,a),e.apply(this,arguments)}return Object(u["a"])(a,[{key:"onEdit",value:function(t){this.$emit("edit",1,t)}},{key:"onDelete",value:function(t){this.$emit("delete",1,t)}}]),a}(v["d"]);Object(h["a"])([Object(v["c"])({type:Array,default:[]})],I.prototype,"list",void 0),I=Object(h["a"])([Object(v["a"])({components:{TypeTag:g["a"]}})],I);var S=I,L=S,V=Object(j["a"])(L,w,D,!1,null,null,null),R=V.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.list,(function(e){return a("div",{key:e.goodsId,staticClass:"van-clearfix"},[a("app-swipe-item",{staticClass:"mx-2 mt-2",attrs:{data:e},scopedSlots:t._u([{key:"opts",fn:function(){return[a("van-button",{staticClass:"del-btn",attrs:{square:"",type:"danger",text:"删除"},on:{click:function(a){return a.stopPropagation(),t.onDelete(e)}}})]},proxy:!0}],null,!0)},[a("div",{staticClass:"font-bold inner-block"},[t._v(" "+t._s(e.goodsId?e.goodsId+"/"+e.goodsName:"")+" ")]),a("div",{staticClass:"d-flex justify-space-between align-baseline pt-2 inner-block",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticClass:"color-gray"},[t._v("加入前6个月销售额")]),a("div",{staticClass:"font-bold"},[t._v(t._s(e.saleBefore||0))])]),a("div",{staticClass:"d-flex justify-space-between align-baseline pt-2 inner-block"},[a("div",{staticClass:"color-gray"},[t._v("本年累计销售额")]),a("div",{staticClass:"font-bold color-main-2"},[t._v(t._s(e.saleAllYear||0))])]),a("div",{staticClass:"d-flex justify-space-between align-baseline pt-2 inner-block",staticStyle:{"padding-top":"0"}},[a("div",{staticClass:"color-gray"},[t._v("加入之日（"+t._s(t.formatDate(e.creTime.split(" ")[0]))+"）起销售额")]),a("div",{staticClass:"font-bold color-main-2"},[t._v(t._s(e.saleNow||0))])])])],1)})),0)},T=[],A=function(t){Object(d["a"])(a,t);var e=Object(p["a"])(a);function a(){return Object(l["a"])(this,a),e.apply(this,arguments)}return Object(u["a"])(a,[{key:"formatDate",value:function(t){return"".concat(t.split("-")[0],"年").concat(t.split("-")[1],"月")}},{key:"onDelete",value:function(t){this.$emit("delete",3,t)}}]),a}(v["d"]);Object(h["a"])([Object(v["c"])({type:Array,default:[]})],A.prototype,"list",void 0),A=Object(h["a"])([Object(v["a"])({})],A);var P=A,$=P,E=Object(j["a"])($,N,T,!1,null,null,null),M=E.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.list,(function(e){return a("div",{key:e.targetId,staticClass:"van-clearfix"},[a("app-swipe-item",{staticClass:"mx-2 mt-2",attrs:{data:e,disabled:t.disabled},scopedSlots:t._u([{key:"opts",fn:function(){return[a("van-button",{staticClass:"del-btn",attrs:{square:"",type:"primary",text:"已完成"},on:{click:function(a){return a.stopPropagation(),t.onFinish(e)}}}),a("van-button",{staticClass:"del-btn",attrs:{square:"",type:"info",text:"编辑"},on:{click:function(a){return a.stopPropagation(),t.onEdit(e)}}}),a("van-button",{staticClass:"del-btn",attrs:{square:"",type:"danger",text:"删除"},on:{click:function(a){return a.stopPropagation(),t.onDelete(e)}}})]},proxy:!0}],null,!0)},[a("div",{staticClass:"d-flex justify-space-between align-baseline pt-2 inner-block"},[a("div",{staticClass:"color-gray"},[t._v("时间")]),a("div",{staticClass:"font-bold"},[t._v(t._s(e.targetTime))])]),a("div",{staticClass:"d-flex justify-space-between align-baseline inner-block",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticClass:"color-gray"},[t._v("状态")]),a("div",{class:["font-bold",0===+e.status?"color-never":1===+e.status?"color-normal":""]},[t._v(" "+t._s(0===+e.status?"待完成":1===+e.status?"已完成":"")+" ")])]),a("div",{staticClass:"color-gray inner-block"},[t._v("内容")]),a("div",{staticClass:"inner-block",staticStyle:{"padding-top":"0"}},[t._v(t._s(e.content))])])],1)})),0)},F=[],z=function(t){Object(d["a"])(a,t);var e=Object(p["a"])(a);function a(){return Object(l["a"])(this,a),e.apply(this,arguments)}return Object(u["a"])(a,[{key:"onFinish",value:function(t){this.$emit("finish",t)}},{key:"onEdit",value:function(t){this.$emit("edit",2,t)}},{key:"onDelete",value:function(t){this.$emit("delete",2,t)}}]),a}(v["d"]);Object(h["a"])([Object(v["c"])({type:Array,default:[]})],z.prototype,"list",void 0),Object(h["a"])([Object(v["c"])({type:Boolean,default:!1})],z.prototype,"disabled",void 0),z=Object(h["a"])([Object(v["a"])({})],z);var Y=z,q=Y,B=Object(j["a"])(q,G,F,!1,null,null,null),U=B.exports,H=a("74d2"),J=a("48b8"),K=Object(f["a"])("app"),W=function(t){Object(d["a"])(a,t);var e=Object(p["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.placeholder="请输入客户ID|名称",t.searchValue="",t.buttonShow=!1,t.fullPopShow=!1,t.nopermit=!1,t.showFullTitle=!1,t.titleOverflow=!1,t.custLoading=!1,t.custList=[],t.curCustom={},t.dataLoading=!1,t.dataSource={increaseData:{},increaseTableData:[]},t.active=0,t.typeActive="1",t.pageSize=10,t.page=1,t.loading=!1,t.finished=!1,t.refreshing=!1,t.error=!1,t.grList=[],t.targetList=[],t.goodsList=[],t.curDept={},t.dateRange="",t.showPickerDate=!1,t.showPickerDateEnd=!1,t.minDate=new Date(2010,0,1),t.maxDate=new Date,t.goods="",t.targetStatus=1,t.statusOptions=[{label:"待完成",value:1},{label:"已完成",value:2}],t}return Object(u["a"])(a,[{key:"formatBeforeSixMonth",value:function(t){var e=+t.split("-")[0],a=+t.split("-")[1];return+a<=6?(a+=6,e-=1):a-=6,"".concat(e,"年").concat(a,"月")}},{key:"formatBeforeMonth",value:function(t){var e=+t.split("-")[0],a=+t.split("-")[1];return 1===+a?(a=12,e-=1):a-=1,"".concat(e,"年").concat(a,"月")}},{key:"formatter",value:function(t,e){return"year"===t?"".concat(e,"年"):"month"===t?"".concat(e,"月"):e}},{key:"onCancelDate",value:function(){this.showPickerDate=!1,this.showPickerDateEnd=!1}},{key:"formatSearchDate",value:function(t){return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())}},{key:"onConfirmDate",value:function(t){var e=Object(o["a"])(t,2),a=e[0],s=e[1];this.showPickerDate=!1,this.dateRange="".concat(this.formatSearchDate(a)," 至 ").concat(this.formatSearchDate(s)),this.onRefresh()}},{key:"getCustList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.custList=[],""===e){t.next=7;break}return this.custLoading=!0,t.next=5,Object(H["D"])({cust:e});case 5:a=t.sent,a.success&&(this.custLoading=!1,this.custList=a.data);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onSelectCustomer",value:function(t){this.curCustom=t,this.searchValue=t.custId+"/"+t.custName,this.fullPopShow=!1,this.getData(t.custId)}},{key:"getData",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,s,i,n,c,r,o,l,u,d,p,h,v,f,m,g,b,y,k=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(H["v"])({custId:e});case 2:if(a=t.sent,s=a.data,i=a.success,!i){t.next=22;break}return this.nopermit=!1,n=s.communityVO,c=n.communtyId,r=n.communtyName,o=n.child,l=n.father,t.next=10,Object(H["I"])({custId:e,communtyId:c});case 10:u=t.sent,d=s.gridListVO,p=d.ccuId,h=d.custName,v=d.gridGradeId,f=d.gridGrade,m=d.typeList,g=d.pilotName,b=d.leaderVisitTarget,y=d.personVisitTarget,this.dataSource={ccuId:p,communtyId:c,communtyName:r,father:l,child:o||[],custId:s.gridListVO.custId,custName:h,gridGradeId:v,gridGrade:f,typeList:m,pilotName:g,leaderVisitTarget:b,personVisitTarget:y,deptList:s.sale,saler:s.sale[0].userName,increaseData:u.data||{saleMonth:"",saleYear:"",saleMonthRate:"",saleYearRate:"",saleLastMonthRate:"",unionMonth:"",unionYear:"",unionMonthRate:"",unionYearRate:"",unionLastMonthRate:""}},this.curDept=s.sale[0],this.active=0,this.typeActive="1",this.formatIncreaseData(),this.getDataInfo(),this.onRefresh(),this.$nextTick((function(){var t=k.$refs.custName;k.titleOverflow=t.scrollWidth>t.offsetWidth})),t.next=23;break;case 22:this.nopermit=!0;case 23:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"formatIncreaseData",value:function(){var t=this.dataSource.increaseData,e=t.saleMonth,a=t.saleYear,s=t.saleMonthRate,i=t.saleYearRate,n=t.saleLastMonthRate,c=t.unionMonth,r=t.unionYear,o=t.unionMonthRate,l=t.unionYearRate,u=t.unionLastMonthRate;this.dataSource.increaseTableData=[{type:"target",name:"单月初始增速",saleValue:e,unionValue:c},{name:"本月同比增速",targetSaleValue:e,targetUnionValue:c,saleValue:s,unionValue:o},{type:"target",name:"本月环比增速",targetSaleValue:e,targetUnionValue:c,saleValue:n,unionValue:u},{type:"target",name:"本年初始增速",saleValue:a,unionValue:r},{name:"本年实际增速",targetSaleValue:a,targetUnionValue:r,saleValue:i,unionValue:l}]}},{key:"getDataInfo",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.dataLoading=!0,this.dataLoading=!1;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.page=1,this.grList=[],this.targetList=[],this.goodsList=[],this.getDataList()}},{key:"getDataList",value:function(){1===+this.typeActive?this.getTableData():2===+this.typeActive?this.getTargetList():3===+this.typeActive&&this.getGoodsList()}},{key:"getTableData",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={ccuId:this.dataSource.ccuId,custId:this.curCustom.custId,saleId:this.curDept.userId,pageNum:this.page,pageSize:this.pageSize},t.next=4,Object(H["P"])(e);case 4:a=t.sent,this.loading=!1,this.refreshing=!1,a.success?(a.data.list.forEach((function(t){t.topicDetailVO||(t.topicDetailVO={smallTagName:"",visitTime:"",remark:""})})),this.grList=[].concat(Object(c["a"])(this.grList),Object(c["a"])(a.data.list)),this.page++,this.finished=!a.data.hasNextPage):this.error=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getTargetList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={ccuId:this.dataSource.ccuId,saleId:this.curDept.userId,pageNum:this.page,pageSize:this.pageSize,status:1===this.targetStatus?0:1},t.next=4,Object(H["U"])(e);case 4:a=t.sent,this.loading=!1,this.refreshing=!1,a.success?(a.data.list.forEach((function(t,e){t.targetText="目标".concat(e+1)})),this.targetList=[].concat(Object(c["a"])(this.targetList),Object(c["a"])(a.data.list)),this.page++,this.finished=!a.data.hasNextPage):this.error=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getGoodsList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={ccuId:this.dataSource.ccuId,deptId:this.curDept.deptId,saleId:this.curDept.userId,pageNum:this.page,pageSize:this.pageSize,goods:this.goods,start:this.dateRange.split("至")[0],end:this.dateRange.split("至")[1]},t.next=4,Object(H["E"])(e);case 4:a=t.sent,this.loading=!1,this.refreshing=!1,a.success?(this.goodsList=[].concat(Object(c["a"])(this.goodsList),Object(c["a"])(a.data.list)),this.page++,this.finished=!a.data.hasNextPage):this.error=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toKeyProjects",value:function(){this.$router.replace({name:"keyProjectsIndex",params:this.curCustom})}},{key:"handleClick",value:function(){var t=this;this.curDept=this.dataSource.deptList.filter((function(e){return+e.deptId===+t.active}))[0],this.dataSource.saler=this.curDept.userName,this.typeActive="1",this.getDataInfo(),this.onRefresh()}},{key:"changeStatus",value:function(t){this.targetStatus=t,this.onRefresh()}},{key:"toAddPage",value:function(){this.SET_HADDONEONDETAIL(!1),1===+this.typeActive?this.$router.push({name:"keyAddGR",params:{curDept:this.curDept,ccuId:this.dataSource.ccuId,custId:this.dataSource.custId}}):2===+this.typeActive?this.$router.push({name:"keyAddTarget",params:{curDept:this.curDept,ccuId:this.dataSource.ccuId}}):3===+this.typeActive&&this.$router.push({name:"keyAddGoods",params:{curDept:this.curDept,ccuId:this.dataSource.ccuId}})}},{key:"toEdit",value:function(t,e){this.SET_HADDONEONDETAIL(!1),1===t?this.$router.push({name:"keyAddGR",params:{item:Object(n["a"])({},e),curDept:this.curDept,ccuId:this.dataSource.ccuId,custId:this.dataSource.custId}}):2===t?this.$router.push({name:"keyAddTarget",params:{item:Object(n["a"])({},e),curDept:this.curDept,ccuId:this.dataSource.ccuId}}):3===t&&this.$router.push({name:"keyAddGoods",params:e})}},{key:"deleteItem",value:function(t,e){var a=this;this.$dialog.confirm({message:"确认删除？",confirmButtonColor:"#2271F5"}).then(Object(r["a"])(regeneratorRuntime.mark((function s(){var i,n,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(1!==t){s.next=7;break}return s.next=3,Object(H["j"])({cupId:e.cupId});case 3:i=s.sent,i.success&&(a.$toast.success(i.msg||"删除成功"),a.onRefresh()),s.next=19;break;case 7:if(2!==t){s.next=14;break}return s.next=10,Object(H["k"])({cutId:e.cutId});case 10:n=s.sent,n.success&&(a.$toast.success(n.msg||"删除成功"),a.onRefresh()),s.next=19;break;case 14:if(3!==t){s.next=19;break}return s.next=17,Object(H["i"])({cugId:e.cugId});case 17:c=s.sent,c.success&&(a.$toast.success(c.msg||"删除成功"),a.onRefresh());case 19:case"end":return s.stop()}}),s)}))))}},{key:"finishTarget",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={ccuId:this.dataSource.ccuId,cutId:e.cutId,content:e.content,status:1,targetTime:e.targetTime,deptId:this.curDept.deptId,deptName:this.curDept.deptName,saleId:this.curDept.userId,saleName:this.curDept.userName},t.next=3,Object(H["r"])(a);case 3:s=t.sent,s.success&&(this.$toast.success(s.msg||"修改成功"),this.onRefresh());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t;this.curCustom={},this.fullPopShow=!1,this.searchValue="";var e=Object(J["c"])((null===(t=this.userInfor)||void 0===t?void 0:t.resListTree)||"","工作跟进",[]);this.buttonShow=e.some((function(t){return"网格化管理"===t.pmsName}))}},{key:"activated",value:function(){this.$route.params.custId&&(this.curCustom=this.$route.params,this.fullPopShow=!this.curCustom.custId,this.searchValue=this.curCustom.custId+"/"+this.curCustom.custName,this.getData(this.curCustom.custId)),this.hadDoneOnDetail&&this.onRefresh()}}]),a}(v["d"]);Object(h["a"])([K.Mutation],W.prototype,"SET_HADDONEONDETAIL",void 0),Object(h["a"])([K.Getter],W.prototype,"hadDoneOnDetail",void 0),Object(h["a"])([K.Getter],W.prototype,"userInfor",void 0),W=Object(h["a"])([Object(v["a"])({components:{IncreaseTable:m["a"],TypeTag:g["a"],StatusTab:x,GrList:R,GoodsList:M,TargetList:U}})],W);var Q=W,X=Q,Z=(a("71e1"),Object(j["a"])(X,s,i,!1,null,"553a77dc",null));e["default"]=Z.exports},ee0e:function(t,e,a){"use strict";a("fc87")},fc87:function(t,e,a){}}]);