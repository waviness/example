(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40d2f4ee"],{"0bd4":function(e,t,a){"use strict";a("f1d5")},"109d":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-sticky",[a("div",{staticClass:"header pt-10 white-bg"},[a("div",{staticClass:"px-10"},[a("div",{class:["pa-10 common-filter",e.filterShow?"color-main-2":"",e.filterActive?"common-filter--active":""],on:{click:function(t){e.filterShow=!e.filterShow}}},[a("div",[e._v("条件筛选")]),a("van-icon",{attrs:{name:"arrow-"+(e.filterShow?"up":"down"),size:"16px"}})],1)]),a("div",{staticClass:"font-14 pa-10 fontWeight"},[a("span",{staticClass:"pr-1"},[e._v(e._s(e.entryObj.name))]),e._v("销售额波动（品种维度）"+e._s(e.$route.query.date)+" ")]),a("van-tabs",{attrs:{color:"#2271F5"},on:{click:e.tabTypeClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}},e._l(e.tabList,(function(e){return a("van-tab",{key:e,attrs:{title:e}})})),1)],1)]),a("div",{attrs:{id:"filterContainer"}},[e.zdGoodsLoading?e._e():a("div",{staticClass:"py-2 px-3 background-color-white"},[a("div",{staticClass:"numberWarp px-3 py-2 d-flex"},[a("ul",{staticClass:"flex-2"},[a("li",{staticClass:"color-gray-4"},[e._v(e._s(0===e.tabType?"重点":"全部")+"品种同比")]),a("li",{staticClass:"borderRight py-2"},[a("icon-Svg",{attrs:{size:"small",name:e.getName(e.zdGoodsObj.percent)}}),a("span",{staticClass:"font-18",class:e.getColor(e.zdGoodsObj.percent)},[e._v(e._s(e.zdGoodsObj.percent)+"%")])],1)]),a("ul",{staticClass:"flex-2 pl-2"},[a("li",{staticClass:"color-gray-4"},[e._v("同比(万元)")]),a("li",{staticClass:"font-18 borderRight py-2 pr-2",class:e.getColor(e.zdGoodsObj.increase)},[e._v(" "+e._s(e.zdGoodsObj.increase)+" ")])]),a("ul",{staticClass:"flex-3 pl-2"},[a("li",{staticClass:"color-gray-4"},[e._v("下降品种数/"+e._s(0===e.tabType?"重点":"全")+"品种数")]),a("li",{staticClass:"py-2"},[a("span",{staticClass:"color-red font-18"},[e._v(e._s(e.zdGoodsObj.number||0===e.zdGoodsObj.number?Math.abs(e.zdGoodsObj.number).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"--")+" ")]),a("span",{staticClass:"font-18"},[e._v("/")]),a("span",{staticClass:"font-14"},[e._v(e._s(e.zdGoodsObj.totalGoodsNum.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")))])])])])]),e.entryObj.id?a("van-pull-refresh",{staticClass:"pb-100",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{offset:20,finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e.loading||e.dataList.length?e._e():a("app-empty",{staticClass:"mt-6 white-bg"}),e._l(e.dataList,(function(t,o){return a("div",{key:o,staticClass:"goodsCard px-4 py-2",on:{click:function(a){return e.toDetail(t)}}},[a("div",{staticClass:"color-gray-5 fontWight-500 font-16 d-flex align-center justify-space-between"},[a("span",[e._v(e._s(t.goodsId)+"/"+e._s(t.goodsName))]),a("van-icon",{attrs:{name:"arrow",size:"16px"}})],1),a("div",{staticClass:"d-flex pt-2 justify-space-between"},[a("ul",{staticClass:"d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v(e._s(0===e.yearMounthValue?"月":"年")+"销售额(万元)")]),a("li",{staticClass:"numberValue fontWight-500 color-gray-5 font-16"},[e._v(e._s(t.saleAmount))])]),a("ul",{staticClass:"d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v(e._s(0===e.yearMounthValue?"月":"年")+"贡献率")]),a("li",{staticClass:"numberValue fontWight-500 font-16",class:e.getColor(t.contributePercent)},[e._v(" "+e._s(t.contributePercent>0?"+":"")+e._s(t.contributePercent)+"% ")])]),a("ul",{staticClass:"d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v(e._s(0===e.yearMounthValue?"月":"年")+"同比")]),a("li",{staticClass:"numberValue fontWight-500 font-16",class:e.getColor(t.onPercent)},[e._v(" "+e._s(t.onPercent>0?"+":"")+e._s(t.onPercent)+"% ")])]),0===e.yearMounthValue?a("ul",{staticClass:"d-flex flex-column"},[a("li",{staticClass:"titleValue color-gray-4 font-14"},[e._v("月环比")]),a("li",{staticClass:"numberValue fontWight-500 font-16",class:e.getColor(t.momPercent)},[e._v(" "+e._s(t.momPercent>0?"+":"")+e._s(t.momPercent)+"% ")])]):e._e()]),a("div",{staticClass:"line mt-4"})])}))],2)],1):e._e()],1),a("div",{staticClass:"commonOpButton-footer"},[a("ul",{staticClass:"d-flex"},[a("li",{staticClass:"flex-1",class:0===e.yearMounthValue?"active":"",on:{click:function(t){return e.yearMounthTab(0)}}},[e._v("月")]),a("li",{staticClass:"flex-1",class:1===e.yearMounthValue?"active":"",on:{click:function(t){return e.yearMounthTab(1)}}},[e._v("年")])])]),a("van-popup",{attrs:{position:"top","get-container":"#filterContainer"},model:{value:e.filterShow,callback:function(t){e.filterShow=t},expression:"filterShow"}},[a("customer-filter-pop",{key:"goodsPop",attrs:{keyValue:"goodsPop",orderType:"1-2",actionsList:[{name:"销售额正序",id:"1-1"},{name:"销售额倒序",id:"1-2"},{name:"同比正序",id:"2-1"},{name:"同比倒序",id:"2-2"}]},on:{filterSubmit:e.filterSubmit,reset:e.filterReset}})],1)],1)},i=[],s=a("5530"),r=a("d4ec"),n=a("bee2"),l=a("262e"),c=a("2caf"),d=(a("ac1f"),a("5319"),a("1276"),a("d81d"),a("99af"),a("b0c0"),a("9ab4")),u=a("1b40"),f=a("437a"),b=a("53ae"),p=a("6b49"),y=a("2279"),h=a("5b92"),v=a("4bb5"),m=Object(v["a"])("cdp"),g=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.zdGoodsLoading=!1,e.zdGoodsObj={},e.filterObj={customerKeyword:"",orderType:"1-2",orderTypeName:"销售额倒序"},e.entryObj={},e.tabList=["重点品种","全品种"],e.yearMounthValue=1,e}return Object(n["a"])(a,[{key:"getColor",get:function(){return function(e){if(e){var t=String(e).replace(",","");return+t>0?"color-normal":"color-never"}}}},{key:"getName",get:function(){return function(e){if(e){var t=e.replace(",","");return t>=0?"ytcrm-greenArrow":"ytcrm-redArrow"}}}},{key:"tabTypeClick",value:function(e){this.tabType=e,this._deptTotalStat(),this.onRefresh()}},{key:"yearMounthTab",value:function(e){this.yearMounthValue=e,this.onRefresh()}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.dataList=[],this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,this._getDeptFocusGoodsDetailList()}},{key:"filterSubmit",value:function(e){this.filterObj=Object(s["a"])({},e),this.filterShow=!1,this.onRefresh()}},{key:"filterReset",value:function(){this.filterObj.customerKeyword="",this.filterObj.orderTypeName="销售额倒序",this.filterObj.orderType="1-2",this.filterShow=!1,this.onRefresh()}},{key:"_getDeptFocusGoodsDetailList",value:function(){var e,t,a=this,o={type:this.tabType,date:this.entryObj.date,deptId:this.entryObj.id,flag:this.yearMounthValue,orderField:(null===(e=this.filterObj.orderType)||void 0===e?void 0:e.split("-")[0])||1,orderRule:(null===(t=this.filterObj.orderType)||void 0===t?void 0:t.split("-")[1])||1,goodsKeyword:"",pageNum:this.page,pageSize:8};Object(y["h"])(o).then((function(e){var t=e.data.list.map((function(e){return{goodsId:e.goodsId,goodsName:e.goodsName,contributePercent:Object(h["d"])(e.contributePercent,2),momPercent:Object(h["d"])(e.momPercent,2),onPercent:Object(h["d"])(e.onPercent,2),saleAmount:Object(h["d"])(e.saleAmount,1)}}));a.dataList=a.dataList.concat(t),e.data.hasNextPage?a.page++:a.finished=!0,a.loading=!1}))}},{key:"toDetail",value:function(e){var t={goodsId:e.goodsId,goodsName:e.goodsName,id:this.entryObj.id,name:this.entryObj.name};this.$router.push({name:"salesLineGoodsSalesPage",query:t})}},{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"salesLineHighRise0"!==t.name&&"salesLineHighRise0Inner"!==t.name&&"salesLineHighRise1"!==t.name&&"salesLineHighRise1Inner"!==t.name&&"salesLineMiddleRise2"!==t.name&&"salesLineMiddleRise2Inner"!==t.name&&"salesLineMiddleRise3"!==t.name&&"salesLineMiddleRise3Inner"!==t.name&&"salesLineMiddleRise4"!==t.name&&"salesLineMiddleRise4Inner"!==t.name||(e.tab=0,e.entryObj={level:e.$route.query.level,id:e.$route.query.id,name:e.$route.query.name,date:e.$route.query.date},e.onRefresh(),e._deptTotalStat())}))}},{key:"_deptTotalStat",value:function(){var e=this;this.zdGoodsLoading=!0,Object(y["b"])({date:this.entryObj.date,deptId:this.entryObj.id,type:this.tabType}).then((function(t){e.zdGoodsLoading=!1,e.zdGoodsObj={number:t.data.increaseSaleGoodsNum,totalGoodsNum:t.data.totalGoodsNum,increase:Object(h["d"])(t.data.totalNetIncrease,1),percent:Object(h["d"])(t.data.totalYearOnPercent,2)}}))}},{key:"activated",value:function(){this.entryObj={level:this.$route.query.level,id:this.$route.query.id,name:this.$route.query.name,date:this.$route.query.date}}},{key:"created",value:function(){this.filterActive=!0,this.entryObj={level:this.$route.query.level,id:this.$route.query.id,name:this.$route.query.name,date:this.$route.query.date},this._deptTotalStat()}}]),a}(Object(u["b"])(f["a"],b["a"]));Object(d["a"])([m.Mutation],g.prototype,"SET_ZDDEPTLIST",void 0),g=Object(d["a"])([Object(u["a"])({components:{customerFilterPop:p["a"]}})],g);var O=g,j=O,_=(a("0bd4"),a("2877")),T=Object(_["a"])(j,o,i,!1,null,"441e1532",null);t["default"]=T.exports},2202:function(e,t,a){"use strict";a("2adc")},"2adc":function(e,t,a){},"437a":function(e,t,a){"use strict";var o=a("bee2"),i=a("d4ec"),s=a("262e"),r=a("2caf"),n=a("9ab4"),l=a("1b40"),c=a("4bb5"),d=Object(c["a"])("app"),u=Object(c["a"])("crm");l["a"].registerHooks(["beforeRouteEnter"]);var f=function(e){Object(s["a"])(a,e);var t=Object(r["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.filterShow=!1,e.filterActive=!1,e.tabType=0,e}return Object(o["a"])(a)}(l["d"]);Object(n["a"])([d.Getter],f.prototype,"userInfor",void 0),Object(n["a"])([u.Mutation],f.prototype,"SET_DETAILOBJ",void 0),Object(n["a"])([d.Mutation],f.prototype,"SET_QUERYPARAMA",void 0),Object(n["a"])([d.Mutation],f.prototype,"SET_HADDONEONDETAIL",void 0),Object(n["a"])([d.Getter],f.prototype,"hadDoneOnDetail",void 0),f=Object(n["a"])([Object(l["a"])({})],f),t["a"]=f},"53ae":function(e,t,a){"use strict";var o=a("d4ec"),i=a("bee2"),s=a("262e"),r=a("2caf"),n=(a("b0c0"),a("9ab4")),l=a("1b40");l["a"].registerHooks(["beforeRouteEnter"]);var c=function(e){Object(s["a"])(a,e);var t=Object(r["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(i["a"])(a,[{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),a}(l["d"]);c=Object(n["a"])([Object(l["a"])({})],c),t["a"]=c},"6b49":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-field",{attrs:{clearable:"",label:"goodsPop"===e.keyValue?"品种ID/名称":"客户ID/名称","input-align":"right",placeholder:"点击输入"+("goodsPop"===e.keyValue?"品种ID/名称":"客户ID/名称")},model:{value:e.filterObj.customerKeyword,callback:function(t){e.$set(e.filterObj,"customerKeyword",t)},expression:"filterObj.customerKeyword"}}),a("van-field",{attrs:{label:"排序类型","input-align":"right",placeholder:"点击选择排序类型",readonly:""},on:{click:function(t){e.orderTypeFlag=!0}},model:{value:e.filterObj.orderTypeName,callback:function(t){e.$set(e.filterObj,"orderTypeName",t)},expression:"filterObj.orderTypeName"}}),a("div",{staticClass:"dropdown-opts"},[a("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",size:"small",block:"",round:""},on:{click:e.reset}},[e._v("重置")]),a("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"info",size:"small",block:"",round:"",color:"#2271F5"},on:{click:e.filterSubmit}},[e._v("确认")])],1),a("van-action-sheet",{attrs:{actions:e.actionsList,"cancel-text":"取消","get-container":"body","close-on-click-action":""},on:{select:e.orderTypeSelect},model:{value:e.orderTypeFlag,callback:function(t){e.orderTypeFlag=t},expression:"orderTypeFlag"}})],1)},i=[],s=a("d4ec"),r=a("bee2"),n=a("262e"),l=a("2caf"),c=(a("b0c0"),a("9ab4")),d=a("1b40"),u=function(e){Object(n["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.orderTypeFlag=!1,e.filterObj={customerKeyword:"",orderType:"",orderTypeName:"销售额倒序"},e}return Object(r["a"])(a,[{key:"filterSubmit",value:function(){this.$emit("filterSubmit",this.filterObj)}},{key:"reset",value:function(){this.$emit("reset"),this.filterObj={customerKeyword:"",orderType:this.orderType,orderTypeName:"销售额倒序"}}},{key:"orderTypeSelect",value:function(e){this.filterObj.orderType=e.id,this.filterObj.orderTypeName=e.name}},{key:"mounted",value:function(){this.filterObj.orderType=this.orderType}}]),a}(d["d"]);Object(c["a"])([Object(d["c"])()],u.prototype,"actionsList",void 0),Object(c["a"])([Object(d["c"])()],u.prototype,"orderType",void 0),Object(c["a"])([Object(d["c"])()],u.prototype,"keyValue",void 0),u=Object(c["a"])([Object(d["a"])({})],u);var f=u,b=f,p=(a("2202"),a("2877")),y=Object(p["a"])(b,o,i,!1,null,"2bb2fe1a",null);t["a"]=y.exports},f1d5:function(e,t,a){}}]);