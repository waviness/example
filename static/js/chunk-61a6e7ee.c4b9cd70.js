(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61a6e7ee"],{"0b86":function(e,t,a){"use strict";a("a221")},"1f5b":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-list"},[a("div",{staticClass:"message-list__info"},e._l(e.list,(function(t,s){return a("div",{key:s,staticClass:"message-list-item"},[a("div",{staticClass:"message-list-item__time"},[e._v(e._s(t.time))]),a("div",{staticClass:"message-list-item__content"},[e._v(e._s(t.content))])])})),0),e.badge?a("div",{staticClass:"message-list__badge"},[e._v(e._s(e.badge))]):e._e()])},i=[],n=a("bee2"),r=a("d4ec"),c=a("262e"),o=a("2caf"),l=(a("a9e3"),a("9ab4")),d=a("1b40"),u=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(n["a"])(a)}(d["d"]);Object(l["a"])([Object(d["c"])({type:Number,default:0})],u.prototype,"badge",void 0),Object(l["a"])([Object(d["c"])({type:Array,default:[]})],u.prototype,"list",void 0),u=Object(l["a"])([Object(d["a"])({})],u);var f=u,v=f,h=(a("450d"),a("2877")),b=Object(h["a"])(v,s,i,!1,null,"28ea73a4",null);t["a"]=b.exports},2957:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-card"},[s("div",{staticClass:"user-card-left"},[s("img",{staticClass:"user-card-left__img",attrs:{src:e.user.headerImg}}),s("div",{staticClass:"user-card-left__info"},[s("div",[e._v(e._s(e.user.userName))]),s("div",[e._v(e._s(e.user.depName))])])]),s("div",{staticClass:"user-card-right"},[s("div",[s("div",{staticClass:"user-card-right__name"},[e._v(e._s(e.locationCity||"- - - -"))]),s("div",{staticClass:"user-card-right__desc"},[e._v(" "+e._s(e.nowWeather.weather||"--")+"  "+e._s(e.nowWeather.temperature||"？")+"℃ ")])])]),s("img",{class:e.bigBg?"user-card__bigbg":"user-card__bg",attrs:{src:a("c955")("./"+e.bgIcon+".webp")}})])},i=[],n=a("d4ec"),r=a("bee2"),c=a("262e"),o=a("2caf"),l=a("9ab4"),d=a("1b40"),u=a("4bb5"),f=Object(u["a"])("app"),v=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.user={},e}return Object(r["a"])(a,[{key:"toUsercenter",value:function(){this.$router.push({name:"Usercenter"})}},{key:"mounted",value:function(){var e=this.$root,t=this.userInfor,a=t.userId,s=t.userName,i=t.depName,n=t.headImgUrl;this.user={userId:a,userName:s,depName:i,headerImg:e.domainUrl+n}}}]),a}(d["d"]);Object(l["a"])([f.Getter],v.prototype,"userInfor",void 0),Object(l["a"])([Object(d["c"])({type:String,default:""})],v.prototype,"bgIcon",void 0),Object(l["a"])([Object(d["c"])({type:String,default:""})],v.prototype,"locationCity",void 0),Object(l["a"])([Object(d["c"])({default:{}})],v.prototype,"nowWeather",void 0),Object(l["a"])([Object(d["c"])({type:Boolean,default:!1})],v.prototype,"bigBg",void 0),v=Object(l["a"])([Object(d["a"])({})],v);var h=v,b=h,p=(a("0b86"),a("2877")),m=Object(p["a"])(b,s,i,!1,null,"5ee1bd70",null);t["a"]=m.exports},"2efb":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-popup",{style:{height:"95%"},attrs:{closeable:"",position:"bottom",round:""},on:{close:e.adressCancel},model:{value:e.innShowAdressPicker,callback:function(t){e.innShowAdressPicker=t},expression:"innShowAdressPicker"}},[e.innShowAdressPicker?a("div",{staticClass:"warp"},[a("div",{staticClass:"font-16 fontWeight-500 textAlignC pt-4 pb-2"},[e._v(e._s(e.clickOnly?"立即打卡":"打卡信息选择"))]),a("van-tabs",{attrs:{color:"#2271F5"},on:{change:e.addressActiveChange},model:{value:e.adressActive,callback:function(t){e.adressActive=t},expression:"adressActive"}},[a("van-tab",{staticClass:"fontWeight-500",attrs:{name:2,title:"直接打卡"}}),a("van-tab",{staticClass:"fontWeight-500",attrs:{name:1,title:e.clickOnly?"打卡记录":"关联已有"}})],1),2===e.adressActive?a("van-search",{attrs:{placeholder:"搜索","input-align":"center"},on:{input:e.onSearch},model:{value:e.addressValue,callback:function(t){e.addressValue=t},expression:"addressValue"}}):a("van-search",{attrs:{placeholder:"搜索","input-align":"center"},on:{input:e.onRefresh},model:{value:e.addressValue,callback:function(t){e.addressValue=t},expression:"addressValue"}}),1===+e.adressActive&&e.visitDate?a("span",{staticClass:"px-3"},[e._v("拜访时间："+e._s(e.visitDate)),a("span",{staticClass:"color-red"},[e._v("(仅能关联拜访日期当日的打卡信息)")])]):e._e(),1===+e.adressActive?a("div",{staticClass:"address-popupWarp overflow-auto"},[a("van-pull-refresh",{staticClass:"pt-10",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{staticClass:"px-2",attrs:{offset:20,error:e.error,finished:e.finished,"finished-text":"没有更多了"},on:{"update:error":function(t){e.error=t},load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.dataList,(function(t,s){return a("van-cell",{key:s,attrs:{clickable:""},on:{click:function(a){return e.adressOnConfirm(t)}}},[a("span",{style:e.detailClock===t.cciId?"color: #2271f5":""},[e._v(e._s(t.cciId)+"/"+e._s(t.address))]),a("span",{staticClass:"ml-1",staticStyle:{color:"#777","font-size":"12px"}},[e._v("("+e._s(t.credate)+")")])])})),1)],1)],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:2===+e.adressActive,expression:"+adressActive === 2"}],staticClass:"address-popupWarp-2"},[a("div",{staticStyle:{height:"40%"},attrs:{id:"container"}}),a("van-radio-group",{staticClass:"overflow-auto",model:{value:e.nowChooseId,callback:function(t){e.nowChooseId=t},expression:"nowChooseId"}},[a("van-cell-group",e._l(e.locationList,(function(t){return a("van-cell",{key:t.id,ref:"address"+t.id,refInFor:!0,attrs:{name:t.id,clickable:""},on:{click:function(a){return e.nowChooseClick(t)}},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticClass:"fontWeight"},[e._v(e._s(t.name))]),a("br"),a("span",{staticStyle:{"font-size":"12px",color:"#bbb"}},[e._v(" -- "+e._s(t.pname+t.cityname+t.adname+t.address)+" ")])]},proxy:!0},{key:"right-icon",fn:function(){return[a("van-radio",{attrs:{"checked-color":"#2271F5",name:t.id}})]},proxy:!0}],null,!0)})})),1)],1),a("div",{staticClass:"commonButton-footer d-flex justify-center"},[a("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:e.adressCancel}},[e._v("取消")]),a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:e.addressChoose}},[e._v("确定")])],1)],1)],1):e._e()])},i=[],n=a("1da1"),r=a("d4ec"),c=a("bee2"),o=a("262e"),l=a("2caf"),d=(a("fb6a"),a("99af"),a("96cf"),a("9ab4")),u=a("1b40"),f=a("53ae"),v=a("e906"),h=a("8e54"),b=function(e){Object(o["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.innShowAdressPicker=!1,e.adressActive=1,e.clockInList=[],e}return Object(c["a"])(a,[{key:"addressActiveChange",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:2===+t&&(this.ToastLoading&&this.ToastLoading.clear(),this.ToastLoading=this.$toast.loading({message:"定位中...",duration:0,forbidClick:!0}),this.wxRegister("click"));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"adressOnConfirm",value:function(e){this.$emit("adressOnConfirm",e)}},{key:"nowChooseClick",value:function(e){this.nowChooseObj=e,this.nowChooseId=e.id,this.markerClick(e)}},{key:"addressChoose",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sureClick();case 2:this.$emit("addressChoose",{addressID:this.addressID,addressDetail:this.addressDetail});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"adressCancel",value:function(){this.adressActive=1,this.$emit("adressCancel")}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.dataList=[],this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,this._getCrmClockIn()}},{key:"_getCrmClockIn",value:function(){var e=this,t={detailFlag:!1,startTime:this.visitDate?this.visitDate.slice(0,10)+" 00:00:00":"",endTime:this.visitDate?this.visitDate.slice(0,10)+" 23:59:59":"",pageNum:this.page,pageSize:20,keyword:this.addressValue,type:1};Object(v["c"])(t).then((function(t){e.loading=!1,e.refreshing=!1,"200"===t.code?(e.dataList=e.dataList.concat(t.data.list),e.page++,e.finished=!t.data.hasNextPage,e.total=t.data.total):e.error=!0})).catch((function(){e.error=!0}))}},{key:"mounted",value:function(){this.innShowAdressPicker=this.showAdressPicker,this.clockInList=[],this.clickOnly&&(this.adressActive=2),2===+this.adressActive&&(this.ToastLoading&&this.ToastLoading.clear(),this.ToastLoading=this.$toast.loading({message:"定位中...",duration:0,forbidClick:!0}),this.wxRegister("click"))}}]),a}(Object(u["b"])(h["a"],f["a"]));Object(d["a"])([Object(u["c"])()],b.prototype,"showAdressPicker",void 0),Object(d["a"])([Object(u["c"])()],b.prototype,"detailClock",void 0),Object(d["a"])([Object(u["c"])()],b.prototype,"clickOnly",void 0),Object(d["a"])([Object(u["c"])()],b.prototype,"visitDate",void 0),b=Object(d["a"])([Object(u["a"])({})],b);var p=b,m=p,g=(a("cf64"),a("2877")),_=Object(g["a"])(m,s,i,!1,null,"a4df02a2",null);t["a"]=_.exports},"450d":function(e,t,a){"use strict";a("6047")},"53ae":function(e,t,a){"use strict";var s=a("d4ec"),i=a("bee2"),n=a("262e"),r=a("2caf"),c=(a("b0c0"),a("9ab4")),o=a("1b40");o["a"].registerHooks(["beforeRouteEnter"]);var l=function(e){Object(n["a"])(a,e);var t=Object(r["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(i["a"])(a,[{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),a}(o["d"]);l=Object(c["a"])([Object(o["a"])({})],l),t["a"]=l},6047:function(e,t,a){},"6b4b":function(e,t,a){"use strict";a("9bdc")},"72c0":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-list"},[a("div",{staticClass:"font-15"},[e._v(e._s(e.title))]),a("div",{staticClass:"menu-list__inner"},e._l(e.menuList,(function(t,s){return a("div",{key:s,staticClass:"menu-list__item",on:{click:function(a){return e.toLink(t.path)}}},[t.ing?a("van-badge",{attrs:{content:t.ing,max:"99"}},[a("app-icon",{attrs:{name:t.icon}}),a("div",{staticClass:"menu-list__name"},[e._v(e._s(t.pmsName))])],1):a("div",[a("app-icon",{attrs:{name:t.icon}}),a("div",{staticClass:"menu-list__name"},[e._v(e._s(t.pmsName))])],1)],1)})),0)])},i=[],n=a("d4ec"),r=a("bee2"),c=a("262e"),o=a("2caf"),l=a("9ab4"),d=a("1b40"),u=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,[{key:"toLink",value:function(e){this.$router.push({path:e})}}]),a}(d["d"]);Object(l["a"])([Object(d["c"])({type:String,default:""})],u.prototype,"title",void 0),Object(l["a"])([Object(d["c"])({type:Array,default:[]})],u.prototype,"menuList",void 0),u=Object(l["a"])([Object(d["a"])({})],u);var f=u,v=f,h=(a("6b4b"),a("2877")),b=Object(h["a"])(v,s,i,!1,null,"ff588cba",null);t["a"]=b.exports},"9bdc":function(e,t,a){},"9ca7":function(e,t,a){},a221:function(e,t,a){},cf64:function(e,t,a){"use strict";a("9ca7")}}]);