(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a5ae966"],{1756:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return p}));var r=n("1da1"),a=(n("96cf"),n("b32d")),i=n("90ae"),l=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/GoodsRecover/getGspRecover",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/GoodsRecover/dealGspRecover",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/GoodsRecover/getCustomList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].formDataPost(i["c"],"/api/GoodsRecover/getGspRecoverDtlByCgrId",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post(i["c"],"/api/GoodsQualityRecheck/getQualityRecheckList",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].get(i["c"],"/api/GoodsQualityRecheck/getQualityRecheckDetail",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"5a4f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail"},[n("div",{staticClass:"header pt-10 pl-10 pb-10"},[e._v(" 质量召回详情 "),n("div",{staticClass:"right fontWeight-500 fontWeight"},[e._v("#"+e._s(e.innerDetailObj.recDtlId))])]),e.innerDetailObj.recDtlId?n("van-form",{staticClass:"pb-2"},[n("van-field",{attrs:{label:"创建时间",type:"textarea",rows:"1",autosize:"",value:e.innerDetailObj.creDate,"input-align":"right",readonly:""}}),n("van-field",{attrs:{label:"单位信息",type:"textarea",rows:"1",autosize:"",value:e.innerDetailObj.customId+"/"+e.innerDetailObj.customName,"input-align":"right",readonly:""}}),n("van-field",{attrs:{label:"核算单元",type:"textarea",rows:"1",autosize:"",value:e.innerDetailObj.entryId+"/"+e.innerDetailObj.entryName,"input-align":"right",readonly:""}}),n("van-field",{attrs:{label:"货品信息",type:"textarea",rows:"1",autosize:"",value:e.innerDetailObj.goodsId+"/"+e.innerDetailObj.goodsName,"input-align":"right",readonly:""}}),n("van-field",{attrs:{label:"规格",type:"textarea",rows:"1",autosize:"",value:e.innerDetailObj.goodsType+"/"+e.innerDetailObj.goodsUnit,"input-align":"right",readonly:""}}),n("van-field",{attrs:{label:"厂家",type:"textarea",rows:"1",autosize:"",value:""+e.innerDetailObj.factoryName,"input-align":"right",readonly:""}}),n("van-field",{attrs:{label:"召回级别",type:"textarea",rows:"1",autosize:"","input-align":"right",readonly:""},scopedSlots:e._u([{key:"input",fn:function(){return[n("span",{staticClass:"color-main"},[e._v(e._s(3===e.innerDetailObj.recLevel?"三级":2===e.innerDetailObj.recLevel?"二级":1===e.innerDetailObj.recLevel?"一级":""))])]},proxy:!0}],null,!1,2805243694)}),n("van-field",{attrs:{label:"召回截至日期",type:"textarea",rows:"1",autosize:"",value:e.innerDetailObj.deadline,"input-align":"right",readonly:""}}),n("van-field",{attrs:{label:"剩余时间","input-align":"right",readonly:""},scopedSlots:e._u([{key:"input",fn:function(){return[e.innerDetailObj.toDeadlineDays?n("div",[e.innerDetailObj.toDeadlineDays<0?n("van-tag",{attrs:{color:"rgba(227, 77, 89, 0.1)","text-color":"#E34D59"}},[e._v("已过期"+e._s(Math.abs(e.innerDetailObj.toDeadlineDays))+"天")]):n("van-tag",{attrs:{color:"rgba(0, 168, 112, 0.1)","text-color":"#00A870"}},[e._v("距到期还剩"+e._s(Math.abs(e.innerDetailObj.toDeadlineDays))+"天")])],1):e._e()]},proxy:!0}],null,!1,4019112051)}),n("van-field",{staticClass:"flex-column",attrs:{type:"textarea",autosize:"",label:"批号",readonly:""},scopedSlots:e._u([{key:"input",fn:function(){return e._l(e.innerDetailObj.lotNoStr.split(","),(function(t,r){return n("van-tag",{key:r,staticClass:"mt-1 mr-1 mb-1",attrs:{color:"rgba(34, 113, 245, 0.1)","text-color":"#2271F5"}},[e._v(e._s(t))])}))},proxy:!0}],null,!1,2877193570)}),1===+e.innerDetailObj.selectType&&e.innerDetailObj.buttonShow||e.$route.query.cgrId&&0!==e.innerDetailObj.expectQty&&!e.innerDetailObj.expectQty?n("van-field",{attrs:{required:"",rules:[{required:!0}],label:"拟召回数量","input-align":"right",placeholder:"请输入拟召回数量"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}):e._e(),2===+e.innerDetailObj.selectType&&e.innerDetailObj.buttonShow||e.$route.query.cgrId&&(0===e.innerDetailObj.expectQty||e.innerDetailObj.expectQty)?n("van-field",{attrs:{rules:[{required:!0}],label:"拟召回数量","input-align":"right",placeholder:"请输入拟召回数量"},model:{value:e.innerDetailObj.expectQty,callback:function(t){e.$set(e.innerDetailObj,"expectQty",t)},expression:"innerDetailObj.expectQty"}}):e._e(),e.innerDetailObj.buttonShow||e.$route.query.cgrId?n("van-field",{staticClass:"flex-column",attrs:{label:"附件上传",readonly:""},scopedSlots:e._u([{key:"input",fn:function(){return[n("van-uploader",{staticClass:"mt-3",attrs:{multiple:""},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})]},proxy:!0}],null,!1,1128166605)}):e._e(),2===+e.innerDetailObj.selectType||e.$route.query.cgrId&&(0===e.innerDetailObj.expectQty||e.innerDetailObj.expectQty)?n("van-field",{staticClass:"flex-column",attrs:{label:"已上传附件",readonly:""},scopedSlots:e._u([{key:"input",fn:function(){return[e.innerDetailObj.imageUrlList&&e.innerDetailObj.imageUrlList.length?n("div",{staticClass:"image"},[n("van-uploader",{attrs:{deletable:!1},model:{value:e.innerDetailObj.imageUrlList,callback:function(t){e.$set(e.innerDetailObj,"imageUrlList",t)},expression:"innerDetailObj.imageUrlList"}})],1):n("app-empty",{staticClass:"full-width",attrs:{description:"暂无图片"}})]},proxy:!0}],null,!1,3173870562)}):e._e(),e.innerDetailObj.buttonShow||e.$route.query.cgrId?n("div",{staticClass:"commonButton-footer d-flex justify-center"},[e.$route.query.cgrId?e._e():n("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:e.cancelClick}},[e._v("取消")]),n("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:e.afterRead}},[e._v("提交")])],1):e._e()],1):e._e()],1)},a=[],i=n("d4ec"),l=n("bee2"),s=n("262e"),o=n("2caf"),u=(n("d81d"),n("ac1f"),n("1276"),n("b0c0"),n("9ab4")),c=n("1b40"),p=n("1756"),d=n("4bb5"),b=Object(d["a"])("crm"),f=function(e){Object(s["a"])(n,e);var t=Object(o["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.number="",e.fileList=[],e.innerDetailObj={},e}return Object(l["a"])(n,[{key:"cancelClick",value:function(){this.$router.go(-1)}},{key:"_getGspRecoverDtlByCgrId",value:function(e){var t=this;Object(p["d"])(e).then((function(e){t.innerDetailObj=e.data,t.innerDetailObj.selectType=t.detailObj.selectType,t.innerDetailObj.detailIndex=t.detailObj.detailIndex,t.innerDetailObj.buttonShow=t.detailObj.buttonShow,t.innerDetailObj.imageUrlList=t.innerDetailObj.imageUrlList&&t.innerDetailObj.imageUrlList.map((function(e){return{url:t.$root.domainUrl+e}}))}))}},{key:"afterRead",value:function(){var e=this,t=new FormData;if(0===this.fileList.length&&this.$toast.fail("请选择要上传的图片"),1!==+this.detailObj.selectType||this.number&&0!==this.number){for(var n=[],r=0;r<this.fileList.length;r++){var a=this.fileList[r];a.status="uploading",a.message="上传中...";var i=a.file.name.split("."),l=new File([a.file],"index"+r+"."+i[i.length-1]);n.push(l),t.append("receiptImageList",l)}t.append("cgrId",this.detailObj.cgrId),t.append("recDocId",this.detailObj.recDocId),t.append("recDtlId",this.detailObj.recDtlId),2===+this.detailObj.selectType?t.append("expectQty",this.detailObj.expectQty):t.append("expectQty",this.number),Object(p["a"])(t).then((function(t){if("200"===t.code){for(var n=0;n<e.fileList.length;n++){var r=e.fileList[n];r.status="success",r.message="上传成功"}e.$toast.success("上传成功"),e.SET_DATACHANGEOP("success"),e.$router.go(-1)}else for(var a=0;a<e.fileList.length;a++){var i=e.fileList[a];i.status="failed",i.message="上传失败"}}))}else this.$toast.fail("请输入拟召回数量")}},{key:"mounted",value:function(){this._getGspRecoverDtlByCgrId({cgrId:this.$route.query.cgrId?this.$route.query.cgrId:this.detailObj.cgrId})}}]),n}(c["d"]);Object(u["a"])([b.Getter],f.prototype,"detailObj",void 0),Object(u["a"])([b.Mutation],f.prototype,"SET_DATACHANGEOP",void 0),f=Object(u["a"])([Object(c["a"])({})],f);var v=f,g=v,y=(n("96fd"),n("2877")),h=Object(y["a"])(g,r,a,!1,null,"305f6451",null);t["default"]=h.exports},"96fd":function(e,t,n){"use strict";n("fd85")},fd85:function(e,t,n){}}]);