(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b8b7b5e"],{15331:function(e,t,a){"use strict";a("8275")},"48be":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-100 background-color-white"},[a("van-sticky",[a("div",{staticClass:"header d-flex align-center"},[a("div",{staticClass:"flex-1 d-flex flex-column"},[a("div",{staticClass:"dept-name",staticStyle:{"font-family":"'HarmonyOS Sans SC Black'"}},[e._v("创新品种")]),a("span",{staticClass:"font-12 color-gray-5"},[e._v(e._s(e.entryObj.name))])]),a("div",{on:{click:e.calendarClick}},[a("span",{staticClass:"time"},[e._v(e._s(e.$dayjs(e.csjNowTime).format("YYYY-MM-DD")))]),a("van-icon",{staticClass:"pl-1",attrs:{size:"14px",name:"arrow-down"}})],1)])]),a("van-calendar",{attrs:{"default-date":e.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:e.selectCalendar},model:{value:e.calendarShow,callback:function(t){e.calendarShow=t},expression:"calendarShow"}}),a("div",{staticClass:"px-2 pb-100"},[e.loading?a("div",{staticClass:"d-flex justify-center pa-8"},[a("van-loading",{attrs:{type:"spinner",color:"#3561F2"}})],1):e._e(),a("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("div",{staticClass:"year-content"},e._l(e.cardData,(function(t,n){return a("div",{key:n,staticClass:"goods-satisfaction",on:{click:function(a){return e.jumpToInnovationDetail(t.year)}}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"unit-name"},[e._v(e._s(t.year)+"年新药")]),a("van-icon",{staticClass:"right",attrs:{name:"arrow",size:"16px"}})],1),a("div",{staticClass:"card-body"},[a("div",{staticClass:"sale-num"},[e._v(e._s(t.sales)+"万元")]),a("div",{staticClass:"right-content"},[a("i",{class:t.growthRate>0?"rank-up-icon":"rank-down-icon"}),a("span",{staticClass:"change-value",class:t.growthRate>0?"positive":"negative"},[e._v(" "+e._s(Math.abs(t.growthRate))+"% ")])])]),a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-inner",style:{width:t.progress+"%"}})])])])})),0)])],1)],1)},i=[],s=a("5530"),r=a("2909"),c=a("1da1"),o=a("d4ec"),l=a("bee2"),d=a("262e"),u=a("2caf"),h=(a("96cf"),a("d81d"),a("4e82"),a("b680"),a("b0c0"),a("9ab4")),f=a("1b40"),m=a("2279"),v=a("53ae"),p=a("4bb5"),b=a("5b92"),y=Object(p["a"])("app"),j=function(e){Object(d["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.entryObj={},e.searchValue="",e.dateTime="",e.calendarShow=!1,e.cardData=[],e}return Object(l["a"])(a,[{key:"created",value:function(){this.entryObj=this.$route.query,this.dateTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")}},{key:"activated",value:function(){this.dateTime&&this.dateTime!==this.$dayjs(this.csjNowTime).format("YYYY-MM-DD")&&(this.dateTime=this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),this.onRefresh())}},{key:"mounted",value:function(){this._fetchData()}},{key:"_fetchData",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.cardData=[],this.loading=!0,t={selectedDate:this.dateTime,deptId:this.entryObj.id,timeDimFlag:1},e.next=6,Object(m["k"])(t);case 6:a=e.sent,"200"===a.code&&a.data&&(this.loading=!1,n=a.data[1],i=Math.max.apply(Math,Object(r["a"])(n.map((function(e){return e.salesAmount})))),this.cardData=n.map((function(e){return{year:e.yearNum,sales:Object(b["d"])(e.salesAmount,1),growthRate:(100*e.periodComparePercent).toFixed(1),progress:(e.salesAmount/i*100).toFixed(2)}})).sort((function(e,t){return t.year-e.year}))),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"selectCalendar",value:function(e){this.calendarConfirm(e)}},{key:"calendarConfirm",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.calendarShow=!1,this.dateTime=this.$dayjs(t).format("YYYY-MM-DD"),this.SET_CSJNOWTIME(t),this.SET_CSJCHANGETIME(!0),this._fetchData();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onRefresh",value:function(){this._fetchData(),this.refreshing=!1}},{key:"jumpToInnovationDetail",value:function(e){this.$router.push({name:"InnovationDetail",query:{year:e,deptId:this.entryObj.id,role:this.$route.query.role}})}}]),a}(Object(f["b"])(v["a"]));Object(h["a"])([y.Getter],j.prototype,"csjNowTime",void 0),Object(h["a"])([y.Getter],j.prototype,"csjChangeTime",void 0),Object(h["a"])([y.Mutation],j.prototype,"SET_CSJNOWTIME",void 0),Object(h["a"])([y.Mutation],j.prototype,"SET_CSJCHANGETIME",void 0),j=Object(h["a"])([Object(f["a"])({beforeRouteEnter:function(e,t,a){a((function(e){"salesLineHighRise0"!==t.name&&"salesLineHighRise0Inner"!==t.name&&"salesLineHighRise1"!==t.name&&"salesLineHighRise1Inner"!==t.name&&"salesLineMiddleRise2"!==t.name&&"salesLineMiddleRise2Inner"!==t.name&&"salesLineMiddleRise3"!==t.name&&"salesLineMiddleRise3Inner"!==t.name||(e.cardData=[],e.entryObj=Object(s["a"])({},e.$route.query),e.onRefresh(),e._fetchData())}))}})],j);var g=j,w=g,C=(a("15331"),a("2877")),O=Object(C["a"])(w,n,i,!1,null,"7ead81c9",null);t["default"]=O.exports},"53ae":function(e,t,a){"use strict";var n=a("d4ec"),i=a("bee2"),s=a("262e"),r=a("2caf"),c=(a("b0c0"),a("9ab4")),o=a("1b40");o["a"].registerHooks(["beforeRouteEnter"]);var l=function(e){Object(s["a"])(a,e);var t=Object(r["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(i["a"])(a,[{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),a}(o["d"]);l=Object(c["a"])([Object(o["a"])({})],l),t["a"]=l},8275:function(e,t,a){}}]);