(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7658c5c2"],{"13b6":function(t,e,s){"use strict";s("d4c0")},"344b":function(t,e,s){"use strict";s("bf5a")},"366c":function(t,e,s){"use strict";s("bb68")},"477b":function(t,e,s){},"91dc":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-popup",{staticClass:"depChange",style:{height:"100%"},attrs:{position:"top",closeable:""},on:{close:t.closeClick},model:{value:t.depShow,callback:function(e){t.depShow=e},expression:"depShow"}},[s("div",{staticClass:"depChange-header fontWeight"},[t._v("请选择部门信息")]),s("van-search",{attrs:{placeholder:"请输入部门名称"},on:{input:t.searchTreeInput},model:{value:t.searchTreeValue,callback:function(e){t.searchTreeValue=e},expression:"searchTreeValue"}}),s("div",{staticClass:"depChange-dep"},[t._v("当前选择："+t._s(t.nowDepObj.name))]),s("vs-tree",{ref:"depTree",attrs:{checkboxType:{Y:"",N:"p"},"disabled-keys":t.disabledKeys,"checked-keys":t.checkedKeys,"show-checkbox":"",checkOnClickNode:!0,highlightCurrent:!0,data:t.treeList},on:{click:t.depClick,check:t.depClick}}),s("div",{staticClass:"depChange-button"},[s("van-button",{attrs:{size:"small",type:"info",color:"#3561f2",round:""},on:{click:t.changeSure}},[t._v("确定")]),s("van-button",{attrs:{size:"small",type:"default",round:""},on:{click:t.closeClick}},[t._v("取消")])],1)],1)},i=[],o=s("1da1"),n=s("d4ec"),r=s("bee2"),c=s("262e"),l=s("2caf"),d=(s("96cf"),s("4de4"),s("d3b7"),s("159b"),s("b0c0"),s("9ab4")),u=s("1b40"),m=s("4bb5"),p=Object(m["a"])("bigData"),h=function(t){Object(c["a"])(s,t);var e=Object(l["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.depShow=!1,t.checkedKeys=[],t.expandKeys=[],t.searchTreeValue="",t.nowDepObj={},t}return Object(r["a"])(s,[{key:"searchTreeInput",value:function(t){this.$refs.depTree.filter(t)}},{key:"depClick",value:function(t,e){var s=e.data,a=e.disabled,i=this.$refs.depTree,o=i.getCheckedNodes(!0);o.forEach((function(t){i.getNodeById(t.id).setChecked(!1)})),this.$nextTick((function(){i.getNodeById(s.id).setChecked(!0)})),a||(this.nowDepObj=s)}},{key:"changeSure",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.nowDepObj.id){t.next=3;break}return this.$toast.fail("请选择要切换的部门"),t.abrupt("return");case 3:this.depShow=!1,this.actionProvinceCity({deptId:this.nowDepObj.id,deptName:this.nowDepObj.name,selectedDateStr:this.dateTimeUse}),this.$emit("changeSure",this.nowDepObj);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeClick",value:function(){this.depShow=!1,this.$emit("closeClick")}},{key:"mounted",value:function(){var t=this;this.treeList.length>0?this.depShow=this.innerDepShow:this.actionGetreeList().then((function(){t.depShow=t.innerDepShow}))}}]),s}(u["d"]);Object(d["a"])([p.Action],h.prototype,"actionGetreeList",void 0),Object(d["a"])([p.Action],h.prototype,"actionProvinceCity",void 0),Object(d["a"])([p.Getter],h.prototype,"treeList",void 0),Object(d["a"])([p.Getter],h.prototype,"dateTime",void 0),Object(d["a"])([p.Getter],h.prototype,"dateTimeUse",void 0),Object(d["a"])([Object(u["c"])()],h.prototype,"innerDepShow",void 0),Object(d["a"])([Object(u["c"])()],h.prototype,"disabledKeys",void 0),h=Object(d["a"])([Object(u["a"])({})],h);var g=h,v=g,b=(s("344b"),s("2877")),f=Object(b["a"])(v,a,i,!1,null,"2f9dc860",null);e["a"]=f.exports},"931f":function(t,e,s){"use strict";s("477b")},"968e":function(t,e,s){"use strict";s("f5ff")},"99b7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"problemGrub"},[s("div",{staticClass:"problemGrub-header"},[s("ul",{staticClass:"problemGrub-header-switch"},[s("li",{on:{click:function(e){t.calendarShow=!0}}},[t._v(" "+t._s(t.dateTime)+" "),s("van-icon",{attrs:{name:"arrow-down"}})],1),s("li",{on:{click:t.depChangeClick}},[s("span",{staticClass:"left"},[t._v(t._s(t.deptObj.name))]),s("van-icon",{attrs:{name:"arrow-down"}})],1),s("ul",{staticClass:"problemGrub-header-status"},[s("li",{staticClass:"problemGrub-header-status__item statusGreen clearfix"},[s("svg",{staticClass:"icon left",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#ytcrm-"+(t.faceNumberObj.greenNumber?"full":"trans")+"-green"}})]),s("span",{staticClass:"number left"},[t._v(t._s(t.faceNumberObj.greenNumber))])]),s("li",{staticClass:"problemGrub-header-status__item statusOrange clearfix"},[s("svg",{staticClass:"icon left",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#ytcrm-"+(t.faceNumberObj.orangeNumber?"full":"trans")+"-orange"}})]),s("span",{staticClass:"number left"},[t._v(t._s(t.faceNumberObj.orangeNumber))])]),s("li",{staticClass:"problemGrub-header-status__item statusRed clearfix"},[s("svg",{staticClass:"icon left",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#ytcrm-"+(t.faceNumberObj.redNumber?"full":"trans")+"-red"}})]),s("span",{staticClass:"number left"},[t._v(t._s(t.faceNumberObj.redNumber))])])])]),s("div",{staticClass:"problemGrub-header-type"},[s("van-tabs",{staticClass:"tabs-div",attrs:{color:"#2271F5"},on:{change:t.onDimensionSelect},model:{value:t.dimensionMsg,callback:function(e){t.dimensionMsg=e},expression:"dimensionMsg"}},[s("van-tab",{attrs:{title:"业务单元",name:"业务单元"}}),s("van-tab",{attrs:{title:"品种维度",name:"品种维度"}}),s("van-tab",{attrs:{title:"客户维度",name:"客户维度"}})],1)],1)]),s("div",{ref:"problemGrubList",staticClass:"problemGrub-list",style:""!==t.typeObj.id&&"业务单元"===t.dimensionMsg?"":"padding-bottom: 0px;height:calc(100% - 90px)"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.dataLoading,expression:"dataLoading"}],staticClass:"block-loading2",attrs:{type:"spinner",color:"#1989fa"}}),"业务单元"===t.dimensionMsg?s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("business-unit",{attrs:{unitStatisticList:t.unitStatisticList},on:{listClick:t.listClick}}),0!==t.unitStatisticList.length||t.dataLoading?t._e():s("van-empty",{attrs:{description:"当前选择部门列表为空"}})],1):t._e(),"业务单元"!==t.dimensionMsg?s("goods-custom-list",{ref:"goodsCustomList",attrs:{dateTime:t.dateTime,dimensionMsg:t.dimensionMsg},on:{getDataSuccess:t.getDataSuccess,listClick:t.listClick,goodsCustomClick:t.goodsCustomerClick}}):t._e(),s("div",{staticClass:"timeUpdate",style:"业务单元"===t.dimensionMsg?"padding-bottom: 60px;":""},[t._v(" 以上数据更新于"+t._s((new Date).getFullYear())+"年"+t._s((new Date).getMonth()+1)+"月"+t._s((new Date).getDate())+"日0时 ")])],1),"业务单元"===t.dimensionMsg?s("div",{staticClass:"commonOpButton-footer"},[s("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:function(e){t.typeShowPopover=!0}}},[s("span",[t._v(t._s(t.typeObj.name))])]),""!==t.typeObj.id&&"业务单元"===t.dimensionMsg?s("van-button",{attrs:{color:"#2271F5",round:"",type:"info"},on:{click:t.orderRuleClick},scopedSlots:t._u([{key:"icon",fn:function(){return[s("svg",{staticStyle:{width:"16px",height:"16px"},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#ytcrm-paixu2"}})])]},proxy:!0}],null,!1,2330346166)},[s("span",{staticStyle:{color:"#fff"}},[t._v("点击切换成 "+t._s(1===t.orderRule?"降序 ":"升序"))])]):t._e()],1):t._e(),s("van-action-sheet",{attrs:{actions:t.typeActions,"cancel-text":"取消",description:"排序方式选择","close-on-click-action":""},on:{select:t.onTypeSelect},model:{value:t.typeShowPopover,callback:function(e){t.typeShowPopover=e},expression:"typeShowPopover"}}),s("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"right",overlay:t.overlay},model:{value:t.goodsListShow,callback:function(e){t.goodsListShow=e},expression:"goodsListShow"}},[t.goodsListShow?s("goods-custom-detail-list",{ref:"goodsCustomDetailList",attrs:{activeTab:t.activeTab,customListTitle:t.customListTitle,goodsCustomObj:t.goodsCustomObj,dimensionMsg:t.dimensionMsg},on:{backClick:function(e){t.goodsListShow=!1}}}):t._e()],1),s("van-calendar",{attrs:{"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:t.selectCalendar},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}}),t.depShow?s("dep-change",{attrs:{disabledKeys:t.disabledKeys,innerDepShow:t.depShow},on:{changeSure:t.changeSure,closeClick:function(e){t.depShow=!1}}}):t._e()],1)},i=[],o=s("5530"),n=s("1da1"),r=s("d4ec"),c=s("bee2"),l=s("262e"),d=s("2caf"),u=(s("96cf"),s("b0c0"),s("d3b7"),s("a9e3"),s("b680"),s("9ab4")),m=s("1b40"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"businessUnit-list bigData-color-subText"},t._l(t.unitStatisticList,(function(e,a){return s("ul",{key:"unitStatistic"+a,staticClass:"businessUnit-list__item",on:{click:function(s){return t.listClick(e)}}},[s("li",{staticClass:"itemBlock"},[s("span",{staticClass:"itemBlock-depName fontWeight"},[t._v(t._s(e.unitName))]),s("svg",{staticClass:"icon left",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#ytcrm-full-"+e.faceString}})])]),s("li",{staticClass:"itemBlock"},[s("span",{staticClass:"title"},[t._v(" 预算达成 "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.shouldReach<0,expression:"item.shouldReach < 0"}],staticClass:"colorCicle"})]),s("span",{staticClass:"itemBlock-present",class:{activeColor:t.deptObj.name===e.unitName}},[t._v(t._s(e.budgetComplete)+"%")]),s("span",[t._v(" 较应达成 "+t._s(e.shouldReach>=0?"+":"")+t._s(e.shouldReach)+"p ")])]),s("li",{staticClass:"itemBlock"},[s("span",{staticClass:"title"},[t._v(" 本月同比 "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.monthToSupposedDifference<0,expression:"item.monthToSupposedDifference < 0"}],staticClass:"colorCicle"})]),s("span",{staticClass:"itemBlock-present",class:{activeColor:t.deptObj.name===e.unitName}},[t._v(t._s(e.monthOnMonthPercent)+"%")]),s("span",[t._v("较预算 "+t._s(e.monthToSupposedDifference>=0?"+":"")+t._s(e.monthToSupposedDifference)+"p")])]),s("li",{staticClass:"itemBlock"},[s("span",{staticClass:"title"},[t._v(" 本年同比 "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.yearToSupposedDifference<0,expression:"item.yearToSupposedDifference < 0"}],staticClass:"colorCicle"})]),s("span",{staticClass:"itemBlock-present",class:{activeColor:t.deptObj.name===e.unitName}},[t._v(t._s(e.yearOnYearPercent)+"%")]),s("span",[t._v("较预算 "+t._s(e.yearToSupposedDifference>=0?"+":"")+t._s(e.yearToSupposedDifference)+"p")])]),s("div",{staticClass:"progressWarp"},[s("li",{staticClass:"progress",style:"width:"+(e.budgetComplete>100?100:e.budgetComplete)+"px"})])])})),0)},h=[],g=s("4bb5"),v=Object(g["a"])("bigData"),b=function(t){Object(l["a"])(s,t);var e=Object(d["a"])(s);function s(){return Object(r["a"])(this,s),e.apply(this,arguments)}return Object(c["a"])(s,[{key:"listClick",value:function(t){t.budgetRate=+t.budgetComplete,t.supposedRate=+t.supposedPercent,this.$emit("listClick",t)}}]),s}(m["d"]);Object(u["a"])([v.Getter],b.prototype,"deptObj",void 0),Object(u["a"])([Object(m["c"])()],b.prototype,"unitStatisticList",void 0),b=Object(u["a"])([Object(m["a"])({})],b);var f=b,C=f,y=(s("968e"),s("2877")),O=Object(y["a"])(C,p,h,!1,null,"57ce404e",null),S=O.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goodsCustomList"},["客户维度"===t.dimensionMsg?s("div",{staticClass:"goodsCustomList-custom"},[s("div",{staticClass:"area",on:{click:t.areaClick}},[s("span",[t._v(t._s(t.areaString))]),s("van-icon",{directives:[{name:"show",rawName:"v-show",value:"请选择地区"===t.areaString,expression:"areaString === '请选择地区'"}],attrs:{size:"14px",name:"arrow-down"}}),s("van-icon",{directives:[{name:"show",rawName:"v-show",value:"请选择地区"!==t.areaString,expression:"areaString !== '请选择地区'"}],staticClass:"right",attrs:{name:"cross"},on:{click:function(e){return e.stopPropagation(),t.clearArea.apply(null,arguments)}}})],1)]):t._e(),s("van-pull-refresh",{class:"品种维度"===t.dimensionMsg?"van-pull-refresh-height":"",on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},["客户维度"===t.dimensionMsg?s("div",{ref:"goodsCustomList",staticClass:"goodsCustomList-list"},[t._l(t.dataInfor,(function(e,a){return s("div",{key:"focusAndExist"+a,staticClass:"goodsCustomList-list-item",class:t.statusObj[e.type+"errorNumber"]?2===t.statusObj[e.type+"errorNumber"]?"goodsCustomList-list__error":"goodsCustomList-list__warning":"goodsCustomList-list__success",on:{click:function(s){return t.listClick(e)}}},[s("div",{staticClass:"goodsCustomList-list-item-header",on:{click:function(s){return s.stopPropagation(),t.$set(e.data,"isShow",!e.data.isShow)}}},[s("div",{staticClass:"goodsCustomList-list-item-header-title"},[s("van-icon",{attrs:{color:t.statusObj[e.type+"errorNumber"]?2===t.statusObj[e.type+"errorNumber"]?"#e34d59":"#ed9751":"#00A870",name:t.statusObj[e.type+"errorNumber"]?"warning":"checked",size:"16px"}}),s("span",{staticClass:"text"},[t._v(t._s(1===e.type?"重点客户":"存量客户"))])],1)]),s("ul",{directives:[{name:"show",rawName:"v-show",value:0===t.statusObj[e.type+"errorNumber"]?e.data.isShow:!e.data.isShow,expression:"statusObj[item.type + 'errorNumber'] === 0 ? item.data.isShow : !item.data.isShow"}],staticClass:"goodsCustomList-list-item-content bigData-color-subText"},[s("li",{staticClass:"flex1"},[s("span",{staticClass:"goodsCustomList-list-item-content-title fontWeight",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(1===e.type?"重点客户":"存量客户")+" ")]),s("span",{staticClass:"goodsCustomList-list-item-content-numberClick",on:{click:function(s){return s.stopPropagation(),t.goodsCustomClick(e)}}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),s("i",[t._v(t._s(e.data&&e.data.customerNum))]),t._v(" 家 "),s("i",{staticClass:"underline"})],1)]),s("li",{staticClass:"flex2"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(" 保持增速 ")]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.monthOnMonthPercentHigherThanDeptCustomerNum)+" "),s("i",[t._v("家")])],1),s("span",{staticClass:"goodsCustomList-list-item-content-rise fontWeight-300"},[t._v(" 本月增速较本部门高 ")])]),s("li",{staticClass:"flex3"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(" 本月同比 "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.monthOnMonthPercentCompareDept<0,expression:"item.data && item.data.monthOnMonthPercentCompareDept < 0"}],staticClass:"colorCicle"})]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.monthOnMonthPercent)+"% ")],1),s("span",{staticClass:"goodsCustomList-list-item-content-rise fontWeight-300"},[t._v(" 较本部门 "),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.monthOnMonthPercentCompareDept)+"p ")],1)]),s("li",{staticClass:"flex1"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(" 本年同比 "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.yearOnYearPercentCompareDept<0,expression:"item.data && item.data.yearOnYearPercentCompareDept < 0"}],staticClass:"colorCicle"})]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.yearOnYearPercent)+"% ")],1),s("span",{staticClass:"goodsCustomList-list-item-content-rise fontWeight-300"},[t._v(" 较本部门 "),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.yearOnYearPercentCompareDept)+"p ")],1)])])])})),t._l(t.dataInfor1,(function(e,a){return s("div",{key:"lostAndNew"+a,staticClass:"goodsCustomList-list-item",class:t.statusObj[e.type+"errorFlag"]?"goodsCustomList-list__error":"goodsCustomList-list__success",on:{click:function(s){return t.listClick(e)}}},[s("div",{staticClass:"goodsCustomList-list-item-header",on:{click:function(s){return s.stopPropagation(),t.$set(e.data,"isShow",!e.data.isShow)}}},[s("div",{staticClass:"goodsCustomList-list-item-header-title"},[s("van-icon",{attrs:{color:t.statusObj[e.type+"errorFlag"]?"#e34d59":"#00A870",name:t.statusObj[e.type+"errorFlag"]?"warning":"checked",size:"14px"}}),s("span",{staticClass:"text"},[t._v(t._s(3===e.type?"丢失客户":"新增客户"))])],1)]),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.statusObj[e.type+"errorFlag"]?!e.data.isShow:e.data.isShow,expression:"!statusObj[item.type + 'errorFlag'] ? item.data.isShow : !item.data.isShow"}],staticClass:"goodsCustomList-list-item-content bigData-color-subText"},[s("li",{staticClass:"flex2"},[s("span",{staticClass:"goodsCustomList-list-item-content-title fontWeight",staticStyle:{"font-size":"14px"}},[t._v(t._s(3===e.type?"丢失":"新增")+"数量")]),s("span",{staticClass:"goodsCustomList-list-item-content-numberClick",on:{click:function(s){return s.stopPropagation(),t.goodsCustomClick(e)}}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),s("i",[t._v(t._s(e.data&&e.data.customerNum))]),t._v(" 家 "),s("i",{staticClass:"underline"})],1),s("span",{staticClass:"goodsCustomList-list-item-content-rise fontWeight-300"},[t._v(" 较去年同期 ")])]),s("li",{staticClass:"flex2"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(t._s(3===e.type?"影响":"新增")+"月金额")]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.monthSalesInfluenceAmount)+" "),s("i",[t._v("万元")])],1)]),s("li",{staticClass:"flex1"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(t._s(3===e.type?"影响":"新增")+"年金额")]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.yearSalesInfluenceAmount)+" "),s("i",[t._v("万元")])],1)])])])}))],2):t._e(),"品种维度"===t.dimensionMsg?s("div",{ref:"goodsCustomList",staticClass:"goodsCustomList-list"},[t._l(t.dataInfor,(function(e,a){return s("div",{key:"dataInfor"+a,staticClass:"goodsCustomList-list-item",class:t.statusObj[e.type+"errorNumber"]?(2===e.type||4===e.type)&&3===t.statusObj[e.type+"errorNumber"]||(1===e.type||3===e.type)&&2===t.statusObj[e.type+"errorNumber"]?"goodsCustomList-list__error":"goodsCustomList-list__warning":"goodsCustomList-list__success",on:{click:function(s){return t.listClick(e)}}},[s("div",{staticClass:"goodsCustomList-list-item-header",on:{click:function(s){return s.stopPropagation(),t.$set(e.data,"isShow",!e.data.isShow)}}},[s("div",{staticClass:"goodsCustomList-list-item-header-title"},[s("van-icon",{attrs:{color:t.statusObj[e.type+"errorNumber"]?(2===e.type||4===e.type)&&3===t.statusObj[e.type+"errorNumber"]||(1===e.type||3===e.type)&&2===t.statusObj[e.type+"errorNumber"]?"#e34d59":"#ed9751":"#00A870",name:t.statusObj[e.type+"errorNumber"]?"warning":"checked",size:"14px"}}),s("span",{staticClass:"text"},[t._v(" "+t._s(1===e.type?"创新品种":2===e.type?"集采相关品种":3===e.type?"国谈品种":4===e.type?"存量品种":"")+" ")])],1)]),s("ul",{directives:[{name:"show",rawName:"v-show",value:0===t.statusObj[e.type+"errorNumber"]?e.data.isShow:!e.data.isShow,expression:"statusObj[item.type + 'errorNumber'] === 0 ? item.data.isShow : !item.data.isShow"}],staticClass:"goodsCustomList-list-item-content bigData-color-subText"},[s("li",{staticClass:"flex1"},[s("span",{staticClass:"goodsCustomList-list-item-content-title fontWeight",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(1===e.type?"创新品种":2===e.type?"集采相关品种":3===e.type?"国谈品种":4===e.type?"存量品种":"")+" ")]),s("span",{staticClass:"goodsCustomList-list-item-content-numberClick",on:{click:function(s){return s.stopPropagation(),t.goodsCustomClick(e)}}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),s("i",[t._v(t._s(e.data.goodsNum))]),t._v(" 个 "),s("i",{staticClass:"underline"})],1)]),s("li",{staticClass:"flex2"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(1===e.type?"未经营比例":2===e.type?"销售占比":3===e.type?"未经营比例":4===e.type?"销售占比":"")+" ")]),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),4===e.type||2===e.type?s("span",{staticClass:"goodsCustomList-list-item-content-number"},[t._v(t._s(e.data.salesContribution)+"%")]):s("span",{staticClass:"goodsCustomList-list-item-content-number"},[t._v(t._s(e.data.unMarketNum))]),4===e.type||2===e.type?s("span",{staticClass:"goodsCustomList-list-item-content-rise"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" 较去年"+t._s(e.data.salesContributionCompareLastYear>=0?"+":"")+t._s(e.data.salesContributionCompareLastYear)+"p ")],1):s("span",{staticClass:"goodsCustomList-list-item-content-rise"},[t._v(" "+t._s(1===e.type?"创新":2===e.type?"集采":3===e.type?"国谈":"")+"目录 "),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data.directoryNum)+"个 ")],1)],1),s("li",{staticClass:"flex3"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(" 本月同比 "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.goodsMonthOnMonthPercentCompareDept<0,expression:"item.data && item.data.goodsMonthOnMonthPercentCompareDept < 0"}],staticClass:"colorCicle"})]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data.monthOnMonthPercent)+"% ")],1),s("span",{staticClass:"goodsCustomList-list-item-content-rise"},[t._v(" 较本部门 "),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data.goodsMonthOnMonthPercentCompareDept>=0?"+":"")+t._s(e.data.goodsMonthOnMonthPercentCompareDept)+"p ")],1)]),s("li",{staticClass:"flex1"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(" 本年同比 "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.goodsYearOnYearPercentCompareDept<0,expression:"item.data && item.data.goodsYearOnYearPercentCompareDept < 0"}],staticClass:"colorCicle"})]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data.yearOnYearPercent)+"% ")],1),s("span",{staticClass:"goodsCustomList-list-item-content-rise fontWeight-300"},[t._v(" 较本部门 "),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data.goodsYearOnYearPercentCompareDept>=0?"+":"")+t._s(e.data.goodsYearOnYearPercentCompareDept)+"p ")],1)])])])})),t._l(t.dataInfor1,(function(e,a){return s("div",{key:"dataInfor1"+a,staticClass:"goodsCustomList-list-item",class:t.statusObj[e.type+"errorFlag"]?"goodsCustomList-list__error":"goodsCustomList-list__success",on:{click:function(s){return t.listClick(e)}}},[s("div",{staticClass:"goodsCustomList-list-item-header",on:{click:function(s){return s.stopPropagation(),t.$set(e.data,"isShow",!e.data.isShow)}}},[s("div",{staticClass:"goodsCustomList-list-item-header-title"},[s("van-icon",{attrs:{color:t.statusObj[e.type+"errorFlag"]?"#e34d59":"#00A870",name:t.statusObj[e.type+"errorFlag"]?"warning":"checked",size:"14px"}}),s("span",{staticClass:"text"},[t._v(t._s(5===e.type?"流失品种":6===e.type?"新增品种":""))])],1)]),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.statusObj[e.type+"errorFlag"]?!e.data.isShow:e.data.isShow,expression:"!statusObj[item.type + 'errorFlag'] ? item.data.isShow : !item.data.isShow"}],staticClass:"goodsCustomList-list-item-content bigData-color-subText"},[s("li",{staticClass:"flex1"},[s("span",{staticClass:"goodsCustomList-list-item-content-title fontWeight",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(5===e.type?"流失品种":6===e.type?"新增品种":"")+" ")]),s("span",{staticClass:"goodsCustomList-list-item-content-numberClick",on:{click:function(s){return s.stopPropagation(),t.goodsCustomClick(e)}}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),s("i",[t._v(t._s(e.data.goodsNum))]),t._v(" 个 "),s("i",{staticClass:"underline"})],1)]),s("li",{staticClass:"flex2"},[s("span",{staticClass:"goodsCustomList-list-item-content-title",staticStyle:{"line-height":"20px"}},[t._v(t._s(5===e.type?"影响":"新增")+"月金额")]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.monthSalesInfluenceAmount)+" "),s("i",[t._v("万元")])],1)]),s("li",{staticClass:"flex1"},[s("span",{staticClass:"goodsCustomList-list-item-content-title"},[t._v(t._s(5===e.type?"影响":"新增")+"年金额")]),s("span",{staticClass:"goodsCustomList-list-item-content-number"},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"item.dataLoading"}],staticClass:"block-loading2",attrs:{size:"16px",type:"spinner",color:"#1989fa"}}),t._v(" "+t._s(e.data&&e.data.yearSalesInfluenceAmount)+" "),s("i",[t._v("万元")])],1)])])])}))],2):t._e()]),s("van-popup",{style:{width:"100%",height:"80%"},attrs:{round:"",position:"bottom",closeable:""},model:{value:t.areaShow,callback:function(e){t.areaShow=e},expression:"areaShow"}},[!t.provinceLoading&&t.areaShow?s("van-cascader",{attrs:{closeable:!1,title:"请选择所在地区","active-color":"rgb(34, 113, 245)",options:t.provinceCityList,"field-names":{text:"name",value:"id",children:"children"}},on:{finish:t.provinceFinish},model:{value:t.cascaderValue,callback:function(e){t.cascaderValue=e},expression:"cascaderValue"}}):s("van-loading",{staticClass:"van-loading-pr",attrs:{color:"rgb(34, 113, 245)"}},[t._v("省市区请求加载中...")])],1)],1)},w=[],x=(s("3ca3"),s("ddb0"),s("4de4"),s("8cfc")),L=Object(g["a"])("bigData"),k=function(t){Object(l["a"])(s,t);var e=Object(d["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.scrollTop=0,t.useDeptCustomerList=[],t.areaString="请选择地区",t.areaShow=!1,t.cascaderValue="",t.dataInfor=[],t.dataInfor1=[],t.dataLoading=!1,t.statusObj={},t.refreshing=!1,t}return Object(c["a"])(s,[{key:"onRefresh",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.refreshing=!0,t.next=3,this.init();case 3:this.refreshing=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"listClick",value:function(t){var e=this.$refs.goodsCustomList;this.scrollTop=e.scrollTop,this.$emit("listClick",t)}},{key:"areaClick",value:function(){this.areaShow=!0}},{key:"clearArea",value:function(){this.areaString="请选择地区",this.SET_AREASTRING(""),this.useDeptCustomerList=this.deptCustomerList,this.init()}},{key:"goodsCustomClick",value:function(t){var e=this.$refs.goodsCustomList;this.scrollTop=e.scrollTop,this.$emit("goodsCustomClick",t)}},{key:"scrollTopChange",value:function(){var t=this;this.$nextTick((function(){t.$refs.goodsCustomList.scrollTop=t.scrollTop}))}},{key:"_varietyOverview",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s,a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1===e||2===e||3===e||4===e?(this.statusObj[e+"errorNumber"]=0,this.$set(this.dataInfor,e-1,{type:e,dataLoading:!0,data:{isShow:!0}})):(this.statusObj[e+"errorFlag"]=!1,this.$set(this.dataInfor1,e-5,{type:e,dataLoading:!0,data:{isShow:!0}})),t.next=3,Object(x["w"])({full:!0,varietyType:e,crmDeptId:this.deptObj.id,selectedDateStr:this.dateTimeUse});case 3:return s=t.sent,1===e||2===e||3===e||4===e?(a={directoryNum:s.data.directoryNum,goodsIdList:s.data.goodsIdList,goodsNum:s.data.goodsNum,monthOnMonthPercent:this.$arithmetic.multiply(s.data.monthOnMonthPercent,100).toFixed(1),goodsMonthOnMonthPercentCompareDept:this.$arithmetic.multiply(s.data.goodsMonthOnMonthPercentCompareDept,100).toFixed(1),goodsYearOnYearPercentCompareDept:this.$arithmetic.multiply(s.data.goodsYearOnYearPercentCompareDept,100).toFixed(1),salesContribution:this.$arithmetic.multiply(s.data.salesContribution,100).toFixed(1),salesContributionCompareLastYear:this.$arithmetic.multiply(s.data.salesContributionCompareLastYear,100).toFixed(1),unMarketNum:s.data.unMarketNum,yearOnYearPercent:this.$arithmetic.multiply(s.data.yearOnYearPercent,100).toFixed(1)},this.$set(this.dataInfor,e-1,{type:e,data:a}),i=0,2!==e&&4!==e||s.data.salesContributionCompareLastYear<0&&++i,s.data.goodsMonthOnMonthPercentCompareDept<0&&++i,s.data.goodsYearOnYearPercentCompareDept<0&&++i,this.statusObj[e+"errorNumber"]=i):(o={directoryNum:s.data.directoryNum,goodsIdList:s.data.goodsIdList,goodsNum:s.data.goodsNum,errorFlag:s.data.errorFlag,monthSalesInfluenceAmount:this.$arithmetic.divide(s.data.monthSalesInfluenceAmount,1e4).toFixed(1),yearSalesInfluenceAmount:this.$arithmetic.divide(s.data.yearSalesInfluenceAmount,1e4).toFixed(1)},this.$set(this.dataInfor1,e-5,{type:e,data:o})),t.abrupt("return",new Promise((function(t){t(s)})));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_focusAndExistStatistic",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1!==e&&2!==e||(this.statusObj[e+"errorNumber"]=0,this.$set(this.dataInfor,e-1,{type:e,dataLoading:!0,data:{isShow:!0}})),t.next=3,Object(x["e"])({full:!0,customerType:e,crmDeptId:this.deptObj.id,selectedCustomerIdList:"请选择地区"===this.areaString?this.deptCustomerList:this.useDeptCustomerList,selectedDateStr:this.dateTimeUse});case 3:return s=t.sent,1!==e&&2!==e||(a={monthSalesAmount:this.$arithmetic.divide(s.data.monthSalesAmount,1e4).toFixed(1),yearSalesAmount:this.$arithmetic.divide(s.data.yearSalesAmount,1e4).toFixed(1),customerIdList:s.data.customerIdList,customerNum:s.data.customerNum,monthOnMonthPercentHigherThanDeptCustomerNum:s.data.monthOnMonthPercentHigherThanDeptCustomerNum,monthLowerThanCenterIncreasePercentNum:s.data.monthLowerThanCenterIncreasePercentNum,monthOnMonthSalesAmountNetIncrease:this.$arithmetic.divide(s.data.monthOnMonthSalesAmountNetIncrease,1e4).toFixed(1),monthOnMonthPercent:this.$arithmetic.multiply(s.data.monthOnMonthPercent,100).toFixed(1),monthOnMonthPercentCompareDept:this.$arithmetic.multiply(s.data.monthOnMonthPercentCompareDept,100).toFixed(1),yearHigherThanCenterIncreasePercentNum:s.data.yearHigherThanCenterIncreasePercentNum,yearLowerThanCenterIncreasePercentNum:s.data.yearLowerThanCenterIncreasePercentNum,yearOnYearSalesAmountNetIncrease:this.$arithmetic.divide(s.data.yearOnYearSalesAmountNetIncrease,1e4).toFixed(1),yearOnYearPercent:this.$arithmetic.multiply(s.data.yearOnYearPercent,100).toFixed(1),yearOnYearPercentCompareDept:this.$arithmetic.multiply(s.data.yearOnYearPercentCompareDept,100).toFixed(1)},this.$set(this.dataInfor,e-1,{type:e,data:a}),i=0,s.data.monthOnMonthPercentCompareDept<0&&++i,s.data.yearOnYearPercentCompareDept<0&&++i,this.statusObj[e+"errorNumber"]=i),t.abrupt("return",new Promise((function(t){t(s)})));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_lostAndNewStatistic",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 3!==e&&4!==e||(this.statusObj[e+"errorNumber"]=0,this.$set(this.dataInfor1,e-3,{type:e,dataLoading:!0,data:{isShow:!0}})),t.next=3,Object(x["n"])({full:!0,customerType:e,crmDeptId:this.deptObj.id,selectedCustomerIdList:"请选择地区"===this.areaString?this.deptCustomerList:this.useDeptCustomerList,selectedDateStr:this.dateTimeUse});case 3:return s=t.sent,3!==e&&4!==e||(a={customerIdList:s.data.customerIdList,customerNum:s.data.customerNum,errorFlag:s.data.errorFlag,monthSalesInfluenceAmount:this.$arithmetic.divide(s.data.monthSalesInfluenceAmount,1e4).toFixed(1),monthSalesInfluencePercent:this.$arithmetic.multiply(s.data.monthSalesInfluencePercent,100).toFixed(1),yearSalesInfluenceAmount:this.$arithmetic.divide(s.data.yearSalesInfluenceAmount,1e4).toFixed(1),yearSalesInfluencePercent:this.$arithmetic.multiply(s.data.yearSalesInfluencePercent,100).toFixed(1)},this.$set(this.dataInfor1,e-3,{type:e,data:a})),t.abrupt("return",new Promise((function(t){t(s)})));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"provinceFinish",value:function(t){var e=t.selectedOptions;this.areaString="";for(var s=0;s<e.length;s++){var a=e[s];"全部"!==a.name&&(this.areaString+=a.name,this.areaString+="-")}this.areaString=this.areaString.substring(0,this.areaString.length-1),this.SET_AREASTRING(this.areaString),this.SET_AREACUSTOMERLIST(e[e.length-1].customerIdList),this.useDeptCustomerList=e[e.length-1].customerIdList,this.init(),this.areaShow=!1}},{key:"init",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i,o,n,r,c,l,d,u,m,p,h,g,v,b=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.dataInfor=[],this.dataInfor1=[],this.statusObj={},"客户维度"!==this.dimensionMsg){t.next=17;break}return e=this._focusAndExistStatistic(1),s=this._focusAndExistStatistic(2),a=this._lostAndNewStatistic(3),i=this._lostAndNewStatistic(4),o=0,n=0,r=0,t.next=13,Promise.all([e,s]).then((function(t){t.filter((function(t){var e=0;t.data.monthOnMonthPercentCompareDept<0&&++e,t.data.yearOnYearPercentCompareDept<0&&++e,0===e&&++o,1===e&&++n,2===e&&++r})),b.statusObj.greenNumber=o,b.statusObj.orangeNumber=n,b.statusObj.redNumber=r}));case 13:return t.next=15,Promise.all([a,i]).then((function(t){var e=t[1],s=t[0];e.data.monthSalesInfluenceAmount<s.data.monthSalesInfluenceAmount?(b.statusObj["3errorFlag"]=!0,b.statusObj["4errorFlag"]=!0,++r,++r,b.SET_LOSSINCREASE({lossMoney:s.data.monthSalesInfluenceAmount,incMoney:e.data.monthSalesInfluenceAmount})):(b.statusObj["3errorFlag"]=!1,b.statusObj["4errorFlag"]=!1,++o,++o,b.SET_LOSSINCREASE({lossMoney:s.data.monthSalesInfluenceAmount,incMoney:e.data.monthSalesInfluenceAmount})),b.statusObj.greenNumber=o,b.statusObj.orangeNumber=n,b.statusObj.redNumber=r,b.$emit("getDataSuccess",b.statusObj)}));case 15:t.next=30;break;case 17:return c=this._varietyOverview(1),l=this._varietyOverview(2),d=this._varietyOverview(3),u=this._varietyOverview(4),m=this._varietyOverview(5),p=this._varietyOverview(6),h=0,g=0,v=0,t.next=28,Promise.all([c,l,d,u]).then((function(t){t.filter((function(t,e){var s=0;0===e||2===e?(t.data.goodsMonthOnMonthPercentCompareDept<0&&++s,t.data.goodsYearOnYearPercentCompareDept<0&&++s,0===s&&++h,1!==s&&2!==s||++g,3===s&&++v):(t.data.salesContributionCompareLastYear<0&&++s,t.data.goodsMonthOnMonthPercentCompareDept<0&&++s,t.data.goodsYearOnYearPercentCompareDept<0&&++s,0===s&&++h,1!==s&&2!==s||++g,3===s&&++v)})),b.statusObj.greenNumber=h,b.statusObj.orangeNumber=g,b.statusObj.redNumber=v})).catch((function(t){}));case 28:return t.next=30,Promise.all([m,p]).then((function(t){var e=t[1],s=t[0];e.data.monthSalesInfluenceAmount<s.data.monthSalesInfluenceAmount?(b.statusObj["5errorFlag"]=!0,b.statusObj["6errorFlag"]=!0,++v,++v,b.SET_LOSSINCREASE({lossMoney:s.data.monthSalesInfluenceAmount,incMoney:e.data.monthSalesInfluenceAmount})):(b.statusObj["5errorFlag"]=!1,b.statusObj["6errorFlag"]=!1,++h,++h,b.SET_LOSSINCREASE({lossMoney:s.data.monthSalesInfluenceAmount,incMoney:e.data.monthSalesInfluenceAmount})),b.statusObj.greenNumber=h,b.statusObj.orangeNumber=g,b.statusObj.redNumber=v,b.$emit("getDataSuccess",b.statusObj)})).catch((function(t){}));case 30:this.$forceUpdate();case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onProvinceLoading",value:function(){this.cascaderValue=""}}]),s}(m["d"]);Object(u["a"])([L.Getter],k.prototype,"deptObj",void 0),Object(u["a"])([L.Getter],k.prototype,"dateTimeUse",void 0),Object(u["a"])([L.Getter],k.prototype,"deptCustomerList",void 0),Object(u["a"])([L.Getter],k.prototype,"provinceCityList",void 0),Object(u["a"])([L.Getter],k.prototype,"provinceLoading",void 0),Object(u["a"])([L.Mutation],k.prototype,"SET_AREASTRING",void 0),Object(u["a"])([L.Mutation],k.prototype,"SET_AREACUSTOMERLIST",void 0),Object(u["a"])([L.Mutation],k.prototype,"SET_LOSSINCREASE",void 0),Object(u["a"])([Object(m["c"])()],k.prototype,"dimensionMsg",void 0),Object(u["a"])([Object(m["c"])()],k.prototype,"dateTime",void 0),Object(u["a"])([Object(m["e"])("provinceLoading")],k.prototype,"onProvinceLoading",null),k=Object(u["a"])([Object(m["a"])({})],k);var j=k,D=j,T=(s("366c"),Object(y["a"])(D,_,w,!1,null,"6a9282b4",null)),N=T.exports,A=s("bbfc"),M=s("91dc"),I=s("d926"),P=s("b32d"),$=Object(g["a"])("bigData"),Y=function(t){Object(l["a"])(s,t);var e=Object(d["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.dimensionShowPopover=!1,t.dimensionActions=[{text:"业务单元",disabled:!0},{text:"客户维度"},{text:"品种维度"}],t.dimensionMsg="业务单元",t.deptId="",t.deptName="",t.scrollTop=0,t.overlay=!1,t.private=.3,t.typeShowPopover=!1,t.depShowPopover=!1,t.typeObj={id:"",name:"请选择排序指标"},t.typeActions=[{id:"",name:"请选择排序指标"},{id:1,name:"按预算达成排序"},{id:2,name:"按本月同比排序"},{id:3,name:"按本年同比排序"}],t.depActions=[{text:"选项一"},{text:"选项二"},{text:"选项三"}],t.goodsListShow=!1,t.goodsCustomObj={},t.unitStatisticList=[],t.dataLoading=!1,t.preLoading=!1,t.calendarShow=!1,t.orderRule="",t.depShow=!1,t.customListTitle="",t.faceNumberObj={},t.refreshing=!1,t.activeTab=0,t.disabledKeys=[],t}return Object(c["a"])(s,[{key:"depChangeClick",value:function(){this.depShow=!0}},{key:"changeSure",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.SET_DEPTOBJ(e),"业务单元"===this.dimensionMsg?this._unitStatistic():(this.actionProvinceCity({deptId:this.deptObj.id,deptName:this.deptObj.name,selectedDateStr:this.dateTimeUse}),this.$nextTick((function(){var t=s.$refs.goodsCustomList;t.areaString="请选择地区",t.init()})));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onRefresh",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.faceNumberObj={},this.refreshing=!0,"业务单元"!==this.dimensionMsg){t.next=7;break}return t.next=5,this._unitStatistic();case 5:t.next=8;break;case 7:this.$nextTick(Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.$refs.goodsCustomList,s.init();case 2:case"end":return t.stop()}}),t)}))));case 8:this.refreshing=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onDimensionSelect",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s,a,i,o,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(Object(P["b"])(),this.faceNumberObj={},this.dataLoading=!1,this.SET_AREASTRING(""),this.dimensionMsg=e,s=0;s<this.dimensionActions.length;s++)a=this.dimensionActions[s],this.dimensionMsg===a.text?a.disabled=!0:a.disabled=!1;if("业务单元"!==this.dimensionMsg){t.next=11;break}this.disabledKeys=[],this._unitStatistic(),t.next=19;break;case 11:if(this.disabledKeys=[449,431],i=[449],this.disabledKeys.some((function(t){return r.deptObj.id===t}))){t.next=17;break}return this.provinceLoading&&this.actionProvinceCity({deptId:this.deptObj.id,deptName:this.deptObj.name,selectedDateStr:this.dateTimeUse}),this.$nextTick((function(){var t=r.$refs.goodsCustomList;t.init()})),t.abrupt("return");case 17:if(431===this.treeList[0].id)this.SET_DEPTOBJ(this.treeList[0].children[0].children[0]),this.actionProvinceCity({deptId:this.deptObj.id,deptName:this.deptObj.name,selectedDateStr:this.dateTimeUse}),this._performanceGeneral();else for(o=function(t){var e=r.treeList[t];i.some((function(t){return e.id===t}))&&(r.SET_DEPTOBJ(e.children[0]),r.actionProvinceCity({deptId:r.deptObj.id,deptName:r.deptObj.name,selectedDateStr:r.dateTimeUse}),r._performanceGeneral())},n=0;n<this.treeList.length;n++)o(n);this.$nextTick((function(){var t=r.$refs.goodsCustomList;t.init()}));case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onTypeSelect",value:function(t){this.typeObj=t,""===this.orderRule&&(this.orderRule=1),""===this.typeObj.id&&(this.orderRule=""),this._unitStatistic()}},{key:"onDepSelect",value:function(t){}},{key:"listClick",value:function(t){if(this.SET_UNITOBJ(t),"业务单元"===this.dimensionMsg){var e=this.$refs.problemGrubList;this.scrollTop=e.scrollTop}this.$router.push({name:"problemGrubDetail",query:"业务单元"!==this.dimensionMsg?{dimensionMsg:this.dimensionMsg,type:String(Number(t.type)-1)}:{dimensionMsg:this.dimensionMsg}})}},{key:"goodsCustomerClick",value:function(t){this.activeTab=t.type,"客户维度"===this.dimensionMsg?this.customListTitle=1===t.type?"重点客户":2===t.type?"存量客户":3===t.type?"丢失客户":"新增客户":this.customListTitle=1===t.type?"创新品种":2===t.type?"集采品种":3===t.type?"国谈品种":4===t.type?"存量品种":5===t.type?"流失品种":"新增品种";var e=this.$refs.problemGrubList;"客户维度"===this.dimensionMsg?this.goodsCustomObj=t.data.customerIdList:this.goodsCustomObj=t.data.goodsIdList,this.scrollTop=e.scrollTop,this.goodsListShow=!0}},{key:"getDataSuccess",value:function(t){this.faceNumberObj=Object(o["a"])({},t)}},{key:"orderRuleClick",value:function(){this.orderRule=1===this.orderRule?2:1,this._unitStatistic()}},{key:"_unitStatistic",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={crmDeptId:this.deptObj.id,crmDeptName:this.deptObj.name,orderField:this.typeObj.id,orderRule:this.orderRule,selectedDateStr:this.dateTimeUse},this.dataLoading=!0,this.unitStatisticList=[],t.next=5,Object(x["t"])(e).then((function(t){if(s.dataLoading=!1,"200"===t.code){s.faceNumberObj.greenNumber=0,s.faceNumberObj.orangeNumber=0,s.faceNumberObj.redNumber=0;for(var e=[],a=0;a<t.data.length;a++){var i=t.data[a],o=[i.budgetComplete-i.supposedPercent>0,i.monthToSupposedDifference>0,i.yearToSupposedDifference>0];o.every((function(t){return t}))?(++s.faceNumberObj.greenNumber,i.faceString="green"):o.some((function(t){return t}))?(++s.faceNumberObj.orangeNumber,i.faceString="orange"):(++s.faceNumberObj.redNumber,i.faceString="red"),e.push({faceString:i.faceString,annualBudget:s.$arithmetic.divide(i.annualBudget,1e4).toFixed(1),budgetComplete:s.$arithmetic.multiply(i.budgetComplete,100).toFixed(1),budgetPercent:s.$arithmetic.multiply(i.budgetPercent,100).toFixed(1),compareLastYearEntireMonthIncrease:s.$arithmetic.divide(i.compareLastYearEntireMonthIncrease,1e4).toFixed(1),compareLastYearIncrease:s.$arithmetic.divide(i.compareLastYearIncrease,1e4).toFixed(1),monthAchievementRate:s.$arithmetic.multiply(i.monthAchievementRate,100).toFixed(1),monthOnMonthPercent:s.$arithmetic.multiply(i.monthOnMonthPercent,100).toFixed(1),monthToSupposedDifference:s.$arithmetic.multiply(i.monthToSupposedDifference,100).toFixed(1),selectedMonthSalesAmount:s.$arithmetic.divide(i.selectedMonthSalesAmount,1e4).toFixed(1),selectedYearSalesAmount:s.$arithmetic.divide(i.selectedYearSalesAmount,1e4).toFixed(1),supposedPercent:s.$arithmetic.multiply(i.supposedPercent,100).toFixed(1),shouldReach:s.$arithmetic.multiply(s.$arithmetic.subtract(i.budgetComplete,i.supposedPercent),100).toFixed(1),unitName:i.unitName,unitId:i.unitId,yearAchievementRate:s.$arithmetic.multiply(i.yearAchievementRate,100).toFixed(1),yearOnYearPercent:s.$arithmetic.multiply(i.yearOnYearPercent,100).toFixed(1),yearToSupposedDifference:s.$arithmetic.multiply(i.yearToSupposedDifference,100).toFixed(1)}),s.unitStatisticList=e}}else s.$toast.fail(t.msg)}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"selectCalendar",value:function(t){this.calendarConfirm(t)}},{key:"calendarConfirm",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.calendarShow=!1,this.SET_DATETIME(Object(I["c"])(e)),this.SET_DATETIMEUSE(Object(I["c"])(e)),this._performanceGeneral(),"业务单元"===this.dimensionMsg?this._unitStatistic():(this.actionProvinceCity({deptId:this.deptObj.id,deptName:this.deptObj.name,selectedDateStr:this.dateTimeUse}),this.$nextTick((function(){var t=s.$refs.goodsCustomList;t.areaString="请选择地区",t.init()})));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_performanceGeneral",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.actionPerformanceGeneral({crmDeptId:this.deptObj.id,selectedDateStr:this.dateTimeUse});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"activated",value:function(){"业务单元"===this.dimensionMsg?this.disabledKeys=[]:this.disabledKeys=[449,431],this.preLoading&&this._unitStatistic()}}]),s}(m["d"]);Object(u["a"])([$.Action],Y.prototype,"actionPerformanceGeneral",void 0),Object(u["a"])([$.Action],Y.prototype,"actionProvinceCity",void 0),Object(u["a"])([$.Mutation],Y.prototype,"SET_DEPTOBJ",void 0),Object(u["a"])([$.Mutation],Y.prototype,"SET_UNITOBJ",void 0),Object(u["a"])([$.Mutation],Y.prototype,"SET_DATETIME",void 0),Object(u["a"])([$.Mutation],Y.prototype,"SET_DATETIMEUSE",void 0),Object(u["a"])([$.Mutation],Y.prototype,"SET_AREASTRING",void 0),Object(u["a"])([$.Getter],Y.prototype,"dateTime",void 0),Object(u["a"])([$.Getter],Y.prototype,"dateTimeUse",void 0),Object(u["a"])([$.Getter],Y.prototype,"deptObj",void 0),Object(u["a"])([$.Getter],Y.prototype,"treeList",void 0),Object(u["a"])([$.Getter],Y.prototype,"provinceLoading",void 0),Y=Object(u["a"])([Object(m["a"])({components:{businessUnit:S,goodsCustomList:N,goodsCustomDetailList:A["a"],depChange:M["a"]},beforeRouteLeave:function(t,e,s){this.goodsListShow?(this.goodsListShow=!1,s(!1)):s(!0)},beforeRouteEnter:function(t,e,s){s((function(t){if("dataCenterHome"===e.name){var a=t.$route.query.dimensionMsg||"业务单元",i=t.$route.query.deptId||"",o=t.$route.query.deptName||"";t.dimensionMsg=a,t.deptId=i,t.deptName=o,t.dimensionActions=[{text:"业务单元",disabled:!0},{text:"客户维度"},{text:"品种维度"}]}"problemGrubDetail"===e.name&&("业务单元"!==t.dimensionMsg?t.$nextTick((function(){t.$refs.goodsCustomList.scrollTopChange()})):t.$nextTick((function(){t.$refs.problemGrubList.scrollTop=t.scrollTop}))),"problemGrubDetail"===e.name?t.preLoading=!1:t.preLoading=!0,s(!0)}))}})],Y);var F=Y,R=F,E=(s("13b6"),Object(y["a"])(R,a,i,!1,null,"6476a1b5",null));e["default"]=E.exports},bb68:function(t,e,s){},bbfc:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goodsCustomDetailList"},[a("div",{staticClass:"goodsCustomDetailList-header"},[a("div",{staticClass:"back",on:{click:t.backClick}},[a("van-button",{attrs:{size:"small",color:"#2271F5",round:"",type:"info"},scopedSlots:t._u([{key:"icon",fn:function(){return[a("img",{staticClass:"icon left",attrs:{src:s("c129"),alt:""}})]},proxy:!0}])},[t._v(" "+t._s(t.customListTitle)+" ")])],1),a("div",{staticClass:"goodsCustomDetailList-dep"},[a("span",{staticClass:"font-14 left fontWeight"},[t._v(t._s(t.deptObj&&t.deptObj.name))]),a("span",[t._v(t._s(t.dateTime))])])]),a("div",{staticClass:"goodsCustomDetailList-middle"},[a("div",{staticClass:"order"},[a("van-popover",{attrs:{trigger:"click",actions:t.typeActions},on:{select:t.onSelect},scopedSlots:t._u([{key:"reference",fn:function(){return[a("span",{staticClass:"left",style:""===t.typeObj.id?"color: #333333":"color: #2271f5"},[t._v(t._s(t.typeObj.text))]),a("van-icon",{attrs:{color:""===t.typeObj.id?"#333333":"#2271f5",size:"14px",name:"arrow-down"}})]},proxy:!0}]),model:{value:t.typeShowPopover,callback:function(e){t.typeShowPopover=e},expression:"typeShowPopover"}})],1),t._m(0)]),a("div",{ref:"goodsCustomDetailList",staticClass:"goodsCustomDetailList-list",class:t.orderRule?"goodsCustomDetailList-list-height":""},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},["客户维度"===t.dimensionMsg?a("van-list",{attrs:{offset:"20",finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e,s){return a("div",{key:s,staticClass:"goodsCustomDetailList-list-item"},[a("div",{staticClass:"goodsCustomDetailList-list-item-title pb-1"},[t._v(t._s(e.customerId)+"/"+t._s(e.customerName))]),a("div",{staticClass:"goodsCustomDetailList-list-item-process"},[a("div",{staticClass:"left"},[a("span",[t._v(t._s(t.$arithmetic.divide(e.customerCurrentYearSalesAmount,1e4).toFixed(1))+"万")]),a("span",[t._v(t._s(t.$arithmetic.divide(e.customerLastYearSalesAmount,1e4).toFixed(1))+"万")])]),a("div",{staticClass:"right"},[a("div",{staticClass:"thisYear yearProcess"},[a("span",{staticClass:"process",style:t.processStyle(e.customerCurrentYearSalesAmount,e.customerLastYearSalesAmount,t.$arithmetic.subtract(e.customerCurrentYearSalesAmount,e.customerLastYearSalesAmount)).nowStyleStr})]),a("div",{staticClass:"lastYear yearProcess",style:0===e.customerLastYearSalesAmount?"width:100%;background:#f5f5f5;":""},[a("span",{staticClass:"process",style:t.processStyle(e.customerCurrentYearSalesAmount,e.customerLastYearSalesAmount,t.$arithmetic.subtract(e.customerCurrentYearSalesAmount,e.customerLastYearSalesAmount)).lastStyleStr})])]),a("div",{staticClass:"rise"},[t._v(" "+t._s(t.$arithmetic.subtract(e.customerCurrentYearSalesAmount,e.customerLastYearSalesAmount)>0?"+":"")+" "+t._s(t.$arithmetic.divide(t.$arithmetic.subtract(e.customerCurrentYearSalesAmount,e.customerLastYearSalesAmount),1e4).toFixed(1))+" ")])]),1===t.activeTab||2===t.activeTab?a("ul",{staticClass:"goodsCustomDetailList-list-item-compareData"},[a("li",[a("span",{staticClass:"title bigData-color-subText"},[t._v("销售贡献")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.multiply(e.saleContribution,100).toFixed(1))+"%")]),a("span",{staticClass:"rise bigData-color-subText"},[t._v(" 较去年 "+t._s(e.saleContributionCompareToLastYear>0?"+":"")+t._s(t.$arithmetic.multiply(e.saleContributionCompareToLastYear,100).toFixed(1))+"p ")])]),a("li",[a("span",{staticClass:"bigData-color-subText"},[t._v("本月同比")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.multiply(e.monthOnMonthPercent,100).toFixed(1))+"%")]),a("span",{staticClass:"bigData-color-subText"},[t._v(" 较本部门 "+t._s(e.monthOnMonthPercentCompareCenter>0?"+":"")+t._s(t.$arithmetic.multiply(e.monthOnMonthPercentCompareCenter,100).toFixed(1))+"p ")])]),a("li",[a("span",{staticClass:"bigData-color-subText"},[t._v("本年同比")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.multiply(e.yearOnYearPercent,100).toFixed(1))+"%")]),a("span",{staticClass:"bigData-color-subText"},[t._v(" 较本部门 "+t._s(e.yearOnYearPercentCompareCenter>0?"+":"")+t._s(t.$arithmetic.multiply(e.yearOnYearPercentCompareCenter,100).toFixed(1))+"p ")])])]):a("ul",{staticClass:"goodsCustomDetailList-list-item-compareData"},[a("li",[a("span",{staticClass:"title bigData-color-subText"},[t._v("销售占比")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.multiply(e.saleContribution,100).toFixed(1))+"%")])]),a("li",[a("span",{staticClass:"bigData-color-subText"},[t._v("月影响金额")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.divide(e.monthInfluenceSalesAmount,1e4).toFixed(1))+"万")])]),a("li",[a("span",{staticClass:"bigData-color-subText"},[t._v("年影响金额")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.divide(e.yearInfluenceSalesAmount,1e4).toFixed(1))+"万")])])])])})),0):a("van-list",{attrs:{offset:"20",finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList,(function(e,s){return a("div",{key:s,staticClass:"goodsCustomDetailList-list-item"},[a("div",{staticClass:"goodsCustomDetailList-list-item-title pb-1"},[t._v(t._s(e.goodsId)+"/"+t._s(e.goodsName))]),a("div",{staticClass:"goodsCustomDetailList-list-item-process"},[a("div",{staticClass:"left"},[a("span",[t._v(t._s(t.$arithmetic.divide(e.yearSalesAmount,1e4).toFixed(1))+"万")]),a("span",[t._v(t._s(t.$arithmetic.divide(e.yearOnYearSalesAmount,1e4).toFixed(1))+"万")])]),a("div",{staticClass:"right"},[a("div",{staticClass:"thisYear yearProcess"},[a("span",{staticClass:"process",style:t.processStyle(e.yearSalesAmount,e.yearOnYearSalesAmount,t.$arithmetic.subtract(e.yearSalesAmount,e.yearOnYearSalesAmount)).nowStyleStr})]),a("div",{staticClass:"lastYear yearProcess",style:0===e.yearOnYearSalesAmount?"width:100%;background:#f5f5f5;":""},[a("span",{staticClass:"process",style:t.processStyle(e.yearSalesAmount,e.yearOnYearSalesAmount,t.$arithmetic.subtract(e.yearSalesAmount,e.yearOnYearSalesAmount)).lastStyleStr})])]),a("div",{staticClass:"rise"},[t._v(" "+t._s(t.$arithmetic.subtract(e.yearSalesAmount,e.yearOnYearSalesAmount)>0?"+":"")+t._s(t.$arithmetic.divide(t.$arithmetic.subtract(e.yearSalesAmount,e.yearOnYearSalesAmount),1e4).toFixed(1))+" ")])]),1===t.activeTab||2===t.activeTab||3===t.activeTab||4===t.activeTab?a("ul",{staticClass:"goodsCustomDetailList-list-item-compareData"},[a("li",[a("span",{staticClass:"title bigData-color-subText"},[t._v("销售贡献")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.multiply(e.salesContribution,100).toFixed(1))+"%")]),a("span",{staticClass:"rise bigData-color-subText"},[t._v(" "+t._s(e.salesContributionCompareLastYear>0?"+":"")+"较去年 "+t._s(t.$arithmetic.multiply(e.salesContributionCompareLastYear,100).toFixed(1))+"p ")])]),a("li",[a("span",{staticClass:"bigData-color-subText"},[t._v("本月同比")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.multiply(e.monthOnMonthPercent,100).toFixed(1))+"%")]),a("span",{staticClass:"bigData-color-subText"},[t._v(" 较本部门 "+t._s(e.monthOnMonthPercentCompareDept>0?"+":"")+t._s(t.$arithmetic.multiply(e.monthOnMonthPercentCompareDept,100).toFixed(1))+"p ")])]),a("li",[a("span",{staticClass:"bigData-color-subText"},[t._v("本年同比")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.multiply(e.yearOnYearPercent,100).toFixed(1))+"%")]),a("span",{staticClass:"bigData-color-subText"},[t._v("较本部门"+t._s(e.yearOnYearPercentCompareDept>0?"+":"")+" "+t._s(t.$arithmetic.multiply(e.yearOnYearPercentCompareDept,100).toFixed(1))+"p")])])]):a("ul",{staticClass:"goodsCustomDetailList-list-item-compareData"},[a("li",[a("span",{staticClass:"title bigData-color-subText"},[t._v("销售占比")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.multiply(e.salesContribution,100).toFixed(1))+"%")])]),a("li",[a("span",{staticClass:"bigData-color-subText"},[t._v("月影响金额")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.divide(e.monthInfluenceSalesAmount,1e4).toFixed(1))+"万")])]),a("li",[a("span",{staticClass:"bigData-color-subText"},[t._v("年影响金额")]),a("span",{staticClass:"number bigData-color-main"},[t._v(t._s(t.$arithmetic.divide(e.yearInfluenceSalesAmount,1e4).toFixed(1))+"万")])])])])})),0)],1),a("van-empty",{directives:[{name:"show",rawName:"v-show",value:!t.dataList.length&&!t.loading,expression:"!dataList.length && !loading"}],attrs:{description:"暂无数据"}})],1),""!==t.typeObj.id?a("van-button",{staticClass:"problemMining",attrs:{color:"#2271F5",round:"",type:"info"},on:{click:t.orderRuleClick},scopedSlots:t._u([{key:"icon",fn:function(){return[a("svg",{staticStyle:{width:"16px",height:"16px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#ytcrm-paixu2"}})])]},proxy:!0}],null,!1,2330346166)},[t._v(" 点击切换成 "+t._s(1===t.orderRule?"「降序」 ":"「升序」")+" ")]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"color"},[s("span",[s("i",{staticClass:"blueLine",staticStyle:{background:"rgba(0, 82, 217, 0.45)"}}),t._v(" 去年同期 ")]),s("span",[s("i",{staticClass:"blueLine"}),t._v(" 今年至今 ")])])}],o=s("1da1"),n=s("d4ec"),r=s("bee2"),c=s("262e"),l=s("2caf"),d=(s("96cf"),s("99af"),s("9ab4")),u=s("1b40"),m=s("8cfc"),p=s("4bb5"),h=s("b32d"),g=Object(p["a"])("bigData"),v=function(t){Object(c["a"])(s,t);var e=Object(l["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.dataList=[],t.typeShowPopover=!1,t.orderRule=2,t.typeObj={id:1,text:"按销售贡献排序"},t.typeActions=[{id:1,text:"按销售贡献排序"},{id:2,text:"按月同比排序"},{id:3,text:"按年同比排序"},{id:4,text:"按净增排序"}],t.scrollTop=0,t.refreshing=!1,t.finished=!1,t.loading=!1,t.page=1,t.pageSize=10,t}return Object(r["a"])(s,[{key:"onSelect",value:function(t){this.typeObj=t,this.orderRule=1,this.onRefresh()}},{key:"processStyle",value:function(t,e,s){var a="",i="";return t<=0&&(a="width:200px;background:#f5f5f5;"),e<=0&&(i="width:200px;background:#f5f5f5;"),e<=0&&t>0&&(a="width:200px;",i="width:200px;background:#f5f5f5;"),e>0&&t<=0&&(a="width:200px;background:#f5f5f5;",i="width:200px;"),e>0&&t>0&&s>0&&(a="width:200px;",i="width:".concat(e/t*200,"px;")),e>0&&t>0&&s<0&&(i="width:200px;",a="width:".concat(t/e*200,"px;")),{nowStyleStr:a,lastStyleStr:i}}},{key:"backClick",value:function(){this.$emit("backClick")}},{key:"listClick",value:function(t){var e=this.$refs.goodsCustomDetailList;this.scrollTop=e.scrollTop,this.$emit("listClick",t)}},{key:"scrollTopChange",value:function(){var t=this;this.$nextTick((function(){t.$refs.goodsCustomDetailList.scrollTop=t.scrollTop}))}},{key:"orderRuleClick",value:function(){this.orderRule=1===this.orderRule?2:1,this.onRefresh()}},{key:"_varietyGetList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1===this.page&&(this.dataList=[]),t.next=3,Object(m["v"])({crmDeptId:this.deptObj.id,selectedDateStr:this.dateTimeUse,goodsIdList:this.goodsCustomObj,goodsType:this.activeTab,pageNum:this.page,pageSize:10,orderField:this.typeObj.id,orderRule:this.orderRule});case 3:e=t.sent,"200"===e.code?(this.dataList=this.dataList.concat(e.data.list),e.data.hasNextPage?this.page++:this.finished=!0,this.loading=!1):(this.$toast.fail(e.msg),this.dataList=[],this.finished=!0,this.loading=!1);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_customerListInfo",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1===this.page&&(this.dataList=[]),t.next=3,Object(m["c"])({crmDeptId:this.deptObj.id,selectedDateStr:this.dateTimeUse,customerIdList:this.goodsCustomObj,customerType:this.activeTab,pageNum:this.page,pageSize:10,orderField:this.typeObj.id,orderRule:this.orderRule});case 3:e=t.sent,"200"===e.code?(this.dataList=this.dataList.concat(e.data.list),e.data.hasNextPage?this.page++:this.finished=!0,this.loading=!1):(this.$toast.fail(e.msg),this.dataList=[],this.finished=!0,this.loading=!1);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,"客户维度"===this.dimensionMsg?this._customerListInfo():this._varietyGetList()}},{key:"mounted",value:function(){"品种维度"===this.dimensionMsg?5!==this.activeTab&&6!==this.activeTab||(this.typeObj={id:5,text:"月影响金额"},this.typeActions=[{id:5,text:"月影响金额"},{id:6,text:"年影响金额"}]):3!==this.activeTab&&4!==this.activeTab||(this.typeObj={id:5,text:"月影响金额"},this.typeActions=[{id:5,text:"月影响金额"},{id:6,text:"年影响金额"}])}},{key:"destroyed",value:function(){Object(h["b"])()}}]),s}(u["d"]);Object(d["a"])([g.Getter],v.prototype,"deptObj",void 0),Object(d["a"])([g.Getter],v.prototype,"dateTime",void 0),Object(d["a"])([g.Getter],v.prototype,"dateTimeUse",void 0),Object(d["a"])([Object(u["c"])()],v.prototype,"goodsCustomObj",void 0),Object(d["a"])([Object(u["c"])()],v.prototype,"dimensionMsg",void 0),Object(d["a"])([Object(u["c"])()],v.prototype,"customListTitle",void 0),Object(d["a"])([Object(u["c"])()],v.prototype,"activeTab",void 0),v=Object(d["a"])([Object(u["a"])({})],v);var b=v,f=b,C=(s("931f"),s("2877")),y=Object(C["a"])(f,a,i,!1,null,"c6d00604",null);e["a"]=y.exports},bf5a:function(t,e,s){},c129:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAAAAXNSR0IArs4c6QAAAThJREFUWEfV2E1OwzAQhuH3ExwDLkVFF/wsodeBI8CqsIEdByLcAmmQKzdqm8SxE0Uess7YjydK5lPExMvMroAnQMCjpK+JSyXLwuLFl5ndAC/AeSxuJF0WL5RRUAzswYVtfAAj7hU4Ozj8L3At6TOjIcW3ZHdwoHMBdyfprXjnzIIsYC1cOMMoMPFYF+3cvsFJYG1csoMecINAL7heoCdcB+gNdwT0iGuBXnE7YEwl7yfjK/M7v+htP8BDAH4DF4tuNX3x5l8AV0AY9ocJZX9mm3742ZUNsNmNOjO7jQH0NEbdS9rO3mrGAu0s9oo8CgsekZ004w3ZG7c8IQfzoBfkWGCt/nbnRP6qyFFg7e9kFrAmMhs4glxL+pgxMAZLi4AJpI9fH22C6M5uX8DYyZCCnkPWWPL32x8vR7ht0Y7aHQAAAABJRU5ErkJggg=="},d4c0:function(t,e,s){},d926:function(t,e,s){"use strict";s.d(e,"c",(function(){return u})),s.d(e,"d",(function(){return m})),s.d(e,"j",(function(){return p})),s.d(e,"i",(function(){return h})),s.d(e,"k",(function(){return g})),s.d(e,"b",(function(){return v})),s.d(e,"e",(function(){return b})),s.d(e,"g",(function(){return f})),s.d(e,"f",(function(){return C})),s.d(e,"a",(function(){return y})),s.d(e,"h",(function(){return O}));s("d3b7"),s("25f0"),s("ac1f"),s("1276");var a=s("5a0c"),i=s.n(a),o=new Date,n=o.getDay(),r=o.getDate(),c=o.getMonth(),l=o.getYear();l+=l<2e3?1900:0;var d=new Date;function u(t){var e=new Date(t),s=e.getFullYear(),a=(e.getMonth()+1).toString(),i=e.getDate().toString();return+a<10&&(a="0"+a),+i<10&&(i="0"+i),s+"-"+a+"-"+i}function m(t){var e=new Date(t),s=e.getFullYear(),a=(e.getMonth()+1).toString(),i=e.getDate().toString();return+a<10&&(a="0"+a),+i<10&&(i="0"+i),s+"/"+a+"/"+i}function p(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var s=new Date(e),a=s.getDay();a=0===a?7:a;var i=s.getDate(),o=s.getMonth(),d=s.getYear();d+=d<2e3?1900:0,t=new Date(d,o,i-(a-1))}else t=new Date(l,c,r-(n-1));return u(t)}function h(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var s=new Date(e),a=s.getDay();a=0===a?7:a;var i=s.getDate(),o=s.getMonth(),d=s.getYear();d+=d<2e3?1900:0,t=new Date(d,o,i+(6-(a-1)))}else t=new Date(l,c,r+(6-(n-1)));return u(t)}function g(t){return 0===i()(t).day()?i()(t).startOf("week").subtract(6,"day").format("YYYY-MM-DD"):i()(t).startOf("week").add(1,"day").format("YYYY-MM-DD")}function v(t){return 0===i()(t).day()?i()(t).endOf("week").subtract(6,"day").format("YYYY-MM-DD"):i()(t).endOf("week").add(1,"day").format("YYYY-MM-DD")}d.setDate(1),d.setMonth(d.getMonth()-1);var b=function(t,e){var s=[],a=t.split("-"),i=e.split("-"),o=new Date(a+" 08:00:00");o.setUTCFullYear(a[0],a[1]-1,a[2]);var n=new Date(i+" 08:00:00");n.setUTCFullYear(i[0],i[1]-1,i[2]);var r,c=o.getTime(),l=n.getTime(),d=864e5;for(r=c;r<=l;)s.push(u(new Date(parseInt(String(r))))),r+=d;return s},f=function(t,e){var s=new Date(t),a="";s.setDate(s.getDate()+e);var i=s.getFullYear(),o=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,n=s.getDate()<10?"0"+s.getDate():s.getDate();return a=i+"-"+o+"-"+n,a},C=function(t){var e,s,a,i,o=new Date(t+"-01-01"),n=o.getFullYear(),r={result0:[],result1:[],result2:[],result3:[],result4:[],result5:[],result6:[]};for(e=1;e<=12;e++){switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:i=31;break;case 4:case 6:case 9:case 11:i=30;break;case 2:i=n%4===0&&n%100!==0||n%400===0?29:28;break}for(s=1;s<=i;s++){o.setMonth(e-1,s),a=o.getDay();var c=o.getFullYear(),l=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,d=o.getDate()<10?"0"+o.getDate():o.getDate();r["result"+a].push(c+"-"+l+"-"+d)}}return r};function y(t){switch(t){case 0:return"日";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";default:break}}var O=function(t){var e=new Date,s=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),o=t.split("-"),n=0;if(a>parseInt(o[0])||a==parseInt(o[0])&&i>parseInt(o[1])){var r=new Date(s+1,parseInt(o[0])-1,parseInt(o[1])).toLocaleDateString(),c=Date.parse(r),l=Date.parse(e.toLocaleDateString());n=(c-l)/864e5}else{var d=new Date(s,parseInt(o[1])-1,parseInt(o[2])).toLocaleDateString(),u=Date.parse(d),m=Date.parse(e.toLocaleDateString());n=(u-m)/864e5}if(n<0){var p=s+1,h=p%4===0&&p%100!==0||p%400===0?366:365;n+=h}return n}},f5ff:function(t,e,s){}}]);