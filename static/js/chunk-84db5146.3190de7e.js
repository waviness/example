(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84db5146"],{3355:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-space-between align-baseline"},[a("div",{staticClass:"color-gray-4",style:"width: "+t.titleWidth+"px"},[t._v(t._s(t.title))]),a("div",{staticClass:"flex-1 textAlignR"},[a("span",{class:t.contentClass},[t._v(t._s(t.content))]),t.hasCopy?a("app-icon",{staticClass:"color-main-2 ml-1 copy-content",attrs:{name:"#ytcrm-fuzhi","data-clipboard-text":t.content},on:{click:t.copy}}):t._e()],1),t._t("default")],2)},i=[],s=a("d4ec"),r=a("bee2"),c=a("262e"),o=a("2caf"),l=(a("a9e3"),a("9ab4")),u=a("1b40"),p=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(s["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a,[{key:"copy",value:function(){var t=this,e=new this.$Clipboard(".copy-content");e.on("success",(function(a){t.$toast.success("复制成功"),e.destroy()})),e.on("error",(function(a){t.$toast.fail("该浏览器不支持自动复制"),e.destroy()}))}}]),a}(u["d"]);Object(l["a"])([Object(u["c"])({type:String,default:""})],p.prototype,"title",void 0),Object(l["a"])([Object(u["c"])({type:[String,Number],default:""})],p.prototype,"content",void 0),Object(l["a"])([Object(u["c"])({type:String,default:"color-black-2"})],p.prototype,"contentClass",void 0),Object(l["a"])([Object(u["c"])({type:Number,default:80})],p.prototype,"titleWidth",void 0),Object(l["a"])([Object(u["c"])({type:Boolean,default:!1})],p.prototype,"hasCopy",void 0),p=Object(l["a"])([Object(u["a"])({})],p);var d=p,f=d,v=a("2877"),b=Object(v["a"])(f,n,i,!1,null,null,null);e["a"]=b.exports},"485e":function(t,e,a){"use strict";a("5e7b")},"5e7b":function(t,e,a){},"7a2d":function(t,e,a){"use strict";a("ea08")},8242:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-100"},[a("div",{staticClass:"background-color-white pa-10"},[a("info-item",{staticClass:"mt-2",attrs:{title:"核算单元"}},[a("div",{staticClass:"tag-blue"},[t._v(t._s(t.detailObj.entryid+"/"+t.detailObj.entryname))])]),a("info-item",{staticClass:"mt-2",attrs:{title:"总单ID",content:t.detailObj.invoiceid}}),a("info-item",{staticClass:"mt-2",attrs:{title:"客户",content:t.detailObj.customeid+"/"+t.detailObj.customename}}),a("info-item",{staticClass:"mt-2",attrs:{title:"分支机构",content:t.detailObj.contactid?t.detailObj.contactid+"/"+t.detailObj.contactname:"-"}}),a("info-item",{staticClass:"mt-2",attrs:{title:"总价格",content:t.detailObj.totolprice}})],1),a("approve-detail-list",{attrs:{list:t.list},on:{change:t.onChange}}),0===+t.detailObj.status?a("div",{staticClass:"footer d-flex justify-center"},[a("van-button",{attrs:{round:"",plain:"",type:"danger"},on:{click:function(e){return t.onApprove(2)}}},[t._v("审核不通过")]),a("van-button",{staticClass:"ml-3",attrs:{round:"",color:"#2271F5"},on:{click:function(e){return t.onApprove(1)}}},[t._v("审核通过")])],1):t._e(),a("van-dialog",{attrs:{confirmButtonColor:"#2271F5",confirmButtonText:"确定","show-cancel-button":""},on:{confirm:t.submitApprove},model:{value:t.approveShow,callback:function(e){t.approveShow=e},expression:"approveShow"}},[a("div",{staticClass:"pa-6 textAlignC"},[a("div",{staticClass:"font-16"},[t._v(" 是否确定将已选的 "),a("span",{staticClass:"color-main-3 font-bold"},[t._v(t._s(t.result.length))]),t._v(" 条细单进行 ")]),a("div",{staticClass:"font-16"},[a("span",{class:["font-bold",2===t.approveType?"color-never":"color-main-3"]},[t._v(t._s(1===t.approveType?"审核通过":2===t.approveType?"审核不通过":""))]),t._v("操作 ")])])])],1)},i=[],s=a("1da1"),r=a("d4ec"),c=a("bee2"),o=a("262e"),l=a("2caf"),u=(a("d81d"),a("96cf"),a("9ab4")),p=a("1b40"),d=a("4bb5"),f=a("3355"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-checkbox-group",{on:{change:t.onChange},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list,(function(e,n){return a("div",{key:n,staticClass:"approve-item background-color-white pa-10",on:{click:function(a){return t.onClick(e.auditstatus,n)}}},[a("div",{staticClass:"d-flex align-center justify-space-between"},[a("div",{staticClass:"d-flex align-center"},[a("div",{staticClass:"tag-blue slh"},[t._v("细单ID "+t._s(e.invoicedtlid))]),2===e.auditstatus?a("div",{staticClass:"tag-red ml-2",staticStyle:{"flex-shrink":"0"}},[t._v("审核未通过")]):1===e.auditstatus?a("div",{staticClass:"tag-green ml-2",staticStyle:{"flex-shrink":"0"}},[t._v("审核通过")]):a("div",{staticClass:"tag-default ml-2",staticStyle:{"flex-shrink":"0"}},[t._v("未审核")])]),a("van-checkbox",{directives:[{name:"show",rawName:"v-show",value:0===e.auditstatus,expression:"data.auditstatus === 0"}],ref:"checkboxes",refInFor:!0,attrs:{name:e}})],1),a("info-item",{staticClass:"mt-2",attrs:{title:"货品",content:e.goodsid+"/"+e.goodsname}}),a("info-item",{staticClass:"mt-2",attrs:{title:"厂家",content:e.zxfactoryname}}),a("info-item",{staticClass:"mt-2",attrs:{title:"规格",content:e.goodstype}}),a("info-item",{staticClass:"mt-2",attrs:{title:"数量",content:e.goodsqty}}),a("info-item",{staticClass:"mt-2",attrs:{title:"价格",content:e.goodsoffer}}),a("info-item",{staticClass:"mt-2",attrs:{title:"细单合计",content:e.dtltotolprice}}),a("info-item",{staticClass:"mt-2",attrs:{title:"效期至",content:e.invaliddate?e.invaliddate.split(" ")[0]:""}}),a("info-item",{staticClass:"mt-2",attrs:{title:"备注",content:e.memo||"-"}})],1)})),0)},b=[],h=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.result=[],t}return Object(c["a"])(a,[{key:"onClick",value:function(t,e){if(0===t){var a=this.$refs.checkboxes;a[e].toggle()}}},{key:"onChange",value:function(){this.$emit("change",this.result)}}]),a}(p["d"]);Object(u["a"])([Object(p["c"])({type:Array,default:[]})],h.prototype,"list",void 0),h=Object(u["a"])([Object(p["a"])({components:{InfoItem:f["a"]}})],h);var m=h,y=m,O=(a("7a2d"),a("2877")),j=Object(O["a"])(y,v,b,!1,null,"f2d18cdc",null),g=j.exports,C=a("a133"),w=Object(d["a"])("app"),k=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.detailObj={},t.loading=!1,t.list=[],t.approveShow=!1,t.approveType=0,t.result=[],t}return Object(c["a"])(a,[{key:"onClick",value:function(t){this.$set(t,"checked",!t.checked)}},{key:"getDetailList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(C["b"])({invoiceid:this.detailObj.invoiceid});case 3:e=t.sent,this.loading=!1,e.success&&(this.list=e.data);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onChange",value:function(t){this.result=t}},{key:"onApprove",value:function(t){this.result.length?(this.approveType=t,this.approveShow=!0):this.$toast("请至少选择一条细单")}},{key:"submitApprove",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.result.map((function(t){var e=t.invoiceid,a=t.invoicedtlid;return{auditstatus:n.approveType,invoiceid:e,invoicedtlid:a}})),t.next=6,Object(C["c"])({wxInvoiceDtlReqList:e});case 6:a=t.sent,a.success&&(this.$toast.success(a.msg||"提交成功"),this.approveShow=!1,this.result=[],this.SET_HADDONEONDETAIL(!0),this.getDetailList());case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){this.detailObj=this.$route.query,this.getDetailList()}}]),a}(p["d"]);Object(u["a"])([w.Mutation],k.prototype,"SET_HADDONEONDETAIL",void 0),k=Object(u["a"])([Object(p["a"])({components:{InfoItem:f["a"],ApproveDetailList:g}})],k);var x=k,_=x,D=(a("485e"),Object(O["a"])(_,n,i,!1,null,"52e0fdd8",null));e["default"]=D.exports},a133:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return u}));var n=a("1da1"),i=(a("96cf"),a("b32d")),s=a("90ae");function r(t){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(s["d"],"/api/orderNew/getOrderDocSaler",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}function o(t){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].formDataPost(s["d"],"/api/orderNew/getOrderDtlSaler",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(t){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(s["d"],"/api/orderNew/updateInvoiceByInvoiceid",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}},ea08:function(t,e,a){}}]);