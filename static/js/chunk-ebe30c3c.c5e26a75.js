(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ebe30c3c"],{"10a0":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return l})),i.d(e,"c",(function(){return o}));var s=i("1da1"),a=(i("96cf"),i("b32d")),n=i("90ae"),r=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].post(n["d"],"/api/crmCollectionClaim/getCollectionClaim",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].post(n["d"],"/api/crmCollectionClaim/getCollectionClaimUrl",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].post(n["d"],"/api/crmCollectionClaim/uploadAppendix",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},5266:function(t,e,i){"use strict";i("a10a")},"53ae":function(t,e,i){"use strict";var s=i("d4ec"),a=i("bee2"),n=i("262e"),r=i("2caf"),l=(i("b0c0"),i("9ab4")),o=i("1b40");o["a"].registerHooks(["beforeRouteEnter"]);var c=function(t){Object(n["a"])(i,t);var e=Object(r["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(a["a"])(i,[{key:"beforeRouteEnter",value:function(t,e,i){i((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),i}(o["d"]);c=Object(l["a"])([Object(o["a"])({})],c),e["a"]=c},"7eec":function(t,e,i){"use strict";i("a2b8")},a10a:function(t,e,i){},a2b8:function(t,e,i){},e85e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full-HW twoPinDic-wms"},[i("div",{staticClass:"white-bg filter-div",class:t.getOtherClass,on:{click:function(e){t.show=!0}}},[i("div",{staticClass:"d-flex align-center justify-space-between common-filter full-height px-3 font-14 filter-button",on:{click:t.showPopup}},[i("span",[t._v("条件筛选")]),i("van-icon",{attrs:{name:"arrow-down"}})],1)]),i("div",{staticClass:"block-div"}),i("van-tabs",{on:{change:t.handleTabChange},model:{value:t.tabActiveIndex,callback:function(e){t.tabActiveIndex=e},expression:"tabActiveIndex"}},[i("van-tab",{attrs:{title:"未上传",name:0}}),i("van-tab",{attrs:{title:"已上传",name:1}})],1),i("div",{staticClass:"overflow-x-hidden card-list"},[i("van-pull-refresh",{staticStyle:{"min-height":"100%"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t.loading||t.dataList.length?t._e():i("app-empty",{staticClass:"pb-6 white-bg",attrs:{description:"暂无数据"}}),t._l(t.dataList,(function(e,s){return i("claim-card",{key:s,attrs:{item:e,index:s,tabActiveIndex:t.tabActiveIndex}})}))],2)],1)],1),i("van-popup",{attrs:{round:"",position:"top"},on:{"click-overlay":t.closePupup},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"popup-line"}),i("van-field",{attrs:{label:"认领总单",placeholder:"请输入认领总单id","input-align":"right",clearable:""},model:{value:t.filterObj.accdocid,callback:function(e){t.$set(t.filterObj,"accdocid",e)},expression:"filterObj.accdocid"}}),i("van-field",{attrs:{label:"客户id|名称",placeholder:"请输入客户id|名称","input-align":"right",clearable:""},model:{value:t.filterObj.custom,callback:function(e){t.$set(t.filterObj,"custom",e)},expression:"filterObj.custom"}}),i("van-field",{attrs:{label:"核算单元",placeholder:"请输入核算单元id｜名称","input-align":"right",clearable:""},model:{value:t.filterObj.entry,callback:function(e){t.$set(t.filterObj,"entry",e)},expression:"filterObj.entry"}}),i("van-field",{attrs:{label:"对方户名",placeholder:"请输入对方户名","input-align":"right",clearable:""},model:{value:t.filterObj.ordercustomname,callback:function(e){t.$set(t.filterObj,"ordercustomname",e)},expression:"filterObj.ordercustomname"}}),i("van-field",{attrs:{label:"使用状态",placeholder:"请选择使用状态","input-align":"right",clearable:""},on:{click:function(e){t.showStatus=!0}},model:{value:t.usestatusString,callback:function(e){t.usestatusString=e},expression:"usestatusString"}}),i("div",{staticClass:"d-flex align-center justify-space-between pr-2 pl-4 py-3"},[i("span",{staticClass:"font-14"},[t._v("挂预付款")]),i("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.filterObj.advancePayFlag,callback:function(e){t.$set(t.filterObj,"advancePayFlag",e)},expression:"filterObj.advancePayFlag"}},[i("van-radio",{attrs:{name:"1"}},[t._v("是")]),i("van-radio",{attrs:{name:"0"}},[t._v("否")])],1)],1),i("div",{staticClass:"d-flex justify-center mt-4 mb-5"},[i("van-button",{staticClass:"popup-button mr-3",attrs:{round:""},on:{click:t.refreshFilter}},[t._v("重置")]),i("van-button",{staticClass:"popup-button",attrs:{round:"",type:"info"},on:{click:t.handleFilter}},[t._v("确认")])],1)],1),i("van-popup",{staticClass:"status-popup",attrs:{round:"",position:"bottom","overlay-class":"status-overLay"},model:{value:t.showStatus,callback:function(e){t.showStatus=e},expression:"showStatus"}},[i("div",{staticClass:"d-flex align-center justify-space-between py-4 px-4 font-16"},[i("div",{staticClass:"font-12",on:{click:t.handleStatusClose}},[t._v("取消")]),i("div",{staticClass:"fontWeight"},[t._v("使用状态")]),i("div",{staticClass:"font-12",on:{click:t.handleStatusOk}},[t._v("确认")])]),t._l(t.statusOptions,(function(e,s){return i("div",{key:s,staticClass:"py-4 font-14 d-flex justify-center status-div",class:t.getClass(e.value)?"active":"",on:{click:function(i){return t.chooseStatus(e.value)}}},[t._v(" "+t._s(e.label)+" ")])})),i("div",{staticClass:"status-block"}),i("div",{staticClass:"py-4 font-14 d-flex justify-center",on:{click:function(e){return t.chooseStatus(null)}}},[t._v("全选")])],2)],1)},a=[],n=i("d4ec"),r=i("bee2"),l=i("262e"),o=i("2caf"),c=(i("e9c4"),i("d3b7"),i("159b"),i("a434"),i("99af"),i("9ab4")),u=i("1b40"),h=i("53ae"),d=i("10a0"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-list mb-2"},[i("div",{staticClass:"common-list-content"},[i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight"},[t._v(t._s(t.item.accdocid))]),i("div",{staticClass:"fontWeight-500 color-gray-4"},[t._v(t._s(t.item.createtime))])]),i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight-500 color-gray-5"},[t.item.customid?i("span",[t._v(t._s(t.item.customid)+"/"+t._s(t.item.customname))]):i("span",[t._v("暂无客户信息")])]),i("div",{staticClass:"fontWeight-500 common-list-minWidth"},[t._v("核算单元 "+t._s(t.item.entryid))])]),i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight-500 color-gray-5 mr-4",staticStyle:{"flex-shrink":"0"}},[t._v("分支机构")]),i("div",{staticClass:"fontWeight-500 common-list-minWidth"},[t._v(" "+t._s(t.item.contactid?t.item.contactid:"--")+t._s(t.item.contactman?"/"+t.item.contactman:"")+" ")])]),i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight-500 color-gray-5"},[t._v("对方户名")]),i("div",{staticClass:"fontWeight-500 common-list-minWidth"},[t._v(t._s(t.item.ordercustomname))])]),i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight-500 color-gray-5"},[t._v("金额")]),i("div",{staticClass:"fontWeight-500 common-list-minWidth"},[t._v(t._s(t.item.total))])]),i("div",{staticClass:"common-list-two"},[i("div",{staticClass:"fontWeight-500 font-14"},[t._v("未认领金额 "+t._s(t.item.notaccmoney))]),i("van-tag",{attrs:{color:"rgba(34, 113, 245, 0.1)","text-color":"#2271F5"}},[t._v(" "+t._s(t.item.presalerid)+"/"+t._s(t.item.presalername)+" ")])],1),i("div",{staticClass:"common-list-two common-list-two-description"},[i("div",{staticClass:"fontWeight-500 color-gray-5"},[t._v("备注")]),i("div",{staticClass:"fontWeight-500 common-list-minWidth"},[t._v(t._s(t.item.description))])])]),i("div",{staticClass:"common-list-button clearfix"},[i("div",{staticClass:"right"},[i("van-button",{staticClass:"ml-4",attrs:{size:"small",color:"#2271F5",round:"",type:"info"},on:{click:t.showDetail}},[t._v(" "+t._s(0===t.tabActiveIndex?"上传照片":"查看照片")+" ")])],1)])])},b=[],v=function(t){Object(l["a"])(i,t);var e=Object(o["a"])(i);function i(){return Object(n["a"])(this,i),e.apply(this,arguments)}return Object(r["a"])(i,[{key:"showDetail",value:function(){var t=this,e={item:this.item,index:this.tabActiveIndex};this.$nextTick((function(){t.$router.push({name:"claimDetail",params:e})}))}}]),i}(u["d"]);Object(c["a"])([Object(u["c"])()],v.prototype,"item",void 0),Object(c["a"])([Object(u["c"])()],v.prototype,"index",void 0),Object(c["a"])([Object(u["c"])()],v.prototype,"tabActiveIndex",void 0),v=Object(c["a"])([Object(u["a"])({})],v);var m=v,p=m,g=(i("5266"),i("2877")),O=Object(g["a"])(p,f,b,!1,null,"59666190",null),j=O.exports,y=function(t){Object(l["a"])(i,t);var e=Object(o["a"])(i);function i(){var t;return Object(n["a"])(this,i),t=e.apply(this,arguments),t.show=!1,t.filterObj={accdocid:"",custom:"",entry:"",ordercustomname:"",usestatusList:["1","2","3"],advancePayFlag:"1"},t.usestatusString="未认领,部分认领等",t.originFilter={accdocid:"",custom:"",entry:"",ordercustomname:"",usestatusList:["1","2","3"],advancePayFlag:"1"},t.tabActiveIndex=0,t.nowItem={},t.showStatus=!1,t.statusOptions=[{label:"临时",value:"0"},{label:"未认领",value:"1"},{label:"部分认领",value:"2"},{label:"认领完成",value:"3"},{label:"手工认领",value:"4"}],t}return Object(r["a"])(i,[{key:"getClass",get:function(){var t=this;return function(e){return t.filterObj.usestatusList.indexOf(e)>-1}}},{key:"getOtherClass",get:function(){var t="";return this.show?t="show-div":(this.filterObj.accdocid||this.filterObj.custom||this.filterObj.entry||this.filterObj.ordercustomname||this.filterObj.usestatusList.length>0||"1"==this.filterObj.advancePayFlag)&&(t="have-filter"),t}},{key:"showPopup",value:function(){this.originFilter=JSON.parse(JSON.stringify(this.filterObj)),this.show=!0}},{key:"handleTabChange",value:function(){this.handleStatusRefresh(),this.onRefresh()}},{key:"handleStatusRefresh",value:function(){if(1==this.tabActiveIndex)this.filterObj.usestatusList=[],this.usestatusString="",this.filterObj.advancePayFlag="0";else{var t=JSON.parse(localStorage.getItem("permissions")||""),e=t.some((function(t){return"collectionClaimWx-all"===t}));e?(this.filterObj.entry=3,this.filterObj.usestatusList=["1"],this.usestatusString="未认领"):(this.filterObj.usestatusList=["1","2","3"],this.usestatusString="未认领,部分认领等"),this.filterObj.advancePayFlag="1"}}},{key:"onRefresh",value:function(){this.page=1,this.finished=!1,this.refreshing=!1,this._getCollectionClaim()}},{key:"onLoad",value:function(){var t=this;this.$nextTick((function(){t._getCollectionClaim()}))}},{key:"refreshFilter",value:function(){this.filterObj.accdocid="",this.filterObj.custom="",this.filterObj.entry="",this.filterObj.ordercustomname="",this.handleStatusRefresh()}},{key:"handleFilter",value:function(){this.show=!1,this.filterObj.accdocid===this.originFilter.accdocid&&this.filterObj.custom===this.originFilter.custom&&this.filterObj.entry===this.originFilter.entry&&this.filterObj.ordercustomname===this.originFilter.ordercustomname&&this.filterObj.usestatusList===this.originFilter.usestatusList&&this.filterObj.advancePayFlag===this.originFilter.advancePayFlag||(this.page=1,this.finished=!1,this._getCollectionClaim())}},{key:"closePupup",value:function(){this.filterObj.accdocid=this.originFilter.accdocid,this.filterObj.custom=this.originFilter.custom,this.filterObj.entry=this.originFilter.entry,this.filterObj.ordercustomname=this.originFilter.ordercustomname,this.filterObj.usestatusList=this.originFilter.usestatusList,this.filterObj.advancePayFlag=this.originFilter.advancePayFlag,this.getFilterString()}},{key:"handleStatusClose",value:function(){this.showStatus=!1,this.filterObj.usestatusList=this.originFilter.usestatusList}},{key:"handleStatusOk",value:function(){this.showStatus=!1,this.getFilterString()}},{key:"getFilterString",value:function(){this.filterObj.usestatusList.length>2?this.usestatusString=this.statusOptions[parseInt(this.filterObj.usestatusList[0])].label+","+this.statusOptions[parseInt(this.filterObj.usestatusList[1])].label+"等":0==this.filterObj.usestatusList.length?this.usestatusString="":this.usestatusString=this.statusOptions[parseInt(this.filterObj.usestatusList[0])].label+(this.filterObj.usestatusList[1]?","+this.statusOptions[parseInt(this.filterObj.usestatusList[1])].label:"")}},{key:"chooseStatus",value:function(t){var e=this;t?this.filterObj.usestatusList.indexOf(t)>-1?this.filterObj.usestatusList.splice(this.filterObj.usestatusList.indexOf(t),1):this.filterObj.usestatusList.push(t):this.filterObj.usestatusList.length==this.statusOptions.length?this.filterObj.usestatusList=[]:(this.filterObj.usestatusList=[],this.statusOptions.forEach((function(t){e.filterObj.usestatusList.push(t.value)})))}},{key:"_getCollectionClaim",value:function(){var t=this;this.loading=!0,1===this.page&&(this.dataList=[]),Object(d["a"])({custom:this.filterObj.custom,entry:this.filterObj.entry,accdocid:this.filterObj.accdocid,ordercustomname:this.filterObj.ordercustomname,usestatusList:this.filterObj.usestatusList,advancePayFlag:this.filterObj.advancePayFlag,uploadstatus:this.tabActiveIndex,pageNum:this.page,pageSize:10}).then((function(e){"4000"===e.code&&(t.finished=!0,t.loading=!1,t.$toast.fail(e.msg)),t.dataList=t.dataList.concat(e.data.list),t.loading=!1,e.data.hasNextPage?t.page++:t.finished=!0}))}},{key:"activated",value:function(){var t=this,e=JSON.parse(localStorage.getItem("permissions")||""),i=e.some((function(t){return"collectionClaimWx-all"===t}));i&&(this.filterObj.entry=3,this.filterObj.usestatusList=["1"]),"1"===sessionStorage.getItem("claimChange")&&(sessionStorage.removeItem("claimChange"),this.$nextTick((function(){t.onRefresh()})))}},{key:"mounted",value:function(){var t=JSON.parse(localStorage.getItem("permissions")||""),e=t.some((function(t){return"collectionClaimWx-all"===t}));e&&(this.filterObj.entry=3,this.filterObj.usestatusList=["1"],this.usestatusString="未认领"),this.onRefresh()}}]),i}(Object(u["b"])(h["a"]));y=Object(c["a"])([Object(u["a"])({components:{claimCard:j}})],y);var C=y,k=C,x=(i("7eec"),Object(g["a"])(k,s,a,!1,null,"0a0a9f2c",null));e["default"]=x.exports}}]);