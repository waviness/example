(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e9f5c95"],{"22bc":function(e,t,a){},"437a":function(e,t,a){"use strict";var i=a("bee2"),s=a("d4ec"),n=a("262e"),c=a("2caf"),o=a("9ab4"),r=a("1b40"),l=a("4bb5"),v=Object(l["a"])("app"),d=Object(l["a"])("crm");r["a"].registerHooks(["beforeRouteEnter"]);var b=function(e){Object(n["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.filterShow=!1,e.filterActive=!1,e.tabType=0,e}return Object(i["a"])(a)}(r["d"]);Object(o["a"])([v.Getter],b.prototype,"userInfor",void 0),Object(o["a"])([d.Mutation],b.prototype,"SET_DETAILOBJ",void 0),Object(o["a"])([v.Mutation],b.prototype,"SET_QUERYPARAMA",void 0),Object(o["a"])([v.Mutation],b.prototype,"SET_HADDONEONDETAIL",void 0),Object(o["a"])([v.Getter],b.prototype,"hadDoneOnDetail",void 0),b=Object(o["a"])([Object(r["a"])({})],b),t["a"]=b},"53ae":function(e,t,a){"use strict";var i=a("d4ec"),s=a("bee2"),n=a("262e"),c=a("2caf"),o=(a("b0c0"),a("9ab4")),r=a("1b40");r["a"].registerHooks(["beforeRouteEnter"]);var l=function(e){Object(n["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(s["a"])(a,[{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),a}(r["d"]);l=Object(o["a"])([Object(r["a"])({})],l),t["a"]=l},"6a39f":function(e,t,a){"use strict";a("22bc")},9985:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-sticky",[a("div",{staticClass:"header white-bg"},[0===+e.tabType?a("van-search",{attrs:{clearable:"",placeholder:"请输入客户单位名称|ID"},on:{clear:e.onRefresh,search:e.onRefresh},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}):e._e(),1===+e.tabType?a("div",{staticClass:"px-10 pb-2 pt-10 screenBox"},[a("div",{class:["pa-10 common-filter",e.filterShow?"color-main-2":"",e.filterActive?"common-filter--active":""],on:{click:function(t){e.filterShow=!e.filterShow}}},[a("div",[e._v("条件筛选")]),a("van-icon",{attrs:{name:"arrow-"+(e.filterShow?"up":"down"),size:"16px"}})],1)]):e._e(),a("div",{staticClass:"font-14 pa-2 fontWeight van-popup-bg"},[e._v(" "+e._s(2===+e.active?"应收账款":0===e.tabType?"逾期账款":"长账龄")+e._s(e.$route.query.date)+" ")]),a("van-tabs",{directives:[{name:"show",rawName:"v-show",value:(0===+e.entryObj.level||1===+e.entryObj.level)&&1===+e.active,expression:"(+entryObj.level === 0 || +entryObj.level === 1) && +active === 1"}],attrs:{color:"#2271F5"},on:{click:e.tabTypeClick},model:{value:e.tabType,callback:function(t){e.tabType=t},expression:"tabType"}},e._l(e.tabList,(function(e){return a("van-tab",{key:e,attrs:{title:e}})})),1)],1)]),a("div",{attrs:{id:"filterContainer"}},[a("div",{staticClass:"py-2 px-3 background-color-white"},[a("div",{staticClass:"numberWarp px-3 py-2"},[a("div",{staticClass:"fontWeight-500"},[a("span",{staticClass:"color-gray-5"},[e._v(e._s(e.entryObj.name))]),a("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.active&&0===e.tabType,expression:"active === '1' && tabType === 0"}],staticClass:"color-black-1"},[e._v(" 截止昨日，逾期账款总金额 ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"2"===e.active,expression:"active === '2'"}],staticClass:"color-gray-4"},[e._v(e._s(e.entryObj.date))]),a("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.active&&1===e.tabType,expression:"active === '1' && tabType === 1"}],staticClass:"color-gray-4"},[e._v(" 长账龄总金额("+e._s(e.entryObj.date)+") ")])]),"2"===e.active?a("div",{staticClass:"header-amount-row mt-2"},[a("div",{staticClass:"header-amount-col"},[a("div",{staticClass:"header-amount-main color-main-3"},[e._v(e._s(e.overdueObj.thisAmount))]),a("div",{staticClass:"header-amount-label color-gray-5"},[e._v("本月应收账款")])]),a("div",{staticClass:"header-amount-divider"}),a("div",{staticClass:"header-amount-col"},[a("div",{staticClass:"header-amount-main color-main-3"},[e._v(e._s(e.overdueObj.amount))]),a("div",{staticClass:"header-amount-label color-gray-5"},[e._v("总应收账款")])])]):a("div",{staticClass:"font-26 py-2",class:"1"===e.active?"color-red":"2"===e.active?"color-main":""},[e._v(" "+e._s(0===e.tabType?e.overdueObj.overdueAmount:e.overdueObj.amount)+" ")])])]),e.entryObj.id&&e.active?a("van-pull-refresh",{staticClass:"pt-10",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{staticClass:"px-2",attrs:{offset:20,finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e.loading||e.dataList.length?e._e():a("app-empty",{staticClass:"mt-6 white-bg"}),0===+e.tabType?a("div",{key:"yqzk0"},e._l(e.dataList,(function(t,i){return a("div",{key:i,staticClass:"gray-block box-shadow mb-2",on:{click:function(a){return e.cardClick(t)}}},[a("div",{staticClass:"white-block pa-10"},[a("div",{staticClass:"d-flex justify-space-between"},[a("div",{staticClass:"d-flex align-center"},[a("div",{class:["type-circle mr-2",e.typeClass]}),a("div",{staticClass:"font-14 font-bold"},[e._v(e._s(e.typeName))])]),a("div",[e._v(e._s(t.saleId)+"/"+e._s(t.saleName))])]),a("div",{staticClass:"d-flex justify-space-between font-bold py-2"},[a("div",{staticClass:"d-flex font-14 align-baseline"},[e._v(e._s(t.customId)+"/"+e._s(t.customName))])]),a("div",{staticClass:"color-main-3"},[a("div",{staticClass:"pb-2"},[e._v(e._s(t.entryId)+"/"+e._s(t.entryName))])]),1===+e.active?a("div",{staticClass:"d-flex font-14"},[a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"pb-1 color-second"},[e._v("逾期金额")]),a("span",{staticClass:"pb-1 font-16 color-gray-5"},[e._v(e._s(t.overdueAmount))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"pb-1 color-second"},[e._v("预收未处理")]),a("span",{staticClass:"color-red pb-1 font-16"},[e._v(e._s(t.advanceAmount||0))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"pb-1 color-second"},[e._v("最长逾期天数")]),a("span",{staticClass:"pb-1 color-gray-5 font-16"},[e._v(e._s(t.maxDay)+"天")])])]):e._e(),2===+e.active?a("div",{staticClass:"font-14"},[a("div",{staticClass:"d-flex mb-4"},[a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"pb-1 color-second"},[e._v("总应收账款")]),a("span",{staticClass:"pb-1 color-gray-5 font-16 font-blod"},[e._v(e._s(t.receivable))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"pb-1 color-second"},[e._v("逾期金额")]),a("span",{staticClass:"pb-1 color-gray-5 font-16 font-blod"},[e._v(e._s(t.overdueAmount))])])]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"pb-1 color-second"},[e._v("本月应收账款")]),a("span",{staticClass:"pb-1 color-gray-5 font-16 font-blod"},[e._v(e._s(t.thisReceivable))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"pb-1 color-second"},[e._v("预收未处理")]),a("span",{staticClass:"color-red pb-1 font-16 font-blod"},[e._v(e._s(t.advanceAmount||0))])])])]):e._e()])])})),0):e._e(),1===+e.tabType?a("div",{key:"czl1"},e._l(e.dataList,(function(t,i){return a("div",{key:i,staticClass:"gray-block box-shadow mb-2",on:{click:function(a){return e.cardClick(t)}}},[a("div",{staticClass:"white-block pa-10"},[a("div",{staticClass:"d-flex align-center justify-space-between"},[a("div",{staticClass:"d-flex align-center"},[a("div",{staticClass:"type-circle mr-2 background-color-red"}),a("div",{staticClass:"font-12 color-red"},[e._v("一年期以上长账龄")])]),a("div",{staticClass:"companyName"},[e._v(e._s(t.entryId)+"/"+e._s(t.entryName))])]),a("div",{staticClass:"d-flex justify-space-between"},[a("div",{staticClass:"font-14 color-gray-5 py-1 fontWeight",staticStyle:{width:"60%"}},[e._v(" "+e._s(t.customId)+"/"+e._s(t.customName)+" ")]),a("div",{staticClass:"py-1 dept"},[e._v(e._s(t.deptName))])]),a("div",{staticClass:"flex-1 d-flex flex-column"},[a("span",{staticClass:"pb-1 color-second pb-1"},[e._v("总金额")]),a("span",{staticClass:"pb-1 color-gray-5 font-16"},[e._v(e._s(t.receivable))])])])])})),0):e._e(),a("div",{staticClass:"sortBtn",on:{click:function(t){e.sheetShow=!0}}},[e._v("排序方式")])],1)],1):e._e()],1),a("van-popup",{staticStyle:{top:"60px"},attrs:{position:"top"},on:{"click-overlay":e.closePupup},model:{value:e.filterShow,callback:function(t){e.filterShow=t},expression:"filterShow"}},[a("van-field",{attrs:{label:"核算单元",placeholder:"点击输入核算单元ID/名称","input-align":"right",clearable:""},model:{value:e.filterObj.entry,callback:function(t){e.$set(e.filterObj,"entry",t)},expression:"filterObj.entry"}}),a("van-field",{attrs:{label:"客户ID/名称",placeholder:"点击输入客户ID/名称","input-align":"right",clearable:""},model:{value:e.filterObj.custom,callback:function(t){e.$set(e.filterObj,"custom",t)},expression:"filterObj.custom"}}),a("van-field",{scopedSlots:e._u([{key:"input",fn:function(){return[a("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:e.filterObj.checkboxGroup,callback:function(t){e.$set(e.filterObj,"checkboxGroup",t)},expression:"filterObj.checkboxGroup"}},[a("van-checkbox",{attrs:{name:"isInner"}},[e._v("剔除内部单位")]),a("van-checkbox",{attrs:{name:"isNegative"}},[e._v("剔除负数长账龄")])],1)]},proxy:!0}])}),a("div",{staticClass:"d-flex justify-center mt-4 mb-5"},[a("van-button",{staticClass:"popup-button mr-3",attrs:{round:""},on:{click:e.refreshFilter}},[e._v("重置")]),a("van-button",{staticClass:"popup-button",attrs:{round:"",type:"info"},on:{click:e.handleFilter}},[e._v("确认")])],1)],1),a("van-action-sheet",{attrs:{actions:2==e.active?e.ysAction:0==e.tabType?e.yqAction:e.czlAction,"cancel-text":"取消","close-on-click-action":""},on:{select:e.sheetSelect},model:{value:e.sheetShow,callback:function(t){e.sheetShow=t},expression:"sheetShow"}})],1)},s=[],n=a("1da1"),c=a("5530"),o=a("d4ec"),r=a("bee2"),l=a("262e"),v=a("2caf"),d=(a("96cf"),a("a9e3"),a("caad"),a("2532"),a("b0c0"),a("d3b7"),a("d81d"),a("99af"),a("9ab4")),b=a("1b40"),u=a("437a"),h=a("53ae"),p=a("2279"),f=a("5b92"),y=a("4bb5"),m=Object(y["a"])("app"),O=function(e){Object(l["a"])(a,e);var t=Object(v["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.keywords="",e.active=e.$route.query.active,e.entryObj={},e.tabList=["逾期账款","长账龄"],e.overdueObj={},e.sheetShow=!1,e.yqAction=[{name:"逾期金额升序"},{name:"逾期金额降序"}],e.czlAction=[{name:"总金额升序"},{name:"总金额降序"}],e.ysAction=[{name:"应收金额升序"},{name:"应收金额降序"}],e.filterObj={entry:"",custom:"",checkboxGroup:["isInner","isNegative"]},e.overdueAmount="",e.receivable="",e.longAccounts="",e}return Object(r["a"])(a,[{key:"tabTypeClick",value:function(e){this.tabType=e,0===+this.tabType?this._queryBigDataOverdueAmountDetail(this.entryObj):this._queryBigDataReceivableDetail(this.entryObj),this.onRefresh()}},{key:"closePupup",value:function(){this.filterObj={entryld:"",custom:"",checkboxGroup:["isInner","isNegative"]},this.filterShow=!1}},{key:"refreshFilter",value:function(){this.filterObj={entryld:"",custom:"",checkboxGroup:["isInner","isNegative"]},this.filterShow=!1}},{key:"handleFilter",value:function(){var e=Object(c["a"])(Object(c["a"])({},this.filterObj),{},{isInner:Number(this.filterObj.checkboxGroup.includes("isInner")),isNegative:Number(this.filterObj.checkboxGroup.includes("isNegative"))});delete e.checkboxGroup,this.filterShow=!1,this.refreshing=!0,this.onLoad(e)}},{key:"sheetSelect",value:function(e){var t={order:"逾期金额升序"===e.name||"总金额升序"===e.name||"应收金额升序"===e.name?1:2};this.refreshing=!0,this.onLoad(t)}},{key:"typeName",get:function(){var e="";return 2===+this.active?e="到本月底即将逾期":1===+this.active&&(e="已逾期"),e}},{key:"typeClass",get:function(){var e="";return 2===+this.active?e="orange-2":1===+this.active&&(e="red"),"background-color-".concat(e)}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.dataList=[],this.page=1,this.onLoad()}},{key:"onLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.loading=!0,this.getDataList(e)}},{key:"getDataList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,i,s,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,this.entryObj=Object(c["a"])({},this.$route.query),a=Object(c["a"])({selectDate:this.$dayjs().format("YYYY-MM-DD"),pageNum:this.page,pageSize:20,custom:this.keywords,deptId:this.entryObj.id,flag:0,order:2,isInner:1,isNegative:0},t),e.next=6,2===+this.active?Object(p["Z"])(a):1===+this.active?0===+this.tabType?Object(p["X"])(a):1===this.tabType?Object(p["fb"])(a):Promise.reject("无效的tab类型"):Promise.reject("无效的active状态");case 6:i=e.sent,i.success?(s=i.data.list.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{advanceAmount:Object(f["b"])(e.advanceAmount),receivable:Object(f["b"])(e.receivable),thisReceivable:e.thisReceivable?Object(f["b"])(e.thisReceivable):"--",receivable12year:Object(f["b"])(e.receivable12year),receivable23year:Object(f["b"])(e.receivable23year),receivable34year:Object(f["b"])(e.receivable34year),receivable45year:Object(f["b"])(e.receivable45year),receivable5year:Object(f["b"])(e.receivable5year),overdueAmount:Object(f["b"])(e.overdueAmount)})})),this.dataList=this.dataList.concat(s),this.page++,this.finished=!i.data.hasNextPage):this.finished=!0,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),this.finished=!0;case 14:return e.prev=14,this.loading=!1,this.refreshing=!1,e.finish(14);case 18:case"end":return e.stop()}}),e,this,[[1,10,14,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"cardClick",value:function(e){this.SET_DETAILINFOR(e),this.$router.push({name:"salesLineOverdueDetail",query:{active:0===this.tabType?this.active:"3"}})}},{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"salesLineHighRise0"!==t.name&&"salesLineHighRise1"!==t.name&&"salesLineOverduePermissionPage"!==t.name&&"salesLineMiddleRise2"!==t.name&&"salesLineMiddleRise3"!==t.name&&"salesLineMiddleRise3Inner"!==t.name&&"salesLineMiddleRise4"!==t.name&&"salesLineMiddleRise4Inner"!==t.name||(e.tabType=0,e.active=e.$route.query.active,e.tabType=e.$route.query.tabType?+e.$route.query.tabType:0,e.dataList=[],e.overdueObj={},e.onRefresh(),e.entryObj=Object(c["a"])({},e.$route.query),1===+e.active&&0===+e.tabType?e._queryBigDataOverdueAmountDetail(e.entryObj):e._queryBigDataReceivableDetail(e.entryObj),e.filterShow=!1)}))}},{key:"_queryBigDataOverdueAmountDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p["V"])({deptId:t.id,selectDate:this.$dayjs().format("YYYY-MM-DD")}).then((function(t){e.overdueObj.overdueAmount=Object(f["c"])(t.data.parent.overdueAmount),e.$forceUpdate()}))}},{key:"_queryBigDataReceivableDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p["ab"])({deptId:t.id,type:2===+this.active?1:2}).then((function(t){e.overdueObj.amount=Object(f["c"])(t.data.parent.amount),e.overdueObj.thisAmount=Object(f["c"])(t.data.parent.thisAmount),e.$forceUpdate()}))}},{key:"created",value:function(){this.active=this.$route.query.active,this.dataList=[],this.overdueObj={},this.tabType=this.$route.query.tabType?+this.$route.query.tabType:0,this.entryObj=Object(c["a"])({},this.$route.query),1===+this.active?this._queryBigDataOverdueAmountDetail(this.entryObj):this._queryBigDataReceivableDetail(this.entryObj)}}]),a}(Object(b["b"])(u["a"],h["a"]));Object(d["a"])([m.Mutation],O.prototype,"SET_DETAILINFOR",void 0),O=Object(d["a"])([Object(b["a"])({})],O);var j=O,_=j,g=(a("6a39f"),a("2877")),k=Object(g["a"])(_,i,s,!1,null,"81a71502",null);t["default"]=k.exports}}]);