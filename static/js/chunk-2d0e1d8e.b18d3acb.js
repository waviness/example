(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1d8e"],{"7bd1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-8"},[a("DepartIndex",{ref:"departIndex2",attrs:{enterDeptObj:e.deptObj,deptLevel:2,dateTime:e.$dayjs(e.csjNowTime).format("YYYY-MM-DD"),departNameTabs:e.departNameTabs,salesDataObj:e.salesDataObj,echartsWarpName:"echartsDurgWarp"},on:{tabsChange:e.tabsChange,calendarClick:e.calendarClick,departClick:e.departClick}}),a("LineWarp",{attrs:{enterDeptObj:e.deptObj,deptLevel:1,dateTime:e.$dayjs(e.csjNowTime).format("YYYY-MM-DD")}}),a("van-calendar",{attrs:{"default-date":e.csjNowTime,"min-date":new Date(2021,0,1),"max-date":new Date((new Date).getTime()-864e5),"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{select:e.selectCalendar},model:{value:e.calendarShow,callback:function(t){e.calendarShow=t},expression:"calendarShow"}})],1)},d=[],r=a("ade3"),c=a("1da1"),i=a("d4ec"),s=a("bee2"),o=a("262e"),p=a("2caf"),l=(a("fb6a"),a("d81d"),a("b0c0"),a("96cf"),a("9ab4")),m=a("1b40"),u=a("3268"),b=a("32b4"),h=a("5420"),j=a("5b92"),f=function(e){Object(o["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.calendarShow=!1,e.deptObj={},e.salesDataObj={},e.departNameTabs=[],e.nowTabValue=0,e}return Object(s["a"])(a,[{key:"selectCalendar",value:function(e){this.calendarConfirm(e)}},{key:"calendarConfirm",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.calendarShow=!1,this.SET_CSJNOWTIME(t),this.SET_CSJCHANGETIME(!0),this._getQuickOverviewMix({date:this.$dayjs(this.csjNowTime).format("YYYY-MM-DD"),deptLevel:1,deptId:this.deptObj.deptId,deptName:this.deptObj.deptName,full:!0}).then((function(e){a.init(e.data)}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"calendarClick",value:function(){this.calendarShow=!0}},{key:"departClick",value:function(e,t,a){this.$router.push({name:"SalesCenter",params:{deptId:e.deptId,deptName:e.showName}}),this.SET_CSJDEPARTOBJ(Object(r["a"])({},a,t))}},{key:"shortNameGet",get:function(){return function(e){return"杭州销售中心"===e?"杭销":e.slice(0,2)}}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=t||this.csjDepartObj[1];this.salesDataObj={loading:!0,cdmoney:Object(j["d"])(a.cdmoney,1),cmcircleOnPercent:Object(j["d"])(a.cmcircleOnPercent,2),cmmoney:Object(j["d"])(a.cmmoney,1),cmonPercent:Object(j["d"])(a.cmonPercent,2),cmperiodIncrease:Object(j["d"])(a.cmperiodIncrease,1),cymoney:Object(j["d"])(a.cymoney,1),cyonPercent:Object(j["d"])(a.cyonPercent,2),cyperiodIncrease:Object(j["d"])(a.cyperiodIncrease,1),increaseGoal:Object(j["d"])(a.increaseGoal,2),comparedTarget:a.increaseGoal?Object(j["d"])(this.$arithmetic.subtract(a.cyonPercent,a.increaseGoal),2):"--"},this.departNameTabs=a.sonDeptList.map((function(t){return{deptId:t.deptId,deptLevel:t.deptLevel,deptParentId:t.deptParentId,shortName:e.shortNameGet(t.deptName),showName:t.deptName,hasClick:t.drillDownFlag}})),this.$nextTick((function(){e.$refs.departIndex2._getQuickOverview({deptName:e.departNameTabs[e.nowTabValue].showName,deptId:e.departNameTabs[e.nowTabValue].deptId}),e.$refs.departIndex2._getMonthCumulativeMoney({deptName:e.deptObj.deptName,deptId:e.deptObj.deptId})}))}},{key:"tabsChange",value:function(e){this.nowTabValue=e}},{key:"mounted",value:function(){this.deptObj=this.$route.params,this.init()}},{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"chashuju"===t.name&&(e.$route.params.deptId&&(e.deptObj=e.$route.params),e.init()),"SalesCenter"!==t.name&&"DimensionIndex"!==t.name||(e.$nextTick((function(){var t=e.$refs.departIndex2;t.myChart||t._getMonthCumulativeMoney({deptName:e.deptObj.deptName,deptId:e.deptObj.deptId})})),e.csjChangeTime&&e._getQuickOverviewMix({date:e.$dayjs(e.csjNowTime).format("YYYY-MM-DD"),deptLevel:1,deptId:e.deptObj.deptId,deptName:e.deptObj.deptName,full:!0}).then((function(t){e.init(t.data)})))}))}}]),a}(Object(m["b"])(h["a"]));f=Object(l["a"])([Object(m["a"])({components:{DepartIndex:u["a"],LineWarp:b["a"]}})],f);var O=f,v=O,w=a("2877"),y=Object(w["a"])(v,n,d,!1,null,"e7006a12",null);t["default"]=y.exports}}]);