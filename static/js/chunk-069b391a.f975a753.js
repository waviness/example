(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-069b391a"],{"0238":function(t,e,i){"use strict";i("26e4")},1601:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gray-block box-shadow"},[i("div",{staticClass:"white-block"},[t.isTogether&&t.data.togetherUserName?i("div",{staticClass:"background-color-main-2 font-bold visit-name"},[i("div",{staticClass:"mr-4"},[t._v(t._s(1===t.data.taskType?"随访人":"协访人"))]),i("div",[t._v(t._s(t.data.togetherUserName))])]):t._e(),i("div",{staticClass:"inner-block"},[i("div",{staticClass:"d-flex justify-space-between align-baseline font-bold"},[i("div",{staticClass:"font-14"},[t._v(t._s(t.data.labelName))]),i("div",{staticClass:"color-gray"},[t._v(" "+t._s(t.data.visitTime?t.data.visitTime.slice(0,t.data.visitTime.length-3):"")+" ")])]),i("info-item",{staticClass:"mt-4",attrs:{title:"医院",content:t.data.companyName}}),t.data.expectTimeStr?i("info-item",{staticClass:"mt-2",attrs:{title:"预期时间",content:t.data.expectTimeStr}}):t._e(),i("info-item",{staticClass:"my-2",attrs:{title:"业务员",content:t.data.userName}})],1)]),i("div",{staticClass:"inner-block"},[i("div",{},[t._v("备注")]),i("div",{staticClass:"mt-1"},[t._v(t._s(t.data.remark||"无"))])])])},s=[],n=i("bee2"),c=i("d4ec"),r=i("262e"),o=i("2caf"),l=i("9ab4"),d=i("1b40"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex justify-space-between align-baseline"},[i("div",{staticClass:"color-gray-4",staticStyle:{width:"80px"}},[t._v(t._s(t.title))]),i("div",{staticClass:"flex-1 font-bold textAlignR"},[t._v(t._s(t.content))])])},v=[],h=function(t){Object(r["a"])(i,t);var e=Object(o["a"])(i);function i(){return Object(c["a"])(this,i),e.apply(this,arguments)}return Object(n["a"])(i)}(d["d"]);Object(l["a"])([Object(d["c"])({type:String,default:""})],h.prototype,"title",void 0),Object(l["a"])([Object(d["c"])({type:String,default:""})],h.prototype,"content",void 0),h=Object(l["a"])([Object(d["a"])({})],h);var f=h,p=f,b=i("2877"),m=Object(b["a"])(p,u,v,!1,null,null,null),x=m.exports,y=function(t){Object(r["a"])(i,t);var e=Object(o["a"])(i);function i(){return Object(c["a"])(this,i),e.apply(this,arguments)}return Object(n["a"])(i)}(d["d"]);Object(l["a"])([Object(d["c"])({type:Object,default:{}})],y.prototype,"data",void 0),Object(l["a"])([Object(d["c"])({type:Boolean,default:!1})],y.prototype,"isTogether",void 0),y=Object(l["a"])([Object(d["a"])({components:{InfoItem:x}})],y);var _=y,j=_,k=(i("db1b"),Object(b["a"])(j,a,s,!1,null,"69153aee",null));e["a"]=k.exports},"26e4":function(t,e,i){},"8c6c":function(t,e,i){},c0f6:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"key-topic"},[a("van-sticky",[a("div",{staticClass:"key-topic-sticky"},[a("div",{class:["key-topic-filter",e.treeShow?"color-main-2":"","条件筛选"!==e.filterText?"key-topic-filter--active":""],on:{click:function(){t.treeShow=!t.treeShow}}},[a("div",[e._v(e._s(0!==e.activeIndex?e.filterText:"条件筛选"))]),a("van-icon",{attrs:{name:"arrow-"+(e.treeShow?"up":"down"),size:"16px"}})],1)])]),e.list&&e.list.length?e._e():a("app-empty",{staticClass:"mt-7",attrs:{description:"暂无拜访记录"}}),a("div",{staticClass:"px-10"},e._l(e.list,(function(t,i){return a("visit-item",{key:i,staticClass:"mb-2 van-clearfix",attrs:{data:t,isTogether:2===e.active}})})),1),a("van-popup",{attrs:{position:"top",round:""},model:{value:e.treeShow,callback:function(t){e.treeShow=t},expression:"treeShow"}},[a("van-tree-select",{attrs:{items:e.labelTreeList,"active-id":e.activeId,"main-active-index":e.activeIndex},on:{"update:activeId":function(t){e.activeId=t},"update:active-id":function(t){e.activeId=t},"update:mainActiveIndex":function(t){e.activeIndex=t},"update:main-active-index":function(t){e.activeIndex=t}}}),a("div",{staticClass:"dropdown-opts"},[a("van-button",{staticClass:"dropdown-opts__btn",attrs:{type:"default",block:"",round:""},on:{click:e.reset}},[e._v("重置")]),a("van-button",{staticClass:"dropdown-opts__btn background-color-main-2",attrs:{type:"info",block:"",round:""},on:{click:e.onConfirm}},[e._v("确认")])],1)],1),a("fix-button",{attrs:{title:1===e.active?"协防":"拜访",icon:"#ytcrm-"+(1===e.active?"xingzhuangjiehe1":"a-xingzhuangjiehe2")},on:{click:e.handleClick}})],1)},s=[],n=i("2909"),c=i("1da1"),r=i("d4ec"),o=i("bee2"),l=i("262e"),d=i("2caf"),u=(i("96cf"),i("d81d"),i("99af"),i("7db0"),i("d3b7"),i("4de4"),i("caad"),i("2532"),i("9ab4")),v=i("1b40"),h=i("f727"),f=i("1601"),p=function(t){Object(l["a"])(i,t);var e=Object(d["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.apply(this,arguments),t.treeShow=!1,t.activeId=-1,t.activeIndex=0,t.labelTreeList=[],t.active=1,t.list=[],t.personVisit=t.$route.params.personVisit||[],t.leaderVisit=t.$route.params.leaderVisit||[],t.filterText="条件筛选",t}return Object(o["a"])(i,[{key:"typeResult",get:function(){if(0===this.activeIndex)return null;if(this.activeId<0){var t=this.labelTreeList[this.activeIndex].children.map((function(t){return+t.id}));return t.shift(),t}return[+this.activeId]}},{key:"handleClick",value:function(){this.active=1===this.active?2:1,this.list=1===+this.active?this.personVisit:this.leaderVisit,this.reset()}},{key:"_getLabelTree",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={type:"1"},t.next=3,Object(h["e"])(e);case 3:i=t.sent,this.labelTreeList=i.data.map((function(t,e){var i=[];return t.CHILD_LIST.length&&(i=t.CHILD_LIST.map((function(t){return{id:t.LABEL_ID,text:t.LABEL_NAME}}))),{id:t.LABEL_ID,text:t.LABEL_NAME,children:[{id:-e-2,text:"全部"}].concat(Object(n["a"])(i))}})),this.labelTreeList.unshift({id:-1,text:"全部"});case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){this.activeId=-1,this.activeIndex=0}},{key:"onConfirm",value:function(){var t=this;if(this.treeShow=!this.treeShow,0===this.activeIndex)this.filterText="条件筛选";else if(this.activeId<0)this.filterText="".concat(this.labelTreeList[this.activeIndex].text,"/全部");else{var e=this.labelTreeList[this.activeIndex].children.find((function(e){return+e.id===t.activeId}));this.filterText="".concat(this.labelTreeList[this.activeIndex].text,"/").concat(e.text)}this.filterList()}},{key:"filterList",value:function(){var t=this,e=1===+this.active?this.personVisit:this.leaderVisit;this.typeResult?this.list=e.filter((function(e){return t.typeResult.includes(e.labelId)})):this.list=e}},{key:"created",value:function(){document.documentElement.scrollTop=0,this.active=1,this.reset(),this.list=this.$route.params.personVisit,this.personVisit=this.$route.params.personVisit,this.leaderVisit=this.$route.params.leaderVisit,this._getLabelTree()}}]),i}(v["d"]);p=Object(u["a"])([Object(v["a"])({components:{VisitItem:f["a"]}})],p);var b=p,m=b,x=(i("0238"),i("2877")),y=Object(x["a"])(m,a,s,!1,null,"3ca28f2d",null);e["default"]=y.exports},db1b:function(t,e,i){"use strict";i("8c6c")}}]);