(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09933272"],{"025b":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"warp"},[o("van-search",{attrs:{placeholder:"搜索","input-align":"center"},on:{input:t.onRefresh,clear:t.onRefresh},model:{value:t.searchValueCustom,callback:function(e){t.searchValueCustom=e},expression:"searchValueCustom"}}),o("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[o("van-list",{attrs:{offset:20,finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.customList,(function(e,a){return o("div",{key:e.customid+a,staticClass:"warp"},[e.contactList&&0!==e.contactList.length?o("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[o("van-collapse-item",{attrs:{name:e.customid},scopedSlots:t._u([{key:"title",fn:function(){return[o("ul",[o("li",{staticClass:"customerValue"},[t._v(t._s(e.customid)+"/"+t._s(e.customname))]),o("li",{directives:[{name:"show",rawName:"v-show",value:e.entryid,expression:"item.entryid"}],staticClass:"color-gray-4 font-12"},[t._v(t._s(e.entryid)+"/"+t._s(e.entryname))])])]},proxy:!0}],null,!0)},t._l(e.contactList,(function(a,s){return o("van-cell",{key:a.CONTACTID+s,attrs:{"is-link":""},on:{click:function(o){return t.chooseCustomClick(e,a)}},scopedSlots:t._u([{key:"title",fn:function(){return[o("span",{style:a.dialyPass?"color: #AAA":""},[t._v(" "+t._s(a.CONTACTID+a.CONTACTMAN)+" "),o("br"),a.dialyPass&&!t.requestChange?o("i",{staticClass:"fontSize-12 text-orange"},[t._v("最小效期为:"+t._s(new Date(a.miniTime).toLocaleDateString()))]):t._e()])]},proxy:!0}],null,!0)})})),1)],1):o("van-cell",{attrs:{"is-link":!e.contactFlag},on:{click:function(o){return t.chooseCustomClick(e)}},scopedSlots:t._u([{key:"title",fn:function(){return[o("ul",[o("li",{staticClass:"customerValue"},[t._v(" "+t._s(e.customid)+"/"+t._s(e.customname)+" "),t._t("default")],2),o("li",{directives:[{name:"show",rawName:"v-show",value:e.entryid,expression:"item.entryid"}],staticClass:"color-gray-4 font-12"},[t._v(t._s(e.entryid)+"/"+t._s(e.entryname))]),e.contactFlag?o("li",{staticClass:"color-never font-12"},[t._v("无可下单分支机构（不在效期），不可下单")]):t._e()])]},proxy:!0}],null,!0)})],1)})),0)],1)],1)},s=[],i=o("5530"),n=o("d4ec"),l=o("bee2"),r=o("262e"),c=o("2caf"),d=(o("99af"),o("d3b7"),o("159b"),o("9ab4")),u=o("1b40"),h=o("53ae"),g=o("f727"),f=function(t){Object(r["a"])(o,t);var e=Object(c["a"])(o);function o(){var t;return Object(n["a"])(this,o),t=e.apply(this,arguments),t.customList=[],t.searchValueCustom="",t.activeNames=[],t}return Object(l["a"])(o,[{key:"chooseCustomClick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t.contactFlag)this.$toast.fail("无可下单分支机构（不在效期），不可下单");else{var o=Object.assign({customid:t.customid,customname:t.customname},e);e&&e.dialyPass?this.$dialog.alert({confirmButtonColor:"rgb(34, 113, 245)",message:"".concat(e.CONTACTMAN,"有多个不同的有效期且已过期，不允许选择，最小效期为:").concat(new Date(e.miniTime).toLocaleDateString())}).then((function(){})):this.$emit("chooseCustomClick",o)}}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.customList=[],this.refreshing=!1),this.loading=!0,this.requestChange?this.$emit("getList",{condition:this.searchValueCustom,pageNum:this.page,pageSize:10}):this._getCustom()}},{key:"_getCustom",value:function(){var t=this;1===this.page&&(this.customList=[]);var e=Object(i["a"])(Object(i["a"])({condition:this.searchValueCustom},this.params),{},{pageNum:this.page,pageSize:10});Object(g["f"])(e).then((function(e){t.customList=t.customList.concat(e.data.list);for(var o=0;o<t.customList.length;o++){var a=t.customList[o];a.contactList&&a.contactList.length>0&&t.needDialyPass&&a.contactList.forEach((function(t){var e=0;t.dates&&t.dates.length>0&&(t.dates.forEach((function(t){e?e>new Date(new Date(t.ENDDATE).toLocaleDateString()).getTime()&&(e=new Date(new Date(t.ENDDATE).toLocaleDateString()).getTime()):e=new Date(new Date(t.ENDDATE).toLocaleDateString()).getTime()})),e<new Date((new Date).toLocaleDateString()).getTime()&&(t.dialyPass=!0,t.miniTime=e))}))}e.data.hasNextPage?t.page++:t.finished=!0,t.loading=!1}))}}]),o}(Object(u["b"])(h["a"]));Object(d["a"])([Object(u["c"])({default:!1})],f.prototype,"requestChange",void 0),Object(d["a"])([Object(u["c"])({default:!1})],f.prototype,"needDialyPass",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"params",void 0),f=Object(d["a"])([Object(u["a"])({})],f);var p=f,m=p,v=(o("27ba"),o("2877")),b=Object(v["a"])(m,a,s,!1,null,"12f3a2f4",null);e["a"]=b.exports},"21ae":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"van-popup-bg pb-100"},[o("div",{staticClass:"goodsDetail"},[o("div",{staticClass:"pa-4 mb-2 d-flex justify-center white-bg"},[o("van-image",{attrs:{height:"150px",src:t.goodsDetailObj.bigimglink}})],1),o("div",{staticClass:"pa-10 ma-10 white-bg detailWarp"},[o("div",[o("van-tag",{attrs:{color:t.goodsDetailObj.nearlyEffectiveFlag?"rgba(237, 123, 47, 0.1)":"rgba(234, 57, 75, 0.1)","text-color":t.goodsDetailObj.nearlyEffectiveFlag?"#ED7B2F":"#EA394B"}},[t._v(t._s(t.goodsDetailObj.nearlyEffectiveFlag?"近效期":"待处理"))]),o("span",{staticClass:"pl-1 fontWeight-500"},[t._v(t._s(t.goodsDetailObj.goodsId)+"/"+t._s(t.goodsDetailObj.goodsName))])],1),o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7 title"},[t._v("规格：")]),o("span",[t._v(t._s(t.goodsDetailObj.goodstype)+"/"+t._s(t.goodsDetailObj.goodsunit))])]),t.logList&&t.logList.length>0&&t.logList[0].packsizeList.length>0?o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7 title"},[t._v("包装大小：")]),o("span",{staticClass:"fontWeight color-main-2"},[t._v(t._s(t.logList.length>0?t.logList[0].packsizeList[0]:""))])]):t._e(),o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7 title"},[t._v("厂家：")]),o("span",[t._v(t._s(t.goodsDetailObj.factoryname))])]),t.goodsDetailObj.customid?o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7 title"},[t._v("客户：")]),o("span",[t._v(t._s(t.goodsDetailObj.customid)+"/"+t._s(t.goodsDetailObj.customname))])]):t._e(),t.goodsDetailObj.CONTACTID?o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7 title"},[t._v("分支机构：")]),o("span",[t._v(t._s(t.goodsDetailObj.CONTACTID)+"/"+t._s(t.goodsDetailObj.CONTACTMAN))])]):t._e(),t.goodsDetailObj.ADDRESS?o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7 title"},[t._v("运输地址：")]),o("span",{staticClass:"color-main-2"},[t._v(t._s(t.goodsDetailObj.ADDRESS))])]):t._e()]),o("div",{staticClass:"ma-10 white-bg detailWarp"},[o("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[o("van-collapse-item",{attrs:{title:"批号信息",name:"1"}},[o("van-checkbox",{staticClass:"mb-2",on:{change:t.checkAllChange},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v(" "+t._s(t.checkedAll?"取消全选":"全选")+" ")]),o("van-checkbox-group",{ref:"checkboxGroup",on:{change:t.logChange},model:{value:t.lotCheckList,callback:function(e){t.lotCheckList=e},expression:"lotCheckList"}},t._l(t.logList,(function(e,a){return o("van-checkbox",{key:a,attrs:{name:e.lotno}},[o("div",{staticClass:"full-width clearfix"},[o("div",{staticClass:"imgWarp left"},[o("van-image",{attrs:{width:"110px",height:"100px",radius:"10px",src:t.goodsDetailObj.smallimglink}}),o("div",{staticClass:"label font-12",class:3===e.goodsStatusId?"status":"deal"},[t._v(" "+t._s(e.goodsStatus)+" ")])],1),o("div",{staticClass:"left lotDetail pl-2 font-12"},[o("div",[o("span",{staticClass:"color-gray-7"},[t._v("批号：")]),o("span",[t._v(t._s(e.lotno))])]),o("div",[o("span",{staticClass:"color-gray-7"},[t._v("可销库存：")]),o("span",[t._v(t._s(e.mindtlgoodsqty))])]),o("div",[o("span",{staticClass:"color-gray-7"},[t._v("效期：")]),o("span",[t._v(t._s(e.invalidDate.substring(0,10))+"("+t._s(e.diffDay)+"天)")])]),o("div",{staticClass:"d-flex justify-end"},[o("span",{on:{click:t.overlimit}},[o("van-stepper",{staticClass:"pt-1",attrs:{max:e.twoPinNumberMax,min:0,step:1},on:{change:t.stepperChange},model:{value:e.twoPinNumber,callback:function(o){t.$set(e,"twoPinNumber",o)},expression:"item.twoPinNumber"}})],1)]),o("div",{staticClass:"d-flex justify-end"},[o("van-button",{attrs:{round:"",size:"small",type:"default"},on:{click:function(o){o.stopPropagation(),t.titleString="仓管员上传照片查看",t.queryInforPicker=!0,t.detailInfor=Object.assign({},t.goodsDetailObj,{type:1},e)}}},[t._v("仓管员反馈信息")]),o("van-button",{staticClass:"ml-1",attrs:{round:"",size:"small",type:"default"},on:{click:function(o){o.stopPropagation(),t.titleString="常销客户",t.queryInforPicker=!0,t.detailInfor=Object.assign({},t.goodsDetailObj,{type:2},e)}}},[t._v("常销客户")])],1)])])])})),1)],1)],1)],1),"1"===t.$route.query.type?o("div",{staticClass:"ma-10 white-bg detailWarp"},[o("van-field",{attrs:{readonly:"",clickable:"",name:"picker","input-align":"right","is-link":"",value:t.goodsDetailObj.customname,label:"客户信息",placeholder:"点击选择客户信息"},on:{click:t.chooseCustom}}),o("van-field",{attrs:{readonly:"",clickable:"",name:"picker","input-align":"right","is-link":"",value:t.contactObj.ADDRESS,label:"运输地址",placeholder:"点击选择运输地址"},on:{click:t.chooseContact}}),0===+t.priceType||1===+t.priceType?o("van-field",{attrs:{"input-align":"right",label:"价格",placeholder:"请输入价格"},model:{value:t.twoPinPrice,callback:function(e){t.twoPinPrice=e},expression:"twoPinPrice"}}):""!=t.priceType?o("van-field",{attrs:{"input-align":"right",value:t.priceText,label:"价格",error:"",readonly:""}}):t._e(),t.goodsDetailObj.lastSellPrice?o("van-field",{attrs:{"input-align":"right",label:"上次销价",readonly:""},model:{value:t.goodsDetailObj.lastSellPrice,callback:function(e){t.$set(t.goodsDetailObj,"lastSellPrice",e)},expression:"goodsDetailObj.lastSellPrice"}}):t._e(),o("van-field",{attrs:{"input-align":"right",label:"备注"},model:{value:t.twoPinMemo,callback:function(e){t.twoPinMemo=e},expression:"twoPinMemo"}})],1):t._e(),o("van-submit-bar",{attrs:{"button-color":"#2271F5",price:+(t.allTwoPinNumber*+t.twoPinPrice*1e6/1e4).toFixed(2).toString(),"button-text":"加入购物车"},on:{submit:t.addCartClick}},[t.allTwoPinNumber?o("span",[t._v(" 总数： "),o("i",{staticClass:"color-main"},[t._v(t._s(t.allTwoPinNumber))])]):t._e()])],1),o("van-popup",{staticClass:"van-popup-bg",style:{height:"98%",width:"100%"},attrs:{round:"",position:"bottom",closeable:""},model:{value:t.queryInforPicker,callback:function(e){t.queryInforPicker=e},expression:"queryInforPicker"}},[t.queryInforPicker?o("detail-pop",{attrs:{titleString:t.titleString,detailInfor:t.detailInfor}}):t._e()],1),o("van-popup",{staticClass:"van-popup-bg",style:{height:"90%",width:"100%"},attrs:{round:"",position:"bottom",closeable:""},model:{value:t.customShow,callback:function(e){t.customShow=e},expression:"customShow"}},[o("div",{staticClass:"header font-16 py-4 fontWeight textAlignC"},[t._v("单位信息")]),o("app-custom",{ref:"appCustom",attrs:{params:{entryid:t.chooseEntry.entryid}},on:{chooseCustomClick:t.chooseCustomClick}})],1),o("van-action-sheet",{attrs:{"cancel-text":"取消","close-on-click-action":""},scopedSlots:t._u([{key:"default",fn:function(){return t._l(t.contactList,(function(e,a){return o("van-cell",{key:a,attrs:{"is-link":""},on:{click:function(o){return t.chooseClick(e)}}},[t._v(t._s(e.ADDRESSID)+"/ "+t._s(e.ADDRESS))])}))},proxy:!0}]),model:{value:t.contactShow,callback:function(e){t.contactShow=e},expression:"contactShow"}}),o("van-button",{staticClass:"cartButton",attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:function(e){return t.$router.push({name:"twoPinDicShopCart"})}},scopedSlots:t._u([{key:"icon",fn:function(){return[o("van-icon",{attrs:{size:"20px",name:"cart-o",color:"#ffffff"}})]},proxy:!0}])})],1)},s=[],i=o("d4ec"),n=o("bee2"),l=o("262e"),r=o("2caf"),c=(o("7db0"),o("d3b7"),o("e9c4"),o("9ab4")),d=o("1b40"),u=o("a403"),h=o("025b"),g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"inforPicker white-bg"},[o("header",{staticClass:"font-16 fontWeight-500 py-4"},[t._v(t._s(t.titleString))]),o("div",{staticClass:"detail ma-10 pa-10"},[o("div",[o("van-tag",{attrs:{color:3===t.detailInfor.goodsStatusId?"rgba(237, 123, 47, 0.1)":"rgba(234, 57, 75, 0.1)","text-color":3===t.detailInfor.goodsStatusId?"#ED7B2F":"#EA394B"}},[t._v(t._s(t.detailInfor.goodsStatus))]),o("span",{staticClass:"pl-1 fontWeight-500"},[t._v(t._s(t.detailInfor.goodsId)+"/"+t._s(t.detailInfor.goodsName))])],1),o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7"},[t._v("批号：")]),o("span",[t._v(t._s(t.detailInfor.lotno))])]),o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7"},[t._v("可销库存：")]),o("span",[t._v(t._s(t.detailInfor.mindtlgoodsqty))])]),o("div",{staticClass:"py-1"},[o("span",{staticClass:"color-gray-7"},[t._v("效期：")]),o("span",[t._v(t._s(t.detailInfor.invalidDate.substring(0,10))+"("+t._s(t.detailInfor.diffDay)+"天)")])])]),1===t.detailInfor.type?o("div",{staticClass:"imageWarp pa-10"},[o("div",{staticClass:"imageWarp-header py-2 font-14"},[o("span",{staticClass:"color-gray-7"},[t._v("最近上传日期：")]),t._v(" "+t._s(t.imgInfor&&t.imgInfor[0]&&t.imgInfor[0].pqcsDealTime)+" ")]),o("van-uploader",{attrs:{deletable:!1},model:{value:t.imgList,callback:function(e){t.imgList=e},expression:"imgList"}}),t.imgList.length?t._e():o("app-empty",{attrs:{description:"暂无图片"}})],1):t._e(),2===t.detailInfor.type?o("div",{staticClass:"customWarp"},[o("van-pull-refresh",{staticClass:"pa-10",on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[o("van-list",{attrs:{offset:20,finished:t.finished,"finished-text":t.finishText},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.customOftenList,(function(e,a){return o("div",{key:"customOftenList"+a,staticClass:"listWarp"},[o("div",{staticClass:"d-flex justify-space-between"},[o("span",{staticClass:"color-gray-4"},[t._v("常销客户")]),o("span",[t._v(t._s(e.openPinCustomName))])]),o("div",{staticClass:"d-flex justify-space-between"},[o("span",{staticClass:"color-gray-4"},[t._v("服务频次")]),o("span",[t._v(t._s(e.lotCount))])]),o("div",{staticClass:"d-flex justify-space-between"},[o("span",{staticClass:"color-gray-4"},[t._v("业务员")]),o("span",[t._v(t._s(e.openPinSalerName))])])])})),0),o("van-popup",{attrs:{position:"top","get-container":"#filterContainer"},model:{value:t.filterShow,callback:function(e){t.filterShow=e},expression:"filterShow"}},[o("filter-module",{on:{filterSubmit:t.filterSubmit}})],1)],1)],1):t._e(),1===t.detailInfor.type?o("div",{staticClass:"commonOpButton-footer"},[o("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:function(e){t.operatorShow=!0,t._getWarehouseOperator()}}},[o("span",[t._v("提示仓管员上传图片")])])],1):t._e(),o("van-popup",{style:{height:"90%",width:"100%"},attrs:{round:"",position:"bottom",closeable:""},model:{value:t.operatorShow,callback:function(e){t.operatorShow=e},expression:"operatorShow"}},[o("header",{staticClass:"font-16 fontWeight-500 py-4"},[t._v("仓管员选择")]),o("div",{staticClass:"main px-10"},[o("van-search",{staticStyle:{padding:"0px 0px 10px"},attrs:{placeholder:"请输入用户ID|名称"},on:{clear:t._getWarehouseOperator,input:t._getWarehouseOperator},model:{value:t.operatorSearchValue,callback:function(e){t.operatorSearchValue=e},expression:"operatorSearchValue"}}),o("div",{staticClass:"list"},[o("van-checkbox-group",{model:{value:t.operatorKey,callback:function(e){t.operatorKey=e},expression:"operatorKey"}},[o("van-cell-group",t._l(t.operatorList,(function(e,a){return o("van-cell",{key:a,attrs:{clickable:""},on:{click:function(e){return t.$refs.checkboxes[a].toggle()}},scopedSlots:t._u([{key:"title",fn:function(){return[o("div",[o("span",[t._v(t._s(e.userName))]),o("span",{staticClass:"pl-2"},[t._v(t._s(e.depName))])])]},proxy:!0},{key:"right-icon",fn:function(){return[o("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{name:e.depId+"/"+e.userId}})]},proxy:!0}],null,!0)})})),1)],1),t.operatorList.length?t._e():o("app-empty",{attrs:{description:"暂无人员"}})],1),o("div",{staticClass:"commonButton-footer d-flex justify-center"},[o("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:function(e){t.operatorShow=!1,t.operatorKey=[]}}},[t._v("取消")]),o("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t.submitClick}},[t._v("确定")])],1)],1)])],1)},f=[],p=(o("99af"),o("d81d"),o("ac1f"),o("1276"),o("53ae")),m=function(t){Object(l["a"])(o,t);var e=Object(r["a"])(o);function o(){var t;return Object(i["a"])(this,o),t=e.apply(this,arguments),t.imgInfor=[],t.imgList=[],t.customOftenList=[],t.operatorShow=!1,t.operatorList=[],t.operatorSearchValue="",t.operatorKey=[],t}return Object(n["a"])(o,[{key:"_getWarehouseOperator",value:function(){var t=this;Object(u["m"])({storageId:this.detailInfor.storageId,keyword:this.operatorSearchValue}).then((function(e){t.operatorList=e}))}},{key:"queryImgs",value:function(){var t=this,e=0;if(this.detailInfor.shareGoodsDtl&&this.detailInfor.shareGoodsDtl.length>0)for(var o=0;o<this.detailInfor.shareGoodsDtl.length;o++){var a=this.detailInfor.shareGoodsDtl[o];e+=a.mindtlgoodsqty}Object(u["o"])({entryId:this.detailInfor.entryId,goodsId:this.detailInfor.goodsId,goodsStatusId:this.detailInfor.goodsStatusId,lotid:this.detailInfor.lotid,pqcsFlag:1,storageId:this.detailInfor.storageId,shareEntryId:e>0?this.detailInfor.shareGoodsDtl[0].mindtlgoodsqty:this.detailInfor.gentryId,pageNum:1,pageSize:1e5}).then((function(e){t.imgList=[],t.imgInfor=e.list;for(var o=0;o<t.imgInfor.length;o++){var a=t.imgInfor[o];t.imgList=t.imgList.concat(a.imgList)}t.imgList=t.imgList.map((function(t){return{url:t}}))}))}},{key:"onRefresh",value:function(){this.finished=!1,this.loading=!0,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.dataList=[],this.refreshing=!1),this.queryCustomOften()}},{key:"queryCustomOften",value:function(){var t=this;1===this.page&&(this.customOftenList=[]),Object(u["d"])({entryId:this.detailInfor.entryId,goodsId:this.detailInfor.goodsId,lotid:this.detailInfor.lotid,pageNum:this.page,pageSize:8}).then((function(e){t.customOftenList=t.customOftenList.concat(e.list),e.hasNextPage?t.page++:t.finished=!0,t.loading=!1}))}},{key:"submitClick",value:function(){var t=this;if(this.operatorKey.length){var e=0;if(this.detailInfor.shareGoodsDtl&&this.detailInfor.shareGoodsDtl.length>0)for(var o=0;o<this.detailInfor.shareGoodsDtl.length;o++){var a=this.detailInfor.shareGoodsDtl[o];e+=a.mindtlgoodsqty}for(var s=[],i=0;i<this.operatorKey.length;i++){var n=this.operatorKey[i];s.push(n.split("/")[1])}Object(u["u"])({entryId:this.detailInfor.entryId,goodsId:this.detailInfor.goodsId,goodsName:this.detailInfor.goodsName,goodsStatusId:this.detailInfor.goodsStatusId,storageId:this.detailInfor.storageId,dirType:3===this.detailInfor.goodsStatusId?2:3,shareEntryId:e>0?this.detailInfor.shareGoodsDtl[0].mindtlgoodsqty:this.detailInfor.entryId,lotid:this.detailInfor.lotid,userIdList:s}).then((function(e){"200"===e.code?(t.operatorShow=!1,t.$toast.success(e.msg)):t.$toast.fail(e.msg)}))}else this.$toast.fail("请选择要提示的仓管员")}},{key:"mounted",value:function(){1===this.detailInfor.type?this.queryImgs():this.queryCustomOften()}}]),o}(Object(d["b"])(p["a"]));Object(c["a"])([Object(d["c"])()],m.prototype,"detailInfor",void 0),Object(c["a"])([Object(d["c"])()],m.prototype,"titleString",void 0),m=Object(c["a"])([Object(d["a"])({})],m);var v=m,b=v,y=(o("2371"),o("2877")),C=Object(y["a"])(b,g,f,!1,null,"1f7933c3",null),O=C.exports,_=o("4bb5"),I=Object(_["a"])("twoPinDic"),D=function(t){Object(l["a"])(o,t);var e=Object(r["a"])(o);function o(){var t;return Object(i["a"])(this,o),t=e.apply(this,arguments),t.goodsDetailObj={},t.logList=[],t.activeNames=["1"],t.lotCheckList=[],t.checkedAll=!1,t.allTwoPinNumber=0,t.logChangeInfor={},t.priceType="",t.priceText="",t.twoPinPrice="",t.customShow=!1,t.contactShow=!1,t.contactList=[],t.contactObj={},t.twoPinMemo="",t.titleString="",t.queryInforPicker=!1,t.detailInfor={},t}return Object(n["a"])(o,[{key:"checkAllChange",value:function(t){t?this.$refs.checkboxGroup.toggleAll(!0):this.$refs.checkboxGroup.toggleAll()}},{key:"logChange",value:function(t){var e=this;this.allTwoPinNumber=0,this.logChangeInfor={};for(var o=function(o){var a=t[o];e.logChangeInfor[a]=e.logList.find((function(t){return a===t.lotno&&(e.allTwoPinNumber+=t.twoPinNumber),a===t.lotno}))},a=0;a<t.length;a++)o(a);this.checkedAll=t.length===this.logList.length}},{key:"_getGoodsDtl",value:function(){var t=this,e={dirType:this.goodsDetailObj.dirType,entryId:this.chooseEntry.entryid,goodsId:this.goodsDetailObj.goodsId};Object(u["f"])(e).then((function(e){t.logList=[];for(var o=0;o<e.length;o++){var a=e[o];0!==+a.mindtlgoodsqty&&t.logList.push(a)}for(var s=0;s<t.logList.length;s++){var i=t.logList[s];i.twoPinNumberMax=i.mindtlgoodsqty,i.twoPinNumber=i.mindtlgoodsqty}}))}},{key:"stepperChange",value:function(){for(var t in this.allTwoPinNumber=0,this.logChangeInfor)this.allTwoPinNumber+=this.logChangeInfor[t].twoPinNumber}},{key:"overlimit",value:function(){event.stopPropagation()}},{key:"chooseCustom",value:function(){this.customShow=!0}},{key:"chooseClick",value:function(t){this.contactObj=t,this.contactShow=!1}},{key:"chooseCustomClick",value:function(t){this.goodsDetailObj.customid=t.customid,this.goodsDetailObj.customname=t.customname,this.goodsDetailObj.CONTACTID=t.CONTACTID,this.goodsDetailObj.CONTACTMAN=t.CONTACTMAN,this.customShow=!1,this._getGoodsPrice(),this._queryContact()}},{key:"chooseContact",value:function(){this.goodsDetailObj.customid?this.contactShow=!0:this.$toast.fail("请先选择客户信息")}},{key:"_queryContact",value:function(){var t=this,e={entryid:this.goodsDetailObj.entryId,customid:this.goodsDetailObj.customid,contactid:this.goodsDetailObj.CONTACTID||""};Object(u["s"])(e).then((function(e){t.contactList=e.data,1===t.contactList.length&&(t.contactObj=t.contactList[0])}))}},{key:"_getGoodsPrice",value:function(){var t=this;Object(u["h"])({customId:this.goodsDetailObj.customid,entryId:this.goodsDetailObj.entryId,goodsId:this.goodsDetailObj.goodsId}).then((function(e){t.twoPinPrice=e.data.price,t.priceType=e.data.limitFlag,+t.twoPinPrice<0?t.priceText="货品暂无价格，不允许销售。":2===+t.priceType?t.priceText="货品不可销。":3===+t.priceType&&(t.priceText="货品既有禁销也有限销，需要联系采购处理。")}))}},{key:"addCartClick",value:function(){var t=this;if(this.goodsDetailObj.customid)if(this.contactObj.ADDRESSID)if("{}"!==JSON.stringify(this.logChangeInfor))if(this.twoPinPrice)if(2!==+this.priceType&&3!==+this.priceType){var e=[];for(var o in this.logChangeInfor)if(Object.prototype.hasOwnProperty.call(this.logChangeInfor,o)){var a=this.logChangeInfor[o];e.push({entryId:this.chooseEntry.entryid,entryName:this.chooseEntry.entryname,customId:this.goodsDetailObj.customid,customName:this.goodsDetailObj.customname,goodsId:this.goodsDetailObj.goodsId,goodsName:this.goodsDetailObj.goodsName,contactId:this.goodsDetailObj.CONTACTID,contactName:this.goodsDetailObj.CONTACTMAN,addressId:this.contactObj.ADDRESSID,addressName:this.contactObj.ADDRESS,goodsStatusId:a.goodsStatusId,goodsStatus:a.goodsStatus,storageId:a.storageId,storageName:a.storageName,lotId:a.lotid,lotNo:a.lotno,goodsQty:a.twoPinNumber,price:this.twoPinPrice,invoiceWay:1,zxSpecialFlag:0,dtlMemo:this.twoPinMemo,cartType:2})}Object(u["a"])(e).then((function(e){"200"===e.code?t.$toast.success(e.msg):t.$toast.fail(e.msg)}))}else this.$toast.fail(this.priceText);else this.$toast.fail("请输入价格");else this.$toast.fail("请先选择批号信息");else this.$toast.fail("请先选择运输地址");else this.$toast.fail("请先选择客户信息")}},{key:"mounted",value:function(){this.goodsDetailObj=JSON.parse(JSON.stringify(this.goodsDetail)),this.$route.query&&"2"===this.$route.query.type&&(this.goodsDetailObj.price>0&&(this.twoPinPrice=this.goodsDetailObj.price),this.contactObj.ADDRESSID=this.goodsDetailObj.ADDRESSID,this.contactObj.ADDRESS=this.goodsDetailObj.ADDRESS),this._getGoodsDtl()}}]),o}(d["d"]);Object(c["a"])([I.Getter],D.prototype,"goodsDetail",void 0),Object(c["a"])([I.Getter],D.prototype,"chooseEntry",void 0),Object(c["a"])([I.Getter],D.prototype,"customParams",void 0),D=Object(c["a"])([Object(d["a"])({components:{AppCustom:h["a"],DetailPop:O}})],D);var k=D,j=k,S=(o("2d51"),Object(y["a"])(j,a,s,!1,null,"208e85fd",null));e["default"]=S.exports},2371:function(t,e,o){"use strict";o("db52")},"27ba":function(t,e,o){"use strict";o("6b64")},"2d51":function(t,e,o){"use strict";o("570b")},"53ae":function(t,e,o){"use strict";var a=o("d4ec"),s=o("bee2"),i=o("262e"),n=o("2caf"),l=(o("b0c0"),o("9ab4")),r=o("1b40");r["a"].registerHooks(["beforeRouteEnter"]);var c=function(t){Object(i["a"])(o,t);var e=Object(n["a"])(o);function o(){var t;return Object(a["a"])(this,o),t=e.apply(this,arguments),t.page=1,t.total=0,t.dataList=[],t.loading=!1,t.finished=!1,t.refreshing=!1,t.finishText="",t.userIdList=[],t.error=!1,t}return Object(s["a"])(o,[{key:"beforeRouteEnter",value:function(t,e,o){o((function(t){"Home"!==e.name&&"TaskIndex"!==e.name||(t.dataList=[],t.page=1,t.loading=!1,t.finished=!0,t.refreshing=!1,t.$nextTick((function(){t.finished=!1})))}))}}]),o}(r["d"]);c=Object(l["a"])([Object(r["a"])({})],c),e["a"]=c},"570b":function(t,e,o){},"6b64":function(t,e,o){},db52:function(t,e,o){}}]);