(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9107e546"],{"29f0":function(e,t,a){},"2ef3":function(e,t,a){"use strict";a("29f0")},b13a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add full-HW"},[a("div",{staticClass:"add-header pt-10 pl-10 pb-7 font-14"},[e._v("客情新增")]),a("div",{staticClass:"add-content overflow-auto"},[a("div",{staticClass:"add-base"},[e._m(0),a("van-form",[a("van-field",{attrs:{readonly:"",clickable:"",name:"datetimePicker",value:e.customerData.changeTime,"input-align":"right",label:"时间选择",placeholder:"点击选择时间"},on:{click:function(t){e.timeShowPicker=!0}}}),a("van-field",{attrs:{name:"radio",label:"拜访类型","input-align":"right"},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.customerData.visitType,callback:function(t){e.$set(e.customerData,"visitType",t)},expression:"customerData.visitType"}},[a("van-radio",{attrs:{name:"1","checked-color":"#2271F5","icon-size":"14px"}},[e._v("个人")]),a("van-radio",{attrs:{name:"2","checked-color":"#2271F5","icon-size":"14px"}},[e._v("协访")]),a("van-radio",{attrs:{name:"3","checked-color":"#2271F5","icon-size":"14px"}},[e._v("接待")])],1)]},proxy:!0}])}),"2"===e.customerData.visitType?a("van-field",{attrs:{readonly:"",clickable:"",placeholder:"点击选择协访人员",label:"协访人","input-align":"right",value:e.customerData.visitUserName},on:{click:function(t){e.visitUserShow=!0,e._getUserByParams({leaderFlag:!1})}}}):e._e(),a("van-field",{attrs:{readonly:"",clickable:"",label:"单位类型",placeholder:"点击选择单位类型","input-align":"right",value:1===e.customerData.objTypeValue?"供应商":2===e.customerData.objTypeValue?"下游客户":3===e.customerData.objTypeValue?"政府单位":""},on:{click:function(t){e.objTypeShowPicker=!0}}}),a("van-field",{attrs:{readonly:"",clickable:"","input-align":"right",label:"单位信息",placeholder:"点击选择单位信息",value:e.customerData.objName},on:{click:e.objChangeClick}}),a("van-field",{attrs:{readonly:"",clickable:"","input-align":"right",label:"职员信息",placeholder:"点击选择职员信息",value:e.customerData.staffMemberName},on:{click:e.staffMemberClick}}),a("van-field",{attrs:{readonly:"",clickable:"","input-align":"right",label:"打卡信息",placeholder:e.customerData.changeTime?"点击选择打卡信息":"请先选择拜访时间",value:e.customerData.addressDeatilValue},on:{click:e.adressPickerClick}})],1)],1),e.staffMemberCheckDetail.length>0?a("div",{staticClass:"add-person mt-6"},[e._m(1),a("van-tabs",{attrs:{color:"#2271f5"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.staffMemberCheckDetail,(function(t,i){return a("van-tab",{key:i,attrs:{title:t.userName}},[a("van-field",{attrs:{readonly:"",clickable:"",label:"电话",value:t.phoneNumber,"input-align":"right"}}),a("van-field",{attrs:{readonly:"",clickable:"",label:"热力值","input-align":"right"},scopedSlots:e._u([{key:"input",fn:function(){return[a("span",{class:1===t.hotid?"color-normal":2===t.hotid?"color-advanced":3===t.hotid?"color-never":""},[e._v(e._s(t.hotValue))])]},proxy:!0}],null,!0)}),a("van-field",{attrs:{readonly:"",clickable:"",label:"是否外勤","input-align":"right"},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-checkbox",{attrs:{"checked-color":"#2271f5"},model:{value:t.outsideCheck,callback:function(a){e.$set(t,"outsideCheck",a)},expression:"item.outsideCheck"}},[e._v("外勤")])]},proxy:!0}],null,!0)}),a("van-field",{attrs:{clickable:"",label:"星标事件","input-align":"right"},scopedSlots:e._u([{key:"input",fn:function(){return[a("div",{on:{click:function(e){t.starCheck=!t.starCheck}}},[t.starCheck?a("van-icon",{staticClass:"left",attrs:{name:"star",color:"#FBD71B",size:"20px"}}):a("van-icon",{staticClass:"left",attrs:{color:"#FBD71B",name:"star-o",size:"20px"}})],1)]},proxy:!0}],null,!0)}),a("van-field",{attrs:{clickable:"",readonly:"","input-align":"right",label:"客情事件",placeholder:"点击维护客情事件"},on:{click:function(t){e.customerLabelShow=!0}},scopedSlots:e._u([{key:"input",fn:function(){return[t.needLabelValueObj.length>0?a("div",{staticClass:"d-flex flex-wrap"},e._l(t.needLabelValueObj,(function(t,i){return a("span",{key:i,staticClass:"tag-primary-plain ml-2 mb-1"},[e._v(e._s(t.labelName))])})),0):e._e()]},proxy:!0}],null,!0)})],1)})),1)],1):e._e()]),a("div",{staticClass:"commonButton-footer d-flex justify-center"},[a("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:e.cancelClick}},[e._v("取消")]),a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:e.submitClick}},[e._v("确定")])],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.timeShowPicker,callback:function(t){e.timeShowPicker=t},expression:"timeShowPicker"}},[a("van-datetime-picker",{attrs:{formatter:e.formatter,type:"datetime",filter:e.filter,title:"选择完整时间","min-date":e.minDate,"max-date":e.maxDate},on:{cancel:function(t){e.timeShowPicker=!1},confirm:e.confirmTime},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("van-action-sheet",{attrs:{actions:e.objTypeActions,"cancel-text":"取消",description:"单位类型选择","close-on-click-action":""},on:{select:e.objTypeSelect},model:{value:e.objTypeShowPicker,callback:function(t){e.objTypeShowPicker=t},expression:"objTypeShowPicker"}}),a("van-popup",{style:{width:"100%",height:"85%"},attrs:{closeable:"",position:"bottom",round:""},model:{value:e.visitUserShow,callback:function(t){e.visitUserShow=t},expression:"visitUserShow"}},[a("div",{staticClass:"font-16 fontWeight-500 textAlignC pt-4 pb-2"},[e._v("协访人员选择")]),a("van-search",{attrs:{placeholder:"搜索","input-align":"center"},on:{input:e.visitUserSearch},model:{value:e.visitUserValue,callback:function(t){e.visitUserValue=t},expression:"visitUserValue"}}),a("div",{staticClass:"popupWarp overflow-auto"},[a("van-checkbox-group",{attrs:{max:1},model:{value:e.visitUserCheck,callback:function(t){e.visitUserCheck=t},expression:"visitUserCheck"}},[a("van-cell-group",e._l(e.userOptions,(function(t,i){return a("van-cell",{key:"visitUser"+i,attrs:{clickable:""},on:{click:function(a){return e.visitUserChange(t)}},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticClass:"visitUserName",style:e.visitUserCheck.length&&t.userId===e.visitUserCheck[0]?"color: #2271f5;":""},[e._v(e._s(t.userName))]),a("span",{style:e.visitUserCheck.length&&t.userId===e.visitUserCheck[0]?"color: #2271f5;":""},[e._v(e._s(t.phoneNum))])]},proxy:!0},{key:"right-icon",fn:function(){return[a("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{"checked-color":"#2271F5",name:t.userId}})]},proxy:!0}],null,!0)})})),1)],1)],1)],1),a("van-popup",{style:{width:"100%",height:"85%"},attrs:{closeable:"",position:"bottom",round:""},model:{value:e.objShowPicker,callback:function(t){e.objShowPicker=t},expression:"objShowPicker"}},[a("div",{staticClass:"font-16 fontWeight-500 textAlignC pt-4 pb-2"},[e._v("单位信息")]),a("van-search",{attrs:{placeholder:"搜索","input-align":"center"},on:{input:e.objSearch},model:{value:e.objSearchValue,callback:function(t){e.objSearchValue=t},expression:"objSearchValue"}}),a("div",{staticClass:"popupWarp overflow-auto"},[!e.loading&&(2===e.customerData.objTypeValue&&!e.custlistOptions.length||1===e.customerData.objTypeValue&&!e.providerInforOptions.length||3===e.customerData.objTypeValue&&!e.goverListOptions.length)?a("app-empty",{staticClass:"pb-6",attrs:{description:"暂无数据"}}):e._e(),a("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{offset:"20",finished:e.finished,"finished-text":e.finishText},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[2===e.customerData.objTypeValue?a("van-cell-group",e._l(e.custlistOptions,(function(t,i){return a("van-cell",{key:i,attrs:{clickable:""},on:{click:function(a){return e.changeCust(t)}},scopedSlots:e._u([{key:"default",fn:function(){return[a("div",[e._v(e._s(t.custId+"/")+e._s(t.custName))])]},proxy:!0}],null,!0)})})),1):e._e(),1===e.customerData.objTypeValue?a("van-cell-group",e._l(e.providerInforOptions,(function(t,i){return a("van-cell",{key:i,attrs:{clickable:"",title:t.cpiId+"/"+t.providerName},on:{click:function(a){return e.changeProvider(t)}}})})),1):e._e(),3===e.customerData.objTypeValue?a("van-cell-group",e._l(e.goverListOptions,(function(t,i){return a("van-cell",{key:i,attrs:{clickable:"",title:t.govAttributeId+"/"+t.govAttributeName+"("+t.orgnizationName+") --- "+t.ssqCodeName},on:{click:function(a){return e.changeGover(t)}}})})),1):e._e()],1)],1)],1)],1),a("van-popup",{style:{width:"100%",height:"80%"},attrs:{closeable:"",position:"bottom",round:""},on:{close:function(t){e.staffMemberShow=!1,e.staffMemberCheck=[],e.staffMemberCheckDetail=[]}},model:{value:e.staffMemberShow,callback:function(t){e.staffMemberShow=t},expression:"staffMemberShow"}},[a("div",{staticClass:"font-16 fontWeight-500 textAlignC pt-4 pb-2"},[e._v("职员信息选择")]),a("van-search",{attrs:{placeholder:"搜索","input-align":"center"},model:{value:e.staffMemberValue,callback:function(t){e.staffMemberValue=t},expression:"staffMemberValue"}}),a("div",{staticClass:"staffMember-popupWarp overflow-auto"},[a("van-checkbox-group",{model:{value:e.staffMemberCheck,callback:function(t){e.staffMemberCheck=t},expression:"staffMemberCheck"}},[a("van-cell-group",[e._l(e.personList.filter((function(t){return-1!==(t.userName||t.CU_USER_NAME).indexOf(e.staffMemberValue)})),(function(t,i){return a("van-cell",{key:i,attrs:{clickable:""},on:{click:function(a){return e.staffMemberChange(t,i)}},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticClass:"visitUserName",style:e.staffMemberCheck.length&&e.staffMemberCheck.some((function(e){e===t.userId||t.USER_ID}))?"color: #2271f5;":""},[e._v(e._s(t.userName||t.CU_USER_NAME))]),a("span",{style:e.visitUserCheck.length&&e.staffMemberCheck.some((function(e){e===t.userId||t.USER_ID}))?"color: #2271f5;":""},[e._v(e._s(t.phoneNum||t.CU_PHONE_NUM))])]},proxy:!0},{key:"right-icon",fn:function(){return[a("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{"checked-color":"#2271F5",name:t.userId||t.USER_ID}})]},proxy:!0}],null,!0)})})),a("van-empty",{directives:[{name:"show",rawName:"v-show",value:!e.personList.filter((function(t){return-1!==(t.userName||t.CU_USER_NAME).indexOf(e.staffMemberValue)})).length,expression:"\n              !personList.filter(ele => (ele.userName || ele.CU_USER_NAME).indexOf(staffMemberValue) !== -1).length\n            "}],attrs:{description:"暂无职员信息"}})],2)],1),a("div",{staticClass:"commonButton-footer d-flex justify-center"},[a("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:function(t){e.staffMemberShow=!1,e.staffMemberCheck=[],e.staffMemberCheckDetail=[]}}},[e._v("取消")]),a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:e.staffMemberSure}},[e._v("确定")])],1)],1)],1),e.showAdressPicker?a("clock-in",{attrs:{visitDate:e.customerData.changeTime,showAdressPicker:e.showAdressPicker},on:{adressOnConfirm:e.adressOnConfirm,addressChoose:e.addressChoose,adressCancel:e.adressCancel}}):e._e(),e.customerLabelShow?a("custom-label",{attrs:{activeName:e.activeName,staffMemberCheckDetail:e.staffMemberCheckDetail,labelTreeList:e.labelTreeList,customerLabelShow:e.customerLabelShow,customerId:e.customerData.objId},on:{closeClick:function(t){e.customerLabelShow=!1},addCustomSure:e.addCustomSure}}):e._e()],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentTitle pl-10"},[a("div",{staticClass:"contentTitle-block contentTitle-blue"}),a("span",{staticClass:"contentTitle-label"},[e._v("基础信息")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentTitle pl-10"},[a("div",{staticClass:"contentTitle-block contentTitle-blue"}),a("span",{staticClass:"contentTitle-label"},[e._v("职员信息")])])}],r=a("1da1"),o=a("5530"),n=a("d4ec"),c=a("bee2"),l=a("262e"),u=a("2caf"),h=(a("96cf"),a("4de4"),a("d3b7"),a("99af"),a("9ab4")),d=a("1b40"),f=a("f727"),m=a("e906"),p=a("53ae"),v=a("2efb"),b=a("3df5"),k=a("4bb5"),g=Object(k["a"])("crm"),y=Object(k["a"])("app"),C={changeTime:"",visitType:"1",objTypeValue:-1,visitUserName:"",visitUserId:"",objName:"",objId:"",staffMemberId:"",staffMemberName:"",addressValue:"",addressDeatilValue:""},D=function(e){Object(l["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.customerData=Object(o["a"])({},C),e.timeShowPicker=!1,e.objTypeShowPicker=!1,e.visitUserShow=!1,e.visitUserLoading=!1,e.visitUserValue="",e.objShowPicker=!1,e.objSearchValue="",e.timeValue=new Date,e.minDate=new Date(2019,0,1),e.maxDate=new Date,e.userOptions=[],e.visitUserCheck=[],e.objTypeActions=[{name:"下游客户",typeNum:1,id:2},{name:"政府单位",typeNum:34,id:3},{name:"供应商",typeNum:11,id:1}],e.custlistOptions=[],e.goverListOptions=[],e.providerInforOptions=[],e.personList=[],e.staffMemberShow=!1,e.staffMemberValue="",e.staffMemberCheck=[],e.staffMemberCheckDetail=[],e.activeName=0,e.showAdressPicker=!1,e.customerLabelShow=!1,e}return Object(c["a"])(a,[{key:"confirmTime",value:function(e){this.customerData.changeTime=this.$dayjs(e).format("YYYY-MM-DD HH:mm"),this.timeShowPicker=!1}},{key:"objTypeSelect",value:function(e){var t=this;this.customerData.objTypeValue!==e.id&&this.customerData.objId?this.$dialog.confirm({title:"提示",message:"切换单位类型将清空已有单位信息，确定要切换吗？",confirmButtonColor:"#2271f5",beforeClose:function(a,i){"confirm"===a?(t.customerData.objTypeValue=e.id,t.customerData.objId="",t.customerData.objName="",i()):i()}}):this.customerData.objTypeValue=e.id}},{key:"filter",value:function(e,t){return"minute"===e?t.filter((function(e){return e%15===0})):t}},{key:"formatter",value:function(e,t){return"year"===e?t+"年":"month"===e?t+"月":"day"===e?t+"日":t}},{key:"_getUserByParams",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.visitUserLoading=!0,Object(f["h"])(t).then((function(e){"200"===e.code&&(a.userOptions=e.data,a.visitUserValue=""),a.visitUserLoading=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"visitUserChange",value:function(e){this.visitUserCheck=[],this.visitUserCheck=[e.userId],this.customerData.visitUserName=e.userName,this.customerData.visitUserId=e.userId,this.visitUserShow=!1}},{key:"visitUserSearch",value:function(e){this._getUserByParams({keyword:e})}},{key:"objChangeClick",value:function(){-1!==this.customerData.objTypeValue?(this.custlistOptions=[],this.goverListOptions=[],this.providerInforOptions=[],this.objSearchValue="",this.onRefresh(),this.objShowPicker=!0):this.$toast.fail("请先选择单位类型")}},{key:"onRefresh",value:function(){this.finished=!1,this.objSearchValue="",this.loading=!0,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){var e=this;this.refreshing&&(this.page=1,this.providerInforOptions=[],this.custlistOptions=[],this.goverListOptions=[],this.refreshing=!1),1===this.customerData.objTypeValue?(this.loading=!0,this._queryProviderForVisit().then((function(t){t.hasNextPage?e.page++:e.finished=!0,e.loading=!1}))):2===this.customerData.objTypeValue?(this.loading=!0,this._queryCustListByUserId().then((function(t){t.hasNextPage?e.page++:e.finished=!0,e.loading=!1}))):3===this.customerData.objTypeValue&&(this.loading=!0,this._getGoverList())}},{key:"objSearch",value:function(e){this.page=1,this.providerInforOptions=[],this.custlistOptions=[],e?this.onLoad():this.onRefresh()}},{key:"_queryCustListByUserId",value:function(){var e=this;1===this.page&&(this.providerInforOptions=[]);var t={pageNum:this.page,pageSize:10,cust:this.objSearchValue,type:this.customerData.visitType,otherUserId:2===+this.customerData.visitType?this.customerData.visitUserId:""};return new Promise((function(a){Object(m["i"])(t).then((function(t){"200"===t.code&&(e.custlistOptions=e.custlistOptions.length>0?e.custlistOptions.concat(t.data.list):t.data.list,a(t.data))}))}))}},{key:"_queryProviderForVisit",value:function(){var e=this;1===this.page&&(this.providerInforOptions=[]);var t={providerNameOrId:this.objSearchValue,useridList:[],pageSize:10,pageNum:this.page};return new Promise((function(a){Object(m["m"])(t).then((function(t){"200"===t.code&&(e.providerInforOptions=e.providerInforOptions.length>0?e.providerInforOptions.concat(t.data.list):t.data.list,a(t.data))}))}))}},{key:"_getGoverList",value:function(){var e=this,t={orgnizationKeyword:this.objSearchValue};Object(m["j"])(t).then((function(t){"200"===t.code&&(e.goverListOptions=t.data),e.loading=!1,e.finished=!0}))}},{key:"_queryPersonByCustId",value:function(e){var t=this;Object(m["l"])(e).then((function(e){"200"===e.code&&(t.personList=e.data)}))}},{key:"_queryGovernmentUserMsg",value:function(e){var t=this;Object(m["k"])(e).then((function(e){if("200"===e.code){for(var a=[],i=0;i<e.data.list[0].govermentList[0].detail.length;i++){var s=e.data.list[0].govermentList[0].detail[i];s.USER_ID&&3!==s.IS_DEL&&a.push(s)}if(a.length>0){for(var r=[a[0]],o=0;o<a.length;o++){for(var n=!1,c=0;c<r.length;c++)if(a[o].USER_ID===r[c].USER_ID){n=!0;break}n||r.push(a[o])}t.personList=r}}else t.$toast.fail(e.msg),t.personList=[]}))}},{key:"changeCust",value:function(e){var t={creId:this.userInfor.userId,custId:e.custId,type:this.customerData.visitType,otherUserId:2===+this.customerData.visitType?this.customerData.visitUserId:""};this._queryPersonByCustId(t),this.customerData.objId=e.custId,this.customerData.objName=e.custName,this.objShowPicker=!1}},{key:"changeProvider",value:function(e){this.personList=e.userList;for(var t=[],a=0;a<e.userList.length;a++){var i=e.userList[a];i.userId&&3!==i.isDel&&!i.oldOperationId&&t.push(i)}this.personList=[].concat(t),this.customerData.objId=e.cpiId,this.customerData.objName=e.providerName,this.objShowPicker=!1}},{key:"changeGover",value:function(e){var t={cgId:e.cgId,govAttributeid:"",orgnizationKeyword:"",pageNum:1,pageSize:1,ssqCode:"",useridList:[]};this._queryGovernmentUserMsg(t),this.customerData.objId=e.cgId,this.customerData.objName=e.govAttributeId+"/"+e.govAttributeName+"/"+e.orgnizationName,this.objShowPicker=!1}},{key:"staffMemberClick",value:function(){this.customerData.objId&&this.customerData.objName?this.staffMemberShow=!0:this.$toast.fail("请先选择单位信息")}},{key:"staffMemberChange",value:function(e,t){this.$refs.checkboxes[t].toggle()}},{key:"staffMemberSure",value:function(){var e=this;this.staffMemberShow=!1,this.customerData.staffMemberName="",this.staffMemberCheckDetail=[];var t=this.personList.filter((function(t){return-1!==e.staffMemberCheck.indexOf(t.USER_ID||t.userId)}));this.$nextTick((function(){t.filter((function(a,i){e.customerData.staffMemberName+=a.CU_USER_NAME||a.userName,i<t.length-1&&(e.customerData.staffMemberName+="，"),e.staffMemberCheckDetail.push({userId:a.USER_ID||a.userId,userName:a.CU_USER_NAME||a.userName,phoneNumber:a.CU_PHONE_NUM||a.phoneNum,hotid:a.WARMTH_NUM||a.warmthNum,starCheck:0,outsideCheck:e.customerData.addressValue?1:0,hotValue:1===+a.WARMTH_NUM||1===+a.warmthNum?"业务员一般客情":2===+a.WARMTH_NUM||3===+a.warmthNum?"需要进阶的客情":3===+a.WARMTH_NUM||3===+a.warmthNum?"从未接触的客情":"请选择热力值信息",remarkValueList:[{labelId:"",labelName:"",remark:"",expectTimeStr:""}],needLabelValueObj:[]})})),e.SET_DETAILOBJ({staffMemberCheckDetail:e.staffMemberCheckDetail})}))}},{key:"adressPickerClick",value:function(){this.customerData.changeTime?this.showAdressPicker=!0:this.$toast.fail("请先选择拜访时间")}},{key:"adressOnConfirm",value:function(e){if(!e)return this.customerData.addressValue="",this.customerData.addressDeatilValue="",void(this.showAdressPicker=!1);this.customerData.addressValue=e.cciId,this.customerData.addressDeatilValue=e.cciId+"/"+e.address,this.showAdressPicker=!1}},{key:"addressChoose",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.customerData.addressValue=t.addressID,this.customerData.addressDeatilValue=t.addressDetail,this.showAdressPicker=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"adressCancel",value:function(){this.showAdressPicker=!1}},{key:"addCustomSure",value:function(e){this.staffMemberCheckDetail=e,this.customerLabelShow=!1}},{key:"submitClick",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.customerData.changeTime){e.next=5;break}return this.$toast.fail("请选择拜访时间"),e.abrupt("return");case 5:if(-1!==this.customerData.objTypeValue){e.next=8;break}return this.$toast.fail("请选择单位类型"),e.abrupt("return");case 8:if(""!==this.customerData.objId){e.next=11;break}return this.$toast.fail("请选择单位信息"),e.abrupt("return");case 11:if(this.staffMemberCheckDetail.length){e.next=14;break}return this.$toast.fail("请选择职员信息"),e.abrupt("return");case 14:return t=[],this.staffMemberCheckDetail.filter((function(e){var a=[];e.remarkValueList.filter((function(e){e.labelId&&a.push({labelName:e.labelName,labelId:e.labelId,remark:e.remark,medicBoardType:e.medicBoardType,medicBoardTypeName:e.medicBoardTypeName,medicBoardTypeMemo:e.medicBoardTypeMemo,scheduleMeetingTime:e.scheduleMeetingTime,medicBoardMemo:e.medicBoardMemo,isSign:!1,userIdList:[],tagIdList:[]})})),t.push({companyType:i.customerData.objTypeValue,companyId:i.customerData.objId,companyName:i.customerData.objName,dataType:1,cciId:i.customerData.addressValue,leaderIsItVisible:1,starFlag:e.starCheck?1:0,taskType:i.customerData.visitType,togetherUserId:i.customerData.visitUserId,userId:i.userInfor.userId,visitTime:i.customerData.changeTime,visitUserId:e.userId,whetherLegwork:e.outsideCheck||i.customerData.addressValue?1:0,crmLabelRemarkVoList:a})})),this.$emit("submitClick",t),e.next=19,Object(m["h"])(t);case 19:a=e.sent,"200"===a.code&&(this.$toast({type:"success",message:a.msg}),this.$router.go(-1),this.SET_DATACHANGEOP("add"));case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancelClick",value:function(){var e=this;this.$dialog.confirm({title:"提示",message:"确定取消新增客情事件？",confirmButtonColor:"#2271f5",beforeClose:function(t,a){"confirm"===t?(e.$router.go(-1),a()):a()}})}},{key:"editLabelClick",value:function(){this.$router.push({name:"customerFollowEdit",query:{activeName:String(this.activeName)}})}},{key:"mounted",value:function(){this.labelTreeList.length||this._getLabelTree({type:"1"})}}]),a}(Object(d["b"])(p["a"]));Object(h["a"])([g.Action],D.prototype,"_getLabelTree",void 0),Object(h["a"])([g.Mutation],D.prototype,"SET_DATACHANGEOP",void 0),Object(h["a"])([g.Mutation],D.prototype,"SET_DETAILOBJ",void 0),Object(h["a"])([g.Getter],D.prototype,"labelTreeList",void 0),Object(h["a"])([y.Getter],D.prototype,"userInfor",void 0),D=Object(h["a"])([Object(d["a"])({components:{clockIn:v["a"],customLabel:b["a"]}})],D);var _=D,j=_,I=(a("2ef3"),a("2877")),S=Object(I["a"])(j,i,s,!1,null,"44927ae8",null);t["default"]=S.exports}}]);