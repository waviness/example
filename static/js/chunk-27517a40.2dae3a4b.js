(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27517a40"],{3337:function(e,t,a){"use strict";a("d1de")},"53ae":function(e,t,a){"use strict";var n=a("d4ec"),r=a("bee2"),i=a("262e"),s=a("2caf"),o=(a("b0c0"),a("9ab4")),c=a("1b40");c["a"].registerHooks(["beforeRouteEnter"]);var u=function(e){Object(i["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.page=1,e.total=0,e.dataList=[],e.loading=!1,e.finished=!1,e.refreshing=!1,e.finishText="",e.userIdList=[],e.error=!1,e}return Object(r["a"])(a,[{key:"beforeRouteEnter",value:function(e,t,a){a((function(e){"Home"!==t.name&&"TaskIndex"!==t.name||(e.dataList=[],e.page=1,e.loading=!1,e.finished=!0,e.refreshing=!1,e.$nextTick((function(){e.finished=!1})))}))}}]),a}(c["d"]);u=Object(o["a"])([Object(c["a"])({})],u),t["a"]=u},"6e5a":function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"r",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"l",(function(){return u})),a.d(t,"m",(function(){return l})),a.d(t,"a",(function(){return p})),a.d(t,"i",(function(){return d})),a.d(t,"b",(function(){return f})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return h})),a.d(t,"k",(function(){return v})),a.d(t,"g",(function(){return b})),a.d(t,"h",(function(){return g})),a.d(t,"j",(function(){return y})),a.d(t,"n",(function(){return O})),a.d(t,"q",(function(){return w})),a.d(t,"p",(function(){return k})),a.d(t,"o",(function(){return j}));var n=a("1da1"),r=(a("99af"),a("96cf"),a("b32d")),i=a("90ae"),s=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymCustomerManager/getSzymCustomerMng",t,t.hideloading);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymCustomerManager/updSzymCustomer",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].formDataPost(i["c"],"/api/SzymCustomerManager/getSzymCustomerStaff",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].formDataPost(i["c"],"/api/SzymCustomerManager/getUserByPhoneNum",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymCustomerManager/optSzymCustomerStaff?szymCustomerId="+t.szymCustomerId,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymCustomerManager/dltSzymCustomerStaff?scStaffId="+t.scStaffId,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymUserVisit/getSzymUserVisit",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].formDataPost(i["c"],"/api/SzymCustomer/getSzymCustomerContact",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].formDataPost(i["c"],"/api/SzymCustomer/getSzymCustomerTransport",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymProjectMng/getSzymProjectMng",t,t.loading);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymUserVisit/getSzymUserVisitStat",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymUserVisit/getSzymUserProjectVisit",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymUserVisit/getSzymUserVisiByUserProject",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].formDataPost(i["c"],"/api/SzymUserVisit/getSzymUserVisitBySuvId",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymUserVisit/optSzymUserVisit",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymUserVisit/optSzymUserVisitPic?suvId=".concat(t.suvId,"&deleteFlag=").concat(t.deleteFlag),t.list);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post(i["c"],"/api/SzymUserVisit/optSzymUserVisitLabelRemark",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].dataPost(i["c"],"/api/SzymUserVisit/optSzymUserVisitClockIn",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"849e":function(e,t,a){"use strict";a("a340")},a340:function(e,t,a){},d1de:function(e,t,a){},d6c0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("van-sticky",[a("div",{staticClass:"gray-block box-shadow mb-2 van-clearfix px-2 pt-4"},[a("div",{staticClass:"white-block d-flex justify-space-between pt-2 px-2"},[a("div",{staticClass:"font-bold flex-5 font-14"},[a("div",[e._v(e._s(e.detailInfor.szymCustomerId)+"/")]),a("div",[e._v(e._s(e.detailInfor.customerName.split("/")[0]||""))])]),a("div",{staticClass:"d-flex flex-column flex-3 align-end",staticStyle:{"margin-left":"20px","min-width":"fit-content"}},[a("span",{staticClass:"tag-primary-plain mb-2"},[e._v(" "+e._s(e.detailInfor&&0===e.detailInfor.sourceType?"拓展客户":"业务系统内客户")+" ")]),a("span",{class:e.detailInfor.customerTypeName?"tag-primary-plain":"tag-text-plain"},[e._v(" "+e._s(e.detailInfor&&e.detailInfor.customerTypeName||"未维护")+" ")])])]),a("div",{staticClass:"white-block px-2"},[a("div",{staticClass:"color-gray-5 pb-2"},[e._v(e._s(e.detailInfor.registerAddress))]),a("div",{staticClass:"d-flex justify-space-between pb-2"},[e.detailInfor&&e.detailInfor.relCustomerId?a("div",{staticClass:"font-12 color-normal"},[e._v(" 已关联至"+e._s(e.detailInfor&&e.detailInfor.relCustomerId)+"/"+e._s(e.detailInfor&&e.detailInfor.relCustomerName||"--")+" ")]):a("div",{staticClass:"color-gray-7"},[e._v("暂未关联业务系统内客户")]),a("div",[a("span",[e._v("维护人：")]),a("span",[e._v(e._s(e.detailInfor.operateName))])])])]),a("div",{staticClass:"d-flex justify-space-between pa-10"},[a("div",{},[e._v("客户人员数")]),a("div",{staticClass:"font-bold color-main-2 font-16"},[e._v(" "+e._s(e.detailInfor.customerStaffNum)+" ")])])])]),a("div",{staticClass:"personContent px-2 pt-2 pb-100"},[a("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{offset:20,finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e._l(e.personList,(function(t,n){return a("div",{key:n,staticClass:"personContent-card"},[a("div",{staticClass:"d-flex justify-space-between align-center background-color-white px-3 pt-3"},[a("div",{staticClass:"d-flex flex-column pb-2"},[a("span",{staticClass:"font-16 fontWeight pb-1"},[e._v(e._s(t.userId)+"/"+e._s(t.userName)+" ")]),a("span",[e._v(e._s(t.phoneNum))])]),a("div",[a("span",{staticClass:"tag-primary-plain font-14",class:t.customerUserGradeName?"tag-primary-plain":"tag-text-plain"},[e._v(e._s(t.customerUserGradeName||"未维护"))])])]),a("div",{staticClass:"background-color-white px-3 pb-3"},[a("div",{staticClass:"list-one pb-2"},[a("span",{staticClass:"title"},[e._v("微信号")]),a("span",{staticClass:"value"},[e._v(e._s(t.wxCode))])]),a("div",{staticClass:"list-one pb-2"},[a("span",{staticClass:"title"},[e._v("部门信息")]),a("span",{staticClass:"value"},[e._v(e._s(t.officeName||"--"))])]),a("div",{staticClass:"list-one pb-2"},[a("span",{staticClass:"title"},[e._v("职位信息")]),a("span",{staticClass:"value"},[e._v(e._s(t.positionName||"--"))])]),a("div",{staticClass:"list-one pb-2"},[a("span",{staticClass:"title"},[e._v("维护人")]),a("span",{staticClass:"value"},[e._v(e._s(t.createId)+"/"+e._s(t.createName))])])]),a("div",{staticClass:"py-2 d-flex justify-end"},[a("span",[a("van-button",{staticClass:"mr-2",attrs:{round:"",size:"small",type:"info"},on:{click:function(a){return e.editPersonClick(t)}}},[e._v("编辑")]),a("van-button",{staticClass:"mr-2",attrs:{plain:"",round:"",size:"small",type:"danger"},on:{click:function(a){return e.deletePersonClick(t)}}},[e._v("删除")])],1)])])})),e.loading||0!=e.personList.length?e._e():a("app-empty",{staticStyle:{"margin-top":"50px"},attrs:{description:"暂无数据"}})],2)],1)],1),a("div",{staticClass:"commonOpButton-footer"},[a("van-button",{attrs:{round:"",plain:"",color:"#2271F5"},on:{click:e.editCustomerClick}},[a("span",[e._v("客户编辑")])]),a("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:e.addClick}},[a("span",[e._v("人员新增")])])],1),a("van-popup",{staticClass:"van-popup-bg",style:{height:"100%"},attrs:{position:"bottom"},model:{value:e.addPopVisible,callback:function(t){e.addPopVisible=t},expression:"addPopVisible"}},[e.addPopVisible?a("PersonOp",{attrs:{userDetail:e.editPersonObj,officeOptions:e.officeOptions,positionOptions:e.positionOptions,structureLevelOptions:e.structureLevelOptions,customerUserGradeOptions:e.customerUserGradeOptions},on:{cancelClick:function(t){e.addPopVisible=!1},submitClick:e.submitClick}}):e._e()],1),a("van-popup",{staticClass:"van-popup-bg",style:{height:"90%"},attrs:{position:"bottom"},model:{value:e.editCustomerVisible,callback:function(t){e.editCustomerVisible=t},expression:"editCustomerVisible"}},[a("div",{staticClass:"white-block d-flex justify-space-between pa-2 mb-4"},[a("div",{staticClass:"font-bold"},[a("div",[e._v(e._s(e.detailInfor.szymCustomerId)+"/")]),a("div",[e._v(e._s(e.detailInfor.customerName.split("/")[0]||""))])]),a("div",{staticClass:"d-flex flex-column align-end",staticStyle:{"margin-left":"90px","min-width":"fit-content"}},[a("span",{staticClass:"tag-primary-plain mb-2"},[e._v(" "+e._s(e.detailInfor&&0===e.detailInfor.sourceType?"拓展客户":"业务系统内客户")+" ")]),a("span",{staticClass:"tag-primary-plain"},[e._v(" "+e._s(e.detailInfor&&e.detailInfor.customerTypeName)+" ")])])]),a("van-field",{attrs:{readonly:"",clickable:"",value:e.customTypeObj.name,label:"客户类型","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(1)}}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.businessNatureObj.name,label:"学术专线","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(2)}}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.scienceLineObj.name,label:"经营性质","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(3)}}}),a("div",{staticClass:"commonButton-footer d-flex justify-center"},[a("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:function(t){e.editCustomerVisible=!1}}},[e._v("取消")]),a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:e.expandSaveClick}},[e._v("确定")])],1)],1),1===e.actionType?a("van-action-sheet",{attrs:{actions:e.customTypeList,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectClick},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),2===e.actionType?a("van-action-sheet",{attrs:{actions:e.businessNatureTypeList,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectClick},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),3===e.actionType?a("van-action-sheet",{attrs:{actions:e.scienceLineTypeList,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectClick},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e()],1)},r=[],i=a("5530"),s=a("3835"),o=a("1da1"),c=a("d4ec"),u=a("bee2"),l=a("262e"),p=a("2caf"),d=(a("96cf"),a("99af"),a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("e9c4"),a("9ab4")),f=a("1b40"),m=a("53ae"),h=a("6e5a"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-100"},[a("van-form",{attrs:{"validate-first":""},on:{failed:e.onFailed}},[a("van-field",{attrs:{value:e.detailInfor.szymCustomerId+"/"+e.detailInfor.customerName,clearable:"",required:"",name:"validator",label:"客户信息","input-align":"right"}}),a("van-field",{attrs:{clearable:"",required:"",name:"validator",label:"人员姓名","input-align":"right",placeholder:"请输入人员姓名",rules:[{validator:e.validator,message:""}]},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}}),a("van-field",{attrs:{clearable:"",required:"",name:"validator",label:"手机号","input-align":"right",placeholder:"请输入手机号",rules:[{validator:e.validator,message:""}]},on:{input:e._queryCrmUser},model:{value:e.formData.phoneNum,callback:function(t){e.$set(e.formData,"phoneNum",t)},expression:"formData.phoneNum"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.phoneLoading||e.userObj,expression:"phoneLoading || userObj"}],staticClass:"user-list"},[e.phoneLoading?a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}}):e.userObj?a("div",{staticClass:"user-info",on:{click:function(t){return e.chooseUser(e.userObj)}}},[a("div",{staticClass:"user-info__name"},[e._v(" "+e._s(e.userObj.userId+"/"+e.userObj.userName)+" ")]),a("div",{staticClass:"user-info__code"},[e._v("手机号："+e._s(e.userObj.phoneNum))]),a("div",{staticClass:"user-info__code"},[e._v("微信号："+e._s(e.userObj.wxCode))])]):e._e()],1),a("van-field",{attrs:{clearable:"",required:"",name:"validator",label:"微信号","input-align":"right",placeholder:"请输入人员微信号",rules:[{validator:e.validator,message:""}]},model:{value:e.formData.wxCode,callback:function(t){e.$set(e.formData,"wxCode",t)},expression:"formData.wxCode"}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.formData.genderObj.name,required:"",label:"性别","input-align":"right",placeholder:"点击选择",rules:[{validator:e.validator,message:"请选择人员性别"}]},on:{click:function(t){return e.chooseFilter(1)}}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.formData.birthday,label:"生日","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(0)}}}),a("van-field",{attrs:{disabled:"",clearable:"",name:"age",label:"年龄","input-align":"right",placeholder:"请选择生日"},model:{value:e.formData.age,callback:function(t){e.$set(e.formData,"age",t)},expression:"formData.age"}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.formData.officeIdObj.name,label:"科室信息","input-align":"right",placeholder:"点击选择",rules:[{validator:e.validator,message:"请选择科室信息"}]},on:{click:function(t){return e.chooseFilter(2)}}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.formData.positionIdObj.name,label:"职称信息","input-align":"right",placeholder:"点击选择",rules:[{validator:e.validator,message:"请选择职称信息"}]},on:{click:function(t){return e.chooseFilter(3)}}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.formData.structureLevelObj.name,label:"行政级别","input-align":"right",placeholder:"点击选择"},on:{click:function(t){return e.chooseFilter(4)}}}),a("van-field",{attrs:{clearable:"",rows:"2",autosize:"",type:"textarea",label:"头衔","input-align":"right",placeholder:"请输入头衔"},model:{value:e.formData.honorTitle,callback:function(t){e.$set(e.formData,"honorTitle",t)},expression:"formData.honorTitle"}}),a("van-field",{attrs:{readonly:"",clickable:"",value:e.formData.customerUserGradeObj.name,label:"客户分级","input-align":"right",placeholder:"点击选择",rules:[{validator:e.validator,message:"客户职员分级"}]},on:{click:function(t){return e.chooseFilter(5)}}}),a("van-field",{attrs:{clearable:"",label:"学位","input-align":"right",placeholder:"请输入学位"},model:{value:e.formData.degree,callback:function(t){e.$set(e.formData,"degree",t)},expression:"formData.degree"}})],1),1===e.actionType?a("van-action-sheet",{attrs:{actions:e.genderOptions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectGender},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),2===e.actionType?a("van-action-sheet",{attrs:{actions:e.officeOptions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectOffice},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),3===e.actionType?a("van-action-sheet",{attrs:{actions:e.positionOptions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectPosition},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),4===e.actionType?a("van-action-sheet",{attrs:{actions:e.structureLevelOptions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectStructureLevel},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),5===e.actionType?a("van-action-sheet",{attrs:{actions:e.customerUserGradeOptions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onSelectCustomerUserGrade},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}}):e._e(),0===e.actionType?a("van-popup",{staticClass:"transfer",attrs:{"close-on-click-overlay":!1,round:""},model:{value:e.actionShow,callback:function(t){e.actionShow=t},expression:"actionShow"}},[a("div",{staticClass:"transfer-div"},[a("van-datetime-picker",{attrs:{minDate:e.minDate,maxDate:e.maxDate,"show-toolbar":!1,type:"date",title:"选择年月日"},model:{value:e.birthday,callback:function(t){e.birthday=t},expression:"birthday"}}),a("div",{staticClass:"transfer-opts"},[a("div",{staticClass:"transfer-btn",on:{click:function(t){e.actionShow=!1}}},[e._v("取消")]),a("div",{staticClass:"transfer-btn transfer-btn--blue",on:{click:e.onSelectBirthday}},[e._v("确定")])])],1)]):e._e(),a("div",{staticClass:"commonButton-footer d-flex justify-center"},[a("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:e.cancelClick}},[e._v("取消")]),a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:e.submitClick}},[e._v("确定")])],1)],1)},b=[],g=(a("ac1f"),a("00b4"),a("d926")),y=a("4bb5"),O=Object(y["a"])("app"),w=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.genderOptions=[{value:1,name:"男"},{value:2,name:"女"}],e.minDate=new Date(1950,0,1),e.maxDate=new Date,e.formData={userId:"",userName:"",phoneNum:"",wxCode:"",gender:"",genderName:"",genderObj:"",birthday:"",age:"",officeId:"",officeName:"",officeIdObj:"",positionId:"",positionName:"",positionIdObj:"",structureLevel:"",structureLevelName:"",structureLevelObj:"",honorTitle:"",customerUserGrade:"",customerUserGradeName:"",customerUserGradeObj:"",degree:""},e.birthday=new Date,e.phoneLoading=!1,e.actionShow=!1,e.userObj="",e.actionType="",e.iTime=null,e}return Object(u["a"])(a,[{key:"chooseUser",value:function(e){this.formData=Object(i["a"])({},e)}},{key:"_queryCrmUser",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:this.phoneLoading=!0,clearTimeout(this.iTime),this.iTime=setTimeout(Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={phoneNum:t},e.next=3,Object(h["l"])(n);case 3:r=e.sent,"200"===r.code&&(a.phoneLoading=!1,r.data?a.userObj=r.data:a.userObj="");case 5:case"end":return e.stop()}}),e)}))),800);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"chooseFilter",value:function(e){this.actionShow=!0,this.actionType=e}},{key:"onSelectBirthday",value:function(){this.actionShow=!1,this.formData.birthday=Object(g["c"])(this.birthday);var e=this.$dayjs(this.birthday),t=this.$dayjs(),a=t.diff(e,"year");this.formData.age=a,this.$forceUpdate()}},{key:"onSelectGender",value:function(e){this.actionShow=!1,this.formData.genderObj=e,this.formData.gender=e.value,this.formData.genderName=e.name,this.formData.genderObj=e,this.$forceUpdate()}},{key:"onSelectOffice",value:function(e){this.actionShow=!1,this.formData.officeIdObj=e,this.formData.officeId=e.value,this.formData.officeName=e.name,this.$forceUpdate()}},{key:"onSelectPosition",value:function(e){this.actionShow=!1,this.formData.positionIdObj=e,this.formData.positionId=e.value,this.formData.positionName=e.name,this.$forceUpdate()}},{key:"onSelectStructureLevel",value:function(e){this.actionShow=!1,this.formData.structureLevelObj=e,this.formData.structureLevel=e.value,this.formData.structureLevelName=e.name,this.$forceUpdate()}},{key:"onSelectCustomerUserGrade",value:function(e){this.actionShow=!1,this.formData.customerUserGradeObj=e,this.formData.customerUserGrade=e.value,this.formData.customerUserGradeName=e.name,this.$forceUpdate()}},{key:"validator",value:function(e){return/\S/.test(e)}},{key:"onFailed",value:function(e){}},{key:"cancelClick",value:function(){this.$emit("cancelClick")}},{key:"submitClick",value:function(){this.$emit("submitClick",this.formData)}},{key:"mounted",value:function(){if(this.userDetail){var e=this.userDetail,t=e.userId,a=e.phoneNum,n=e.userName,r=e.wxCode,i=e.gender,s=e.birthday,o=e.age,c=e.officeId,u=e.officeName,l=e.positionId,p=e.positionName,d=e.structureLevel,f=e.structureLevelName,m=e.honorTitle,h=e.customerUserGrade,v=e.customerUserGradeName,b=e.graduatedSchool,g=e.degree;this.formData={userId:t,phoneNum:a,userName:n,wxCode:r,gender:i,genderObj:{name:1===i?"男":2===i?"女":"",value:i},birthday:s,age:o,officeId:c,officeName:u,officeIdObj:{value:c,name:u},positionId:l,positionName:p,positionIdObj:{value:l,name:p},structureLevel:d,structureLevelObj:{value:d,name:f},structureLevelName:f,honorTitle:m,customerUserGrade:h,customerUserGradeObj:{value:h,name:v},customerUserGradeName:v,graduatedSchool:b,degree:g}}}}]),a}(f["d"]);Object(d["a"])([O.Getter],w.prototype,"detailInfor",void 0),Object(d["a"])([Object(f["c"])()],w.prototype,"userDetail",void 0),Object(d["a"])([Object(f["c"])()],w.prototype,"officeOptions",void 0),Object(d["a"])([Object(f["c"])()],w.prototype,"positionOptions",void 0),Object(d["a"])([Object(f["c"])()],w.prototype,"structureLevelOptions",void 0),Object(d["a"])([Object(f["c"])()],w.prototype,"customerUserGradeOptions",void 0),w=Object(d["a"])([Object(f["a"])({})],w);var k=w,j=k,C=(a("849e"),a("2877")),S=Object(C["a"])(j,v,b,!1,null,"33263f62",null),D=S.exports,x=a("f727"),_=Object(y["a"])("app"),I=Object(y["a"])("crm"),N=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.personList=[],e.addPopVisible=!1,e.officeOptions=[],e.positionOptions=[],e.structureLevelOptions=[],e.customerUserGradeOptions=[],e.businessNatureObj={},e.editPersonObj={},e.customTypeObj={},e.scienceLineObj={},e.editCustomerVisible=!1,e.actionShow=!1,e.actionType=-1,e}return Object(u["a"])(a,[{key:"onRefresh",value:function(){this.finished=!1,this.loading=!1,this.page=1,this.onLoad()}},{key:"onLoad",value:function(){this.refreshing&&(this.page=1,this.personList=[],this.refreshing=!1),this.loading=!0,this.getSzymCustomerStaff()}},{key:"getSzymCustomerStaff",value:function(){var e=this;1===this.page&&(this.personList=[]),this.loading=!0,Object(h["d"])({szymCustomerId:this.detailInfor.szymCustomerId,pageNum:this.page,pageSize:10}).then((function(t){e.detailInfor.customerStaffNum=t.data.total,"200"===t.code&&(e.personList=e.personList.concat(t.data.list),e.total=t.data.total),t.data.hasNextPage?e.page++:e.finished=!0,e.loading=!1}))}},{key:"addClick",value:function(){this.editPersonObj={},this.addPopVisible=!0}},{key:"editCustomerClick",value:function(){this.editCustomerVisible=!0}},{key:"getTypeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a={full:!0,pageNum:1,pageSize:1e5,usestatus:1,typeId:t},e.next=4,Object(x["d"])(a);case 4:return n=e.sent,r=n.data.list.map((function(e){var t=e.DIC_SELECT_ID,a=e.DIC_SELECT_NAME;return{value:t,name:a}})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getTypeList(64),this.getTypeList(65),this.getTypeList(71),this.getTypeList(72)]);case 2:t=e.sent,a=Object(s["a"])(t,4),n=a[0],r=a[1],i=a[2],o=a[3],this.officeOptions=n,this.positionOptions=r,this.customerUserGradeOptions=i,this.structureLevelOptions=o,this.customTypeObj.name=this.detailInfor.customerTypeName,this.customTypeObj.value=this.detailInfor.customerType,this.businessNatureObj.name=this.detailInfor.businessNatureName,this.businessNatureObj.value=this.detailInfor.businessNature,this.scienceLineObj.name=this.detailInfor.scienceLineName,this.scienceLineObj.value=this.detailInfor.scienceLine;case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"submitClick",value:function(e){this._optSzymCustomerStaff(e)}},{key:"_optSzymCustomerStaff",value:function(e){var t=this;Object(h["m"])(Object(i["a"])(Object(i["a"])({},e),{},{szymCustomerId:this.detailInfor.szymCustomerId})).then((function(e){e.success&&(t.$toast.success(e.msg),t.addPopVisible=!1,t.onRefresh())}))}},{key:"editPersonClick",value:function(e){this.editPersonObj=e,this.addPopVisible=!0}},{key:"deletePersonClick",value:function(e){var t=this;this.$dialog.confirm({message:"确定删除职员信息？",confirmButtonColor:"#2271F5"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:Object(h["a"])({scStaffId:e.scStaffId}).then((function(e){"200"===e.code&&t.$toast.success(e.msg)}));case 1:case"end":return a.stop()}}),a)}))))}},{key:"chooseFilter",value:function(e){this.actionShow=!0,this.actionType=e}},{key:"onSelectClick",value:function(e){1===this.actionType&&(this.customTypeObj=e),2===this.actionType&&(this.businessNatureObj=e),3===this.actionType&&(this.scienceLineObj=e)}},{key:"expandSaveClick",value:function(){this._updSzymCustomer()}},{key:"_updSzymCustomer",value:function(){var e=this;Object(h["r"])({szymCustomerId:this.detailInfor.szymCustomerId,customerType:this.customTypeObj.value,scienceLine:this.scienceLineObj.value,businessNature:this.businessNatureObj.value}).then((function(t){if("200"===t.code){e.editCustomerVisible=!1,e.$toast.success(t.msg);var a=JSON.parse(JSON.stringify(e.detailInfor));a.customerTypeName=e.customTypeObj.name,a.customerType=e.customTypeObj.value,a.businessNatureName=e.businessNatureObj.name,a.businessNature=e.businessNatureObj.value,a.scienceLineName=e.scienceLineObj.name,a.scienceLine=e.scienceLineObj.value,e.SET_DETAILINFOR(a)}}))}},{key:"mounted",value:function(){this.init()}}]),a}(Object(f["b"])(m["a"]));Object(d["a"])([_.Mutation],N.prototype,"SET_HADDONEONDETAIL",void 0),Object(d["a"])([_.Mutation],N.prototype,"SET_DETAILINFOR",void 0),Object(d["a"])([_.Getter],N.prototype,"detailInfor",void 0),Object(d["a"])([I.Getter],N.prototype,"customTypeList",void 0),Object(d["a"])([I.Getter],N.prototype,"businessNatureTypeList",void 0),Object(d["a"])([I.Getter],N.prototype,"scienceLineTypeList",void 0),N=Object(d["a"])([Object(f["a"])({components:{PersonOp:D}})],N);var L=N,T=L,z=(a("3337"),Object(C["a"])(T,n,r,!1,null,"7c6f36dc",null));t["default"]=z.exports},d926:function(e,t,a){"use strict";a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return d})),a.d(t,"j",(function(){return f})),a.d(t,"i",(function(){return m})),a.d(t,"k",(function(){return h})),a.d(t,"b",(function(){return v})),a.d(t,"e",(function(){return b})),a.d(t,"g",(function(){return g})),a.d(t,"f",(function(){return y})),a.d(t,"a",(function(){return O})),a.d(t,"h",(function(){return w}));a("d3b7"),a("25f0"),a("ac1f"),a("1276");var n=a("5a0c"),r=a.n(n),i=new Date,s=i.getDay(),o=i.getDate(),c=i.getMonth(),u=i.getYear();u+=u<2e3?1900:0;var l=new Date;function p(e){var t=new Date(e),a=t.getFullYear(),n=(t.getMonth()+1).toString(),r=t.getDate().toString();return+n<10&&(n="0"+n),+r<10&&(r="0"+r),a+"-"+n+"-"+r}function d(e){var t=new Date(e),a=t.getFullYear(),n=(t.getMonth()+1).toString(),r=t.getDate().toString();return+n<10&&(n="0"+n),+r<10&&(r="0"+r),a+"/"+n+"/"+r}function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var a=new Date(t),n=a.getDay();n=0===n?7:n;var r=a.getDate(),i=a.getMonth(),l=a.getYear();l+=l<2e3?1900:0,e=new Date(l,i,r-(n-1))}else e=new Date(u,c,o-(s-1));return p(e)}function m(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var a=new Date(t),n=a.getDay();n=0===n?7:n;var r=a.getDate(),i=a.getMonth(),l=a.getYear();l+=l<2e3?1900:0,e=new Date(l,i,r+(6-(n-1)))}else e=new Date(u,c,o+(6-(s-1)));return p(e)}function h(e){return 0===r()(e).day()?r()(e).startOf("week").subtract(6,"day").format("YYYY-MM-DD"):r()(e).startOf("week").add(1,"day").format("YYYY-MM-DD")}function v(e){return 0===r()(e).day()?r()(e).endOf("week").subtract(6,"day").format("YYYY-MM-DD"):r()(e).endOf("week").add(1,"day").format("YYYY-MM-DD")}l.setDate(1),l.setMonth(l.getMonth()-1);var b=function(e,t){var a=[],n=e.split("-"),r=t.split("-"),i=new Date(n+" 08:00:00");i.setUTCFullYear(n[0],n[1]-1,n[2]);var s=new Date(r+" 08:00:00");s.setUTCFullYear(r[0],r[1]-1,r[2]);var o,c=i.getTime(),u=s.getTime(),l=864e5;for(o=c;o<=u;)a.push(p(new Date(parseInt(String(o))))),o+=l;return a},g=function(e,t){var a=new Date(e),n="";a.setDate(a.getDate()+t);var r=a.getFullYear(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,s=a.getDate()<10?"0"+a.getDate():a.getDate();return n=r+"-"+i+"-"+s,n},y=function(e){var t,a,n,r,i=new Date(e+"-01-01"),s=i.getFullYear(),o={result0:[],result1:[],result2:[],result3:[],result4:[],result5:[],result6:[]};for(t=1;t<=12;t++){switch(t){case 1:case 3:case 5:case 7:case 8:case 10:case 12:r=31;break;case 4:case 6:case 9:case 11:r=30;break;case 2:r=s%4===0&&s%100!==0||s%400===0?29:28;break}for(a=1;a<=r;a++){i.setMonth(t-1,a),n=i.getDay();var c=i.getFullYear(),u=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,l=i.getDate()<10?"0"+i.getDate():i.getDate();o["result"+n].push(c+"-"+u+"-"+l)}}return o};function O(e){switch(e){case 0:return"日";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";default:break}}var w=function(e){var t=new Date,a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),i=e.split("-"),s=0;if(n>parseInt(i[0])||n==parseInt(i[0])&&r>parseInt(i[1])){var o=new Date(a+1,parseInt(i[0])-1,parseInt(i[1])).toLocaleDateString(),c=Date.parse(o),u=Date.parse(t.toLocaleDateString());s=(c-u)/864e5}else{var l=new Date(a,parseInt(i[1])-1,parseInt(i[2])).toLocaleDateString(),p=Date.parse(l),d=Date.parse(t.toLocaleDateString());s=(p-d)/864e5}if(s<0){var f=a+1,m=f%4===0&&f%100!==0||f%400===0?366:365;s+=m}return s}}}]);