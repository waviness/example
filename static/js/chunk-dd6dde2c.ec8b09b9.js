(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd6dde2c"],{"6f07":function(t,s,e){},"803c":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.detailObj.ctsId?e("div",{staticClass:"detail"},[e("list",{attrs:{listItem:t.detailObj,type:"detail"}}),e("van-tabs",{attrs:{color:"#2271f5"},model:{value:t.tabsActive,callback:function(s){t.tabsActive=s},expression:"tabsActive"}},[e("van-tab",{attrs:{name:"1"},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"d-flex align-center"},[e("icon-svg",{attrs:{size:"small",name:"ytcrm-thumb-up",color:"1"===t.tabsActive?"#2271F5":"#a3a3a3"}}),e("span",{staticClass:"ml-2 font-14",style:"1"===t.tabsActive?"color:#2271F5":"color:#a3a3a3"},[t._v(t._s(t.detailObj.subscribeList.length))])],1)]},proxy:!0}],null,!1,2911122657)},[e("div",{staticClass:"subscribe"},t._l(t.detailObj.subscribeList,(function(s,a){return e("div",{key:"subscribe"+a,staticClass:"listItem-content pa-10 d-flex"},[e("van-image",{attrs:{round:"",width:"40",height:"40",src:t.$root.domainUrl+s.headImgUrl}}),e("ul",{staticClass:"pl-2 listItem-infor d-flex flex-column justify-space-between"},[e("li",{staticClass:"font-14"},[t._v(t._s(s.userName))]),e("li",{staticClass:"color-gray"},[t._v(t._s(s.createTime))])])],1)})),0)]),e("van-tab",{attrs:{name:"2"},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"d-flex align-center"},[e("icon-svg",{attrs:{size:"small",name:"ytcrm-xingzhuang5",color:"2"===t.tabsActive?"#2271F5":"#a3a3a3"}}),e("span",{staticClass:"ml-2 font-14",style:"2"===t.tabsActive?"color:#2271F5":"color:#a3a3a3"},[t._v(t._s(t.detailObj.discussList.length))])],1)]},proxy:!0}],null,!1,4257959373)},[e("div",{staticClass:"discuss"},t._l(t.detailObj.discussList,(function(s,a){return e("div",{key:"discuss"+a,staticClass:"listItem-content pa-10 d-flex"},[e("van-image",{attrs:{round:"",width:"40",height:"40",src:t.$root.domainUrl+s.discussHeadImgUrl}}),e("ul",{staticClass:"pl-2 listItem-infor d-flex flex-column justify-space-between full-width"},[e("li",{staticClass:"font-14 lineHeight-20"},[e("span",[t._v(t._s(s.createName))]),e("span",{staticClass:"right color-gray font-12 pt-1"},[t._v(t._s(s.createTime))])]),e("li",{staticClass:"lineHeight-20 d-flex justify-space-between",class:s.discussContent?"":"color-gray"},[e("span",{staticClass:"fontWeight"},[t._v(t._s(s.discussContent||"并没有说什么"))]),e("icon-svg",{attrs:{size:"small",name:"ytcrm-a-huifubeifen4",color:"#BABABA"},nativeOn:{click:function(e){return t.backClick(s)}}})],1),t._l(s.replyList,(function(s,a){return e("div",{key:"reply"+a,staticClass:"py-3 d-flex"},[e("van-image",{attrs:{round:"",width:"40",height:"40",src:t.$root.domainUrl+s.discussHeadImgUrl}}),e("ul",{staticClass:"pl-2 listItem-infor d-flex flex-column justify-space-between full-width"},[e("li",{staticClass:"font-14"},[e("span",[t._v(t._s(s.createName))]),e("icon-svg",{staticClass:"mx-4",attrs:{size:"width:6px;height:6px;",name:"ytcrm-play",color:"#323233"}}),e("span",{staticClass:"color-main-2"},[t._v(t._s(s.discussedUserName))]),e("span",{staticClass:"right color-gray font-12 pt-1"},[t._v(t._s(s.createTime))])],1),e("li",{staticClass:"d-flex justify-space-between",class:s.discussContent?"":"color-gray"},[e("span",{staticClass:"fontWeight"},[t._v(t._s(s.discussContent||"并没有说什么"))]),e("icon-svg",{attrs:{size:"small",name:"ytcrm-a-huifubeifen4",color:"#BABABA"},nativeOn:{click:function(e){return t.backClick(s)}}})],1)])],1)}))],2)],1)})),0)]),e("van-tab",{attrs:{name:"3"},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"d-flex align-center"},[e("icon-svg",{attrs:{size:"small",name:"ytcrm-at",color:"3"===t.tabsActive?"#2271F5":"#a3a3a3"}}),e("span",{staticClass:"ml-2 font-14",style:"3"===t.tabsActive?"color:#2271F5":"color:#a3a3a3"},[t._v(t._s(t.detailObj.signToSignedList.length))])],1)]},proxy:!0}],null,!1,1956848200)},[e("div",{staticClass:"signToSigned"},t._l(t.detailObj.signToSignedList,(function(s,a){return e("div",{key:"signToSigned"+a,staticClass:"listItem-content pa-10 d-flex"},[e("van-image",{attrs:{round:"",width:"40",height:"40",src:t.$root.domainUrl+s.createHeadImgUrl}}),e("ul",{staticClass:"pl-2 listItem-infor d-flex flex-column justify-space-between full-width"},[e("li",{staticClass:"font-14"},[e("span",[t._v(t._s(s.createName))]),e("icon-svg",{staticClass:"px-10",attrs:{size:"mini",name:"ytcrm-at",color:"#2271F5"}}),e("span",{staticClass:"color-main-2"},[t._v(t._s(s.signedName))]),e("span",{staticClass:"right color-gray font-12 pt-1"},[t._v(t._s(s.createTime))])],1),e("li",{class:s.signContent?"":"color-gray"},[t._v(" "+t._s(s.signContent||"并没有说什么")+" ")])])],1)})),0)])],1),e("div",{staticClass:"commonOpButton-footer"},[e("van-button",{attrs:{round:"",color:"#2271F5",type:"primary"},on:{click:t.opClick},scopedSlots:t._u([{key:"icon",fn:function(){return[e("icon-Svg",{attrs:{size:"small",color:"white",name:1===+t.tabsActive?"ytcrm-thumb-up":2===+t.tabsActive?"ytcrm-xingzhuang5":"ytcrm-at"}})]},proxy:!0}],null,!1,314762410)})],1),e("van-popup",{staticClass:"van-popup-bg",style:{width:"100%",height:"40%"},attrs:{position:"bottom",round:"",clearable:""},model:{value:t.dicussShow,callback:function(s){t.dicussShow=s},expression:"dicussShow"}},[t.dicussShow?e("dicuss",{attrs:{title:t.dicussTitle},on:{sureComment:t.sureComment}}):t._e()],1),t.hasDept?e("dept-user",{ref:"deptUer",attrs:{show:t.changeTypeShow,loading:t.getUserListLoading,depTreeList:t.depTreeList,deptUserData:t.deptUserData,searchList:t.userDataList},on:{search:t.refreshUserByKeywords,refresh:t.refreshUserByDepts,confirm:t.onTreeConfirm,cancel:t.cancelUserByDepts}}):t._e(),e("van-dialog",{attrs:{"show-cancel-button":"","confirm-button-color":"#2271f5",beforeClose:t.confirmDialog,title:"并留言"},model:{value:t.messageShow,callback:function(s){t.messageShow=s},expression:"messageShow"}},[e("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入留言"},model:{value:t.messageValue,callback:function(s){t.messageValue=s},expression:"messageValue"}})],1)],1):t._e()},i=[],c=e("d4ec"),n=e("bee2"),l=e("262e"),o=e("2caf"),r=(e("4de4"),e("d3b7"),e("caad"),e("2532"),e("99af"),e("498a"),e("9ab4")),u=e("1b40"),d=e("8393"),f=e("80b8"),h=e("a8ce"),m=e("951e"),g=e("4bce"),p=function(t){Object(l["a"])(e,t);var s=Object(o["a"])(e);function e(){var t;return Object(c["a"])(this,e),t=s.apply(this,arguments),t.tabsActive="1",t}return Object(n["a"])(e,[{key:"opClick",value:function(){switch(this.tabsActive){case"1":this.subscribeClick(this.detailObj);break;case"2":this.discussClick(this.detailObj);break;case"3":this.signToSignedClick(this.detailObj);break;default:break}}},{key:"signToSignedClick",value:function(t){this.SET_DETAILOBJ(t),this.getUsersClick()}},{key:"onTreeConfirm",value:function(t){var s=this;this.checkedUsers=t;var e=this.userDataList.filter((function(s){return t.includes(s.userId)}));this.checkDetailList=this.checkDetailList.concat(e);for(var a=[],i=function(e){var i=s.checkDetailList[e];-1===t.indexOf(i.userId)||a.some((function(t){return i.userId===t.userId}))||a.push(i)},c=0;c<this.checkDetailList.length;c++)i(c);this.checkDetailList=a,this.messageShow=!0}},{key:"confirmDialog",value:function(t,s){var e=this;if("confirm"===t){var a={ctsId:this.detailObj.ctsId,signContent:this.messageValue.trim(),userIdList:this.checkedUsers};Object(g["h"])(a).then((function(t){if("200"===t.code){e.$toast.success(t.msg);for(var a=[],i=0;i<e.checkDetailList.length;i++){var c=e.checkDetailList[i];a.push({createHeadImgUrl:e.userInfor.headImgUrl,createName:e.userInfor.userName,signedName:c.userName,signContent:e.messageValue})}e.$set(e.detailObj,"signToSignedList",e.detailObj.signToSignedList.concat(a)),e.messageValue="",e.checkedUsers=[],e.checkDetailList=[],s()}e.hasDept=!1,e.changeTypeShow=!1}))}else s()}},{key:"_getTopicDetail",value:function(t){var s=this;Object(g["c"])(t).then((function(t){s.SET_DETAILOBJ(t.data)}))}},{key:"mounted",value:function(){this.$route.query.ctsId&&(this.SET_DETAILOBJ({}),this._getTopicDetail({ctsId:this.$route.query.ctsId}))}}]),e}(Object(u["b"])(f["a"],d["a"]));p=Object(r["a"])([Object(u["a"])({components:{list:m["a"],FixButton:h["a"]}})],p);var v=p,b=v,y=(e("986e"),e("2877")),C=Object(y["a"])(b,a,i,!1,null,"0fe9a517",null);s["default"]=C.exports},"986e":function(t,s,e){"use strict";e("6f07")}}]);