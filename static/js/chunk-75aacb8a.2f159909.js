(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75aacb8a"],{"1a72":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"birth-detail full-HW"},[a("div",{staticClass:"detail-title font-12"},[t._v("生日提醒详情")]),a("div",{staticClass:"detail-div d-flex align-center justify-space-between px-4 font-14 white-bg mb-2"},[a("span",{staticClass:"color-gray-5"},[t._v("客户姓名")]),a("span",[t._v(t._s(t.detailInfo.userName?t.detailInfo.userName:"-"))])]),a("div",{staticClass:"detail-div d-flex align-center px-4 font-14 white-bg mb-2"},[a("span",{staticClass:"color-gray-5"},[t._v(" 生日 ")]),a("span",{staticClass:"ml-1 font-12 color-gray-4"},[t._v("距下次生日还有 "+t._s(t.detailInfo.count1)+"天")]),a("span",{staticClass:"color-main-2",staticStyle:{"margin-left":"auto"}},[t._v(t._s(t.detailInfo.birthday?t.detailInfo.birthday:"-"))])]),a("div",{staticClass:"detail-div d-flex align-center px-4 font-14 white-bg mb-2"},[a("span",{staticClass:"color-gray-5"},[t._v("政治生日")]),a("span",{staticClass:"ml-1 font-12 color-gray-4"},[t._v("距下次政治生日还有 "+t._s(t.detailInfo.count2)+"天")]),a("span",{staticClass:"color-main-2",staticStyle:{"margin-left":"auto"}},[t._v(" "+t._s(t.detailInfo.politicsBirthday?t.detailInfo.politicsBirthday:"-")+" ")])]),a("div",{staticClass:"detail-div d-flex align-center justify-space-between px-4 font-14 white-bg mb-2"},[a("span",{staticClass:"color-gray-5"},[t._v("所在公司")]),a("span",[t._v(t._s(t.detailInfo.providerName?t.detailInfo.providerName:"-"))])]),a("div",{staticClass:"detail-div d-flex align-center justify-space-between px-4 font-14 white-bg mb-2"},[a("span",{staticClass:"color-gray-5"},[t._v("职位")]),a("span",[t._v(t._s(t.detailInfo.position?t.detailInfo.position:"-"))])]),a("div",{staticClass:"detail-div d-flex align-center justify-space-between px-4 font-14 white-bg mb-2"},[a("span",{staticClass:"color-gray-5"},[t._v("分管采购员")]),a("span",[t._v(t._s(t.detailInfo.purchaseName?t.detailInfo.purchaseName:"-"))])]),a("div",{staticClass:"detail-div d-flex align-center justify-space-between px-4 font-14 white-bg mb-2"},[a("span",{staticClass:"color-gray-5"},[t._v("分享人")]),a("span",{staticClass:"color-main-2"},[t._v(t._s(t.detailInfo.shareUserName?t.detailInfo.shareUserName:"-"))])]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.detailInfo.shareUserName,expression:"!detailInfo.shareUserName"}],staticClass:"font-14 detail-button",attrs:{round:"",type:"info"},on:{click:t.getUsersClick},scopedSlots:t._u([{key:"icon",fn:function(){return[a("icon-Svg",{staticClass:"mt-1",attrs:{size:"small",name:"ytcrm-xingzhuangjiehe2"}})]},proxy:!0}])},[t._v(" 推送附加至 ")]),t.hasDept?a("dept-user",{ref:"deptUer",attrs:{show:t.changeTypeShow,loading:t.getUserListLoading,depTreeList:t.depTreeList,deptUserData:t.deptUserData,searchList:t.userDataList},on:{search:t.refreshUserByKeywords,refresh:t.refreshUserByDepts,confirm:t.onTreeConfirm,cancel:t.cancelUserByDepts}}):t._e()],1)},s=[],n=a("d4ec"),r=a("bee2"),o=a("262e"),l=a("2caf"),c=a("9ab4"),h=a("1b40"),d=a("8393"),u=a("9971"),f=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.detailInfo={},t.authorizedFlag=!1,t}return Object(r["a"])(a,[{key:"onTreeConfirm",value:function(t){if(0!=t.length){this.changeTypeShow=!1;var e={cueIdBirthFlagReqList:[this.detailInfo],userIdList:t};this._addUser(e)}else this.$toast("未选择推送人")}},{key:"_addUser",value:function(t){var e=this;Object(u["a"])(t).then((function(t){200==t.code?(e.$toast.success("推送成功"),e.$router.push({name:"BirthdayReminder"})):e.$toast.fail(t.msg)}))}},{key:"mounted",value:function(){this.detailInfo=this.$route.params}}]),a}(Object(h["b"])(d["a"]));f=Object(c["a"])([Object(h["a"])({components:{}})],f);var p=f,b=p,v=(a("8b97"),a("2877")),m=Object(v["a"])(b,i,s,!1,null,"6861bc8e",null);e["default"]=m.exports},"1d37":function(t,e,a){},"2f68":function(t,e,a){},5753:function(t,e,a){"use strict";a("1d37")},"8b97":function(t,e,a){"use strict";a("ed69")},aa53:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"birthday-reminder full-HW"},[a("van-search",{staticClass:"px-4 py-2 white-bg",attrs:{placeholder:"搜索"},on:{input:t.handleInput},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),a("van-tabs",{on:{change:t.handleTabChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("van-tab",{attrs:{title:"生日列表",name:0}}),a("van-tab",{attrs:{title:"附加推送至",name:1}})],1),0===t.activeTab?a("birth-list",{ref:"birthList",staticClass:"birthday-reminder-body",attrs:{input:t.input}}):t._e(),1===t.activeTab?a("person-list",{ref:"personList",staticClass:"birthday-reminder-body",attrs:{input:t.input}}):t._e()],1)},s=[],n=a("d4ec"),r=a("bee2"),o=a("262e"),l=a("2caf"),c=a("9ab4"),h=a("1b40"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"birth-list"},[a("van-list",{staticClass:"birth-list-body",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("app-empty",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.birthList1.length&&!t.birthList2.length&&!t.birthList3.length,expression:"!loading && !birthList1.length && !birthList2.length && !birthList3.length"}],staticClass:"background-color-white mt-2 pb-4",attrs:{description:"暂无数据"}}),a("card-list",{ref:"cardList",attrs:{birthList1:t.birthList1,birthList2:t.birthList2,birthList3:t.birthList3,isAll:t.isAll},on:{handleShowDetail:t.handleShowDetail}})],1),a("div",{staticClass:"d-flex align-center justify-center my-2"},[a("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.isAll,expression:"!isAll"}],staticClass:"mr-4",attrs:{plain:"",round:"",type:"info"},on:{click:t.editAll},scopedSlots:t._u([{key:"icon",fn:function(){return[a("icon-Svg",{attrs:{size:"small",name:"ytcrm-lujing2"}})]},proxy:!0}])},[a("span",{staticClass:"color-black ml-1 font-14"},[t._v("批量操作")])]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.isAll,expression:"!isAll"}],attrs:{icon:"filter-o",round:"",type:"info"},on:{click:function(e){t.showFilter=!0}}},[a("span",{staticClass:"ml-1 font-14"},[t._v(t._s(t.params.birthFlag?1==t.params.birthFlag?"点击切换为「政治生日」":"点击切换为「生日」":"条件筛选"))])]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:t.isAll,expression:"isAll"}],staticClass:"mr-4",staticStyle:{width:"100px"},attrs:{plain:"",round:"",type:"info"},on:{click:function(e){t.isAll=!1}}},[a("span",{staticClass:"color-black font-14"},[t._v("取消")])]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:t.isAll,expression:"isAll"}],attrs:{round:"",type:"info"},on:{click:function(e){return t.toPersonChoose(!1)}}},[a("span",{staticClass:"font-14"},[t._v("附加推送至")]),a("span",{staticClass:"ml-2 font-14"},[t._v("已选 "+t._s(t.idList.length)+" 条")])])],1),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}},[a("div",{staticClass:"filter-title font-14 color-gray-4 mx-4 bg-white"},[t._v("生日类型")]),a("div",{staticClass:"filter-div font-16 color-gray-5",on:{click:function(e){return t.handleFilter(1)}}},[t._v("生日")]),a("div",{staticClass:"filter-div font-16 color-gray-5",on:{click:function(e){return t.handleFilter(2)}}},[t._v("政治生日")]),a("div",{staticClass:"filter-block"}),a("div",{staticClass:"filter-div font-16 color-gray-5",on:{click:function(e){return t.handleFilter("")}}},[t._v("取消")])]),t.hasDept?a("dept-user",{ref:"deptUer",attrs:{show:t.changeTypeShow,loading:t.getUserListLoading,depTreeList:t.depTreeList,deptUserData:t.deptUserData,searchList:t.userDataList},on:{search:t.refreshUserByKeywords,refresh:t.refreshUserByDepts,confirm:t.onTreeConfirm,cancel:t.cancelUserByDepts}}):t._e()],1)},u=[],f=(a("d3b7"),a("159b"),a("e9c4"),a("9971")),p=a("d926"),b=a("53ae"),v=a("8393"),m=a("e337"),g=a("1a72"),y=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.authorizedFlag=!1,t.params={user:"",birthFlag:"",typeFlag:"",pageNum:0,pageSize:10},t.birthList1=[],t.birthList2=[],t.birthList3=[],t.idList=[],t.isAll=!1,t.showFilter=!1,t.detailInfo={},t}return Object(r["a"])(a,[{key:"_queryBirth",value:function(){var t=this;Object(f["b"])(this.params).then((function(e){t.loading=!1,200==e.code?(e.data.list.forEach((function(e){1==e.birthFlag?e.count=Object(p["h"])(e.birthday):e.count=Object(p["h"])(e.politicsBirthday),e.count<=7?t.birthList1.push(e):e.count<=30?t.birthList2.push(e):t.birthList3.push(e)})),(!e.data||e.data.total<=t.params.pageNum*t.params.pageSize)&&(t.finished=!0)):t.finished=!0}))}},{key:"onLoad",value:function(){this.params.pageNum++,this._queryBirth()}},{key:"handleInput",value:function(t){this.params.user=t,this.params.pageNum=0,this.birthList1=[],this.birthList2=[],this.birthList3=[],this.finished=!1}},{key:"editAll",value:function(){this.isAll=!0,this.idList=[];var t=this.$refs.cardList;t.editAll()}},{key:"handleFilter",value:function(t){this.showFilter=!1,this.params.birthFlag!=t&&(this.params.birthFlag=t,this.params.pageNum=0,this.birthList1=[],this.birthList2=[],this.birthList3=[],this.finished=!1)}},{key:"toPersonChoose",value:function(){0!=this.idList.length&&this.getUsersClick()}},{key:"onTreeConfirm",value:function(t){if(0!=t.length){this.changeTypeShow=!1;var e={cueIdBirthFlagReqList:this.idList,userIdList:t};this.isAll=!1,this._addUser(e)}else this.$toast("未选择推送人")}},{key:"_addUser",value:function(t){var e=this;Object(f["a"])(t).then((function(t){200==t.code?e.$toast.success("推送成功"):e.$toast.fail(t.msg)}))}},{key:"handleShowDetail",value:function(t){this.detailInfo=JSON.parse(JSON.stringify(t)),this.detailInfo.count1=this.detailInfo.birthday?Object(p["h"])(this.detailInfo.birthday):"-",this.detailInfo.count2=this.detailInfo.politicsBirthday?Object(p["h"])(this.detailInfo.politicsBirthday):"-",this.$router.push({name:"BirthDetail",params:this.detailInfo})}}]),a}(Object(h["b"])(b["a"],v["a"]));y=Object(c["a"])([Object(h["a"])({components:{cardList:m["a"],birthDetail:g["default"]}})],y);var _=y,w=_,L=(a("b99b"),a("2877")),C=Object(L["a"])(w,d,u,!1,null,"7fb0fb2c",null),k=C.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-list",{staticClass:"inner-block boxSizing_border",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("app-empty",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.personList.length,expression:"!loading && !personList.length"}],staticClass:"background-color-white pb-4",attrs:{description:"暂无数据"}}),t._l(t.personList,(function(e,s){return i("van-swipe-cell",{key:s,staticClass:"white-block mb-2",scopedSlots:t._u([{key:"right",fn:function(){return[i("van-button",{staticClass:"full-height font-12",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(a){return t.deletePerson(e)}}})]},proxy:!0}],null,!0)},[i("div",{staticClass:"d-flex person-card",on:{click:function(a){return t.showPersonDetail(e)}}},[i("van-image",{staticClass:"card-img",attrs:{round:"",src:a("0351")}}),i("div",{staticClass:"ml-2"},[i("div",{staticClass:"font-16 lineHeight-22 fontWeight-500 mb-1"},[t._v(t._s(e.userName))]),i("div",{staticClass:"font-12 fontWeight-500 color-gray-4 card-bottom-text"},[t._v("/"+t._s(e.userId))])]),i("div",{staticStyle:{"margin-left":"auto"}},[i("div",{staticClass:"font-16 lineHeight-23 fontWeight-500 textAlignR color-main-2 card-top-text"},[t._v(" "+t._s(e.count)+"条 ")]),i("div",{staticClass:"font-12 color-gray-3 card-bottom-text"},[t._v("已推送信息数")])])],1)])}))],2)},I=[],x=a("1da1"),O=(a("96cf"),a("99af"),function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.personList=[],t.params={pageNum:0,pageSize:10,user:""},t}return Object(r["a"])(a,[{key:"onLoad",value:function(){this.params.pageNum++,this._queryBirthByUserNum()}},{key:"handleInput",value:function(t){this.params.user=t,this.params.pageNum=0,this.personList=[],this.finished=!1}},{key:"_queryBirthByUserNum",value:function(){var t=this;Object(f["d"])(this.params).then((function(e){t.loading=!1,200==e.code?(t.personList=e.data?t.personList.concat(e.data.list):t.personList,(!e.data||e.data.total<=t.params.pageNum*t.params.pageSize)&&(t.finished=!0)):t.finished=!0}))}},{key:"deletePerson",value:function(t){var e=this;this.$dialog.confirm({title:"提示",message:"确定移除"+t.userName+"的所有推送?",confirmButtonColor:"#2271F5"}).then(Object(x["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={userIdList:[t.userId],cueIdBirthFlagReqList:[]},e._updateUser(i);case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))}},{key:"_updateUser",value:function(t){var e=this;Object(f["e"])(t).then((function(t){200==t.code?(e.$toast.success("删除成功"),e.handleInput(e.params.user)):e.$toast.fail(t.msg)}))}},{key:"showPersonDetail",value:function(t){this.$router.push({name:"PersonDetail",params:t})}}]),a}(Object(h["b"])(b["a"])));O=Object(c["a"])([Object(h["a"])({components:{}})],O);var N=O,U=N,S=(a("f14b"),Object(L["a"])(U,j,I,!1,null,"1f8238e0",null)),B=S.exports,F=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.activeTab=0,t.input="",t}return Object(r["a"])(a,[{key:"handleInput",value:function(){if(0===this.activeTab){var t=this.$refs.birthList;t.handleInput(this.input)}else{var e=this.$refs.personList;e.handleInput(this.input)}}},{key:"handleTabChange",value:function(){this.input=""}},{key:"activated",value:function(){var t=this;"1"===sessionStorage.getItem("birthChange")&&(sessionStorage.removeItem("birthChange"),this.$nextTick((function(){t.handleInput()})))}}]),a}(h["d"]);F=Object(c["a"])([Object(h["a"])({components:{birthList:k,personList:B}})],F);var T=F,$=T,D=(a("5753"),Object(L["a"])($,i,s,!1,null,"3626711c",null));e["default"]=D.exports},b99b:function(t,e,a){"use strict";a("c5ec")},c5ec:function(t,e,a){},ed69:function(t,e,a){},f14b:function(t,e,a){"use strict";a("2f68")}}]);