(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d7f34d0"],{"3d4c":function(t,e,a){},"473f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"height-100 overflow-auto pb-100"},[a("lock-detail",{attrs:{detailObj:t.detailObj,queryParams:t.$route.query?t.$route.query:t.queryParams,role:t.$route.query&&+t.$route.query.role||+t.queryParams.role}}),0===t.detailObj.conType||4===t.detailObj.conType?a("shortage-ticket",{attrs:{managementOpflagForSaler:t.managementOpflagForSaler,managementOpflagForPurchaser:t.managementOpflagForPurchaser,querySelfFlag:t.querySelfFlag,detailObj:t.detailObj,role:+t.queryParams.role||+t.$route.query.role},on:{submitSuccess:t.submitSuccess}}):t._e(),2===t.detailObj.conType||3===t.detailObj.conType||5===t.detailObj.conType?a("price-limit-sale",{attrs:{managementOpflagForSaler:t.managementOpflagForSaler,managementOpflagForPurchaser:t.managementOpflagForPurchaser,querySelfFlag:t.querySelfFlag,detailObj:t.detailObj,role:+t.queryParams.role||+t.$route.query.role},on:{submitSuccess:t.submitSuccess}}):t._e(),6===t.detailObj.conType?a("restrivted",{attrs:{managementOpflagForSaler:t.managementOpflagForSaler,managementOpflagForPurchaser:t.managementOpflagForPurchaser,querySelfFlag:t.querySelfFlag,detailObj:t.detailObj,role:+t.queryParams.role||+t.$route.query.role},on:{submitSuccess:t.submitSuccess}}):t._e(),7===t.detailObj.conType||8===t.detailObj.conType?a("status-near",{attrs:{managementOpflagForSaler:t.managementOpflagForSaler,managementOpflagForPurchaser:t.managementOpflagForPurchaser,querySelfFlag:t.querySelfFlag,detailObj:t.detailObj,role:+t.queryParams.role||+t.$route.query.role},on:{submitSuccess:t.submitSuccess}}):t._e()],1)},i=[],n=a("d4ec"),o=a("bee2"),r=a("262e"),c=a("2caf"),l=(a("d3b7"),a("9ab4")),u=a("1b40"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lockDetail"},[a("div",{staticClass:"lockDetail-header pa-2 d-flex justify-space-between align-center"},[a("span",[a("span",{staticClass:"font-14"},[t._v(t._s(t.conTypeString)+"信息列表")]),a("span",{staticClass:"pl-1"},[t._v("#"+t._s(t.detailObj.taskId))])]),a("span",[t._v(t._s(t.detailObj.createTime))])]),a("div",{staticClass:"common-detail"},[a("div",{staticClass:"common-detail-two"},[a("app-item",{staticClass:"common-detail-two-left pr-1",attrs:{title:"类型",contentClass:"fontWeight color-never",value:t.conTypeString,content:t.conTypeString+",合同细单："+t.detailObj.conDtlId+",客户名称："+t.detailObj.customerId+"/"+t.detailObj.customerName+",货品："+t.detailObj.goodsId+"/"+t.detailObj.goodsName+",合同数量："+t.detailObj.contractQuantity}}),a("span",{staticClass:"line"}),a("div",{staticClass:"common-detail-two-right common-detail-two-tag"},[a("span",{staticClass:"title"},[t._v(t._s(1===t.role?"业务员":"采购员"))]),a("span",{staticClass:"value tag-primary-plain"},[t._v(t._s(1===t.role?t.detailObj.salesmanName:t.detailObj.purchaserName))])])],1),a("div",{class:1===t.detailObj.coreHospital&&2===t.role?"common-detail-two":"common-detail-one"},[a("div",{class:1===t.detailObj.coreHospital&&2===t.role?"common-detail-two-left":""},[a("span",{staticClass:"title"},[t._v("合同细单")]),t._v(" "),a("span",[t._v(t._s(t.detailObj.conDtlId))])]),1===t.detailObj.coreHospital&&2===t.role?a("span",{staticClass:"line"}):t._e(),1===t.detailObj.coreHospital&&2===t.role?a("div",{staticClass:"common-detail-two-right",staticStyle:{"justify-content":"end"}},[a("div",{staticClass:"tag-primary-plain",attrs:{round:""}},[t._v("核心医院")])]):t._e()]),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("客户")]),a("span",[t._v(t._s(t.detailObj.customerId)+"/"+t._s(t.detailObj.customerName))])]),t.detailObj.branchId?a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("分支机构")]),a("span",[t._v(t._s(t.detailObj.branchId)+"/"+t._s(t.detailObj.brandName))])]):t._e(),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("核算单元")]),a("span",{staticClass:"color-main"},[t._v(t._s(t.detailObj.entryId)+"/"+t._s(t.detailObj.entryName))])]),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("品种")]),a("span",[t._v(t._s(t.detailObj.goodsId)+"/"+t._s(t.detailObj.goodsName)),3==t.detailObj.conType&&t.detailObj.goodsCurrencyName&&1===t.role?a("span",[t._v("/"+t._s(t.detailObj.goodsCurrencyName))]):t._e()])]),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("规格")]),a("span",[t._v(t._s(t.detailObj.goodsType))])]),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("厂家")]),a("span",[t._v(t._s(t.detailObj.factoryName))])]),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("上笔进货合同创建时间")]),a("span",[t._v(t._s(t.detailObj.lastBuyContractCreateTime||"--"))])]),a("div",{staticClass:"common-detail-two"},[a("div",{staticClass:"common-detail-two-left"},[a("span",{staticClass:"title"},[t._v("订单来源")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.isAutoOrder&&1===t.detailObj.isAutoOrder?"自动补货":"huazhao"===t.detailObj.signAddress?"华招平台":"manbing"===t.detailObj.signAddress?"慢病平台":"微信"===t.detailObj.signAddress?"微信订单":"其他"))])]),a("span",{staticClass:"line"}),a("div",{staticClass:"common-detail-two-right common-detail-two-tag"},[a("span",{staticClass:"title"},[t._v(t._s(1===t.role?"采购姓名":"业务姓名"))]),a("span",{staticClass:"value tag-primary-plain"},[t._v(t._s(1===t.role?t.detailObj.purchaserName:t.detailObj.salesmanName))])])]),2!==t.detailObj.conType&&3!==t.detailObj.conType&&5!==t.detailObj.conType||2!==t.role?t._e():a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("营运客户分类")]),a("span",[t._v(t._s(t.detailObj.operatingCustomerStatus||"--"))])]),2!==t.detailObj.conType&&3!==t.detailObj.conType&&5!==t.detailObj.conType||2!==t.role?t._e():a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("所属业态")]),a("span",[t._v(t._s(t.detailObj.ddlId)+"/"+t._s(t.detailObj.ddlName))])])]),a("div",{staticClass:"common-detail mt-2"},[a("div",{staticClass:"common-detail-two"},[a("div",{staticClass:"common-detail-two-left"},[a("span",{staticClass:"title"},[t._v("合同数量")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.contractQuantity))])]),a("span",{staticClass:"line"}),a("div",{staticClass:"common-detail-two-right"},[a("span",{staticClass:"title"},[t._v("已开数量")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(t.detailObj.confirmedQuantity))])])]),5===t.detailObj.entryId||38===t.detailObj.entryId||39===t.detailObj.entryId?a("div",{staticClass:"common-detail-two"},[a("div",{staticClass:"common-detail-two-left"},[a("span",{staticClass:"title"},[t._v("两票制剩余")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.twoInvoiceLeftQuantity))])]),a("span",{staticClass:"line"}),a("div",{staticClass:"common-detail-two-right"},[a("span",{staticClass:"title"},[t._v("对应药业库存")]),a("span",{staticClass:"value color-main fontWeight"},[t._v(t._s(t.detailObj.yyStockQuantity||0))])])]):a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("两票制剩余")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.twoInvoiceLeftQuantity))])]),a("div",{staticClass:"common-detail-two"},[a("div",{staticClass:"common-detail-two-left"},[a("span",{staticClass:"title"},[t._v("当前可销总库存")]),a("span",{staticClass:"color-main"},[t._v(t._s(t.detailObj.totalAvailableStockQuantity))])]),a("span",{staticClass:"line"}),a("div",{staticClass:"common-detail-two-right"},[a("span",{staticClass:"title"},[t._v("锁控时库存")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.stockQuantity||"--"))])])]),a("div",{staticClass:"common-detail-two"},[a("div",{staticClass:"common-detail-two-left"},[a("span",{staticClass:"title"},[t._v("考核价")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.examinePrice))])]),a("span",{staticClass:"line"}),a("div",{staticClass:"common-detail-two-right"},[a("span",{staticClass:"title"},[t._v("合同价")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.contractPrice))])])]),a("div",{staticClass:"common-detail-two"},[a("div",{staticClass:"common-detail-two-left"},[a("span",{staticClass:"title"},[t._v("上次销价")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.lastSellPrice||"--"))])]),a("span",{staticClass:"line"}),a("div",{staticClass:"common-detail-two-right"},[a("div",{staticClass:"common-detail-two-left"},[a("span",{staticClass:"title"},[t._v("限价")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.limitPrice||"--"))])])])]),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("未分配原因")]),a("span",{staticClass:"color-red"},[t._v(t._s(t.detailObj.zxErrorMessage||"--"))])]),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("总单备注")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(t.detailObj.memo||"--"))])])]),0!==t.detailObj.conType&&4!==t.detailObj.conType||!t.detailObj.arriveTime?t._e():a("div",{staticClass:"mt-2 common-detail"},[a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("到"+t._s(0===t.detailObj.conType?"货":"票")+"时间")]),a("span",[t._v(t._s(t.detailObj.arriveTime))])])])])},b=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-space-between align-baseline"},[a("div",{staticClass:"color-gray-4",style:"width: "+t.titleWidth+"px"},[t._v(t._s(t.title))]),a("div",[a("span",{class:t.contentClass},[t._v(t._s(t.value))]),t.content?a("app-icon",{staticClass:"color-main-2 copy-content pl-1",attrs:{name:"#ytcrm-fuzhi","data-clipboard-text":t.content},on:{click:t.copy}}):t._e()],1),t._t("default")],2)},m=[],v=(a("a9e3"),function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"copy",value:function(){var t=this,e=new this.$Clipboard(".copy-content");e.on("success",(function(a){t.$toast.success("复制成功"),e.destroy()})),e.on("error",(function(a){t.$toast.fail("该浏览器不支持自动复制"),e.destroy()}))}}]),a}(u["d"]));Object(l["a"])([Object(u["c"])({type:String,default:""})],v.prototype,"title",void 0),Object(l["a"])([Object(u["c"])({type:[String,Number],default:""})],v.prototype,"content",void 0),Object(l["a"])([Object(u["c"])({type:String,default:""})],v.prototype,"value",void 0),Object(l["a"])([Object(u["c"])({type:String,default:"color-black-2"})],v.prototype,"contentClass",void 0),Object(l["a"])([Object(u["c"])({type:Number,default:80})],v.prototype,"titleWidth",void 0),v=Object(l["a"])([Object(u["a"])({})],v);var O=v,f=O,h=a("2877"),j=Object(h["a"])(f,p,m,!1,null,null,null),g=j.exports,y=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"conTypeString",get:function(){return 2==this.detailObj.conType?"价格限销":3==this.detailObj.conType?"库存下限":0==this.detailObj.conType?"缺货":4==this.detailObj.conType?"两票制":5==this.detailObj.conType?"紧俏药品":6==this.detailObj.conType?"禁限销":7==this.detailObj.conType?"库存状态":8==this.detailObj.conType?"近效期":""}}]),a}(u["d"]);Object(l["a"])([Object(u["c"])()],y.prototype,"detailObj",void 0),Object(l["a"])([Object(u["c"])()],y.prototype,"role",void 0),y=Object(l["a"])([Object(u["a"])({components:{AppItem:g}})],y);var k=y,C=k,_=Object(h["a"])(C,d,b,!1,null,"5a13859d",null),S=_.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detailWarp"},[0===t.detailObj.conType&&1===t.detailObj.statusFlag?a("div",{staticClass:"mt-2 common-detail"},[a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("缺货类型")]),a("span",{staticClass:"value"},[t._v(t._s(t.outTypeString))])]),7===t.detailObj.outOfStockType||1===t.detailObj.outOfStockType?a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("预计到货时间")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.predictArriveTime))])]):t._e(),t.detailObj.noCooperateType||t.detailObj.availableType?a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("原因")]),a("span",{staticClass:"value"},[t._v(t._s(t.availableTypeString(t.detailObj.outOfStockType)||"--"))])]):t._e(),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("备注")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.shortageReason||"--"))])])]):t._e(),0!==t.detailObj.conType||0!==t.detailObj.statusFlag||2!==t.role||1!==t.querySelfFlag&&!t.managementOpflagForPurchaser?t._e():a("div",{staticClass:"mt-2 common-detail"},[a("van-field",{attrs:{label:"缺货类型","input-align":"right",readonly:"","is-link":""},on:{click:t.outTypeClick},model:{value:t.outOfStockObj.outTypeString,callback:function(e){t.$set(t.outOfStockObj,"outTypeString",e)},expression:"outOfStockObj.outTypeString"}}),8===t.outOfStockObj.outTypeNumber||9===t.outOfStockObj.outTypeNumber?a("van-field",{attrs:{required:"",label:"原因","input-align":"right",placeholder:"请选择具体原因",readonly:"","is-link":""},on:{click:t.noCooperateClick},model:{value:t.outOfStockObj.noCooperateString,callback:function(e){t.$set(t.outOfStockObj,"noCooperateString",e)},expression:"outOfStockObj.noCooperateString"}}):t._e(),7===t.outOfStockObj.outTypeNumber?a("van-field",{attrs:{required:"",label:"预计到货时间",placeholder:"请选择预计到货时间","input-align":"right",readonly:"","is-link":""},on:{click:function(e){t.calendarShow=!0}},model:{value:t.outOfStockObj.outTime,callback:function(e){t.$set(t.outOfStockObj,"outTime",e)},expression:"outOfStockObj.outTime"}}):t._e(),a("van-field",{attrs:{required:10===t.outOfStockObj.outTypeNumber||5===t.outOfStockObj.noCooperateType,autosize:"",rows:"1",type:"textarea",label:"备注","input-align":"right",placeholder:10===t.outOfStockObj.outTypeNumber||5===t.outOfStockObj.noCooperateType?"必填，写清原因":"请输入备注"},model:{value:t.outOfStockObj.outReason,callback:function(e){t.$set(t.outOfStockObj,"outReason",e)},expression:"outOfStockObj.outReason"}})],1),a("van-action-sheet",{attrs:{actions:t.outTypeList,"cancel-text":"取消","close-on-click-action":""},on:{select:t.outTypeSelect,cancel:function(e){t.outOfStockObj.actionShow=!1}},model:{value:t.outOfStockObj.actionShow,callback:function(e){t.$set(t.outOfStockObj,"actionShow",e)},expression:"outOfStockObj.actionShow"}}),a("van-action-sheet",{attrs:{actions:t.noCooperateList,"cancel-text":"取消","close-on-click-action":""},on:{select:t.noCooperateSelect,cancel:function(e){t.outOfStockObj.noCooperateShow=!1}},model:{value:t.outOfStockObj.noCooperateShow,callback:function(e){t.$set(t.outOfStockObj,"noCooperateShow",e)},expression:"outOfStockObj.noCooperateShow"}}),4===t.detailObj.conType&&1===t.detailObj.statusFlag?a("div",{staticClass:"mt-2 common-detail"},[a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("预计到票时间")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.predictArriveTime))])]),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("缺票原因")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.shortageReason||"--"))])])]):t._e(),4!==t.detailObj.conType||0!==t.detailObj.statusFlag||2!==t.role||1!==t.querySelfFlag&&!t.managementOpflagForPurchaser?t._e():a("div",{staticClass:"mt-2 common-detail"},[a("van-field",{attrs:{label:"预计到票时间",required:"",placeholder:"请选择预计到票时间","input-align":"right",readonly:"","is-link":""},on:{click:function(e){t.calendarShow=!0}},model:{value:t.ticketObj.ticketTime,callback:function(e){t.$set(t.ticketObj,"ticketTime",e)},expression:"ticketObj.ticketTime"}}),a("van-field",{attrs:{autosize:"",rows:"1",type:"textarea",label:"缺票原因","input-align":"right",placeholder:"请输入缺票原因"},model:{value:t.ticketObj.ticketReason,callback:function(e){t.$set(t.ticketObj,"ticketReason",e)},expression:"ticketObj.ticketReason"}})],1),1===t.querySelfFlag||t.managementOpflagForSaler||t.managementOpflagForPurchaser?a("div",{staticClass:"commonButton-footer d-flex justify-center"},[0===t.detailObj.statusFlag&&2===t.role?a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t.outSubmitClick}},[t._v(" 提交 ")]):t._e(),1!==t.detailObj.statusFlag&&3!==t.detailObj.statusFlag||0!==t.detailObj.activate||1!==t.role||0!==t.detailObj.conType?t._e():a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t._checkTicketForce}},[t._v(" 强制激活 ")]),1!==t.detailObj.statusFlag&&3!==t.detailObj.statusFlag||0!==t.detailObj.activate||1!==t.role||4!==t.detailObj.conType?t._e():a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t._tickcheckTicketForce}},[t._v(" 强制激活 ")]),2===t.detailObj.statusFlag&&1===t.role&&1!==t.detailObj.orderStatus?a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t._checkTicket}},[t._v(" 激活 ")]):t._e(),1!==t.detailObj.activate&&1!==t.detailObj.orderStatus||1!==t.role?t._e():a("van-button",{attrs:{disabled:"",size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""}},[t._v(" 已激活 ")])],1):t._e(),a("van-calendar",{attrs:{"min-date":new Date,"first-day-of-week":"1",color:"#1989fa","show-confirm":!1},on:{confirm:t.confirmCalendar},model:{value:t.calendarShow,callback:function(e){t.calendarShow=e},expression:"calendarShow"}})],1)},T=[],F=a("1da1"),x=(a("96cf"),a("7db0"),a("b0c0"),a("6435")),R=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.outTypeListShow=[{name:"在途",value:1,color:"#2271f5"},{name:"长期断货",value:2},{name:"短期断货",value:3},{name:"厂家控货",value:4},{name:"有货",value:5},{name:"已不合作",value:6},{name:"在途",value:7,color:"#2271f5"},{name:"不合作",value:8,children:[{name:"XX商业有货",value:1},{name:"待争取",value:2}]},{name:"有货",value:9,children:[{name:"厂家分配",value:1},{name:"禁限销",value:2},{name:"保管账问题",value:3},{name:"效期",value:4},{name:"其他",value:5}]},{name:"货源情况待定",value:10}],t.outTypeList=[{name:"在途",value:7,color:"#2271f5"},{name:"不合作",value:8,children:[{name:"XX商业有货",value:1},{name:"待争取",value:2}]},{name:"有货",value:9,children:[{name:"厂家分配",value:1},{name:"禁限销",value:2},{name:"保管账问题",value:3},{name:"效期",value:4},{name:"其他",value:5}]},{name:"货源情况待定",value:10}],t.noCooperateList=[],t.outOfStockObj={outTypeNumber:7,outTypeString:"在途",noCooperateType:"",noCooperateString:"",outTime:"",outReason:"",actionShow:!1,noCooperateShow:!1},t.ticketObj={ticketTime:"",ticketReason:""},t.calendarShow=!1,t.dateRange=[],t}return Object(o["a"])(a,[{key:"outTypeString",get:function(){var t=this;if(0===this.detailObj.outOfStockType)return"其他";var e=this.outTypeListShow.find((function(e){return t.detailObj.outOfStockType===e.value}));return e.name}},{key:"availableTypeString",get:function(){var t=this;return function(e){var a,s=null===(a=t.outTypeListShow.find((function(t){return e===t.value})))||void 0===a?void 0:a.children,i=s.find((function(e){return t.detailObj.noCooperateType===e.value||t.detailObj.approveStatus===e.value}));return i.name}}},{key:"outTypeClick",value:function(){this.outOfStockObj.actionShow=!0}},{key:"noCooperateClick",value:function(){this.outOfStockObj.noCooperateShow=!0}},{key:"outTypeSelect",value:function(t){this.outOfStockObj.noCooperateType="",this.outOfStockObj.noCooperateString="",this.outOfStockObj.outTime="",this.outOfStockObj.outReason="",this.noCooperateList=t.children;for(var e=0;e<this.outTypeList.length;e++){var a=this.outTypeList[e];a.value===t.value?a.color="#2271f5":a.color=""}this.outOfStockObj.outTypeNumber=t.value,this.outOfStockObj.outTypeString=t.name}},{key:"noCooperateSelect",value:function(t){this.outOfStockObj.noCooperateType=t.value,this.outOfStockObj.noCooperateString=t.name}},{key:"outSubmitClick",value:function(){var t=this,e={conDtlId:this.detailObj.conDtlId,conType:this.detailObj.conType,contractQuantity:this.detailObj.contractQuantity,customerName:this.detailObj.customerName,entryId:this.detailObj.entryId,goodsId:this.detailObj.goodsId,goodsName:this.detailObj.goodsName,purchaserId:this.detailObj.purchaserId,purchaserName:this.detailObj.purchaserName,recordId:this.detailObj.recordId,taskId:this.detailObj.taskId};if(0===this.detailObj.conType){if(7===this.outOfStockObj.outTypeNumber&&(e=Object.assign({},e,{outOfStockType:this.outOfStockObj.outTypeNumber,predictArriveTime:this.outOfStockObj.outTime,shortageReason:this.outOfStockObj.outReason}),!this.outOfStockObj.outTime))return void this.$toast.fail("请选择预计到货时间");if(10===this.outOfStockObj.outTypeNumber&&(e=Object.assign({},e,{outOfStockType:this.outOfStockObj.outTypeNumber,shortageReason:this.outOfStockObj.outReason}),!this.outOfStockObj.outReason))return void this.$toast.fail("请写清原因");if(8===this.outOfStockObj.outTypeNumber&&(e=Object.assign({},e,{outOfStockType:this.outOfStockObj.outTypeNumber,noCooperateType:this.outOfStockObj.noCooperateType,shortageReason:this.outOfStockObj.outReason})),9===this.outOfStockObj.outTypeNumber&&(e=Object.assign({},e,{outOfStockType:this.outOfStockObj.outTypeNumber,availableType:this.outOfStockObj.noCooperateType,shortageReason:this.outOfStockObj.outReason}),5===this.outOfStockObj.noCooperateType&&!this.outOfStockObj.outReason))return void this.$toast.fail("请输入原因")}if(4===this.detailObj.conType){if(!this.ticketObj.ticketTime)return void this.$toast.fail("请选择预计到票时间");e=Object.assign({},e,{predictArriveTime:this.ticketObj.ticketTime,shortageReason:this.ticketObj.ticketReason})}Object(x["f"])(e).then((function(e){"200"===e.code?(t.$toast.success(e.msg),t.$emit("submitSuccess")):t.$toast.fail(e.msg)}))}},{key:"confirmCalendar",value:function(t){0===this.detailObj.conType&&(this.outOfStockObj.outTime=this.$dayjs(t).format("YYYY-MM-DD")),4===this.detailObj.conType&&(this.ticketObj.ticketTime=this.$dayjs(t).format("YYYY-MM-DD")),this.calendarShow=!1}},{key:"_checkTicketForce",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$dialog.confirm({title:"提示",message:"是否已与采购员沟通过，确定强制激活?",confirmButtonColor:"#2271f5",beforeClose:function(t,a){"confirm"===t?(e.activeSubmit(0),a()):a()}});case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_checkTicket",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.detailObj.conType){t.next=7;break}return t.next=3,Object(x["b"])({taskId:this.detailObj.taskId});case 3:e=t.sent,this.$dialog.confirm({title:"提示",message:"".concat(e.data?"该细单品种发票未到，确定激活吗?":"确定激活?","'"),confirmButtonColor:"#2271f5",beforeClose:function(t,e){"confirm"===t?(a.activeSubmit(0),e()):e()}}),t.next=8;break;case 7:this.$dialog.confirm({title:"提示",message:"确定激活?",confirmButtonColor:"#2271f5",beforeClose:function(t,e){"confirm"===t?(a.activeSubmit(0),e()):e()}});case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_tickcheckTicketForce",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$dialog.confirm({title:"提示",message:'是否确认强制激活此订单？确认后会在细单备注上标识"强开"?',confirmButtonColor:"#2271f5",beforeClose:function(t,a){"confirm"===t?(e.activeSubmit(1),a()):a()}});case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"activeSubmit",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:0,a={conDtlId:this.detailObj.conDtlId,conType:this.detailObj.conType,taskId:this.detailObj.taskId,forceFlag:e},t.next=4,Object(x["i"])(a);case 4:s=t.sent,s.success?(this.$toast.success("激活成功"),this.$emit("submitSuccess")):this.$toast.fail("激活失败");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(u["d"]);Object(l["a"])([Object(u["c"])()],R.prototype,"detailObj",void 0),Object(l["a"])([Object(u["c"])()],R.prototype,"role",void 0),Object(l["a"])([Object(u["c"])()],R.prototype,"querySelfFlag",void 0),Object(l["a"])([Object(u["c"])()],R.prototype,"managementOpflagForSaler",void 0),Object(l["a"])([Object(u["c"])()],R.prototype,"managementOpflagForPurchaser",void 0),R=Object(l["a"])([Object(u["a"])({})],R);var I=R,$=I,N=Object(h["a"])($,w,T,!1,null,"24f3b6e5",null),q=N.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detailWarp"},[0!==t.detailObj.statusFlag?a("div",{staticClass:"mt-2 common-detail"},[a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("解锁意见")]),a("span",{staticClass:"value",class:-1===t.detailObj.approveStatus?"color-red":2===t.detailObj.approveStatus?"color-normal":""},[t._v(t._s(-1===t.detailObj.approveStatus?"不同意":2===t.detailObj.approveStatus?"同意":""))])]),2===t.detailObj.approveStatus?a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("解锁数量")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.predictQuantity))])]):t._e(),a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("备注")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.remark||"--"))])])]):t._e(),0===t.detailObj.statusFlag&&2===t.role&&(1===t.querySelfFlag||t.managementOpflagForSaler||t.managementOpflagForPurchaser)?a("div",{staticClass:"mt-2"},[a("van-field",{attrs:{name:"radio",label:"是否同意","input-align":"right"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.deblockingObj.isAgree,callback:function(e){t.$set(t.deblockingObj,"isAgree",e)},expression:"deblockingObj.isAgree"}},[a("van-radio",{attrs:{name:2}},[t._v("同意")]),a("van-radio",{attrs:{name:-1}},[t._v("不同意")])],1)]},proxy:!0}],null,!1,952558033)}),2===t.deblockingObj.isAgree?a("van-field",{attrs:{label:"解锁数量",type:"digit","input-align":"right",placeholder:"请输入解锁数量"},model:{value:t.deblockingObj.agreeNumber,callback:function(e){t.$set(t.deblockingObj,"agreeNumber",e)},expression:"deblockingObj.agreeNumber"}}):t._e(),2===t.detailObj.conType&&2===t.deblockingObj.isAgree?a("van-field",{attrs:{label:"调整合同价",type:"number","input-align":"right",placeholder:"请输入调整合同价"},model:{value:t.deblockingObj.adjustPrice,callback:function(e){t.$set(t.deblockingObj,"adjustPrice",e)},expression:"deblockingObj.adjustPrice"}}):t._e(),a("van-field",{attrs:{autosize:"",rows:"1",type:"textarea",label:"备注","input-align":"right",placeholder:"请输入备注"},model:{value:t.deblockingObj.remark,callback:function(e){t.$set(t.deblockingObj,"remark",e)},expression:"deblockingObj.remark"}})],1):t._e(),1===t.querySelfFlag||t.managementOpflagForSaler||t.managementOpflagForPurchaser?a("div",{staticClass:"commonButton-footer d-flex justify-center"},[0===t.detailObj.statusFlag&&2===t.role?a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t.deblockingClick}},[t._v(" 提交 ")]):t._e(),2===t.detailObj.statusFlag&&1===t.role?a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t.activeSubmit}},[t._v(" 再次激活 ")]):t._e()],1):t._e()])},A=[],L=a("4bb5"),D=Object(L["a"])("app"),z=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.deblockingObj={isAgree:"",agreeNumber:"",remark:"",adjustPrice:""},t}return Object(o["a"])(a,[{key:"_batchUnlockOrder",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(x["a"])(e);case 2:a=t.sent,"200"===a.code?(this.$toast.success(a.msg),this.$emit("submitSuccess")):this.$toast.fail(a.msg);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deblockingClick",value:function(){var t=[{isAgree:this.deblockingObj.isAgree,recordId:this.detailObj.recordId,remark:this.deblockingObj.remark,adjustPrice:2===this.deblockingObj.isAgree?this.deblockingObj.adjustPrice:this.detailObj.contractPrice,taskId:this.detailObj.taskId,unlockQuantity:2===this.deblockingObj.isAgree?this.deblockingObj.agreeNumber:""}];if(this.deblockingObj.isAgree){if(2===this.deblockingObj.isAgree){if(this.deblockingObj.agreeNumber>this.detailObj.contractQuantity)return void this.$toast.fail("解锁数量不能超过合同数量");if(""===this.deblockingObj.agreeNumber)return void this.$toast.fail("解锁数量不能为空");if(parseInt(this.deblockingObj.agreeNumber)<=0)return void this.$toast.fail("解锁数量不能小于等于0")}this._batchUnlockOrder(t)}else this.$toast.fail("解锁意见不能为空")}},{key:"activeSubmit",value:function(){var t=this;this.$dialog.confirm({title:"提示",message:"是否再次激活此订单？",confirmButtonColor:"#2271f5",beforeClose:function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(a,s){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"!==a){e.next=9;break}return e.next=3,Object(x["j"])({taskId:t.detailObj.taskId});case 3:i=e.sent,"200"===i.code?(t.$toast.success("激活成功，当前采购处理中。"),setTimeout((function(){t.$emit("submitSuccess")}),1e3)):t.$toast.fail("激活失败"),s(),e.next=10;break;case 9:s();case 10:case"end":return e.stop()}}),e)})));function a(t,a){return e.apply(this,arguments)}return a}()})}},{key:"mounted",value:function(){this.deblockingObj.agreeNumber=this.detailObj.contractQuantity,this.deblockingObj.adjustPrice=this.detailObj.contractPrice}}]),a}(u["d"]);Object(l["a"])([D.Getter],z.prototype,"queryParams",void 0),Object(l["a"])([Object(u["c"])()],z.prototype,"detailObj",void 0),Object(l["a"])([Object(u["c"])()],z.prototype,"role",void 0),Object(l["a"])([Object(u["c"])()],z.prototype,"querySelfFlag",void 0),Object(l["a"])([Object(u["c"])()],z.prototype,"managementOpflagForSaler",void 0),Object(l["a"])([Object(u["c"])()],z.prototype,"managementOpflagForPurchaser",void 0),z=Object(l["a"])([Object(u["a"])({})],z);var W=z,M=W,B=Object(h["a"])(M,P,A,!1,null,"9d57298c",null),Q=B.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detailWarp"},[0!==t.detailObj.statusFlag?a("div",{staticClass:"mt-2 common-detail"},[a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("备注")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.remark||"--"))])])]):t._e(),0===t.detailObj.statusFlag&&2===t.role&&(1===t.querySelfFlag||t.managementOpflagForSaler||t.managementOpflagForPurchaser)?a("div",{staticClass:"mt-2 common-detail"},[a("van-field",{attrs:{autosize:"",rows:"1",type:"textarea",label:"备注","input-align":"right",placeholder:"请输入请填写备注信息，提交后业务可以查看"},model:{value:t.restrictRemark,callback:function(e){t.restrictRemark=e},expression:"restrictRemark"}})],1):t._e(),1===t.querySelfFlag||t.managementOpflagForPurchaser?a("div",{staticClass:"commonButton-footer d-flex justify-center"},[0===t.detailObj.statusFlag&&2===t.role?a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t.restrictClick}},[t._v(" 提交 ")]):t._e(),1===t.detailObj.statusFlag&&1===t.role?a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t.activeSubmit}},[t._v(" 强制激活 ")]):t._e()],1):t._e()])},Y=[],H=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.restrictRemark="",t}return Object(o["a"])(a,[{key:"restrictClick",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(x["k"])({recordId:this.detailObj.recordId,remark:this.restrictRemark,taskId:this.detailObj.taskId});case 2:e=t.sent,"200"===e.code?(this.$toast.success(e.msg),this.$emit("submitSuccess")):this.$toast.fail(e.msg);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"activeSubmit",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$dialog.confirm({title:"提示",message:"请确认采购员已解除当前禁限销限制后再激活，是否继续？",confirmButtonColor:"#2271f5",beforeClose:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(a,s){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"!==a){t.next=9;break}return i={conDtlId:e.detailObj.conDtlId,conType:e.detailObj.conType,taskId:e.detailObj.taskId,forceFlag:0},t.next=4,Object(x["i"])(i);case 4:n=t.sent,n.success?(e.$toast.success("激活成功"),e.$emit("submitSuccess")):e.$toast.fail("激活失败"),s(),t.next=10;break;case 9:s();case 10:case"end":return t.stop()}}),t)})));function a(e,a){return t.apply(this,arguments)}return a}()});case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(u["d"]);Object(l["a"])([Object(u["c"])()],H.prototype,"detailObj",void 0),Object(l["a"])([Object(u["c"])()],H.prototype,"role",void 0),Object(l["a"])([Object(u["c"])()],H.prototype,"querySelfFlag",void 0),Object(l["a"])([Object(u["c"])()],H.prototype,"managementOpflagForSaler",void 0),Object(l["a"])([Object(u["c"])()],H.prototype,"managementOpflagForPurchaser",void 0),H=Object(l["a"])([Object(u["a"])({})],H);var G=H,V=G,X=Object(h["a"])(V,E,Y,!1,null,"24218340",null),J=X.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detailWarp"},[0!==t.detailObj.statusFlag?a("div",{staticClass:"mt-2 common-detail"},[a("div",{staticClass:"common-detail-one"},[a("span",{staticClass:"title"},[t._v("备注")]),a("span",{staticClass:"value"},[t._v(t._s(t.detailObj.remark||"--"))])])]):t._e(),0===t.detailObj.statusFlag&&1===t.role&&(1===t.querySelfFlag||t.managementOpflagForSaler||t.managementOpflagForPurchaser)?a("div",{staticClass:"mt-2 common-detail"},[a("van-field",{attrs:{autosize:"",rows:"1",type:"textarea",label:"备注","input-align":"right",placeholder:"请输入库存批号"},model:{value:t.statusNearRemark,callback:function(e){t.statusNearRemark=e},expression:"statusNearRemark"}})],1):t._e(),a("div",{staticClass:"commonButton-footer d-flex justify-center"},[1===t.role?a("van-button",{attrs:{size:"small",type:"default",round:""},on:{click:t.batchClick}},[t._v(" 查看批号 ")]):t._e(),0===t.detailObj.statusFlag&&1===t.role&&(1===t.querySelfFlag||t.managementOpflagForSaler||t.managementOpflagForPurchaser)?a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info","native-type":"submit",round:""},on:{click:t.statusNearActive}},[t._v(" 激活 ")]):t._e()],1),a("van-popup",{style:{width:"100%",height:"90%"},attrs:{position:"bottom",round:"",closeable:""},model:{value:t.batchShow,callback:function(e){t.batchShow=e},expression:"batchShow"}},[a("div",{staticClass:"batchHeader font-16"},[t._v("查看批号")]),1===t.entryList.length?a("div",{staticClass:"batchContent overflow-auto"},[a("van-checkbox-group",{staticClass:"pb-100",model:{value:t.batchResult,callback:function(e){t.batchResult=e},expression:"batchResult"}},[a("van-cell-group",t._l(t.batchList,(function(e,s){return a("van-cell",{key:s,attrs:{clickable:""}},[a("van-checkbox",{attrs:{name:e.lotNo}},[a("div",{staticClass:"common-list-content"},[a("div",{staticClass:"common-list-two"},[a("div",{staticClass:"flex-3"},[a("span",{staticClass:"title"},[t._v("批号:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.lotNo))])]),a("div",{staticClass:"flex-2"},[a("span",{staticClass:"title"},[t._v("效期:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.invalidDate.slice(0,10)))])])]),a("div",{staticClass:"common-list-two"},[a("div",{staticClass:"flex-3"},[a("span",{staticClass:"title"},[t._v("库存:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.goodsQuantity))])]),a("div",{staticClass:"flex-2"},[a("span",{staticClass:"title"},[t._v("两票制库存:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.invoiceGoodsNum))])])]),a("div",{staticClass:"common-list-two"},[a("div",{staticClass:"flex-3"},[a("span",{staticClass:"title"},[t._v("保管帐:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.storageName))])]),a("div",{staticClass:"flex-2"},[a("span",{staticClass:"title"},[t._v("状态:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.goodsStatus))])])])])])],1)})),1)],1),1===t.querySelfFlag||t.managementOpflagForSaler||t.managementOpflagForPurchaser?a("div",{staticClass:"commonButton-footer d-flex justify-center"},[a("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:t.batchCancel}},[t._v("取消")]),a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info",round:""},on:{click:t.batchSure}},[t._v("确定")])],1):t._e()],1):t._e(),t.entryList.length>1?a("div",{staticClass:"batchContent overflow-auto"},[a("van-tabs",{attrs:{type:"card","before-change":t.beforeChange,color:"#2271f5"},on:{change:t.entryChange},model:{value:t.entryIdVal,callback:function(e){t.entryIdVal=e},expression:"entryIdVal"}},t._l(t.entryList,(function(e){return a("van-tab",{key:e.entryId,attrs:{title:"核算单元："+e.entryId}},[a("van-checkbox-group",{staticClass:"pb-100",model:{value:t.batchResult,callback:function(e){t.batchResult=e},expression:"batchResult"}},[a("van-cell-group",t._l(t.batchObj[e.entryId],(function(e,s){return a("van-cell",{key:s,attrs:{clickable:""}},[a("van-checkbox",{attrs:{name:e.lotNo}},[a("div",{staticClass:"common-list-content"},[a("div",{staticClass:"common-list-two"},[a("div",{staticClass:"flex-3"},[a("span",{staticClass:"title"},[t._v("批号:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.lotNo))])]),a("div",{staticClass:"flex-2"},[a("span",{staticClass:"title"},[t._v("效期:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.invalidDate.slice(0,10)))])])]),a("div",{staticClass:"common-list-two"},[a("div",{staticClass:"flex-3"},[a("span",{staticClass:"title"},[t._v("库存:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.goodsQuantity))])]),a("div",{staticClass:"flex-2"},[a("span",{staticClass:"title"},[t._v("两票制库存:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.invoiceGoodsNum))])])]),a("div",{staticClass:"common-list-two"},[a("div",{staticClass:"flex-3"},[a("span",{staticClass:"title"},[t._v("保管帐:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.storageName))])]),a("div",{staticClass:"flex-2"},[a("span",{staticClass:"title"},[t._v("状态:")]),a("span",{staticClass:"value fontWeight"},[t._v(t._s(e.goodsStatus))])])])])])],1)})),1)],1)],1)})),1),1===t.querySelfFlag||t.managementOpflagForSaler||t.managementOpflagForPurchaser?a("div",{staticClass:"commonButton-footer d-flex justify-center"},[a("van-button",{attrs:{size:"small",round:"",plain:""},on:{click:t.batchCancel}},[t._v("取消")]),a("van-button",{attrs:{size:"small",color:"#2271F5",type:"info",round:""},on:{click:t.batchSure}},[t._v("确定")])],1):t._e()],1):t._e()])],1)},K=[],Z=(a("a15b"),a("d81d"),function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.statusNearRemark="",t.batchShow=!1,t.batchResult=[],t.entryList=[],t.batchObj={},t.batchList=[],t.entryIdVal="",t}return Object(o["a"])(a,[{key:"batchClick",value:function(){this.batchShow=!0}},{key:"batchCancel",value:function(){this.batchShow=!1}},{key:"batchSure",value:function(){if(this.statusNearRemark="",this.batchResult.length){for(var t=[],e=0;e<this.batchResult.length;e++){var a=this.batchResult[e];t.push(a)}this.statusNearRemark="请开批号【".concat(t.join(","),"】"),this.batchShow=!1}else this.$toast.fail("请选择要备注的批号信息")}},{key:"statusNearActive",value:function(){var t=this;this.$dialog.confirm({title:"提示",message:"是否确认激活？",confirmButtonColor:"#2271f5",beforeClose:function(e,a){"confirm"===e?(t.activeSubmit(),a()):a()}})}},{key:"activeSubmit",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={conDtlId:this.detailObj.conDtlId,conType:this.detailObj.conType,taskId:this.detailObj.taskId,forceFlag:0,message:this.statusNearRemark},t.next=3,Object(x["i"])(e);case 3:a=t.sent,a.success?(this.$toast.success("激活成功"),this.$emit("submitSuccess")):this.$toast.fail("激活失败");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_getInventoryByLot",value:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(x["c"])({entryId:this.detailObj.entryId,goodsId:this.detailObj.goodsId});case 2:e=t.sent,"200"===e.code&&(this.entryList=[],this.batchObj={},e.data.map((function(t){a.batchObj[t.entryId]||(a.batchObj[t.entryId]=[]),a.batchObj[t.entryId].push(t),a.entryList.some((function(e){return e.entryId===t.entryId}))||a.entryList.push({entryId:t.entryId,entryName:t.entryName})})),this.batchList=e.data);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"entryChange",value:function(t){}},{key:"beforeChange",value:function(){var t=this;return!(this.batchResult.length>0)||this.$dialog.confirm({title:"提示",message:"批号仅能选取单一核算单元数据，切换会导致已选择批号清空，是否继续？",confirmButtonColor:"#2271f5",beforeClose:function(e,a){return"confirm"===e?(a(),t.batchResult=[],!0):(a(),!1)}})}},{key:"mounted",value:function(){this._getInventoryByLot()}}]),a}(u["d"]));Object(l["a"])([Object(u["c"])()],Z.prototype,"detailObj",void 0),Object(l["a"])([Object(u["c"])()],Z.prototype,"role",void 0),Object(l["a"])([Object(u["c"])()],Z.prototype,"querySelfFlag",void 0),Object(l["a"])([Object(u["c"])()],Z.prototype,"managementOpflagForSaler",void 0),Object(l["a"])([Object(u["c"])()],Z.prototype,"managementOpflagForPurchaser",void 0),Z=Object(l["a"])([Object(u["a"])({})],Z);var tt=Z,et=tt,at=(a("cee7"),Object(h["a"])(et,U,K,!1,null,"317b9aea",null)),st=at.exports,it=Object(L["a"])("app"),nt=function(t){Object(r["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.querySelfFlag=1,t.detailObj={},t.managementOpflagForSaler=!1,t.managementOpflagForPurchaser=!1,t}return Object(o["a"])(a,[{key:"_queryOutOfStockDetail",value:function(t){var e=this;Object(x["g"])(t).then((function(t){e.detailObj=t.data,2!==e.detailObj.conType&&3!==e.detailObj.conType&&5!==e.detailObj.conType||(e.$set(e.detailObj,"operatingCustomerStatus",e.queryParams.operatingCustomerStatus),e.$set(e.detailObj,"ddlId",e.queryParams.ddlId),e.$set(e.detailObj,"ddlName",e.queryParams.ddlName))}))}},{key:"submitSuccess",value:function(){this.SET_HADDONEONDETAIL(!0),this._queryOutOfStockDetail({taskId:this.queryParams.taskId||this.$route.query.taskId})}},{key:"mounted",value:function(){var t=localStorage.getItem("permissions")?JSON.parse(localStorage.getItem("permissions")||""):[];this.managementOpflagForSaler=t.some((function(t){return"ManagementPermissionsAllowOperationsForSaler"===t})),this.managementOpflagForPurchaser=t.some((function(t){return"ManagementPermissionsAllowOperationsForPurchaser"===t})),this.querySelfFlag=this.queryParams.querySelfFlag||1,this._queryOutOfStockDetail({taskId:this.$route.query.taskId||this.queryParams.taskId})}}]),a}(u["d"]);Object(l["a"])([it.Getter],nt.prototype,"queryParams",void 0),Object(l["a"])([it.Mutation],nt.prototype,"SET_HADDONEONDETAIL",void 0),nt=Object(l["a"])([Object(u["a"])({components:{LockDetail:S,shortageTicket:q,priceLimitSale:Q,restrivted:J,statusNear:st}})],nt);var ot=nt,rt=ot,ct=Object(h["a"])(rt,s,i,!1,null,"54171bd1",null);e["default"]=ct.exports},6435:function(t,e,a){"use strict";a.d(e,"h",(function(){return o})),a.d(e,"g",(function(){return r})),a.d(e,"f",(function(){return c})),a.d(e,"a",(function(){return l})),a.d(e,"k",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"i",(function(){return b})),a.d(e,"j",(function(){return p})),a.d(e,"c",(function(){return m})),a.d(e,"e",(function(){return v})),a.d(e,"d",(function(){return O}));var s=a("1da1"),i=(a("96cf"),a("b32d")),n=a("90ae"),o=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/salesManage/getOutOfStockList",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].get(n["d"],"/api/salesManage/getOutOfStockDetail",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/salesManage/outOfStockSubmit",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/salesManage/batchUnlockOrder",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/salesManage/submitLimitSaleAdvice",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].get(n["d"],"/api/salesManage/checkTicket",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/salesManage/salerActive",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].post(n["d"],"/api/salesManage/secondActive",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].get(n["d"],"/api/salesManage/getInventoryByLot",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].get(n["d"],"/api/salesManage/getPendingNum",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].get(n["d"],"/api/salesManage/getOperatingCustomerStatus",e,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},cee7:function(t,e,a){"use strict";a("3d4c")}}]);