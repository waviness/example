(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c378cc50"],{"273e":function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l}));var s=a("1da1"),i=(a("96cf"),a("b32d")),n=a("90ae"),c=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(n["d"],"/api/WxHighvalue/getToSalerListWx",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(n["d"],"/api/WxHighvalue/getToSalerListSupplyerWx",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get(n["d"],"/api/WxHighvalue/getToSalerDetail",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post(n["d"],"/api/WxHighvalue/feedback",t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"5f75":function(e,t,a){"use strict";a("92fa")},"65b7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"full-HW font-14"},[a("div",{staticClass:"title-div font-12"},[e._v("高值货品"+e._s(1==e.statusDtl?"未处理":"已处理")+"信息")]),a("div",{staticClass:"white-bg mb-2 px-4"},[a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("核算单元")]),a("span",{staticClass:"color-text-div"},[e._v(e._s(e.info.entryId)+"/"+e._s(e.info.entryName))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("客户")]),a("span",[e._v(e._s(e.info.customerId)+"/"+e._s(e.info.customerName))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("分支机构")]),a("span",[e._v(e._s(e.info.contactId?e.info.contactId+"/"+e.info.contactName:"-"))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("运输地址")]),a("span",[e._v(e._s(e.info.address))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("品种")]),a("span",[e._v(e._s(e.info.goodsId)+"/"+e._s(e.info.goodsName))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("规格")]),a("span",[e._v(e._s(e.info.goodsType))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("产地")]),a("span",[e._v(e._s(e.info.prodarea))])])]),a("div",{staticClass:"white-bg mb-2 px-4"},[a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom-2"},[a("div",{staticClass:"d-flex align-center justify-space-between pr-2",staticStyle:{width:"50%"}},[a("span",{staticClass:"color-gray-5"},[e._v("销售细单ID")]),a("span",[e._v(e._s(e.info.sadtlId))])]),a("div",{staticClass:"d-flex align-center justify-space-between pl-2",staticStyle:{width:"50%"}},[a("span",{staticClass:"color-gray-5"},[e._v("批号ID")]),a("span",[e._v(e._s(e.info.lotId))])])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom-2"},[a("div",{staticClass:"d-flex align-center justify-space-between pr-2",staticStyle:{width:"50%"}},[a("span",{staticClass:"color-gray-5"},[e._v("批号")]),a("span",[e._v(e._s(e.info.lotNo))])]),a("div",{staticClass:"d-flex align-center justify-space-between pl-2",staticStyle:{width:"50%"}},[a("span",{staticClass:"color-gray-5"},[e._v("效期")]),a("span",[e._v(e._s(e.info.invalidDate?e.info.invalidDate.slice(0,10):"-"))])])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom-2"},[a("div",{staticClass:"d-flex align-center justify-space-between pr-2",staticStyle:{width:"50%"}},[a("span",{staticClass:"color-gray-5"},[e._v("原单销售数量")]),a("span",[e._v(e._s(e.info.goodsQty))])]),a("div",{staticClass:"d-flex align-center justify-space-between pl-2",staticStyle:{width:"50%"}},[a("span",{staticClass:"color-gray-5"},[e._v("金额")]),a("span",[e._v(e._s(e.info.highPrice))])])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("业务员")]),a("span",{staticClass:"color-text-div"},[e._v(e._s(e.info.salerId)+"/"+e._s(e.info.salerName))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("采购员")]),a("span",{staticClass:"color-text-div"},[e._v(e._s(e.info.supplyerId)+"/"+e._s(e.info.supplyerName))])])]),a("div",{staticClass:"white-bg mb-2 px-4"},[a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("退货政策")]),a("span",{staticClass:"fontWeight-500"},[e._v(e._s(e.info.returnsPolicy?e.info.returnsPolicy:"-"))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("上次销售时间")]),a("span",[e._v(e._s(e.info.lastSaleDate?e.info.lastSaleDate:"-"))])])]),0==e.statusDtl&&e.info.feedbackType?a("div",{staticClass:"white-bg mb-2 px-4"},[a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-main-2"},[e._v("上次反馈时间")]),a("span",[e._v(e._s(e.info.lastFeedbackTime?e.info.lastFeedbackTime:"-"))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-main-2"},[e._v("剩余库存")]),a("span",[e._v(e._s(e.info.customerQty?e.info.customerQty:0))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-main-2"},[e._v("反馈处理意见")]),a("span",{staticClass:"color-text-div"},[e._v(" "+e._s(1==e.info.feedbackType?"退货":2==e.info.feedbackType?"继续销售":3==e.info.feedbackType?"其他":"-")+" ")])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-main-2"},[e._v("备注")]),a("span",[e._v(e._s(e.info.feedbackMemo?e.info.feedbackMemo:"无"))])])]):e._e(),1==e.statusDtl?a("div",{staticClass:"white-bg mb-2 px-4"},[a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("剩余库存")]),a("span",[e._v(e._s(e.info.customerQty?e.info.customerQty:0))])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("反馈处理意见")]),a("span",{staticClass:"color-text-div"},[e._v(" "+e._s(1==e.info.feedbackType?"退货":2==e.info.feedbackType?"继续销售":3==e.info.feedbackType?"其他":"-")+" ")])]),a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("备注")]),a("span",[e._v(e._s(e.info.feedbackMemo?e.info.feedbackMemo:"无"))])])]):e._e(),2==e.statusDtl?a("div",{staticClass:"white-bg mb-2 px-4"},[e._m(0),e._m(1),e._m(2)]):e._e(),0==e.statusDtl?a("div",{staticClass:"white-bg mb-4 px-4"},[a("van-field",{attrs:{label:"剩余库存",placeholder:"请输入剩余库存","input-align":"right",type:"number"},model:{value:e.params.customerQty,callback:function(t){e.$set(e.params,"customerQty",t)},expression:"params.customerQty"}}),a("van-field",{attrs:{label:"反馈处理意见",placeholder:"点击选择意见","input-align":"right"},on:{click:function(t){e.showPicker=!0}},model:{value:e.params.feedbackTypeName,callback:function(t){e.$set(e.params,"feedbackTypeName",t)},expression:"params.feedbackTypeName"}}),a("van-field",{attrs:{label:"备注",placeholder:"请输入备注（选填）","input-align":"right"},model:{value:e.params.feedbackMemo,callback:function(t){e.$set(e.params,"feedbackMemo",t)},expression:"params.feedbackMemo"}})],1):e._e(),0==e.statusDtl?a("div",{staticClass:"d-flex align-center justify-center pb-4"},[a("van-button",{directives:[{name:"show",rawName:"v-show",value:e.info.feedbackType,expression:"info.feedbackType"}],staticClass:"mr-4 button-1",attrs:{round:"",type:"info",size:"normal",plain:""},on:{click:function(t){return e.handleClick(e.info,1)}}},[e._v(" 按上次反馈 ")]),a("van-button",{staticClass:"mr-4 button-1",attrs:{round:"",type:"info",size:"normal",plain:""},on:{click:function(t){return e.handleClick(e.info,2)}}},[e._v(" 已销售完 ")]),a("van-button",{staticClass:"button-2",attrs:{round:"",type:"info",size:"normal"},on:{click:function(t){return e.handleClick(null)}}},[e._v("提交")])],1):e._e(),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirm}})],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("剩余库存")]),a("span",[e._v("-")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("反馈处理意见")]),a("span",{staticClass:"color-text-div"},[e._v(" - ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-center justify-space-between py-3 div-border-bottom"},[a("span",{staticClass:"color-gray-5"},[e._v("备注")]),a("span",[e._v("-")])])}],n=a("d4ec"),c=a("bee2"),r=a("262e"),o=a("2caf"),l=a("9ab4"),d=a("1b40"),f=a("273e"),p=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.info={},e.chgtsId=-1,e.statusDtl=-1,e.params={customerQty:"",feedbackType:"",feedbackTypeName:"",feedbackMemo:""},e.showPicker=!1,e.columns=["退货","继续销售","其他"],e}return Object(c["a"])(a,[{key:"init",value:function(e){this.chgtsId=e.chgtsId,this.statusDtl=e.statusDtl,this._getToSalerDetail()}},{key:"_getToSalerDetail",value:function(){var e=this;Object(f["b"])({chgtsId:this.chgtsId}).then((function(t){200==t.code&&t.data&&(e.info=t.data)}))}},{key:"onConfirm",value:function(e,t){this.params.feedbackTypeName=e,this.params.feedbackType=t+1,this.showPicker=!1}},{key:"handleClick",value:function(e,t){var a=this,s={};if(e){if(s.chgtsId=e.chgtsId,1===t&&(s.customerQty=e.customerQty,s.feedbackType=e.feedbackType,s.feedbackMemo=e.feedbackMemo),2===t)return s.customerQty=0,s.feedbackType=3,s.feedbackMemo="已销售完",void this.$dialog.confirm({title:"提示",message:"确认标记为已销售完吗？",confirmButtonColor:"#2271f5",beforeClose:function(e,t){"confirm"===e?(a._feedback(s),t()):t()}})}else{if(!this.params.feedbackType)return void this.$toast.fail("请选择反馈处理意见");s.chgtsId=this.info.chgtsId,s.customerQty=this.params.customerQty,s.feedbackType=this.params.feedbackType,s.feedbackMemo=this.params.feedbackMemo}this._feedback(s)}},{key:"_feedback",value:function(e){var t=this;Object(f["a"])(e).then((function(e){200==e.code?(t.$toast.success("提交反馈成功"),t.statusDtl=1,t._getToSalerDetail(),sessionStorage.setItem("hightChange","1")):t.$toast.fail(e.msg)}))}},{key:"mounted",value:function(){this.$route.query&&this.init(this.$route.query)}}]),a}(d["d"]);p=Object(l["a"])([Object(d["a"])({components:{}})],p);var u=p,v=u,b=(a("5f75"),a("2877")),y=Object(b["a"])(v,s,i,!1,null,"e5d3e9d2",null);t["default"]=y.exports},"92fa":function(e,t,a){}}]);